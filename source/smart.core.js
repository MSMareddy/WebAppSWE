
/* Smart HTML Elements v2.4.0 (2019-April) 
Copyright (c) 2011-2019 jQWidgets. 
License: https://htmlelements.com/license/ */

(function(){"use strict";function t(t,a){const n=a.properties;a._properties=[];const o=function(n,r){const l=Object.keys(n);for(let s=0;s<l.length;s++){const i=l[s],d=n[i];if(a._properties[r+i]=d,Array.isArray(d)){a._properties[r+i]=new ObservableArray(d,function(a){const n=i+"."+a.path,o=a.newValue,r=document.querySelector(t);if(r){const t=n.split(".");let a=r;for(let n=0;n<t.length;n++){const i=t[n];a=a[i]}a=o}});continue}(Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get(){return a._properties[r+i]},set(t){a._properties[r+i]=t}}),"DataAdapter"!==d.constructor.name)&&"object"==typeof d&&d&&0<Object.keys(d).length&&o(d,r+i+".")}};o(n,""),Object.defineProperty(a,"properties",{configurable:!1,enumerable:!0,get(){return n}});const i=document.querySelector(t);if(i&&i.isReady)for(let t in n)i[t]=n[t]}var a=Math.floor,n=Math.asin,i=Math.abs,o=Math.sqrt,r=Math.pow,l=Math.sin,s=Math.cos,m=Math.PI,d=Math.max;const c="3.0.0",p=[];let u="Smart";if(window[u]&&window[u].Version){if(window[u].Version===c)return;if(window[u].Version!==c)u+=c;else for(let t=2;window[u];)u+=t.toString(),t++}class LocalizationModule{static get moduleName(){return"LocalizationModule"}static get properties(){return{messages:{value:{en:{}},type:"object",inherit:!0,reflectToAttribute:!1},locale:{value:"en",type:"string",reflectToAttribute:!1},localizeFormatFunction:{value:void 0,type:"function",reflectToAttribute:!1}}}addMessages(t,a){const n=this;Object.assign(n.messages[t],a)}localize(t,a){const n=this;if(!n.messages||!n.messages[n.locale])return;let i=n.messages[n.locale][t];if(""===i)return"";if(i){const t=i;for(let t in a){let n=a[t];i=i.replace(new RegExp("{{"+t+"}}","g"),n)}return n.localizeFormatFunction&&n.localizeFormatFunction(t,i,a),i}}}class ErrorModule{static get moduleName(){return"ErrorModule"}static get properties(){return{rethrowError:{value:!0,type:"boolean",reflectToAttribute:!1},debugMode:{value:!0,type:"boolean",reflectToAttribute:!1}}}log(t){const a=this;a._logger("log",t)}warn(t){const a=this;a._logger("warn",t)}error(t){const a=this;a._logger("error",t)}_logger(t,a){const n=this;if(n.debugMode){const n=a instanceof Error?a.message:a.toString();console[t](n)}if(n.rethrowError&&"error"===t)throw a}}class BindingModule{static get moduleName(){return"BindingModule"}getBindings(t){const a=this;let n=0,i={},o=(t=>{if(t instanceof HTMLElement)return a.parseAttributes(t);else{let n=a.parseProperty(t.data?t.data.trim():null,"textContent",t);if(n)return a.ownerElement&&t.parentNode===a.ownerElement.$.content&&(n.value=""===a.ownerElement.$.html?void 0:a.ownerElement.$.html,a.ownerElement.innerHTML=""),{textContent:n}}})(t);o&&(i.data=o),t.getAttribute&&(i.nodeId=t.getAttribute("smart-id")),i.node=t,t.firstChild&&(i.children={});for(let o=t.firstChild;o;o=o.nextSibling)i.children[n++]=a.getBindings(o);return i}_addRemovePropertyBinding(t,a,n,i){if(!t||!a||!n)return;const o=this,r=o.ownerElement.bindings,l=n.getAttribute("smart-id"),s=0<=t.indexOf("{{");t=t.replace("{{","").replace("}}","").replace("[[","").replace("]]","");let d=!1;0<=t.indexOf("!")&&(t=t.replace("!",""),d=!0);const c=o.ownerElement._properties[t],m={name:t,reflectToAttribute:c.reflectToAttribute,twoWay:s,type:c.type,not:d},p=function(t){for(let r in t){const s=t[r];if(s.nodeId===l){s.data||(s.data={}),i?(s.data[a]=null,delete s.data[a]):s.data[a]=m;break}if(s.children)p(s.children);else if(s.node&&s.node.children&&s.node===n.parentElement){const t=s.node;if(t.firstChild)s.children={};else continue;let a=0;for(let n=t.firstChild;n;n=n.nextSibling)s.children[a++]=o.getBindings(n);p(s.children)}}};p(r.children),i?delete o.ownerElement.boundProperties[t]:o.ownerElement.boundProperties[t]=!0,o.updateBoundNodes(t)}addPropertyBinding(t,a,n){const i=this;i._addRemovePropertyBinding(t,a,n)}removePropertyBinding(t,a,n){const i=this;i._addRemovePropertyBinding(t,a,n,!0)}parseAttributes(t){const a=this;let n;for(let o=0;o<t.attributes.length;o++){const i=t.attributes[o],r=i.name,l=i.value;BindingModule.cache["toCamelCase"+r]||(BindingModule.cache["toCamelCase"+r]=Utilities.Core.toCamelCase(r));const s=BindingModule.cache["toCamelCase"+r];if(0<=r.indexOf("(")){let i=r.substring(1,r.length-1);if(a.ownerElement&&!a.ownerElement.dataContext){a.ownerElement.templateListeners[t.getAttribute("smart-id")+"."+i]=l,t.removeAttribute(r);continue}else{n||(n={});const t=l.substring(0,l.indexOf("("));n[s]={isEvent:!0,name:i,value:t};continue}}let d=a.parseProperty(l,r,t);d&&(n||(n={}),n[s]=d)}return n}parseProperty(t,a){if(!t||!t.length)return;const n=this;let i=t.length,o=0,r=0,l=0,s=!0,d;for(;r<i;){o=t.indexOf("{{",r);let a=t.indexOf("[[",r),n="}}";if(0<=a&&(0>o||a<o)&&(o=a,s=!1,n="]]"),l=0>o?-1:t.indexOf(n,o+2),0>l)return;d=d||{};let i=t.slice(o+2,l).trim();d.name=i,r=l+2}const c=d.name,m=n.ownerElement?n.ownerElement._properties[c]:null;if(d.twoWay=s,d.ready=!1,n.ownerElement&&(0<=c.indexOf("::")?n.ownerElement.boundProperties[c.substring(0,c.indexOf("::"))]=!0:n.ownerElement.boundProperties[c]=!0),m)d.type=m.type,d.reflectToAttribute=m.reflectToAttribute;else{d.type=0<=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(a)?"boolean":"string",d.reflectToAttribute=!0}return d}updateTextNodes(){const t=this;t.updateTextNode(t.ownerElement.shadowRoot||t.ownerElement,t.ownerElement.bindings,t.ownerElement)}updateTextNode(t,a,n){const i=this;if(!a)return;let o=0;for(let r=t.firstChild;r&&!!a.children;r=r.nextSibling)i.updateTextNode(r,a.children[o++],n);if(a&&a.data)for(let t in a.data){const i=a.data[t],o=i.name;"textContent"==t&&i.twoWay&&!i.updating&&void 0!==i.value&&(n[o]=i.value)}}updateBoundProperty(t,a){if(a.updating)return;const n=this,i=n.ownerElement;a.updating=!0,i[t]=a.value,a.updating=!1}updateBoundNodes(t){const a=this;if(a.updateBoundNode(a.ownerElement.shadowRoot||a.ownerElement,a.ownerElement.bindings,a.ownerElement,t),0<a.ownerElement.detachedChildren.length)for(let n=0;n<a.ownerElement.detachedChildren.length;n++){const i=a.ownerElement.detachedChildren[n],o=i.getAttribute("smart-id"),r=function(t){if(t.nodeId===o)return t;for(let a in t.children){const n=t.children[a],i=n.getAttribute?n.getAttribute("smart-id"):"";if(i===o)return t;if(n.children){const t=r(n);if(t)return t}}return null},l=r(a.ownerElement.bindings);l&&a.updateBoundNode(i,l,a.ownerElement,t,!0)}}updateBoundNode(t,a,n,i,o){const r=this;if(!a)return;let l=0;if(!o){for(let o=t.firstChild;o&&!!a.children;o=o.nextSibling)if(o.getAttribute){const t=o.getAttribute("smart-id"),s=function(){for(let n in a.children)if(a.children[n].nodeId===t)return a.children[n]}();r.updateBoundNode(o,s,n,i),l++}else r.updateBoundNode(o,a.children[l++],n,i);}else if(o&&!a.data)for(let s=t.firstChild;s&&!!a.children;s=s.nextSibling)if(s.getAttribute){const t=s.getAttribute("smart-id"),o=function(){for(let n in a.children)if(a.children[n].nodeId===t)return a.children[n]}();r.updateBoundNode(s,o,n,i),l++}else r.updateBoundNode(s,a.children[l++],n,i,o);if(a&&a.data)for(let o in a.data){const l=a.data[o];let s=l.name;if(!l.updating&&(0<=s.indexOf("::")&&(s=s.substring(0,s.indexOf("::"))),void 0===i||i===s)){if(0<=s.indexOf("(")){let t=s.substring(s.indexOf("("));const a=s.substring(0,s.indexOf("("));if(t=t.substring(1,t.length-1),t=t.replace(/ /ig,""),t=t.split(","),0<t.length&&""!==t[0]){let o=[];for(let a=0;a<t.length;a++)o.push(n[t[a]]);l.value=n[a].apply(n,o)}else l.value=n[a]();l.type=typeof l.value}else l.value=n[s];if("innerHTML"===s?t[o].toString().trim()!==n[s].toString().trim()&&(l.ready?t[o]=l.value.toString().trim():n._properties[s].defaultValue!==l.value&&(t[o]=l.value.toString().trim())):l.not?t[o]=!l.value:t[o]=l.value,t.$&&t.$.isNativeElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const a=BindingModule.cache["toDash"+o],n=t.$.getAttributeValue(a,l.type);l.reflectToAttribute&&(n!==l.value||!l.ready)&&t.$.setAttributeValue(a,l.value,l.type),l.reflectToAttribute||t.$.setAttributeValue(a,null,l.type)}if(!l.ready){if(t.$&&t.$.isCustomElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const a=BindingModule.cache["toDash"+o];t._properties||(t._beforeCreatedProperties=t._properties=t.propertyByAttributeName=[]),t._properties[o]||(t._properties[o]={attributeName:a},t._beforeCreatedProperties[o]=t._properties[o],t.propertyByAttributeName[a]=t._properties[o]);const n=t._properties[o];n.isUpdating=!0,l.reflectToAttribute&&(l.not?t.$.setAttributeValue(n.attributeName,!l.value,l.type):t.$.setAttributeValue(n.attributeName,l.value,l.type)),l.reflectToAttribute||t.$.setAttributeValue(n.attributeName,null,l.type),n.isUpdating=!1}if(l.twoWay){const a=function(a){if(l.value=a,t.$&&t.$.isNativeElement){BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const a=BindingModule.cache["toDash"+o],n=t.$.getAttributeValue(a,l.type);l.reflectToAttribute&&n!==l.value&&t.$.setAttributeValue(a,l.value,l.type),l.reflectToAttribute||t.$.setAttributeValue(a,null,l.type)}};if(0<=l.name.indexOf("::")){const n=l.name.indexOf("::"),i=l.name.substring(n+2);r.ownerElement["$"+t.getAttribute("smart-id")].listen(i,function(){a(t[o]);const n=l.name.substring(0,l.name.indexOf("::"));r.updateBoundProperty(n,l)})}if(t.$&&t.$.isCustomElement){t._properties[o]&&(t._properties[o].notify=!0),BindingModule.cache["toDash"+o]||(BindingModule.cache["toDash"+o]=Utilities.Core.toDash(o));const n=BindingModule.cache["toDash"+o];r.ownerElement["$"+t.getAttribute("smart-id")].listen(n+"-changed",function(t){let n=t.detail;a(n.value);const i=r.ownerElement.context;t.context!==document&&(r.ownerElement.context=r.ownerElement),r.updateBoundProperty(l.name,l),r.ownerElement.context=i})}}}l.ready=!0}}}static clearCache(){const t=this;t.cache={}}}class Types{static isBoolean(t){return"boolean"==typeof t}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static isArray(t){return Array.isArray(t)}static isObject(t){const a=this;return t&&("object"==typeof t||a.isFunction(t))||!1}static isDate(t){return t instanceof Date}static isString(t){return"string"==typeof t}static isNumber(t){return"number"==typeof t}static getType(t){const a=this,n=["Boolean","Number","String","Function","Array","Date","Object"].find(n=>{if(a["is"+n](t))return n});return n?n.toLowerCase():void 0}}class Ripple{static animate(t,a,n,i){const o=t;if(!o||!1==o instanceof HTMLElement)return;if(0===o.getElementsByClassName("smart-ripple").length){const t=document.createElement("span");t.classList.add("smart-ripple");let a=!0,n=null;if(window[u].EnableShadowDOM&&o.enableShadowDOM){for(let t=0;t<o.shadowRoot.host.shadowRoot.children.length;t++)"link"!==o.shadowRoot.host.shadowRoot.children[t].tagName.toLowerCase()&&(n=o.shadowRoot.host.shadowRoot.children[t]);o.shadowRoot.host.shadowRoot.querySelector(".smart-ripple")&&(a=!1)}else n=o.firstElementChild;a&&(n&&!n.noRipple&&0<n.offsetHeight?n.appendChild(t):o.appendChild(t))}let r=null;if(r=window[u].EnableShadowDOM&&o.enableShadowDOM?o.shadowRoot.host.shadowRoot.querySelector(".smart-ripple"):o.getElementsByClassName("smart-ripple")[0],!!r){r.innerHTML="",r.classList.remove("smart-animate"),r.style.height=r.style.width=d(o.offsetHeight,o.offsetWidth)+"px";const t=window.getComputedStyle(r.parentElement),l=parseInt(t.borderLeftWidth)||0,s=parseInt(t.borderTopWidth)||0,c=o.getBoundingClientRect(),m=a-(c.left+window.pageXOffset)-r.offsetWidth/2-l,p=n-(c.top+window.pageYOffset)-r.offsetHeight/2-s;r.style.left=m+"px",r.style.top=p+"px",r.classList.add("smart-animate"),r.addEventListener("animationend",function t(){r.parentElement&&r.parentElement.removeChild(r),i&&i(),r.removeEventListener("animationend",t),r.removeEventListener("animationcancel",t)}),r.addEventListener("animationcancel",function t(){r.parentElement&&r.parentElement.removeChild(r),i&&i(),r.removeEventListener("animationcancel",t),r.removeEventListener("animationend",t)})}}}class Easings{static easeInQuad(a,n,i,o){return i*(a/=o)*a+n}static easeOutQuad(a,n,i,o){return-i*(a/=o)*(a-2)+n}static easeInOutQuad(a,n,i,o){return 1>(a/=o/2)?i/2*a*a+n:-i/2*(--a*(a-2)-1)+n}static easeInCubic(a,n,i,o){return i*(a/=o)*a*a+n}static easeOutCubic(a,n,i,o){return i*((a=a/o-1)*a*a+1)+n}static easeInOutCubic(a,n,i,o){return 1>(a/=o/2)?i/2*a*a*a+n:i/2*((a-=2)*a*a+2)+n}static easeInQuart(a,n,i,o){return i*(a/=o)*a*a*a+n}static easeOutQuart(a,n,i,o){return-i*((a=a/o-1)*a*a*a-1)+n}static easeInOutQuart(a,n,i,o){return 1>(a/=o/2)?i/2*a*a*a*a+n:-i/2*((a-=2)*a*a*a-2)+n}static easeInQuint(a,n,i,o){return i*(a/=o)*a*a*a*a+n}static easeOutQuint(a,n,i,o){return i*((a=a/o-1)*a*a*a*a+1)+n}static easeInOutQuint(a,n,i,o){return 1>(a/=o/2)?i/2*a*a*a*a*a+n:i/2*((a-=2)*a*a*a*a+2)+n}static easeInSine(a,t,n,i){return-n*s(a/i*(m/2))+n+t}static easeOutSine(a,t,n,i){return n*l(a/i*(m/2))+t}static easeInOutSine(a,t,n,i){return-n/2*(s(m*a/i)-1)+t}static easeInExpo(a,t,n,i){return 0===a?t:n*r(2,10*(a/i-1))+t}static easeOutExpo(a,t,n,i){return a===i?t+n:n*(-r(2,-10*a/i)+1)+t}static easeInOutExpo(a,n,i,o){return 0===a?n:a===o?n+i:1>(a/=o/2)?i/2*r(2,10*(a-1))+n:i/2*(-r(2,-10*--a)+2)+n}static easeInCirc(a,n,i,r){return-i*(o(1-(a/=r)*a)-1)+n}static easeOutCirc(a,n,i,r){return i*o(1-(a=a/r-1)*a)+n}static easeInOutCirc(a,n,i,r){return 1>(a/=r/2)?-i/2*(o(1-a*a)-1)+n:i/2*(o(1-(a-=2)*a)+1)+n}static easeInElastic(o,u,g,c){let d=1.70158,h=0,f=g;return 0===o?u:1===(o/=c)?u+g:(h||(h=.3*c),f<i(g)?(f=g,d=h/4):d=h/(2*m)*n(g/f),-(f*r(2,10*(o-=1))*l((o*c-d)*(2*m)/h))+u)}static easeOutElastic(o,u,g,c){let d=1.70158,h=0,f=g;return 0===o?u:1===(o/=c)?u+g:(h||(h=.3*c),f<i(g)?(f=g,d=h/4):d=h/(2*m)*n(g/f),f*r(2,-10*o)*l((o*c-d)*(2*m)/h)+g+u)}static easeInOutElastic(o,u,g,c){let d=1.70158,h=0,f=g;return 0===o?u:2==(o/=c/2)?u+g:(h||(h=c*(1.5*.3)),f<i(g)?(f=g,d=h/4):d=h/(2*m)*n(g/f),1>o?-.5*(f*r(2,10*(o-=1))*l((o*c-d)*(2*m)/h))+u:.5*(f*r(2,-10*(o-=1))*l((o*c-d)*(2*m)/h))+g+u)}static easeInBack(a,n,i,o,r){return void 0===r&&(r=1.70158),i*(a/=o)*a*((r+1)*a-r)+n}static easeOutBack(a,n,i,o,r){return void 0===r&&(r=1.70158),i*((a=a/o-1)*a*((r+1)*a+r)+1)+n}static easeInOutBack(a,n,i,o,r){return void 0===r&&(r=1.70158),1>(a/=o/2)?i/2*(a*a*(((r*=1.525)+1)*a-r))+n:i/2*((a-=2)*a*(((r*=1.525)+1)*a+r)+2)+n}static easeInBounce(a,t,n,i){return n-this.easeOutBounce(i-a,0,n,i)+t}static easeOutBounce(a,n,i,o){return(a/=o)<1/2.75?i*(7.5625*a*a)+n:a<2/2.75?i*(7.5625*(a-=1.5/2.75)*a+.75)+n:a<2.5/2.75?i*(7.5625*(a-=2.25/2.75)*a+.9375)+n:i*(7.5625*(a-=2.625/2.75)*a+.984375)+n}static easeInOutBounce(a,t,n,i){return a<i/2?.5*this.easeInBounce(2*a,0,n,i)+t:.5*this.easeOutBounce(2*a-i,0,n,i)+.5*n+t}}class Core{static get isMobile(){const t=/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/.test(window.navigator.userAgent.toLowerCase());return t}static get Browser(){let t;const a=function(a){let n=a.indexOf(t);if(-1!==n){const i=a.indexOf("rv:");return"Trident"===t&&-1!==i?parseFloat(a.substring(i+3)):parseFloat(a.substring(n+t.length+1))}};let n={};return n[function(){const a=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"MSIE",identity:"IE"},{string:navigator.userAgent,subString:"Trident",identity:"IE"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"}];for(let n=0,i;n<a.length;n++)if(i=a[n].string,t=a[n].subString,-1!==i.indexOf(a[n].subString))return a[n].identity;return"Other"}()]=!0,n.version=a(navigator.userAgent)||a(navigator.appVersion)||"Unknown",n}static toCamelCase(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}static toDash(t){return t.split(/(?=[A-Z])/).join("-").toLowerCase()}static unescapeHTML(t){let a=new DOMParser().parseFromString(t,"text/html");return a.documentElement.textContent}static escapeHTML(t){const a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return(t+"").replace(/[&<>"'`=\/]/g,t=>a[t])}static createGUID(){function t(){return a(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}static getScriptLocation(){const t=function(){if(document.currentScript){let t=document.currentScript.src,a=t.lastIndexOf("/");return t=t.substring(0,a),t}const t=new Error;let a="(",n=")";if(Smart.Utilities.Core.Browser.Safari&&(a="@",n="\n"),t.fileName)return t.fileName.replace("/smart.element.js","");let i=t.stack.split(a);return i=i[1],i=i.split(n)[0],i=i.split(":"),i.splice(-2,2),i=i.join(":"),i.replace("/smart.element.js","")}();return t}static CSSVariablesSupport(){return window.CSS&&window.CSS.supports&&window.CSS.supports("(--fake-var: 0)")}static assign(t,a){const n=t=>t&&"object"==typeof t&&!Array.isArray(t)&&null!==t;let i=Object.assign({},t);return n(t)&&n(a)&&Object.keys(a).forEach(o=>{n(a[o])?o in t?i[o]=this.assign(t[o],a[o]):Object.assign(i,{[o]:a[o]}):Object.assign(i,{[o]:a[o]})}),i}static html(t,a){const n=this;let i="",o=t.childNodes;if(a){const n=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi;return void(t.innerHTML=a.replace(n,"<$1></$2>"))}for(let r=0,s=o.length,l;r<s&&(l=o[r]);r++){if(l instanceof HTMLElement||l.tagName&&0<=["strong"].indexOf(l.tagName.toLowerCase())){const t=l.tagName.toLowerCase(),a=l.attributes;let o="<"+t;for(let t=0,n;n=a[t];t++)o+=" "+n.name+"=\""+n.value.replace(/[&\u00A0"]/g,Utilities.Core.escapeHTML)+"\"";o+=">";["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"][t]&&(i+=o),i=i+o+n.html(l)+"</"+t+">"}else i+=l.textContent.replace(/[&\u00A0<>]/g,Utilities.Core.escapeHTML)}return i}}let g=[];class StyleObserver{static watch(t){g.push(t),StyleObserver.interval&&clearInterval(StyleObserver.interval),StyleObserver.interval=setInterval(function(){StyleObserver.observe()},100)}static observeElement(t){const a=t;let n=t._computedStyle||"resize"!==a.hasStyleObserver?document.defaultView.getComputedStyle(a,null):{},i=!0,o="resize"===a.hasStyleObserver?[]:["paddingLeft","paddingRight","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","display","visibility","font-size","font-family","font-style","font-weight","max-height","min-height","max-width","min-width","overflow","overflow-x","overflow-y"];if(t.styleProperties&&(o=o.concat(t.styleProperties)),t.observableStyleProperties&&(o=t.observableStyleProperties),!a._styleInfo){a._styleInfo=[];for(let t=0;t<o.length;t++){const i=o[t];a._styleInfo[i]=n[i]}return}if(t.isHidden||"none"===n.display||requestAnimationFrame(()=>{(0===t.offsetWidth||0===t.offsetHeight)&&(t.isHidden=!0)}),t.isHidden)if(t.visibilityChangedHandler(),!t.isHidden)i=!1;else return;let r=[];for(let l=0;l<o.length;l++){const t=o[l];a._styleInfo[t]!==n[t]&&(r[t]={oldValue:a._styleInfo[t],value:n[t]},r.length++),a._styleInfo[t]=n[t]}0<r.length&&(a.$.fireEvent("styleChanged",{styleProperties:r},{bubbles:!1,cancelable:!0}),r.display&&i&&a.$.fireEvent("resize",a,{bubbles:!1,cancelable:!0}))}static observe(){for(let t=0;t<g.length;t++){const a=g[t];requestAnimationFrame(()=>{this.observeElement(a)})}}static unwatch(t){StyleObserver.interval&&clearInterval(StyleObserver.interval),g.splice(g.indexOf(t),1),0<g.length&&(StyleObserver.interval=setInterval(function(){StyleObserver.observe()},100))}}let h=[];const f=[],_=["resize","down","up","move","tap","taphold","swipeleft","swiperight","swipetop","swipebottom"];class InputEvents{constructor(t){const a=this;a.target=t,a.$target=new Extend(t),a.$document=new Extend(document),a.id=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase();let n={handlers:{},boundEventTypes:[],listen:a.listen.bind(a),unlisten:a.unlisten.bind(a)};return a.tapHoldDelay=750,a.swipeMin=10,a.swipeMax=5e3,a.swipeDelay=1e3,a.tapHoldDelay=750,a.inputEventProperties=["clientX","clientY","pageX","pageY","screenX","screenY"],_.forEach(t=>{n[t]=a=>{n.handlers[t]=a},a[t]=t=>{if(!n.handlers[t.type]){if(("mousemove"===t.type||"pointermove"===t.type||"touchmove"===t.type)&&n.handlers.move){const i=a.createEvent(t,"move");n.handlers.move(i)}return!0}return n.handlers[t.type](t)}}),a.listen(),a.handlers=n.handlers,n}listen(t){const a=this;if("resize"===t&&!a.target.resizeTrigger&&a.target!==document&&a.target!==window&&!1!==a.target.hasResizeObserver){const t=document.createElement("div");t.className="smart-resize-trigger-container",t.innerHTML="<div class=\"smart-resize-trigger-container\"><div class=\"smart-resize-trigger\"></div></div><div class=\"smart-resize-trigger-container\"><div class=\"smart-resize-trigger-shrink\"></div></div>",window[u].EnableShadowDOM&&a.target.enableShadowDOM?a.target.shadowRoot.appendChild(t):a.target.appendChild(t),a.target.resizeTrigger=t,requestAnimationFrame(()=>{const n=t.childNodes[0],i=n.childNodes[0],o=t.childNodes[1],r=function(){i.style.width="100000px",i.style.height="100000px",n.scrollLeft=1e5,n.scrollTop=1e5,o.scrollLeft=1e5,o.scrollTop=1e5};let l=a.target.offsetWidth,s=a.target.offsetHeight,d,c,m,p;if(0===l||0===s){const t=function(){r(),a.target.removeEventListener("resize",t)};a.target.addEventListener("resize",t),r()}else r();a.target.resizeHandler=function(){c||(c=requestAnimationFrame(function(){if(c=0,m=a.target.offsetWidth,p=a.target.offsetHeight,d=m!==l||p!==s,a.target.requiresLayout&&(d=!0),!!d){l=m,s=p;const t=new CustomEvent("resize",{bubbles:!1,cancelable:!0});a.resize(t),a.target.requiresLayout=!1}})),r()},n.addEventListener("scroll",a.target.resizeHandler),o.addEventListener("scroll",a.target.resizeHandler)})}if(!a.isListening){if(a.isListening=!0,a.isPressed=!1,a.isReleased=!1,a.isInBounds=!1,window.PointerEvent)a.$target.listen("pointerdown.inputEvents"+a.id,a.pointerDown.bind(a)),a.$target.listen("pointerup.inputEvents"+a.id,a.pointerUp.bind(a)),a.$target.listen("pointermove.inputEvents"+a.id,a.pointerMove.bind(a)),a.$target.listen("pointercancel.inputEvents"+a.id,a.pointerCancel.bind(a));else{const t="ontouchstart"in window;t&&(a.$target.listen("touchmove.inputEvents"+a.id,a.touchMove.bind(a)),a.$target.listen("touchstart.inputEvents"+a.id,a.touchStart.bind(a)),a.$target.listen("touchend.inputEvents"+a.id,a.touchEnd.bind(a)),a.$target.listen("touchcancel.inputEvents"+a.id,a.touchCancel.bind(a))),a.$target.listen("mousedown.inputEvents"+a.id,a.mouseDown.bind(a)),a.$target.listen("mouseup.inputEvents"+a.id,a.mouseUp.bind(a)),a.$target.listen("mousemove.inputEvents"+a.id,a.mouseMove.bind(a)),a.$target.listen("mouseleave.inputEvents"+a.id,a.mouseLeave.bind(a))}a.$document.listen("mouseup.inputEvents"+a.id,a.handleDocumentUp.bind(a))}}unlisten(t){const a=this;if(a.isListening=!1,window.PointerEvent)a.$target.unlisten("pointerdown.inputEvents"+a.id),a.$target.unlisten("pointerup.inputEvents"+a.id),a.$target.unlisten("pointermove.inputEvents"+a.id),a.$target.unlisten("pointercancel.inputEvents"+a.id);else{const t="ontouchstart"in window;t&&(a.$target.unlisten("touchstart.inputEvents"+a.id),a.$target.unlisten("touchmove.inputEvents"+a.id),a.$target.unlisten("touchend.inputEvents"+a.id),a.$target.unlisten("touchcancel.inputEvents"+a.id)),a.$target.unlisten("mousedown.inputEvents"+a.id),a.$target.unlisten("mouseup.inputEvents"+a.id),a.$target.unlisten("mousemove.inputEvents"+a.id),a.$target.unlisten("mouseleave.inputEvents"+a.id)}if(a.$document.unlisten("mouseup.inputEvents"+a.id,a.handleDocumentUp),"resize"===t&&a.target.resizeTrigger){const t=a.target.resizeTrigger,n=t.childNodes[0],i=t.childNodes[1];n.removeEventListener("scroll",a.target.resizeHandler),i.removeEventListener("scroll",a.target.resizeHandler),a.target.resizeHandler=null,(window[u].EnableShadowDOM&&a.target.enableShadowDOM?a.target.shadowRoot:a.target).removeChild(t),delete a.target.resizeTrigger}}handleDocumentUp(t){const a=this;a.isPressed=!1,a.isReleased=!1,a.resetSwipe(t)}createEvent(t,a){const n=this,i=t.touches,o=t.changedTouches,r=i&&i.length?i[0]:o&&o.length?o[0]:void 0,l=new CustomEvent(a,{bubbles:!0,cancelable:!0});if(l.originalEvent=t,r){for(let t=0;t<n.inputEventProperties.length;t++){const a=n.inputEventProperties[t];l[a]=r[a]}return l}for(let n in t)n in l||(l[n]=t[n]);return l}fireTap(t){const a=this;if(clearTimeout(this.tapHoldTimeout),!this.tapHoldFired&&this.isInBounds){const n=a.createEvent(t,"tap");a.tap(n)}}initTap(t){const a=this;a.isInBounds=!0,a.tapHoldFired=!1,a.tapHoldTimeout=setTimeout(function(){if(a.isInBounds){a.tapHoldFired=!0;const n=a.createEvent(t,"taphold");a.taphold(n)}},a.tapHoldDelay)}pointerDown(t){const a=this;return a.handleDown(t)}mouseDown(t){const a=this;return a.isPressed||a.touchStartTime&&500>new Date-a.touchStartTime?void 0:a.handleDown(t)}touchStart(t){const a=this;return a.touchStartTime=new Date,a.isTouchMoved=!0,a.handleDown(t)}mouseUp(t){const a=this;return a.isReleased||a.touchEndTime&&500>new Date-a.touchEndTime?void 0:a.handleUp(t)}handleDown(t){const a=this;a.isReleased=!1,a.isPressed=!0;const n=a.createEvent(t,"down");return(a.handlers.tap||a.handlers.taphold)&&a.initTap(n),(a.handlers.swipeleft||a.handlers.swiperight||a.handlers.swipetop||a.handlers.swipebottom)&&a.initSwipe(n),a.down(n)}handleUp(t){const a=this;a.isReleased=!0,a.isPressed=!1;const n=a.createEvent(t,"up"),i=a.up(n);return(a.handlers.tap||a.handlers.taphold)&&a.fireTap(n),a.resetSwipe(n),i}handleMove(t){const a=this;let n=a.move(t);return a.isPressed&&(a._maxSwipeVerticalDistance=d(a._maxSwipeVerticalDistance,i(a._startY-t.pageY)),a._maxSwipeHorizontalDistance=d(a._maxSwipeHorizontalDistance,i(a._startX-t.pageX)),n=a.handleSwipeEvents(t)),n}touchEnd(t){const a=this;return a.touchEndTime=new Date,a.handleUp(t)}pointerUp(t){const a=this;return a.handleUp(t)}pointerCancel(t){const a=this;a.pointerUp(t)}touchCancel(t){const a=this;a.touchEnd(t)}mouseLeave(){const t=this;t.isInBounds=!1}mouseMove(t){const a=this;return a.isTouchMoved?void 0:a.handleMove(t)}pointerMove(t){const a=this;return a.handleMove(t)}touchMove(t){const a=this,n=t.touches,i=t.changedTouches,o=n&&n.length?n[0]:i&&i.length?i[0]:void 0;for(let n=0;n<a.inputEventProperties.length;n++){const i=a.inputEventProperties[n];void 0===t[i]&&(t[i]=o[i])}return a.isTouchMoved=!0,a.handleMove(t)}handleSwipeEvents(t){const a=this;let n=!0;return((a.handlers.swipetop||a.handlers.swipebottom)&&(n=this.handleVerticalSwipeEvents(t)),!1===n)?n:((a.handlers.swipeleft||a.handlers.swiperight)&&(n=this.handleHorizontalSwipeEvents(t)),n)}handleVerticalSwipeEvents(t){let a,n;return a=t.pageY,n=a-this._startY,this.swiped(t,n,"vertical")}handleHorizontalSwipeEvents(t){let a,n;return a=t.pageX,n=a-this._startX,this.swiped(t,n,"horizontal")}swiped(t,a,n){const o=this;if(n=n||0,i(a)>=o.swipeMin&&!o._swipeEvent&&!o._swipeLocked){let r=0>a?"swipeleft":"swiperight";if("horizontal"===n?o._swipeEvent=o.createEvent(t,r):(r=0>a?"swipetop":"swipebottom",o._swipeEvent=o.createEvent(t,0>a?"swipetop":"swipebottom")),o[r]&&(o[r](this._swipeEvent),i(a)<=this.swipeMax))return t.stopImmediatePropagation(),!1}return!0}resetSwipe(){const t=this;t._swipeEvent=null,clearTimeout(this._swipeTimeout)}initSwipe(t){const a=this;a._maxSwipeVerticalDistance=0,a._maxSwipeHorizontalDistance=0,a._startX=t.pageX,a._startY=t.pageY,a._swipeLocked=!1,a._swipeEvent=null,a._swipeTimeout=setTimeout(function(){a._swipeLocked=!0},a.swipeDelay)}}class Scroll{get scrollWidth(){const t=this;return t.horizontalScrollBar?t.horizontalScrollBar.max:-1}set scrollWidth(t){const a=this;0>t&&(t=0),a.horizontalScrollBar&&(a.horizontalScrollBar.max=t)}get scrollHeight(){const t=this;return t.verticalScrollBar?t.verticalScrollBar.max:-1}set scrollHeight(t){const a=this;0>t&&(t=0),a.verticalScrollBar&&(a.verticalScrollBar.max=t)}get scrollLeft(){const t=this;return t.horizontalScrollBar?t.horizontalScrollBar.value:-1}set scrollLeft(t){const a=this;0>t&&(t=0),a.horizontalScrollBar&&(a.horizontalScrollBar.value=t)}get scrollTop(){const t=this;return t.verticalScrollBar?t.verticalScrollBar.value:-1}set scrollTop(t){const a=this;0>t&&(t=0),a.verticalScrollBar&&(a.verticalScrollBar.value=t)}get vScrollBar(){const t=this;return t.verticalScrollBar}get hScrollBar(){const t=this;return t.horizontalScrollBar}constructor(t,a,n){const i=this;i.container=t,i.horizontalScrollBar=a,i.verticalScrollBar=n,i.disableSwipeScroll=!1,i.listen()}listen(){function t(){let i,o;f.amplitude&&(n.container.$.fireEvent("kineticScroll"),i=Date.now()-p,o=-f.amplitude*a(-i/s),5<o||-5>o?(x(f.targetValue+o),cancelAnimationFrame(c),c=0,c=requestAnimationFrame(t)):x(f.targetValue))}var a=Math.exp;const n=this,o=Core.isMobile,r=n.horizontalScrollBar,l=n.verticalScrollBar;n.inputEvents=new InputEvents(n.container);let s=500,d,c,m,p,u,g,h,f;const _=function(t){return{amplitude:0,delta:0,initialValue:0,min:0,max:t.max,previousValue:0,pointerPosition:0,targetValue:0,scrollBar:t,value:0,velocity:0}},y=_(r),b=_(l),v=function(){g=Date.now(),h=g-p,p=g;const t=function(t){t.delta=t.value-t.previousValue,t.previousValue=t.value;let a=1e3*t.delta/(1+h);t.velocity=.8*a+.2*t.velocity};t(b),t(y)},x=function(t){return f.value=t>f.max?f.max:t<f.min?f.min:t,f.scrollBar.value=f.value,t>f.max?"max":t<f.min?"min":"value"};n.inputEvents.down(function(t){if(o){m=!0,d=!1;const a=function(t,a){t.amplitude=0,t.pointerPosition=a,t.previousValue=t.value,t.value=t.scrollBar.value,t.initialValue=t.value,t.max=t.scrollBar.max};a(b,t.clientY),a(y,t.clientX),p=Date.now(),clearInterval(u),u=setInterval(v,s)}}),n.inputEvents.up(function(){if(!m)return!0;clearInterval(u);const a=function(a){f=a,a.amplitude=.8*a.velocity,a.targetValue=Math.round(a.value+a.amplitude),p=Date.now(),cancelAnimationFrame(c),c=requestAnimationFrame(t),a.velocity=0};10<b.velocity||-10>b.velocity?a(b):(10<y.velocity||-10>y.velocity)&&a(y),m=!1}),n.inputEvents.move(function(t){if(!m)return!0;if(n.disableSwipeScroll)return;if(d&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation()),y.visible=0<r.offsetHeight,b.visible=0<l.offsetWidth,!m||!y.visible&&!b.visible)return;b.ratio=-b.max/b.scrollBar.offsetHeight,b.delta=(t.clientY-b.pointerPosition)*b.ratio,y.ratio=-y.max/y.scrollBar.offsetWidth,y.delta=(t.clientX-y.pointerPosition)*y.ratio;let a="value";const i=function(t,i,o){return 5<t.delta||-5>t.delta?(f=t,a=t.initialValue+t.delta>f.max?"max":t.initialValue+t.delta<f.min?"min":"value","min"==a&&0===t.initialValue)||"max"==a&&t.initialValue===t.max||!t.visible||(n.container.$.fireEvent("kineticScroll"),x(t.initialValue+t.delta),v(),o.originalEvent.preventDefault(),o.originalEvent.stopPropagation(),d=!0,!1):null};let o=i(b,t.clientY,t);if(null===o){let a=i(y,t.clientX,t);if(null!==a)return a}else return o});let C;n.scrollTo=function(t,o){const r=!1===o?y:b;let l=!1;p||(p=Date.now()),C||(C=Date.now()),375<i(Date.now()-C)?p=Date.now():l=!0,C=Date.now(),r.value=r.scrollBar.value,r.delta=t-r.value,r.max=r.scrollBar.max,t<=r.min&&(t=r.min),t>=r.max&&(t=r.max),r.targetValue=t;const s=t;let d=r.value;r.velocity=100*r.delta/(1+r.max),r.from=d;const m=function(t){return r.value=t>r.max?r.max:t<r.min?r.min:t,r.scrollBar.value=r.value,t>r.max?"max":t<r.min?"min":"value"},u=function(){let i=175,o=Date.now()-C,g=Math.min(1e3,Date.now()-p),h=r.velocity*a(g/i),f;if(l)0>h&&r.value<=t?h=0:0<h&&r.value>=t&&(h=0),(r.value+h<=r.min||r.value+h>=r.max)&&(h=0),.5<h||-.5>h?(m(r.value+h),cancelAnimationFrame(c),c=0,c=requestAnimationFrame(u)):m(r.targetValue);else{if(o>=i)return cancelAnimationFrame(c),n.container.$.fireEvent("kineticScroll"),void(c=0);f=Utilities.Animation.Easings.easeInSine(o,d,s-d,i),m(f),cancelAnimationFrame(c),c=0,c=requestAnimationFrame(u)}};cancelAnimationFrame(c),c=requestAnimationFrame(u)},n.inputEvents.listen()}unlisten(){const t=this;t.inputEvents&&t.inputEvents.unlisten(),delete t.inputEvents}}class Extend{constructor(t){this.events={},this.handlers={},this.element=t}hasClass(t){const a=this,n=t.split(" ");for(let o=0;o<n.length;o++){const t=a.element.classList.contains(n[o]);if(!t)return!1}return!0}addClass(t){const a=this;if(!a.hasClass(t)){const n=t.split(" ");for(let t=0;t<n.length;t++)a.element.classList.add(n[t]);a.isNativeElement||StyleObserver.observeElement(a.element)}}removeClass(t){const a=this;if(0===arguments.length)return void a.element.removeAttribute("class");const n=t.split(" ");for(let o=0;o<n.length;o++)a.element.classList.remove(n[o]);""===a.element.className&&a.element.removeAttribute("class"),a.isNativeElement||StyleObserver.observeElement(a.element)}get isCustomElement(){const t=this;return!(!0!=t.element instanceof window[u].BaseElement)||"DIV"!==t.element.tagName&&"SPAN"!==t.element.tagName&&"BUTTON"!==t.element.tagName&&"INPUT"!==t.element.tagName&&"UL"!==t.element.tagName&&"LI"!==t.element.tagName&&!(!0!=document.createElement(t.element.nodeName)instanceof window[u].BaseElement)}get isNativeElement(){const t=this;return!t.isCustomElement}dispatch(t){const a=this,n=a.events[t.type];let i=!1;if(1<n.length)for(let t=0;t<n.length;t++){const a=n[t];if(a.namespace&&0<=a.namespace.indexOf("_")){i=!0;break}}i&&n.sort(function(t,a){let n=t.namespace,i=a.namespace;return n=-1===n.indexOf("_")?0:parseInt(n.substring(n.indexOf("_")+1)),i=-1===i.indexOf("_")?0:parseInt(i.substring(i.indexOf("_")+1)),n<i?-1:n>i?1:0});for(let o=0;o<n.length;o++){const i=n[o];if(t.namespace=i.namespace,t.context=i.context,t.defaultPrevented)break;const r=i.handler.apply(a.element,[t]);if(void 0!==r&&(t.result=r,!1===r)){t.preventDefault(),t.stopPropagation();break}}return t.result}fireEvent(t,a,n){const i=this;n||(n={bubbles:!0,cancelable:!0}),n.detail=a||{};const o=new CustomEvent(t,n);return o.originalStopPropagation=o.stopPropagation,o.stopPropagation=function(){return o.isPropagationStopped=!0,o.originalStopPropagation()},i.dispatchEvent(o),o}get isPassiveSupported(){const t=this;if(t.supportsPassive!==void 0)return t.supportsPassive;t.supportsPassive=!1;try{let a=Object.defineProperty({},"passive",{get:function(){t.supportsPassive=!0}});window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}catch(t){}return t.supportsPassive}dispatchEvent(t){const a=this,n=t.type,i=a.element.context;a.element.context=document,a.element["on"+n]?a.element["on"+n](t):a.element.dispatchEvent(t),a.element.context=i}listen(t,a){const n=this,i=t.split("."),o=i.slice(1).join("."),r=i[0];n.events[r]||(n.events[r]=[]);const l={type:r,handler:a,context:n.element,namespace:o};0<=_.indexOf(r)&&(!n.inputEvents&&(n.inputEvents=new InputEvents(n.element)),n.inputEvents[r](function(t){n.dispatchEvent(t)}),n.inputEvents.boundEventTypes.push(r),n.inputEvents.listen(r)),0===n.events[r].length&&(n.handlers[r]=n.dispatch.bind(n),"wheel"===r?n.element.addEventListener("wheel",n.handlers[r],!!n.isPassiveSupported&&{passive:!1}):n.element.addEventListener(r,n.handlers[r],!1)),n.events[r].push(l)}unlisten(t){const a=this,n=t.split("."),r=n.slice(1).join("."),i=n[0];let o=a.events[i];if(a.inputEvents&&0<=a.inputEvents.boundEventTypes.indexOf(i)&&(a.inputEvents.boundEventTypes.splice(a.inputEvents.boundEventTypes.indexOf(i),1),0===a.inputEvents.boundEventTypes.length&&a.inputEvents.unlisten(i)),!!o){for(let t=0;t<o.length;t++)if(""!==r){let t=o.findIndex(t=>t.namespace===r);o.splice(t,1);break}else o=[];0===o.length&&(a.element.removeEventListener(i,a.handlers[i]),a.events[i]=[],delete a.handlers[i])}}getAttributeValue(t,a){const n=this,i=n.element.getAttribute(t);if(n.isNativeElement)return n.deserialize(i,a);const o=n.element.propertyByAttributeName[t],r=o.deserialize===void 0?n.deserialize(i,a,o.nullable):n.element[o.deserialize](i);return r}setAttributeValue(t,a,n){const i=this;let o=!1,r;if(!i.isNativeElement){const l=i.element.propertyByAttributeName[t];o=!l||l.nullable,r=l&&l.serialize?i.element[l.serialize](a):i.serialize(a,n,o)}else if(r=i.serialize(a,n),"boolean"===n){if(0<=["checked","selected","async","autofocus","autoplay","controls","defer","disabled","hidden","ismap","loop","multiple","open","readonly","required","scoped"].indexOf(t))return void(a?i.element.setAttribute(t,""):i.element.removeAttribute(t))}return("array"===n||"object"===n)&&("[]"===r||"{}"===r)?void i.element.removeAttribute(t):void(void 0===r?i.element.removeAttribute(t):i.element.setAttribute(t,r))}serialize(t,a,n){if(void 0===a&&(a=Utilities.Types.getType(t)),void 0!==t&&(n||null!==t)){if(n&&null===t)return"null";if("string"===a)return t;if("boolean"===a||"bool"===a){if(!0===t||"true"===t||1===t||"1"===t)return"";if(!1===t||"false"===t||0===t||"0"===t)return}if("array"===a)return JSON.stringify(t);return 0<=["string","number","int","integer","float","date","any","function"].indexOf(a)?t.toString():"object"===a?JSON.stringify(t):void 0}}deserialize(t,a,n){const i="null"===t;if(void 0!==t&&(!i||n)){if(i&&n)return null;if("boolean"===a||"bool"===a)return null!==t;if("number"===a||"float"===a)return"NaN"===t?NaN:"Infinity"===t?1/0:"-Infinity"===t?-Infinity:parseFloat(t);if("int"===a||"integer"===a)return"NaN"===t?NaN:"Infinity"===t?1/0:"-Infinity"===t?-Infinity:parseInt(t);if("string"===a)return t;if("any"===a)return t;if("date"===a)return new Date(t);if("function"===a){if("function"==typeof window[t])return window[t];}else if("array"===a||"object"===a)try{const a=JSON.parse(t);if(a)return a}catch(n){if(window[t]&&"object"==typeof window[t])return window[t];if("array"===a&&0<=t.indexOf("[")){if(0<=t.indexOf("{")){let a=t.replace(/{/ig,"").replace("[","").replace("]","").replace(/'/ig,"").replace(/"/ig,"").trim();a=a.split("},");for(let t=0;t<a.length;t++){let n={},i=a[t].trim().split(",");for(let t=0;t<i.length;t++){const a=i[t].split(":")[0].trim(),o=i[t].split(":")[1].trim();n[a]=o}a[t]=n}return a}const a=t.replace("[","").replace("]","").replace(/'/ig,"").replace(/"/ig,"").trim().split(",");return a}}}}}class Animation{static get Ripple(){return Ripple}static get Easings(){return Easings}}class Utilities{static get Types(){return Types}static get Core(){return Core}static get Animation(){return Animation}static get Scroll(){return Scroll}static get InputEvents(){return InputEvents}static Extend(t){return new Extend(t)}static Assign(t,a){if(0<=t.indexOf(".")){const n=t.split(".");return Utilities[n[0]]||(Utilities[n[0]]={}),void(Utilities[n[0]][n[1]]=a)}Utilities[t]=a}}const y=Utilities.Extend(document);BindingModule.cache={};class BaseElement extends HTMLElement{static get properties(){return{animation:{value:"advanced",type:"string",allowedValues:["none","simple","advanced"]},unfocusable:{value:!1,type:"boolean"},disabled:{value:!1,type:"boolean"},dataContext:{value:null,reflectToAttribute:!1,type:"any"},messages:{value:{en:{propertyUnknownType:"'{{name}}' property is with undefined 'type' member!",propertyInvalidValue:"Invalid '{{name}}' property value! Actual value: '{{actualValue}}', Expected value: '{{value}}'!",propertyInvalidValueType:"Invalid '{{name}}' property value type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",methodInvalidValueType:"Invalid '{{name}}' method argument value type! Actual type: '{{actualType}}', Expected type: '{{type}}' for argument with index: '{{argumentIndex}}'!",methodInvalidArgumentsCount:"Invalid '{{name}}' method arguments count! Actual arguments count: '{{actualArgumentsCount}}', Expected at least: '{{argumentsCount}}' argument(s)!",methodInvalidReturnType:"Invalid '{{name}}' method return type! Actual type: '{{actualType}}', Expected type: '{{type}}'!",elementNotInDOM:"Element does not exist in DOM! Please, add the element to the DOM, before invoking a method.",moduleUndefined:"Module is undefined.",missingReference:"{{elementType}}: Missing reference to '{{files}}'.",htmlTemplateNotSuported:"{{elementType}}: Web Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: '{{property}}' property accepts a string that must match the id of an HTMLTemplate element from the DOM."}},reflectToAttribute:!1,type:"object"},readonly:{value:!1,type:"boolean"},rightToLeft:{value:!1,type:"boolean"},theme:{value:window[u].Theme,type:"string"},visibility:{value:"visible",allowedValues:["visible","collapsed","hidden"],type:"string"},wait:{value:!1,type:"boolean"}}}static get requires(){return{}}static get listeners(){return{"theme-changed":function(t){this.theme=t.detail.newValue}}}static get methods(){return{}}get classNamesMap(){return{animation:"smart-animate",rippleAnimation:"smart-ripple"}}get hasAnimation(){const t=this;return"none"!==t.animation}get hasRippleAnimation(){const t=this;return"none"!==t.animation&&!("advanced"!==t.animation)}static get modules(){return window[u].Modules}get properties(){const t=this;return t._properties||(t._properties=[]),t._properties}get parents(){const t=this;let a=[],n=t.parentNode;for(;n&&9!==n.nodeType;)!0==n instanceof HTMLElement&&a.push(n),n=n.parentNode;return a}get focused(){return this.contains(document.activeElement)}template(){return"<div></div>"}registered(){const t=this;t.onRegistered&&t.onRegistered()}created(){const t=this;t.isReady=!1,t._initElement(t),t._setModuleState("created"),t.onCreated&&t.onCreated()}completed(){const t=this;t.isCompleted=!0,t._onCompleted&&t._onCompleted(),t.onCompleted&&t.onCompleted()}whenReady(t){const a=this;return a.isCompleted?void t():void(!a.whenReadyCallbacks&&(a.whenReadyCallbacks=[]),a.whenReadyCallbacks.push(t))}addThemeClass(){const t=this;""!==t.theme&&t.classList.add("smart-"+t.theme)}addDefaultClass(){const t=this;t.classList.add(t.nodeName.toLowerCase()+"-element")}ready(){const t=this;t.addThemeClass(),t.addDefaultClass(),"collapsed"===t.visibility?t.classList.add("smart-hidden"):"hidden"===t.visibility&&t.classList.add("smart-visibility-hidden");const a=()=>{let a=[];const n=t.getStaticMember("requires");for(let t in n){const i=t.split(".");2<i.length?!window[u].Utilities[i[2]]&&a.push(n[t]):!window[u][i[1]]&&a.push(n[t])}if(0<a.length){const t=this;t.error(t.localize("missingReference",{elementType:t.nodeName.toLowerCase(),files:a.join(", ")}))}};if(a(),t.dataContext&&t.applyDataContext(),t.onReady&&t.onReady(),t.shadowRoot&&Smart(t._selector)){if(Smart(t._selector).styleUrls){const a=Smart(t._selector).styleUrls;for(let n=0;n<a.length;n++)t.importStyle(a[n])}if(Smart(t._selector).styles){const a=document.createElement("style");a.innerHTML=Smart(t._selector).styles,t.shadowRoot.insertBefore(a,t.shadowRoot.firstChild)}}Smart(t._selector)&&Smart(t._selector).ready&&Smart(t._selector).ready()}get _selector(){const t=this;return t.id?"#"+t.id:0<t.classList.length?"."+t.classList[0]:void 0}applyDataContext(t){const a=this;let n="string"==typeof a.dataContext?window[a.dataContext]||document[a.dataContext]:a.dataContext;if(t&&(n=t,a.dataContext=t),!n){a.dataContextProperties=null;const t=function(){const n="string"==typeof a.dataContext?window[a.dataContext]||document[a.dataContext]:a.dataContext;n&&(a.applyDataContext(),window.removeEventListener("load",t))};return void window.addEventListener("load",t)}if(!n._uid)for(let t in n._uid=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),n._properties=[],n){const i=n[t];"function"!=typeof i&&"_properties"!=t&&"_uid"!=t&&(n._properties[t]=i,Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get(){return n._properties[t]},set(i){const o=n._properties[t];n._properties[t]=i;let r=[];r[t]={oldValue:o,value:i},r.length++,a.updatingDataContext=!0,y.fireEvent("dataContextPropertyChanged",{dataContext:n,properties:r},{bubbles:!1,cancelable:!0}),a.updatingDataContext=!1}}))}if(a.dataContextProperties=a.parseAttributes(a),a.dataContextPropertiesMap={},a.dataContextListeners={},!a.dataContextProperties)return void(a.dataContextProperties=null);for(let i in a.updatingDataContext=!0,a.dataContextProperties){const t=a.dataContextProperties[i],o=t.name;if(t.propertyName=i,a.dataContextPropertiesMap[o]=i,BindingModule.cache["toDash"+i]||(BindingModule.cache["toDash"+i]=Utilities.Core.toDash(o)),t.isEvent){const i=t.value;a.dataContextListeners[o]&&a.removeEventListener(o,a.dataContextListeners[o]),a.dataContextListeners[o]=function(t){n[i](t)},a.addEventListener(o,a.dataContextListeners[o])}if(0<=o.indexOf(".")){const t=o.split(".");let r=n[t[0]];for(let a=1;a<t.length;a++)r=r[t[a]];void 0!==r&&(a[i]=r)}else a[i]=n[o]}a.dataContextPropertyChangedHandler=function(t){const n=t.detail.properties,i=t.detail.dataContext,o="string"==typeof a.dataContext?window[a.dataContext]||document[a.dataContext]:a.dataContext;if(i===o)for(let t in n){const i=a.dataContextPropertiesMap[t],o=a.context;i&&(a.context=document,a[i]=n[t].value,a.context=o)}},y.listen("dataContextPropertyChanged",a.dataContextPropertyChangedHandler),a.updatingDataContext=!1}updateDataContextProperty(t){const a=this,n="string"==typeof a.dataContext?window[a.dataContext]||document[a.dataContext]:a.dataContext,i=a.dataContextProperties[t];if(!a.updatingDataContext&&i.twoWay){const o=i.name;if(0<=o.indexOf(".")){const r=o.split(".");let l=n[r[0]];for(let t=1;t<r.length;t++)l=l[r[t]];void 0!==l&&(l=a[t],h[n._uid]&&(h[n._uid][t]=l))}else n[o]=a[t],h[n._uid]&&(h[n._uid][t]=n[o])}}static get version(){return window[u].Version}initProperties(){const t=this;if(Smart(t._selector)&&Smart(t._selector).properties&&(t._initProperties=Smart(t._selector).properties),t._initProperties){const a=Object.keys(t._initProperties);for(let n=0;n<a.length;n++){const i=a[n],o=t._initProperties[i];if(o.constructor===Smart.DataAdapter||"object"!=typeof o||Utilities.Types.isArray(o)){t[i]=o;continue}if("object"==typeof o){const a=function(n,o){const r=Object.keys(n);for(let l=0;l<r.length;l++){const i=r[l],s=n[i];"object"!=typeof s||Utilities.Types.isArray(s)||s.constructor===Date?t[o+"_"+i]=s:a(s,o+"_"+i)}};a(o,i)}}}}setup(){const t=this;if(t.context=this,t.isReady&&!t.isCompleted)return;if(t.isReady)return t._setModuleState("attached"),t.isAttached=!0,t.attached(),t._handleListeners("listen"),void(t.context=document);t.ownerElement&&0<=t.ownerElement.detachedChildren.indexOf(t)&&t.ownerElement.detachedChildren.splice(t.ownerElement.detachedChildren.indexOf(t),1),t.isReady=!0,t.methods=t.getStaticMember("methods"),t.initProperties();const a=Core.isMobile;a&&t.classList.add("smart-mobile");for(let a=0;a<t.attributes.length;a+=1){const n=t.propertyByAttributeName[t.attributes[a].name];if(!n)continue;let i=t.$.getAttributeValue(n.attributeName,n.type);const o=i?i.toString():"";if(!(0<=o.indexOf("{{")||0<=o.indexOf("[["))&&!("object"!==n.type&&"array"!==n.type&&(0<=t.attributes[a].value.indexOf("{{")||0<=t.attributes[a].value.indexOf("[[")))&&void 0!==i&&n.value!==i){const o=Utilities.Types.getType(i),r=t.attributes[a].value;if(("any"===n.type||"object"===n.type)&&""+t[n.name]===i)continue;if("array"===n.type&&t[n.name]&&JSON.stringify(t[n.name])===i)continue;if("number"===o&&isNaN(i)&&"NaN"!==r&&"Infinity"!==r&&"-Infinity"!==r){const a=t.localize("propertyInvalidValueType",{name:n.name,actualType:"string",type:n.type});t.log(a)}n.isUpdatingFromAttribute=!0,t[n.name]=i,n.isUpdatingFromAttribute=!1}}for(let a in t._properties){const n=t._properties[a];if("innerHTML"==a&&n.value===n.defaultValue&&(n.value=n.defaultValue=Utilities.Core.html(t)),("boolean"===n.type||"bool"===n.type)&&"false"===t.getAttribute(n.attributeName)&&(n.isUpdating=!0,t.setAttribute(n.attributeName,""),n.isUpdating=!1),n.defaultReflectToAttribute&&n.reflectToAttribute){if(n.defaultReflectToAttribute&&n.defaultReflectToAttributeConditions){let a=!0;for(let o=0;o<n.defaultReflectToAttributeConditions.length;o++){const i=n.defaultReflectToAttributeConditions[o];let r,l;for(let t in i)r=t,l=i[t];t._properties[r]&&t._properties[r].value!==l&&(a=!1)}if(!a)continue}n.isUpdating=!0,t.$.setAttributeValue(n.attributeName,n.value,n.type),n.isUpdating=!1}}const n=[];if(0<t.children.length)for(let a=0;a<t.children.length;a++){const i=t.children[a];Utilities.Extend(i).isCustomElement&&n.push(i)}t.applyTemplate(),t.complete=function(){if(!t.templateBindingsReady){const a=t=>{t.templateBindingsReady||(t.templateBindingsReady=!0,t.updateTextNodes(),t.updateBoundNodes())};if(!t.ownerElement)a(t);else{let n=t.ownerElement,o=[];for(;n;)o.push(n),n=n.ownerElement;for(let t=o.length-1;0<=t;t--)a(o[t]);a(t)}}const a=()=>{if(t._setModuleState("ready"),t.ready(),t.isAttached=!0,t._setModuleState("attached"),t.attached(),t._handleListeners("listen"),requestAnimationFrame(()=>{t.isHidden||0!==t.offsetWidth&&0!==t.offsetHeight||(t.isHidden=!0)}),t.completed(),t.context=document,t.whenReadyCallbacks){for(let a=0;a<t.whenReadyCallbacks.length;a++)t.whenReadyCallbacks[a]();t.whenReadyCallbacks=[]}};t.wait?t.classList.add("smart-visibility-hidden"):t.classList.contains("smart-async")?requestAnimationFrame(()=>{a()}):a()};let o=[].slice.call(t.querySelectorAll("[smart-id]")).concat(n);if(window[u].EnableShadowDOM&&t.enableShadowDOM&&(o=[].slice.call(t.shadowRoot.querySelectorAll("[smart-id]")).concat(n)),0===o.length)t.complete();else{t._completeListeners=0;for(let a=0;a<o.length;a++){const n=o[a];if(Utilities.Extend(n).isCustomElement){const a=function(){t._completeListeners--,0===t._completeListeners&&(t.complete(),delete t._completeListeners)}.bind(t);n.isCompleted||n.isUtilityElement||!1!==n.wait||(t._completeListeners++,!n._onCompleted&&(n.completeHandlers=[],n._onCompleted=function(){for(let t=0;t<n.completeHandlers.length;t++)n.completeHandlers[t]()}),n.completeHandlers.push(a))}}0===t._completeListeners&&t.complete()}}visibilityChangedHandler(){const t=this;t.isReady&&requestAnimationFrame(()=>{(t.isHidden||0!==t.offsetWidth)&&0!==t.offsetHeight?t.isHidden&&(t.$.fireEvent("resize",t,{bubbles:!1,cancelable:!0}),t.isHidden=!1):t.isHidden=!0})}attributeChangedCallback(t,a,n){const i=this,o=i.propertyByAttributeName[t];if(("class"===t||"style"===t)&&i.visibilityChangedHandler(),o||i.attributeChanged(t,a,n),!(!o||o&&o.isUpdating)){let t=i.$.getAttributeValue(o.attributeName,o.type);void 0!==n&&i[o.name]!==t&&(o.isUpdatingFromAttribute=!0,i[o.name]=void 0===t?i._properties[o.name].defaultValue:t,o.isUpdatingFromAttribute=!1)}}attributeChanged(t,a,n){}set hasStyleObserver(t){const a=this;a._hasStyleObserver===void 0&&(a._hasStyleObserver=t),t?StyleObserver.watch(a):StyleObserver.unwatch(a)}get hasStyleObserver(){const t=this;return!(void 0!==t._hasStyleObserve)||t._hasStyleObserver}attached(){const t=this;t.hasStyleObserver&&StyleObserver.watch(t),t.onAttached&&t.onAttached(),Smart(t._selector)&&Smart(t._selector).attached&&Smart(t._selector).attached()}detached(){const t=this;t.hasStyleObserver&&StyleObserver.unwatch(t),t._setModuleState("detached"),t.isAttached=!1,t.ownerElement&&-1===t.ownerElement.detachedChildren.indexOf(t)&&t.ownerElement.detachedChildren.push(t),t._handleListeners("unlisten"),t.onDetached&&t.onDetached(),Smart(t._selector)&&Smart(t._selector).detached&&Smart(t._selector).detached()}propertyChangedHandler(t,a,n){const i=this;a===n||("theme"===t&&(""!==a&&i.classList.remove("smart-"+a),""!==n&&i.classList.add("smart-"+n)),"visibility"===t&&("collapsed"===a?i.classList.remove("smart-hidden"):"hidden"==a&&i.classList.remove("smart-visibility-hidden"),"collapsed"===n?i.classList.add("smart-hidden"):"hidden"==n&&i.classList.add("smart-visibility-hidden")),i.propertyChanged&&i.propertyChanged(t,a,n))}_handleListeners(t){const a=this,n=a.tagName.toLowerCase(),i=a.getStaticMember("listeners"),o=i=>{for(let o in i){const r=o.split(".");let l=r[0],s=a.$;if(!r[1])a.smartId&&(l=l+"."+a.smartId);else if(l=r[1],s=a["$"+r[0]],"document"===r[0]){let t=a.smartId;""===t&&(t=Utilities.Core.toCamelCase(n)),l=l+"."+t}else a.smartId&&(l=l+"."+a.smartId+"_"+a.parents.length);const d=i[o];s&&s[t](l,function(t){const n=a.context;a.context=a,a[d]&&a[d].apply(a,[t]),a.context=n})}};o(i),o(a.templateListeners),Smart(a._selector)&&Smart(a._selector).properties&&o(Smart(a._selector).listeners)}parseTemplate(){const t=this,a=t.template(),n=document.createDocumentFragment();if(p[t.nodeName])return p[t.nodeName].cloneNode(!0);if(""===a)return null;let i=document.createElement("div");n.appendChild(i),i.innerHTML=a;let o=i.childNodes;i.parentNode.removeChild(i);for(let t=0;t<o.length;t++)n.appendChild(o[t]);return p[t.nodeName]=n,n.cloneNode(!0)}applyTemplate(){const t=this,a=t.parseTemplate();if(!a)return;if(!a.hasChildNodes)return;const n=a.childNodes[0],o=(a,n)=>{t["$"+a]=n.$=Utilities.Extend(n),t.$[a]=n,n.ownerElement=t};let i=n;if(0<n.getElementsByTagName("content").length){let t=n.getElementsByTagName("content")[0];i=t.parentNode,i.removeChild(t)}else{const t=a.querySelectorAll("[inner-h-t-m-l]");t&&0<t.length&&(i=t[0])}t.$.template="template"===n.nodeName.toLowerCase()?n:n.querySelector("template");let r=a.querySelectorAll("[id]");0===r.length&&(r=a.querySelectorAll("*")),o("root",n),o("content",i),t.$.html=t.innerHTML.toString().trim();for(let a=0,n;a<r.length;a+=1)n=r[a],""===n.id&&(n.id="child"+a),o(n.id,n),n.setAttribute("smart-id",n.id),t.shadowRoot||n.removeAttribute("id");for(t.bindings=!1===t.hasTemplateBindings?[]:t.getBindings(a),t.$root.addClass("smart-container");t.childNodes.length;)i.appendChild(t.firstChild);if(t.appendTemplate(a),t.$.template){const a=document.createElement("div");a.classList.add("smart-template-container"),t.$.templateContainer=a,t.$.template.parentNode.insertBefore(a,t.$.template),t.refreshTemplate()}}refreshTemplate(){const t=this;if(!t.$.templateContainer)return;t.templateDetached(t.$.templateContainer);const a=t.$.template.content.cloneNode(!0);t.templateBindings=t.getBindings(a),t.templateProperties=[];let n=document.createDocumentFragment();const o=function(a,n,i){for(let r in a){const l=a[r],s=l.node.cloneNode();n.appendChild(s);let d=[],c=!1;if(l.data)for(let a in l.data){const o=l.data[a],r=o.name;if(t.templateProperties[r]=!0,s.removeAttribute(Utilities.Core.toDash(a)),"*items"==a)d=t[r],c=!0;else if(0<=r.indexOf("item.")&&i)o.value=i[r.substring(5)],s[a]=o.value;else if(0<=r.indexOf("item")&&i)o.value=i,s[a]=o.value;else if("*if"!=a)t.updateBoundNode(s,l,t,r);else if(0<=r.indexOf("(")){let a=r.substring(r.indexOf("(")),i;const o=r.substring(0,r.indexOf("("));if(a=a.substring(1,a.length-1),a=a.replace(/ /ig,""),a=a.split(","),0<a.length&&""!==a[0]){let n=[];for(let o=0;o<a.length;o++)n.push(t[a[o]]);i=t[o].apply(t,n)}else i=t[o]();!1===i&&n.removeChild(s)}else t[r]||n.removeChild(s)}if(0<d.length||c)for(let t=0;t<d.length;t++)l.children&&o(l.children,s,d[t]);else l.children&&o(l.children,s,i)}};o(t.templateBindings.children,n),t.$.templateContainer.innerHTML="",t.$.templateContainer.appendChild(n),t.templateAttached(t.$.templateContainer)}templateAttached(){}templateDetached(){}appendTemplate(t){const a=this;a.appendChild(t)}defineElementModules(){const t=this,a=t.constructor.prototype;if("BaseElement"===a.elementName){a.modules=t.constructor.modules;const n=a.modules;for(let a=0;a<n.length;a+=1)t.addModule(n[a])}else{const n=a.modules;for(let a=0;a<n.length;a+=1){const i=n[a],o=i.prototype;t.defineElementMethods(o.methodNames,o),t.defineElementProperties(i.properties)}}}watch(t,a){const n=this;return null===t||null===a?void(n._watch=null):void(n._watch={properties:t,propertyChangedCallback:a})}unwatch(){const t=this;t._watch=null}set(t,a,n){const i=this,o=i.context;i.context=!0===n?document:i,i[t]=a,i.context=o}get(t){const a=this;return a[t]}_setModuleState(t,a){const n=this,o="is"+t.substring(0,1).toUpperCase()+t.substring(1),r="on"+t.substring(0,1).toUpperCase()+t.substring(1);for(let l=0;l<n.modulesList.length;l++){const i=n.modulesList[l];i[o]=!0,i[t]&&i[t](a),i[r]&&i[r](a)}}addModule(t,a){const n=this;if(!t)return;const i=n.modules.slice(0),o=t.prototype;!t.moduleName&&t.name&&(t.moduleName=t.name),-1===i.findIndex(a=>t.moduleName===a.moduleName)&&i.push(t),n.defineModule(t),n.defineElementMethods(o.methodNames,o),n.defineElementProperties(t.properties);const r=n.constructor.prototype;if(r.modules=i,a)for(let a in Smart.Elements.tagNames){const i=Smart.Elements.tagNames[a];let o=Object.getPrototypeOf(i),r=[];for(;o!==HTMLElement;)r.push(o.prototype),o=Object.getPrototypeOf(o);0<=r.indexOf(n)&&i!==n&&i.prototype.addModule(t)}}defineModule(t){if(t.isDefined)return;t.prototype._initModule=function(t){const a=this;a.ownerElement=t};const a=t.properties||{},n=Object.keys(a),i=Object.getOwnPropertyNames(t.prototype);t.prototype.methodNames=i;for(let i=0;i<n.length;i+=1){const o=n[i],r=a[o];Object.defineProperty(t.prototype,o,{configurable:!1,enumerable:!0,get(){const t=this;return t.ownerElement?t.ownerElement[o]:r.value},set(t){const a=this;a.ownerElement[o]=t}})}t.isDefined=!0}getStaticMember(t,a){const n=this,i=window[u][n.elementName],o=i[t];a||(a="");let r="array"===a?[]:"string"===a?"":{},l=Object.getPrototypeOf(i),s=[];for(;l[t];)s.push(l[t]),l=Object.getPrototypeOf(l);for(let n=s.length-1;0<=n;n--)if("array"===a)for(let t=0;t<s[n].length;t++)-1===r.indexOf(s[n][t])&&r.push(s[n][t]);else"string"===a?-1===r.indexOf(s[n])&&(r+=s[n]):r=Utilities.Core.assign(r,s[n]);if("array"===a){for(let t=0;t<o.length;t++)-1===r.indexOf(o[t])&&r.push(o[t]);return r}return"string"===a?(-1===r.indexOf(o)&&(r+=o),r):Utilities.Core.assign(r,o)}defineElementHierarchicalProperties(t,a){const n=this,i=[];(function(t){const n=Object.keys(t);for(let o=0;o<n.length;o++){const r=n[o];if("messages"===r)continue;const l=t[r],s=Object.keys(l),d=0<=s.indexOf("value")&&0<=s.indexOf("type")&&"object"==typeof l.value;if("propertyObject"===l.type||d){const t=function(n,o){if(n.value){const r=Object.keys(n.value);for(let l=0;l<r.length;l++){const s=r[l],d=n.value[s],c=o+"_"+s;if("object"!=typeof d||null===d)break;const m=Object.keys(d),p=0<=m.indexOf("value")&&0<=m.indexOf("type");if(!p)break;if(d.parentPropertyName=o,a){const t=a._properties[c];if(n.value.hasOwnProperty(s))if(!t.isDefined)delete n.value[s];else continue;t.isDefined=!0,Object.defineProperty(n.value,s,{configurable:!1,enumerable:!0,get(){return a._properties[c].value},set(t){a.updateProperty(a,a._properties[c],t)}})}i[c]||(i[c]=d,i.length++),("propertyObject"===d.type||"object"==typeof d.value&&"array"!==d.type)&&(a?t(a._properties[c],c):t(d,c))}}};t(l,r)}}})(t),0<i.length&&!a&&n.defineElementProperties(i)}defineElement(){const t=this,a=t.constructor.prototype,n=t.getStaticMember("properties"),i=Object.getOwnPropertyNames(a);a.extendedProperties={},a.boundProperties={},a.templateListeners={},t.defineElementModules(),t.defineElementMethods(i,a),t.defineElementProperties(n),t.defineElementHierarchicalProperties(t.extendedProperties),a._initElement=function(){const t=this,n=a.extendedProperties,o=Object.keys(n),r=t.modules;t.$=Utilities.Extend(t),t.$document=y,t.smartId=(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase(),t.isCreated||(t.modulesList=[],t._properties=[],t._beforeCreatedProperties&&(t._properties=t._beforeCreatedProperties,delete t._beforeCreatedProperties),t.detachedChildren=[],t.propertyByAttributeName=[]);for(let a=0;a<r.length;a+=1){const n=r[a];let i=new n;i._initModule(t),t.modulesList.push(i)}for(let a=0;a<o.length;a+=1){const i=o[a],r=n[i];let l=r.value;if(t._properties[i])if(void 0!==t._properties[i].notify)continue;else delete t._properties[i];if(C&&"innerHTML"===i&&delete t[i],-1===window.navigator.userAgent.indexOf("PhantomJS")&&t.hasOwnProperty(i)&&(l=t[i],delete t[i]),"array"===r.type&&void 0!==l&&null!==l&&(l=l.slice(0)),"object"===r.type&&void 0!==l&&null!==l&&(Array.isArray(l)?l=l.slice(0):l=Object.assign({},l)),t._properties[i]={name:i,notify:r.notify,allowedValues:r.allowedValues,type:r.type,nullable:r.nullable,reflectToAttribute:r.reflectToAttribute,defaultReflectToAttribute:r.defaultReflectToAttribute,defaultReflectToAttributeConditions:r.defaultReflectToAttributeConditions,value:l,readOnly:r.readOnly,defaultValue:l,attributeName:r.attributeName,observer:r.observer,inherit:r.inherit,extend:r.extend,validator:r.validator},t.propertyByAttributeName[r.attributeName]=t._properties[i],!r.hasOwnProperty("type")){const a=t.localize("propertyUnknownType",{name:i});t.log(a)}if("any"===r.type||"propertyObject"===r.type)continue;const s=Utilities.Types.getType(l);if(void 0!==l&&null!==l&&r.type!==s&&!r.validator){if("object"===r.type&&"array"===s)continue;if("number"===s){const t=["integer","int","float"].findIndex(t=>t===r.type);if(0<=t)continue}const a=t.localize("propertyInvalidValueType",{name:i,actualType:s,type:r.type});t.log(a)}}t.defineElementHierarchicalProperties(t._properties,t),t.isCreated=!0},a.registered()}defineElementMethods(t,a){const n=this,i=n.constructor.prototype,o=function(t,a){const n=Array.prototype.slice.call(arguments,2),i=function(){if(!this.isReady&&"localize"!==a&&"log"!==a&&"parseAttributes"!==a){const t=this.localize("elementNotInDOM");this.log(t)}let i=this;for(let t=0,n;t<this.modulesList.length;t++)if(n=this.modulesList[t],a in n){i=n;break}const o=this.context,r=n.concat(Array.prototype.slice.call(arguments));let l=null;const s=function(t,a){return t===a||"number"===t&&("int"===a||"integer"===a||"float"===a)||"bool"===t&&"boolean"===a||"boolean"===t&&"bool"===a||"object"===t&&"any"===a||void 0};if(this.methods){const t=this.methods[a];if(t){const n=t.split(":");l=n[n.length-1].trim();const i=t.substring(1+t.indexOf("("),t.lastIndexOf(")")),o=[],d=i.split(",");let c="";for(let t=0;t<d.length;t++){const a=d[t];c+=a,0<=a.indexOf(":")?(o.push(c),c=""):c+=","}let p=o.length;for(let t=0;t<o.length;t++){const n=o[t].trim(),i=n.split(":"),l=i[0].split("=")[0].trim(),d=0<=l.indexOf("?"),c=0<=i[1].indexOf("?"),m=i[1].replace(/\?/ig,"").trim(),u=m.split("|");let g=i[0].split("=")[1];const h=Utilities.Types.getType(r[t]);if(void 0===r[t]&&g){switch(g=g.trim(),m[0]){case"date":{let t=g.substring(g.indexOf("(")+1,g.lastIndexOf(")"));t=0<t.length?t.split(",").map(t=>parseInt(t)):[],g=0===t.length?new Date:new Date(t[0],t[1],t[2]);break}case"bool":case"boolean":g="true"===g||"1"===g;break;case"int":case"integer":g=parseInt(g);break;case"float":case"number":g=parseFloat(g);break;case"any":case"object":g=0<=g.indexOf("{")?JSON.parse(g):g;}r.push(g)}else d&&p--;if(m!==h&&h){let n=!0;for(let t=0;t<u.length;t++)if(s(h,u[t])){n=!1;break}if(n&&!(null===r[t]&&c)){const n=this.localize("methodInvalidValueType",{name:a,actualType:h,type:m,argumentIndex:t});this.log(n)}}if(r.length<p){const t=this.localize("methodInvalidArgumentsCount",{name:a,actualArgumentsCount:r.length,argumentsCount:p});this.log(t)}}}}this.context=this;const d=t.apply(i,r);if(l){const t=void 0===Utilities.Types.getType(d)?"void":Utilities.Types.getType(d);if(!s(t,l)){const n=this.localize("methodInvalidReturnType",{name:a,actualType:t,type:l});this.log(n)}}return this.context=o,d};return i},r=["constructor","ready","created","attached","detached","appendChild","insertBefore","removeChild","connect","disconnectedCallback","connectedCallback","attributeChangedCallback","propertyChangedHandler"];for(let n in t){let l=t[n];l.startsWith("_")||void 0!==r.find(t=>t===l)||!i.extendedProperties[l]&&Utilities.Types.isFunction(a[l])&&(i[l]=o(a[l],l))}}defineElementProperties(t){if(!t)return;const a=this,n=a.constructor.prototype,o=Object.keys(t),r=a.getStaticMember("properties");Object.assign(n.extendedProperties,t),a.updateProperty=function(t,a,n){const i=t;if(!a||a.readOnly)return;if(a.allowedValues){let t=!1;for(let o=0;o<a.allowedValues.length;o++)if(a.allowedValues[o]===n){t=!0;break}if(!t){const t=JSON.stringify(a.allowedValues).replace(/\[|\]/gi,"").replace(",",", ").replace(/"/gi,"'"),o="'"+n+"'",r=i.localize("propertyInvalidValue",{name:a.name,actualValue:o,value:t});return void i.log(r)}}const o=a.name,r=i._properties[o].value;if(a.validator&&i[a.validator]){const t=i.context;i.context=i;const o=i[a.validator](r,n);void 0!==o&&(n=o),i.context=t}if(r!==n){if(i.propertyChanging){const t=i.propertyChanging(o,r,n);if(!1===t||null===t)return}if(!a.hasOwnProperty("type")){const t=i.localize("propertyUnknownType",{name:o});i.log(t)}if("array"!==a.type||JSON.stringify(r)!==JSON.stringify(n)){if(void 0!==n&&null!==n&&"any"!==a.type&&"propertyObject"!==a.type&&a.type!==Utilities.Types.getType(n)&&!a.validator||null===n&&!a.nullable){let t=!0;if("object"===a.type&&"array"===Utilities.Types.getType(n)&&(t=!1),"number"===Utilities.Types.getType(n)){const n=["integer","int","float"].findIndex(t=>t===a.type);0<=n&&(t=!1)}if(t){const t=i.localize("propertyInvalidValueType",{name:o,actualType:Utilities.Types.getType(n),type:a.type});return void i.error(t)}}a.isUpdating=!0,i._properties[o].value=n,!a.isUpdatingFromAttribute&&a.reflectToAttribute&&i.$.setAttributeValue(a.attributeName,n,a.type);const t=i.isReady&&(!i.ownerElement||i.ownerElement&&i.ownerElement.isReady);if(t){if("wait"!==o||n||!r||i.isCompleted||(i.classList.remove("smart-visibility-hidden"),i.complete()),i.context!==i&&!i.wait){const t=i.context;i.context=i,i.propertyChangedHandler(o,r,n),i.context=t,a.observer&&i[a.observer]&&(i.context=i,i[a.observer](r,n),i.context=document),i._watch&&0<=i._watch.properties.indexOf(o)&&i._watch.propertyChangedCallback(o,r,n)}const t=a.notify||i.boundProperties[o];t&&(i.$.fireEvent(a.attributeName+"-changed",{context:i.context,oldValue:r,value:i[o]}),i.boundProperties[o]&&i.updateBoundNodes(o)),t&&i.templateProperties&&i.templateProperties[o]&&i.refreshTemplate(),i.dataContextProperties&&("dataContext"===o?i.applyDataContext():i.dataContextProperties[o]&&i.updateDataContextProperty(o))}a.isUpdating=!1}}};for(let a=0;a<o.length;a+=1){const i=o[a],l=t[i],s=Utilities.Core.toDash(i),d=l.type||"any",c=0<=d.indexOf("?")||"any"===d;(c&&"any"!==d&&(l.type=d.substring(0,d.length-1)),l.nullable=c,l.attributeName=s.toLowerCase(),l.name=i,l.reflectToAttribute=void 0===l.reflectToAttribute||l.reflectToAttribute,l.inherit&&r[i]&&(l.value=r[i].value),l.extend&&r[i]&&Utilities.Core.assign(l.value,r[i].value),!n.hasOwnProperty(i))&&Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get(){const t=this;return t._properties[i]?t._properties[i].value:void 0},set(t){const a=this;a.updateProperty(a,a._properties[i],t)}})}}}let b=[],v=[],x=[],C=!1;const S=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(S){const t=parseInt(S[2],10);50>=t&&(C=!0)}const w=function(){if("complete"===document.readyState){x.sort(function(t,a){let n=t.element.parents.length,i=a.element.parents.length;return n<i?-1:n>i?1:0});for(let t=0;t<x.length;t++)x[t].element.isLoading=!1,x[t].callback();x=[],document.removeEventListener("readystatechange",w)}};document.addEventListener("readystatechange",w);class BaseCustomElement extends BaseElement{static get observedAttributes(){let t=this,a=["external-style"];for(let n in t.prototype.extendedProperties){const i=t.prototype.extendedProperties[n];a.push(i.attributeName)}return a}static get styleUrls(){return["smart.variables.css","smart.common.css"]}static get styles(){return""}get styleUrl(){return this._styleUrl}set styleUrl(t){this._styleUrl=t}get enableShadowDOM(){return window[u].EnableShadowDOM}importStyle(t,a){const n=this;if(n.shadowRoot&&t){const i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=t,i.onload=a,n.shadowRoot.insertBefore(i,n.shadowRoot.firstChild)}}attributeChanged(t,a,n){"style-url"===t&&(this.styleUrl=n)}attributeChangedCallback(t,a,n){const i=this;i.isReady&&super.attributeChangedCallback(t,a,n)}constructor(t,a){super();const n=this;if(t&&(a&&(n._initProperties=a),document.querySelector(t))){const a=document.querySelector(t);return a instanceof HTMLDivElement&&(a.__proto__=n.__proto__,a.created(),a.connectedCallback()),a}n._styleUrl="",window[u].EnableShadowDOM&&n.enableShadowDOM&&n.attachShadow({mode:"open"});n.isUtilityElement||n.created()}connect(){const t=this,a=t.isReady;let n;if(!a&&0<t.children.length&&t.children[0]instanceof HTMLStyleElement&&(n=t.children[0],t.removeChild(n)),(!t.shadowRoot||a&&t.shadowRoot)&&t.setup(),!a&&t.shadowRoot){n&&t.shadowRoot.insertBefore(n,t.shadowRoot.firstChild),t.importStyle(t._styleUrl);const a=t.getStaticMember("styleUrls","array"),i=t.getStaticMember("styles","string");let o=0;t.classList.add("smart-element-init");for(let n=0;n<a.length;n++)t.importStyle(Utilities.Core.getScriptLocation()+window[u].StyleBaseUrl+a[n],function(){o++,o===a.length&&(t.whenReady(function(){t.classList.remove("smart-element-init")}),t.setup())});if(i){const a=document.createElement("style");a.innerHTML=i,t.shadowRoot.insertBefore(a,t.shadowRoot.firstChild)}}}connectedCallback(){const t=this;if(t.isLoading||t.isUtilityElement)return;t.classList.add("smart-element-init");const a=function(){t.classList.remove("smart-element-init")};"complete"===document.readyState?(a(),t.connect()):(t.isLoading=!0,x.push({element:this,callback:function(){this.isReady||(a(),this.connect())}.bind(t)}))}disconnectedCallback(){const t=this;t.isAttached&&t.detached()}adoptedCallback(){const t=this;t.setup()}appendTemplate(t){const a=this;a.shadowRoot?a.shadowRoot.appendChild(t):a.appendChild(t)}}class ElementRegistry{static register(t,a){const n=a.prototype;let i=Core.toCamelCase(t).replace(/[a-z]+/,""),o=a.version||window[u].Version;if(!(window.customElements.get(t)&&window.customElements.get(t).version===o)){let r=t;for(o=o.split(".");window.customElements.get(t);)t=r+"-"+o.join("."),o[2]=parseInt(o[2])+1;b[t]||(b[t]=window[u][i]=a,n.elementName=i,n.defineElement(),v[t]&&v[t](n),window.customElements.define(t,a))}}static registerElements(){const t=this;if(t.toRegister){t.isRegistering=!0;for(let a=0;a<t.toRegister.length;a++){const n=t.toRegister[a];t.register(n.tagName,n.element)}t.isRegistering=!1}}static get(t){return b[t]?b[t]:void 0}static whenRegistered(t,a){if(!t)throw new Error("Syntax Error: Invalid tag name");const n=this,i=v[t],o=n.get(t),r=o?o.modules.length:3;try{i||o?!i&&o?(a(o.prototype),v[t]=void 0):i&&!o?v[t]=function(t){i(t),a(t)}:i&&o&&(o.proto&&(i(o.proto),a(o.proto)),v[t]=void 0):v[t]=function(t){try{a(t)}catch(t){const a=t instanceof Error?t.message:t.toString();console.log(a)}}}catch(t){const a=t instanceof Error?t.message:t.toString();console.log(a)}if(o&&r!==o.prototype.modules.length){const a=document.querySelectorAll(t);for(let t=0;t<a.length;t++){const n=a[t];n.isCreated&&n._initElement()}}}}ElementRegistry.lazyRegister=!1,ElementRegistry.tagNames=[];class Observable{constructor(t,a){const n=this;this.name="observable",t&&Object.assign(n,t);(function(t){Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(a=>"constructor"===a||!!a.startsWith("_")||void(n[a]=t[a]))})(t);const i=new Proxy(n,{deleteProperty:function(t,a){return delete t[a],!0},get:function(t,a){return t[a]},set:function(t,i,o){const r=t[i];return!(r!==o)||!(t[i]=o,!("notifyFn"===i||i.startsWith("_")||"canNotify"===i))||!!(a&&-1===a.indexOf(i))||!n.canNotify||(n._notify({target:t,propertyName:i,oldValue:r,newValue:o}),!0)}});return i}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const a=this;a._canNotify=t}_notify(t){const a=this;if(a.canNotify&&a.notifyFn)for(let n=0;n<a.notifyFn.length;n++)a.notifyFn[n](t)}notify(t){const a=this;t&&(!a.notifyFn&&(a.notifyFn=[]),a.notifyFn.push(t))}}class ObservableArray{constructor(){const t=this;t.name="observableArray",t.observables=3>arguments.length?null:arguments[2];const a=new Proxy(t,{deleteProperty:function(t,a){return delete t[a],!0},apply:function(t,a,n){return t.apply(a,n)},get:function(a,n){return a[n]||isNaN(parseInt(n))?a[n]:t.getItem(parseInt(n))},set:function(a,n,i){return a[n]||isNaN(parseInt(n))?(a[n]=i,!0):(t.setItem(parseInt(n),i),!0)}});if(t._addArgs={eventName:"change",object:a,action:"add",index:null,removed:[],addedCount:1},t._removeArgs={eventName:"change",object:a,action:"remove",index:null,removed:null,addedCount:0},1<=arguments.length&&Array.isArray(arguments[0])){t._array=[];const a=arguments[0];for(let n=0,i=a.length;n<i;n++){const i=t._getItem(t._array.length,a[n]);t._array.push(i)}}else t._array=Array.apply(null,arguments);return 2===arguments.length&&(t.notifyFn=arguments[1]),a}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const a=this;a._canNotify=t}_notify(t){const a=this;!a.canNotify||a.notifyFn&&a.notifyFn(t)}notify(t){const a=this;t&&(a.notifyFn=t)}toArray(){const t=this;return t._array}_getItem(t,a){const n=this;if("string"==typeof a)return a;if("number"==typeof a)return a;if(void 0===a)return a;const i=new Proxy(a,{deleteProperty:function(t,a){delete t[a]},set:function(a,i,o){const r=a[i];return!(a[i]=o,!!n._canNotify)||!(!n.observables||n.observables[i])||(n._notify({eventName:"change",object:n,target:a,action:"update",index:t,path:t+"."+i,oldValue:r,newValue:o,propertyName:i}),!0)}});return i}getItem(t){return this._array[t]}setItem(t,a){const n=this,i=n._array[t];n._array[t]=n._getItem(t,a),n._notify({eventName:"change",object:this,action:"update",index:t,removed:[i],addedCount:1})}get length(){return this._array.length}set length(t){const a=this;Types.isNumber(t)&&a._array&&a._array.length!==t&&a.splice(t,a._array.length-t)}toString(){const t=this;return t._array.toString()}toLocaleString(){const t=this;return t._array.toLocaleString()}concat(){const t=this;t._addArgs.index=t._array.length;const a=t._array.concat.apply(t._array,arguments);return new Smart.ObservableArray(a)}join(t){const a=this;return a._array.join(t)}pop(){const t=this;t._removeArgs.index=t._array.length-1,delete t[t._array.length-1];const a=t._array.pop();return t._removeArgs.removed=[a],t._notify(t._removeArgs),t._notifyLengthChange(),a}push(){const t=this;if(t._addArgs.index=t._array.length,1===arguments.length&&Array.isArray(arguments[0])){const a=arguments[0];for(let n=0,i=a.length;n<i;n++){const i=t._getItem(t._array.length,a[n]);t._array.push(i)}}else{const a=t._getItem(t._addArgs.index,arguments[0]);t._array.push.apply(t._array,[a])}return t._addArgs.addedCount=t._array.length-t._addArgs.index,t._notify(t._addArgs),t._notifyLengthChange(),t._array.length}_notifyLengthChange(){const t=this;if(t.canNotify){const a=t._createPropertyChangeData("length",t._array.length);t._notify(a)}}_createPropertyChangeData(t,a,n){return{eventName:"change",object:this,propertyName:t,value:a,oldValue:n}}reverse(){const t=this;return t._array.reverse()}shift(){const t=this,a=t._array.shift();return t._removeArgs.index=0,t._removeArgs.removed=[a],t._notify(t._removeArgs),t._notifyLengthChange(),a}slice(t,a){const n=this;return n._array.slice(t,a)}sort(t){const a=this;return a._array.sort(t)}splice(t,a,n){const i=this,o=i._array.length,r=i._array.splice.apply(i._array,arguments);return n?i._notify({eventName:"change",object:this,action:"add",index:t,added:r,addedCount:i._array.length>o?i._array.length-o:0}):i._notify({eventName:"change",object:this,action:"remove",index:t,removed:r,addedCount:i._array.length>o?i._array.length-o:0}),i._array.length!==o&&i._notifyLengthChange(),r}unshift(){const t=this,a=t._array.length,n=t._array.unshift.apply(t._array,arguments);return t._addArgs.index=0,t._addArgs.addedCount=n-a,t._notify(this._addArgs),t._notifyLengthChange(),n}indexOf(t,a){const n=this,o=a?a:0;for(let r=o,i=n._array.length;r<i;r++)if(n._array[r]===t)return r;return-1}lastIndexOf(t,a){const n=this,o=a?a:n._array.length-1;for(let r=o;0<=r;r--)if(n._array[r]===t)return r;return-1}find(t,a){const n=this;return n._array.find(t,a)}findIndex(t,a){const n=this;return n._array.findIndex(t,a)}every(t,a){const n=this;return n._array.every(t,a)}some(t,a){const n=this;return n._array.some(t,a)}forEach(t,a){const n=this;n._array.forEach(t,a)}map(t,a){const n=this;return n._array.map(t,a)}filter(t,a){const n=this,i=n._array.filter(t,a);return i}reduce(t,a){const n=this;return a===void 0?n._array.reduce(t):n._array.reduce(t,a)}reduceRight(t,a){const n=this;return a===void 0?n._array.reduceRight(t):n._array.reduceRight(t,a)}}let T={};window[u]&&(T=window[u]),window[u]=function(a,n){let i=a;if(a){if(0<=a.indexOf("#")||0<=a.indexOf("."))return f[a]?f[a]:n?(f[a]=new n,t(a,f[a]),f[a]):void 0;if(n){if(ElementRegistry.tagNames[a]=n,ElementRegistry.lazyRegister){ElementRegistry.toRegister||(ElementRegistry.toRegister=[]);const t=Core.toCamelCase(i).replace(/[a-z]+/,"");return window[u][t]=n,void ElementRegistry.toRegister.push({tagName:i,element:n})}ElementRegistry.register(i,n)}}},window.addEventListener("load",function(){const t=window[u].Elements.tagNames;for(let a in t){const n=t[a];let i=document.querySelectorAll("["+a+"]");for(let t=0;t<i.length;t++){const a=i[t];a instanceof HTMLDivElement&&(a.__proto__=n.prototype,a.created(),a.connectedCallback()),a.classList.add("smart-element-ready")}}});class App{constructor(t){const a=this;a._template=t.template||{},a._id=t.id||window[u].Utilities.Core.createGUID(),a._data=t.data,a._appRoot=document.getElementById(a._id),a._appRoot||(a._appRoot=document.body),a._addAttributeBindings(),a._renderForBindings(),a._addModelBindings(),a._observeData(),a.render()}_addAttributeBindings(t,n){const i=this,o=new BindingModule,r=t?o.getBindings(t):o.getBindings(i._appRoot);n||(n="");const l=function(){return a(65536*(1+Math.random())).toString(16).substring(1)},s=function(t){const a=function(t){if(t.data){let a=t.node.id;for(let o in a||(t.node.id=a="id"+l()),t.data){const r=t.data[o];if("textContent"==o&&(t.node.parentNode.id?a=t.node.parentNode.id:(t.node.id="",t.node.parentNode.id=a)),r.isEvent){const t={};t[r.name]=r.value,i._addListenerBinding(a,t)}else{const t={};t[o]=n+r.name,i._addTemplateBinding(a,t)}}}};for(let n in a(t),t.children){const i=t.children[n];i.node&&i.node.getAttribute&&i.node.getAttribute("smart-for")&&null===i.node.getAttribute("smart-for-rendered")||(a(i),i.children&&s(i))}};s(r)}get template(){return this._template}set template(t){this._template=t,this.render()}get id(){return this._id}set id(t){this._id=t}get data(){return this._data}set data(t){const a=this;a._data=t,a._observeData(),a.render()}_addTemplateBinding(t,a){const n=this;n.template["#"+t]?n.template["#"+t].bind?Object.assign(n.template["#"+t].bind,a):n.template["#"+t].bind=a:n.template["#"+t]={bind:a}}_addListenerBinding(t,a){const n=this;n.template["#"+t]?n.template["#"+t].listeners?Object.assign(n.template["#"+t].listeners,a):n.template["#"+t].listeners=a:n.template["#"+t]={listeners:a}}_updateDataFromBooleanElement(t,a){const n=this,i=a.checked,o=n.data[i];if(!(t.value&&"on"!==t.value))n.data[i]=t.checked;else if(!(Array.isArray(o)||"observableArray"===o.name))"radio"===t.type?t.checked&&(n.data[i]=t.value):t.checked?n.data[i]=t.value:n.data[i]="";else if(t.checked)o.push(t.value);else{const a=o.indexOf(t.value);0<=a&&o.splice(a,1)}}_updateDataFromNativeElement(t,a){const n=this;if("SELECT"===t.tagName&&t.addEventListener("change",function(){const i=a.value;let o=n.data[i];if(t.__updating=!0,Array.isArray(o)||"observableArray"===o.name){if(o=new ObservableArray,t.selectedOptions)for(let a=0;a<t.selectedOptions.length;a++){const n=t.selectedOptions[a];o.push(n.value)}n.data[i]=o}else n.data[i]=t.value;t.__updating=!1}),"INPUT"===t.tagName||"TEXTAREA"===t.tagName){t.addEventListener("change",function(){t.__updating=!0,i?n._updateDataFromBooleanElement(t,a):n.data.value=t.value,t.__updating=!1});let i="checkbox"===t.type||"radio"===t.type;i||t.addEventListener("keyup",function(){const i=a.value;n.data[i]=t.value})}}_addModelBindings(t){const a=this,n=t?t.querySelectorAll("[smart-model]"):a._appRoot.querySelectorAll("[smart-model]");for(let o=0;o<n.length;o++){const t=n[o];let i={value:t.getAttribute("smart-model")};"list"===t.type&&(i={selectedValues:t.getAttribute("smart-model")}),("checkbox"===t.type||"radio"===t.type)&&(i={checked:t.getAttribute("smart-model")}),t.id||(t.id="id"+Smart.Utilities.Core.createGUID().replace(/-/ig,"")),a._updateDataFromNativeElement(t,i),a._addTemplateBinding(t.id,i)}}_renderForBindings(t){const a=this,n=a._appRoot.querySelectorAll("[smart-for]");for(let o=0;o<n.length;o++){const t=n[o],i=t.getAttribute("smart-for"),r=a.data[i];t.id||(t.id="id"+Smart.Utilities.Core.createGUID().replace(/-/ig,"")),t.setAttribute("smart-for-rendered","");const l=null!==t.getAttribute("smart-for-self"),s=l?t.parentNode.querySelectorAll(".smart-for-item-"+t.id):t.querySelectorAll(".smart-for-item-"+t.id);for(let t=0;t<s.length;t++)a.template[s[t].id]&&delete a.template[s[t].id],s[t].remove();const d=l?t:t.firstElementChild,c=document.createDocumentFragment();for(let a=0;a<r.length;a++){const n=d.cloneNode(!0);n.style.display="",n.id=t.id+"_"+a,n.classList.add("smart-for-item"),n.classList.add("smart-for-item-"+t.id),n.removeAttribute("smart-for"),c.appendChild(n)}d.style.display="none",l?t.parentNode.insertBefore(c,t.nextSibling):t.appendChild(c);let m=a._appRoot.querySelectorAll(".smart-for-item-"+t.id);for(let t=0;t<m.length;t++){const n=m[t];a._addAttributeBindings(n,i+"."+t+".")}}t&&0<n.length&&a.render()}notify(t){const a=this;a.notifyFn=t}_notify(t){const a=this;if("length"===t.propertyName)return;a.notifyFn&&a.notifyFn(t);let n=t.propertyName;for(let i in t.object&&(n=t.object.propertyName),a.template){const t=a.template[i];let o=null;for(let a in t.bind)if(0<=t.bind[a].indexOf(n)){o=a;break}o&&a._setPropertyFromData(t,o)}a._renderForBindings(!0)}_observeData(){const t=this;for(let a in t._data=new window[u].Observable(t._data),t._data.canNotify=!1,t._data.notify(t._notify.bind(t)),t.data){if("function"==typeof t.data[a])continue;if(a.startsWith("_")||"notifyFn"==a||"canNotify"==a||"name"==a)continue;const n=t.data[a];Array.isArray(n)?(t.data[a]=new Smart.ObservableArray(t.data[a]),t.data[a].canNotify=!1,t.data[a].notify(t._notify.bind(t)),t.data[a].canNotify=!0,t.data[a].propertyName=a):"object"==typeof n&&(t.data[a]=new Smart.Observable(t.data[a]),t.data[a].canNotify=!1,t.data[a].notify(t._notify.bind(t)),t.data[a].canNotify=!0,t.data[a].propertyName=a)}t._data.canNotify=!0}_setPropertyFromData(t,a){const n=this;if(t.element.__updating)return;const i=t.bind[a],o=i?i.split("."):[];let r=n.data;for(let n=0;n<o.length;n++){const t=o[n];if("string"==typeof r)break;if(void 0===r[t])break;r=r[t]}t.element.__updatingProperties=!0,i&&r!==void 0?"observableArray"===r.name?"checkbox"===t.element.type?t.element[a]=0<=r.indexOf(t.element.value):t.element[a]=r.toArray().slice(0):"radio"===t.element.type?t.element.value===r?t.element[a]=!0:t.element[a]=!1:t.element[a]=r:t.properties&&(t.element[a]=t.properties[a]),t.element.__updatingProperties=!1}render(){const t=this;for(let a in t.template){const n=t.template[a],i=n.element?n.element:document.querySelector(a),o=n.properties,r=n.listeners,l=n.bind;if(!i)continue;for(let a in n.element=i,o){const o=i._properties[a];o.notify=!0,t._setPropertyFromData(n,a)}for(let a in l){const o=i._properties?i._properties[a]:null;o&&(o.notify=!0),t._setPropertyFromData(n,a)}const s=function(a){for(let n in r)i.$||(i.$=Smart.Utilities.Extend(i)),i.$[a](n,function(a){const i=r[n];t.data[i]&&t.data[i](a)});for(let n in l){const o=i._properties?i._properties[n]:null;if(o){const r=function(a){if(!i.__updatingProperties){i.__updating=!0;const o=function(t){if("radio"===i.type){const a=i.parentNode.querySelectorAll("[type=\"radio\"]");for(let n=0;n<a.length;n++)a[n].__updating=t}};o(!0);const r=l[n];if("radio"===i.type||"toggle"===i.type||"checkbox"===i.type)t._updateDataFromBooleanElement(i,l);else{(function(t,a,n){var o;for(o=0;o<a.length-1;o++)t=t[a[o]];t[a[o]]=n})(t.data,r.split("."),a.detail.value)}i.__updating=!1,o(!1)}};"textarea"===i.type&&i.$[a]("input.keyup",function(t){const a=new CustomEvent("keyup",{detail:{originalEvent:t,value:i.$.input.value}});r(a)}),i.$[a](o.attributeName+"-changed",function(t){r(t)})}else;}};s("unlisten"),s("listen"),i.onAttached=function(){s("listen")},i.onDetached=function(){s("unlisten")}}}}Object.assign(window[u],{Elements:ElementRegistry,Modules:[ErrorModule,LocalizationModule,BindingModule],BaseElement:BaseCustomElement,Utilities:Utilities,Import:function(t,a){let n=0;const o=function(t,a){return new Promise(n=>{const i=document.createElement("script");i.src=t,i.onload=n;for(let t=0;t<document.head.children.length;t++){const i=document.head.children[t];if(i.src&&0<=i.src.toString().indexOf(a))return void n()}document.head.appendChild(i)})};return new Promise(i=>{const r=Utilities.Core.getScriptLocation(),l=function(a){if(t[a]){const s=r+"/"+t[a];o(s,t[a]).then(function(){n++,n===t.length&&i(),l(a+1)})}};if(a)for(let a=0;a<t.length;a++){const l=r+"/"+t[a];o(l,t[a]).then(function(){n++,n===t.length&&i()})}else l(0)})},ObservableArray:ObservableArray,Observable:Observable,App:App,Component:class{constructor(t,a,n){let i=document.querySelector(t);return i||(i=document.querySelector(a)),window[u](t,class{get properties(){return n}}),i}},Theme:T.Theme||"",EnableShadowDOM:!1,StyleBaseUrl:"/styles/default/scoped/",Version:"3.0.0"});let D=window[u].Theme;Object.defineProperty(window[u],"Theme",{configurable:!1,enumerable:!0,get(){return D},set(t){const a=D;D=t,y.fireEvent("theme-changed",{oldValue:a,newValue:t},{bubbles:!0,cancelable:!0})}}),window[u]("smart-base-element",window[u].BaseElement),window[u]("smart-content-element",class extends window[u].BaseElement{static get properties(){return{content:{type:"any",reflectToAttribute:!1},innerHTML:{type:"string",reflectToAttribute:!1}}}template(){return"<div inner-h-t-m-l='[[innerHTML]]'></div>"}ready(){super.ready();const t=this;t.applyContent()}clearContent(){for(const t=this;t.$.content.firstChild;)t.$.content.removeChild(t.$.content.firstChild)}applyContent(){const t=this;if(void 0===t.content)return void(t.content=t.$.content);if(""===t.content||null===t.content)return void t.clearContent();if(t.content instanceof HTMLElement)return t.clearContent(),void t.$.content.appendChild(t.content);const a=document.createDocumentFragment();let n=document.createElement("div");a.appendChild(n),t.content instanceof HTMLElement?n.appendChild(t.content):n.innerHTML=t.content;let o=Array.from(n.childNodes);n.parentNode.removeChild(n);for(let t=0;t<o.length;t++)a.appendChild(o[t]);t.clearContent(),t.$.content.appendChild(a)}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;a===n||("innerHTML"===t&&(i.content=n,i.applyContent(),i.innerHTML=i.content=Utilities.Core.html(i.$.content)),"content"===t&&i.applyContent())}}),window[u]("smart-scroll-viewer",class extends window[u].ContentElement{static get properties(){return{horizontalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]},verticalScrollBarVisibility:{type:"string",value:"auto",allowedValues:["auto","disabled","hidden","visible"]}}}static get listeners(){return{"horizontalScrollBar.change":"_horizontalScrollbarHandler","verticalScrollBar.change":"_verticalScrollbarHandler",wheel:"_mouseWheelHandler"}}template(){return`<div id="container" class="smart-container">
                    <div id="scrollViewerContainer" class ="smart-scroll-viewer-container">
                      <div id="scrollViewerContentContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-scroll-viewer-content-container">
                          <content></content>
                      </div>
                    </div>
                    <smart-scroll-bar id="verticalScrollBar" animation="[[animation]]" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>
                    <smart-scroll-bar id="horizontalScrollBar" animation="[[animation]]" disabled="[[disabled]]"></smart-scroll-bar>
                </div>`}appendChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t&&a.$.scrollViewerContentContainer.appendChild(t)}removeChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t&&a.$.scrollViewerContentContainer.removeChild(t)}removeAll(){const t=this;t.isCompleted&&(t.$.scrollViewerContentContainer.innerHTML="")}_horizontalScrollbarHandler(t){const a=this;a.$.scrollViewerContentContainer.style.left=-a.scrollLeft+"px",t.stopPropagation(),a.onHorizontalChange&&a.onHorizontalChange()}_verticalScrollbarHandler(t){const a=this;a.$.scrollViewerContentContainer.style.top=-a.scrollTop+"px",t.stopPropagation(),a.onVerticalChange&&a.onVerticalChange()}_mouseWheelHandler(t){const a=this;!a.disabled&&(a.computedHorizontalScrollBarVisibility||a.computedVerticalScrollBarVisibility)&&(a.computedVerticalScrollBarVisibility?(t.stopPropagation(),t.preventDefault(),0<a.scrollHeight&&a.scrollTo(a.scrollTop+(0>t.deltaY?-a.offsetHeight:a.offsetHeight))):a.computedHorizontalScrollBarVisibility&&(t.stopPropagation(),t.preventDefault(),0<a.scrollWidth&&a.scrollTo(void 0,a.scrollLeft+(0>t.deltaY?-a.offsetWidth:a.offsetWidth))))}applyContent(){const t=this;super.applyContent(),t.refresh()}get computedHorizontalScrollBarVisibility(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?!t._scrollView.hScrollBar.$.hasClass("smart-hidden"):null}get computedVerticalScrollBarVisibility(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?!t._scrollView.vScrollBar.$.hasClass("smart-hidden"):null}scrollTo(t,a){const n=this;n._scrollView&&(t!==void 0&&n._scrollView.scrollTo(t),a!==void 0&&n._scrollView.scrollTo(a,!1))}refreshScrollBarsVisibility(){const t=this;t._scrollView&&(t._scrollView.hScrollBar.disabled=t.disabled,t._scrollView.vScrollBar.disabled=t.disabled,"disabled"===t.horizontalScrollBarVisibility&&(t._scrollView.hScrollBar.disabled=!0),"disabled"===t.verticalScrollBarVisibility&&(t._scrollView.vScrollBar.disabled=!0),0<t.scrollWidth?t._scrollView.hScrollBar.$.removeClass("smart-hidden"):"visible"!==t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.addClass("smart-hidden"),0<t.scrollHeight?t._scrollView.vScrollBar.$.removeClass("smart-hidden"):"visible"!==t.verticalScrollBarVisibility&&t._scrollView.vScrollBar.$.addClass("smart-hidden"),"hidden"===t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.addClass("smart-hidden"),"hidden"===t.verticalScrollBarVisibility&&t._scrollView.vScrollBar.$.addClass("smart-hidden"),"visible"===t.horizontalScrollBarVisibility&&t._scrollView.hScrollBar.$.removeClass("smart-hidden"),"visible"===t.verticalScrollBarVisibility&&(t._scrollView.vScrollBar.$.removeClass("smart-hidden"),!t.disabled&&(t._scrollView.vScrollBar.disabled=0>=t.scrollHeight)),t.computedHorizontalScrollBarVisibility&&t.computedVerticalScrollBarVisibility?(t._scrollView.hScrollBar.$.addClass("bottom-corner"),t._scrollView.vScrollBar.$.addClass("bottom-corner")):(t._scrollView.hScrollBar.$.removeClass("bottom-corner"),t._scrollView.vScrollBar.$.removeClass("bottom-corner")))}ready(){super.ready();const t=this;t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar),t.refresh()}refresh(){function t(){return i=n.$.scrollViewerContentContainer.offsetWidth-n.$.scrollViewerContainer.offsetWidth,0<i&&"hidden"!==n.horizontalScrollBarVisibility||"visible"===n.horizontalScrollBarVisibility?n.$.scrollViewerContainer.classList.add("hscroll"):n.$.scrollViewerContainer.classList.remove("hscroll"),i}function a(){return o=n.$.scrollViewerContentContainer.offsetHeight-n.$.scrollViewerContainer.offsetHeight,0<o&&"hidden"!==n.verticalScrollBarVisibility||"visible"===n.verticalScrollBarVisibility?n.$.scrollViewerContainer.classList.add("vscroll"):n.$.scrollViewerContainer.classList.remove("vscroll"),o}const n=this;if(!n.$.scrollViewerContentContainer)return;let i,o;n.scrollWidth=t(),n.scrollHeight=a(),n.scrollHeight||(n.scrollWidth=t()),n.scrollWidth||(n.scrollHeight=a()),n.computedVerticalScrollBarVisibility&&(n.scrollHeight+=n._scrollView.hScrollBar.offsetHeight),n.computedHorizontalScrollBarVisibility&&(n.scrollWidth+=n._scrollView.vScrollBar.offsetWidth)}attached(){const t=this;super.attached(),t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar))}detached(){const t=this;super.detached(),t._scrollView&&(t._scrollView.unlisten(),delete t._scrollView)}get scrollWidth(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?1===t._scrollView.hScrollBar.max&&"visible"===t.horizontalScrollBarVisibility?0:t._scrollView.hScrollBar.max:-1}set scrollWidth(t){const a=this;0>t&&(t=0),a._scrollView&&a._scrollView.hScrollBar&&(a._scrollView.hScrollBar.max=0===t&&"visible"===a.horizontalScrollBarVisibility?0:t,a.refreshScrollBarsVisibility())}get scrollHeight(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?1===t._scrollView.vScrollBar.max&&"visible"===t.verticalScrollBarVisibility?0:t._scrollView.vScrollBar.max:0}set scrollHeight(t){const a=this;0>t&&(t=0),a._scrollView&&a._scrollView.vScrollBar&&(a._scrollView.vScrollBar.max=0===t&&"visible"===a.verticalScrollBarVisibility?1:t,a.refreshScrollBarsVisibility())}get scrollLeft(){const t=this;return t._scrollView&&t._scrollView.hScrollBar?t._scrollView.hScrollBar.value:0}set scrollLeft(t){const a=this;0>t&&(t=0),a._scrollView&&a._scrollView.hScrollBar&&(a._scrollView.hScrollBar.value=t)}get scrollTop(){const t=this;return t._scrollView&&t._scrollView.vScrollBar?t._scrollView.vScrollBar.value:0}set scrollTop(t){const a=this;0>t&&(t=0),a._scrollView&&a._scrollView.vScrollBar&&(a._scrollView.vScrollBar.value=t)}propertyChangedHandler(t,a,n){const i=this;super.propertyChangedHandler(t,a,n),i.refresh()}}),window[u].Utilities.Assign("PositionDetection",class{constructor(t,n,i,o){const r=this;if(n){const i="dropDown"+a(65536*(1+Math.random())).toString(16).substring(1);n.id=i,t.setAttribute("aria-controls",i)}r.context=t,r.dropDown=n,r.defaultParent=i,r.closeMethod=o}handleAutoPositioning(){function t(){r=i(t),("auto"!==n.dropDownPosition||n.disabled||null===n.parentElement)&&cancelAnimationFrame(r);const l=Date.now();200<=l-o&&(a.scrollHandler(),o=Date.now())}const a=this,n=a.context;if("auto"!==n.dropDownPosition||n.disabled)return;const i=(()=>window.requestAnimationFrame)();let o=Date.now(),r;return r=i(t)}checkBrowserBounds(t){const a=this.context;"auto"!==a.dropDownPosition||a.disabled||("vertically"===t?this.checkBrowserBoundsVertically():"horizontally"===t?this.checkBrowserBoundsHorizontally():(this.checkBrowserBoundsVertically(),this.checkBrowserBoundsHorizontally()))}checkBrowserBoundsHorizontally(){const t=this.context,a=this.dropDown;let n=0,o;null===t._dropDownParent?a.style.left="":(o=!0,window.innerWidth!==document.documentElement.clientWidth&&(n=window.innerWidth-document.documentElement.clientWidth));let r=t.getBoundingClientRect().left;if(0>r&&(a.style.left=(o?0:i(r))+"px",r=parseFloat(a.style.left)),r+a.offsetWidth>document.documentElement.clientWidth){const t=r-i(document.documentElement.clientWidth-r-a.offsetWidth);a.style.left=(o?t:t-r)+"px",window.innerWidth===document.documentElement.clientWidth&&(a.style.left=parseFloat(a.style.left)+n+"px"),o&&window.innerHeight===document.documentElement.clientHeight&&this.positionDropDown(!0)}}checkBrowserBoundsVertically(t){const a=this.context,n=this.dropDown,o=a._dropDownListPosition;t||(t=a.getBoundingClientRect());0===t.height||(a._dropDownListPosition=0<=document.documentElement.clientHeight-i(t.top+t.height+n.offsetHeight)?"bottom":0<=t.top-n.offsetHeight?"top":"overlay-center",this.updatePositionAttribute(o,a._dropDownListPosition))}scrollHandler(){const t=this.context;if(t.parentElement){const a=t.getBoundingClientRect();if(a.top!==t._positionTop){const n=t._dropDownListPosition;this.checkBrowserBoundsVertically(a),t._dropDownListPosition!==n&&this.positionDropDown(),t._positionTop=a.top}}}getDropDownParent(t){const a=this.context,n=this.dropDown;let i=a.dropDownAppendTo;a._positionedParent=null,null===i?a._dropDownParent=null:"body"===i||i===document.body?a._dropDownParent=document.body:i instanceof HTMLElement?a._dropDownParent=i:"string"==typeof i?(i=document.getElementById(i),i instanceof HTMLElement?a._dropDownParent=i:(a.dropDownAppendTo=null,a._dropDownParent=null)):(a.dropDownAppendTo=null,a._dropDownParent=null);let o=a._dropDownParent;if(null!==o){for(;"static"===window.getComputedStyle(o).position&&o!==document.body;)o=o.parentElement;a._positionedParent=o===document.body?null:o,n&&(n.setAttribute("animation",a.animation),""!==a.theme&&n.$.addClass(a.theme),t&&(a._dropDownParent.appendChild(n),n.$.addClass("smart-drop-down-repositioned")),-1===a.detachedChildren.indexOf(n)&&a.detachedChildren.push(n))}}dropDownAppendToChangedHandler(){const t=this.context,a=this.dropDown,n=t._dropDownParent;this.getDropDownParent();t._dropDownParent===n||(t[this.closeMethod](),["left","top","font-size","font-family","font-style","font-weight"].forEach(t=>a.style[t]=null),null===t._dropDownParent?(this.defaultParent.appendChild(a),a.$.removeClass("smart-drop-down-repositioned")):(t._dropDownParent.appendChild(a),a.$.addClass("smart-drop-down-repositioned")))}dropDownPositionChangedHandler(){const t=this;t.dropDown.style.transition="none",t.context[t.closeMethod](),t.setDropDownPosition(),t.handleAutoPositioning()}dropDownAttached(t){const a=this.context;null===a._dropDownParent||(a._dropDownParent.appendChild(this.dropDown),this.handleAutoPositioning(),t&&a[t]())}dropDownDetached(){const t=this.context;null!==t._dropDownParent&&t._dropDownParent.removeChild(this.dropDown)}setDropDownPosition(){const t=this.context,a=t.dropDownPosition,n=t._dropDownListPosition;"auto"===a?this.checkBrowserBounds():t._dropDownListPosition=a,this.updatePositionAttribute(n,t._dropDownListPosition)}updatePositionAttribute(t,a){const n=this.context,i=this.dropDown;n.$.dropDownButton&&!n.$.dropDownButton.hasAttribute(a)&&(n.$.dropDownButton.removeAttribute(t),n.$.dropDownButton.setAttribute(a,"")),i.hasAttribute(a)||(i.style.transition="none",i.removeAttribute(t),i.setAttribute(a,""),requestAnimationFrame(function(){i.style.transition=null}))}positionDropDown(t){const a=this.context,n=this.dropDown;if(!a.opened||null===a._dropDownParent)return;const i=a.getBoundingClientRect();let o,r;if(this.customPositionDropDown){const t=this.customPositionDropDown(i);o=t.left,r=t.top}else switch(o=i.left,r=i.top,a._dropDownListPosition){case"bottom":r+=a.$.container.offsetHeight-1;break;case"center-bottom":r+=a.$.container.offsetHeight-1,o+=a.offsetWidth-n.offsetWidth/2;break;case"center-top":r-=n.offsetHeight-1,o+=a.offsetWidth-n.offsetWidth/2;break;case"top":r-=n.offsetHeight-1;break;case"overlay-bottom":break;case"overlay-center":r-=n.offsetHeight/2-a.offsetHeight/2;break;case"overlay-top":r-=n.offsetHeight-a.offsetHeight;}const l=this.getDropDownOffset();n.style.top=r+l.y+"px";t||(n.style.left=o+l.x+"px")}getDropDownOffset(){const t=this.context._positionedParent;let a,n;if(t){const i=t.getBoundingClientRect();a=-i.left,n=-i.top}else a=window.pageXOffset,n=window.pageYOffset;return{x:a,y:n}}placeOverlay(){const t=this.context;if(t.dropDownOverlay&&!t._overlay){const a=document.createElement("div");a.classList.add("smart-drop-down-overlay"),a.style.width=document.documentElement.scrollWidth+"px",a.style.height=document.documentElement.scrollHeight+"px",document.body.appendChild(a),t._overlay=a}}removeOverlay(t){function a(){0<n.dropDown.getBoundingClientRect().height?requestAnimationFrame(a):(document.body.removeChild(i._overlay),delete i._overlay)}const n=this,i=n.context;i._overlay&&(i.hasAnimation&&t?requestAnimationFrame(a):(document.body.removeChild(i._overlay),delete i._overlay))}})})(),Smart.Utilities.Assign("Complex",class{constructor(t,a){if("string"==typeof t)this.complexNumber=this.parseComplexNumber(t),this.realPart=this.complexNumber.realPart,this.imaginaryPart=this.complexNumber.imaginaryPart;else if("number"==typeof t){if(this.realPart=t,"number"==typeof a)this.imaginaryPart=a;else if("undefined"==typeof a)this.imaginaryPart=0;else throw new Error("Can't create complex number: invalid imaginary part");this.complexNumber=this.parseComplexNumber(this.realPart,this.imaginaryPart)}else throw new Error("Can't create complex number")}valueOf(){return 0===this.imaginaryPart?this.realPart:null}isNaN(){return isNaN(this.realPart)||isNaN(this.imaginaryPart)}isZero(){return(0===this.realPart||-0===this.realPart)&&(0===this.imaginaryPart||-0===this.imaginaryPart)}isFinite(){return isFinite(this.realPart)&&isFinite(this.imaginaryPart)}isInfinite(){return!(this.isNaN()||this.isFinite())}parseComplexNumber(t,a){const n={realPart:0,imaginaryPart:0};if(t===void 0||null===t)n.realPart=n.imaginaryPart=0;else if(a!==void 0)n.realPart=t,n.imaginaryPart=a;else switch(typeof t){case"object":if("imaginaryPart"in t&&"realPart"in t)n.realPart=t.realPart,n.imaginaryPart=t.imaginaryPart;else if(2===t.length)n.realPart=t[0],n.imaginaryPart=t[1];else throw SyntaxError("Invalid Complex Number Parameter");break;case"string":{n.imaginaryPart=n.realPart=0;const a=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let o=1,r=0;if(null===a)throw SyntaxError("Invalid Complex Number Parameter");for(let t=0;t<a.length;t++){const i=a[t];if(" "===i||"\t"===i||"\n"===i);else if("+"===i)o++;else if("-"===i)r++;else if("i"===i||"I"===i){if(0===o+r)throw SyntaxError("Invalid Complex Number Parameter");" "===a[t+1]||isNaN(a[t+1])?n.imaginaryPart+=parseFloat((r%2?"-":"")+"1"):(n.imaginaryPart+=parseFloat((r%2?"-":"")+a[t+1]),t++),o=r=0}else{if(0===o+r||isNaN(i))throw SyntaxError("Invalid Complex Number Parameter");"i"===a[t+1]||"I"===a[t+1]?(n.imaginaryPart+=parseFloat((r%2?"-":"")+i),t++):n.realPart+=parseFloat((r%2?"-":"")+i),o=r=0}}if(0<o+r)throw SyntaxError("Invalid Complex Number Parameter");break}case"number":n.imaginaryPart=0,n.realPart=t;break;default:throw SyntaxError("Invalid Complex Number Parameter");}return n}compare(t,a){var n=Math.abs;const i=this.parseComplexNumber(t,a),o=this.parseComplexNumber("1e-16");return n(i.realPart-this.realPart)<=o&&n(i.imaginaryPart-this.imaginaryPart)<=o}toString(){let t=this.realPart,a=this.imaginaryPart,n="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==t&&(n+=t),0!==a&&(0===t?0>a&&(n+="-"):n+=0>a?" - ":" + ",a=Math.abs(a),1!==a&&(n+=a),n+="i"),n?n:"0")}});class DataAdapter{constructor(t){t||(t={});const a=Object.assign(this,t);if(a.$document=Smart.Utilities.Extend(document),a.boundSource=!1===a.observable?[]:new Smart.ObservableArray,a.dataItemById=[],void 0===a.allowAdd&&(a.allowAdd=!0),void 0===a.allowRemove&&(a.allowRemove=!0),void 0===a.allowUpdate&&(a.allowUpdate=!0),void 0===t.observable&&(a.observable=!0),t.dataSource||(a.dataSource=[]),t.dataFields||(a.dataFields=[]),t.dataSourceType||(a.dataSourceType="array"),t.id||(a.id=null),a.dataFields){let t=[];if("number"==typeof a.dataFields)for(let n=0;n<a.dataFields;n++)t.push({name:n,dataType:"string"});else for(let n=0;n<a.dataFields.length;n++){const i=a.dataFields[n];if("string"==typeof i){const a=i.split(":"),n=a[0].trim(),o=1<a.length?a[1].trim():"string";t.push({name:n,dataType:o})}else t.push(i)}a.dataFields=t}t&&!1!==t.autoBind&&a.dataBind(),a.isInitialized=!0}get dataSource(){const t=this;return t._dataSource||(t._dataSource=[]),t._dataSource}set dataSource(t){const a=this;a._dataSource=t,a.isInitialized&&(a.boundSource=!1===a.observable?[]:new Smart.ObservableArray,a.dataItemById=[],a.bindingCompleted=!1,a.dataBind())}get canNotify(){const t=this;return void 0===t._canNotify&&(t._canNotify=!0),t._canNotify}set canNotify(t){const a=this;a._canNotify=t}_notify(t){const a=this;!a.canNotify||a.notifyFn&&a.notifyFn(t)}notify(t){const a=this;t&&(a.notifyFn=t)}dataBind(){const t=this;t.clear(),"array"===t.dataSourceType&&(t._bindToArray(),t.boundSource.notify(function(a){"update"===a.type&&0<=a.path.indexOf(".")&&t._notify&&t._notify({action:"update",data:a.item,index:a.index})}),t._onBindingComplete())}_onBindingComplete(){const t=this;t._buildHierarchy(),t.onBindingComplete&&t.onBindingComplete({data:t.boundSource}),t._notify&&t._notify({action:"bindingComplete",data:t.boundSource}),t.bindingCompleted=!0}refreshHierarchy(){const t=this;t._buildHierarchy()}find(){const t=this;return t.boundSource.find(arguments)}toArray(){const t=this;return t.boundSource.toArray()}onVirtualDataSourceRequested(t,a){const n=this;let o=a?a.first:1/0,r=a?a.last:1/0;if(void 0===o&&(o=1/0),void 0===r&&(r=1/0),n.virtualFirstIndex=o,n.virtualLastIndex=r,n.virtualDataSource){let i=!1;const l=t=>0===Object.entries(t).length&&t.constructor===Object,s=l(a.sorting)&&l(a.filtering)&&l(a.grouping);if(n.virtualDataSourceCache&&o!==1/0&&s){let t=0;for(let a=o;a<r;a++)n[a].isEmpty||t++;t==r-o&&(i=!0)}i?t():n.virtualDataSource(function(i){i.virtualDataSourceLength&&(n.virtualDataSourceLength=i.virtualDataSourceLength),new Smart.DataAdapter({dataSource:i.dataSource,dataFields:i.dataFields||n.dataFields,data:a,onBindingComplete(a){if(o===1/0)n.add(a.data);else{let t=[],l=[];for(let n=0;n<a.data.length;n++){const i=a.data[n];o+n<=r&&(t.push(i),l.push(o+n))}n.update(l,t)}n.onFilter&&n.onFilter(),t()}})},{first:o,last:r,sorting:a.sorting,filtering:a.filtering,grouping:a.grouping,action:a.action})}else t()}add(t){const a=this;if(!t)return;let n=!0;const o=function(t){const i=!t.$||t.$&&void 0===t.$.id?a._getDataItem(t,a.boundSource.length):t;a[a.boundSource.length]=i,a.dataItemById[i.$.id]=i;const o=a.boundSource.push(i);return o||(n=!1),i};if(t.length){let n=[];for(let a=0;a<t.length;a++){const i=o(t[a]);n.push(i)}a._notify({action:"add",data:n})}else{const n=o(t);a._notify({action:"add",data:n})}return a.refreshHierarchy(),n}removeLast(){const t=this,a=t.boundSource.pop();return t._notify({action:"removeLast",data:a}),t.refreshHierarchy(),a}remove(t){const a=this,n=a.boundSource[t];if(!n)throw new Error("Invalid Item Index");a.boundSource.splice(t,1),a._notify({action:"remove",index:t,data:n}),a.refreshHierarchy()}update(t,a){const n=this;if(!(Smart.Utilities.Types.isArray(t)&&Smart.Utilities.Types.isArray(a)&&0===t.length&&0===a.length)){if(a.length&&t.length){let o=[];for(let r=0;r<t.length;r++){const i=n._getDataItem(a[r],t[r]),l=t[r];o.push(i),n.boundSource[l]=i,n[l]=n.boundSource[l],n.dataItemById[i.$.id]=n[l]}return n._notify({action:"update",index:t,data:o}),void n.refreshHierarchy()}const i=n._getDataItem(a,t);return n.boundSource[t]=i,n[t]=n.boundSource[t],n.dataItemById[i.$.id]=n[t],n._notify({action:"update",index:t,data:i}),n.refreshHierarchy(),i}}insert(t,a){const n=this,i=n.boundSource.splice(t,0,a);return n._notify({action:"insert",index:t,data:a}),n.refreshHierarchy(),i}indexOf(t){const a=this,n=a.boundSource.indexOf(t);return n}get length(){const t=this;return t.virtualDataSourceLength?t.virtualDataSourceLength:"number"==typeof t.dataSource?t.dataSource:t.bindingCompleted?t.boundSource.length:t.dataSource&&t.dataSource.length?t.dataSource.length:t.boundSource.length}clear(){const t=this;for(let a=0;a<t.boundSource.length;a++)delete t[a];t._cachedValues=[],t.boundSource=t.observable?new Smart.ObservableArray:[],t.dataItemById=[],t.refreshHierarchy()}_getId(t,a,n){if(null!==t&&t.name!==void 0&&t.name){let i=a.getAttribute(t.name);if(null!==i&&0<i.toString().length)return i;if(t.map)try{let n=a.getAttribute(t.map);if(null!==n&&0<n.toString().length)return n}catch(t){return n}return}if(t&&0<t.toString().length){let n=a.getAttribute(t);if(null!==n&&0<n.toString().length)return n.trim().split(" ").join("").replace(/([ #;?%&,.+*~\':'!^$[\]()=>|\/@])/g,"");else{let n=t.split(this.mapChar);if(1<n.length){let t=a;for(let a=0;a<n.length;a++)void 0!==t&&(t=t[n[a]]);if(void 0!==t)return t}else if(void 0!==a[t])return a[t]}}return n}_buildHierarchy(){const t=this;if(!t.reservedNames)t.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};else{const a=t.reservedNames;a.leaf||(a.leaf="leaf"),a.parent||(a.parent="parent"),a.expanded||(a.expanded="expanded"),a.checked||(a.checked="checked"),a.selected||(a.selected="selected"),a.level||(a.level="level"),a.data||(a.data="data")}const a=t.reservedNames;if(t.childrenDataField){for(let n=0;n<this.boundSource.length;n++){const i=this.boundSource[n];if(!i)continue;const o=function(n){if(t.item)n.boundSource=n[t.childrenDataField][t.item];else{const a=t.childrenDataField.split(t.mapChar);let i=null;if(1<a.length){let t=n;for(let n=0;n<a.length;n++)void 0!==t&&(t=t[a[n]]);i=t}else i=n[t.childrenDataField];n.boundSource=i}(null===n.boundSource||n.boundSource&&0===n.boundSource.length)&&(n[a.leaf]=!0)};o(i),i[a.level]=0;let r=this._getId(t.id,i,n);i.$||(i.$={}),i.$.id=r,i[a.parent]=null,i[a.data]=i,i[a.expanded]===void 0&&(i[a.expanded]=!1);const l=function(n,r){if(!r)return void(n.boundSource=[]);for(let s=0,i;s<r.length;s++){if(i=r[s],!i)continue;o(i),i[a.level]=n[a.level]+1,i[a.parent]=n,i[a.data]=i;let d=t._getId(t.id,i,s);i.$.id=d===s&&null===t.id?n.$.id+"_"+d:d,void 0===i[a.expanded]&&(i[a.expanded]=!1),l(i,i.boundSource)}};l(i,i.boundSource)}this.itemHierarchy=t.boundSource}t.xmlRoot&&"xml"===t.dataSourceType&&(this.itemHierarchy=this._getDataItemHierarchy("uid","_parentuid","boundSource",null,t.boundSource)),t.keyDataField&&t.parentDataField&&(this.itemHierarchy=this._getDataItemHierarchy(t.keyDataField.name,t.parentDataField.name,"boundSource",null,t.boundSource)),t.groupBy&&(this.itemHierarchy=this._getGroupDataItemHierarchy(t.groupBy,"boundSource","label",null,"data",null,"parent",t.boundSource))}_getGroupDataItemHierarchy(t,a,n,i,o,r,l,s,d){let c=this;d||(d=0);let m=c.reservedNames;const p=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()};let u=[];for(let c=0;c<t.length;c++)u[c]=p();a||(a="items"),n||(n="group"),o||(o="item"),l||(l="parent"),void 0===r&&(r="value");const g=[],h=[];let f=0;const _=function(t){let a=t;if(i)for(let t in i){const n=i[t];n.name&&n.map&&(a[n.map]=a[n.name])}return a};for(let c=0,y;c<s.length;c++){y=Object.assign({},_(s[c])),y[m.leaf]=!1;let i=[],b=0;for(let a=0;a<t.length;a++){const n=t[a],o=y[n];null!==o&&(i[b++]={value:o,group:n,hash:u[a]})}if(i.length!==t.length)break;let v=null,x="";for(let t=0;t<i.length;t++){const s=i[t].value,c=i[t].group,p=i[t].hash;if(x=x+"_"+p+"_"+s,void 0!==h[x]&&null!==h[x]){v=h[x];continue}if(null===v){v={},v[m.level]=0,v[m.leaf]=!1,v[l]=null,v[n]=s,v[o]=y,v.groupDataField=c,v[m.expanded]=void 0!==y[m.expanded]&&y[m.expanded],r&&(v[r]=y[r]),v[a]=[];let t=g.length+d;(!this.id||"number"==typeof y.$.id||isFinite(y.$.id))&&(t="Item"+t),void 0===v.$.id&&(v.$.id=t),g[f++]=v}else{const t={};t[m.level]=v[m.level]+1,t[l]=v,t[n]=s,t[a]=[],t[o]=y,t.groupDataField=c,t[m.leaf]=!1,t[m.expanded]=void 0!==y[m.expanded]&&y[m.expanded],r&&(t[r]=y[r]),void 0===t.$.id&&(t.$.id=v.$.id+"_"+v[a].length),v[a][v[a].length]=t,v=t}h[x]=v}y&&(y[m.leaf]=!0),null===v?void 0===y.$.id&&(y.$.id=p()):(null===this.id?void 0===y.$.id&&(y.$.id=v.$.id+"_"+v[a].length):void 0===y.$.id&&-1===y.$.id.toString().indexOf(v.$.id)&&(y.$.id=v.$.id+"_"+y.$.id),y[l]=v,y[m.level]=v[m.level]+1,v[a][v[a].length]=y)}return g}_getDataItemHierarchy(t,a,n,i,o){const r=this;let l=[],s=this.boundSource;if(o&&(s=o),0===this.boundSource.length)return null;let d=null===n?"items":n,c=[],m=s,p=m.length,u=r.reservedNames,g=function(t){let a=t;if(i)for(let t in i){const n=i[t];n.name&&n.map&&(a[n.map]=a[n.name])}return a};for(let r=0;r<p;r++){let n=Object.assign({},m[r]),i=n[a],o=n[t];c[o]={parentId:i,item:n}}for(let r=0;r<p;r++){let n=Object.assign({},m[r]),i=n[a],o=n[t];if(void 0!==c[i]){let t={parentId:i,item:c[o].item},a=c[i].item;a[d]||(a[d]=[]);let n=a[d].length;t=t.item,u?void 0===t[u.parent]&&(t[u.parent]=a):void 0===t.parent&&(t.parent=a);let r=g(t);a[d][n]=r,c[i].item=a,c[o]=t}else{let t=c[o].item;u?void 0===t[u.parent]&&(t[u.parent]=null):void 0===t.parent&&(t.parent=null);let a=g(t);u?a[u.level]=0:a.level=0,l[l.length]=a}}if(0!==l.length){let t=function(a,n){for(let o=0;o<n.length;o++){u?n[o][u.level]=a:n[o].level=a;let i=n[o][d];i?0<i.length?t(a+1,i):u?n[o][u.leaf]=!0:n[o].leaf=!0:u?n[o][u.leaf]=!0:n[o].leaf=!0}};t(0,l)}return l}summarize(t,a){const n=this;Array.isArray(t)||(t=[t]);let i=[];for(let n=0;n<t.length;n++){const a=t[n];for(let t in a){const n=a[t];i.push({dataField:t,functions:n})}}t=i;let o={},r=[];a||(a=n.boundSource);let l=a.length;if(0!==l&&void 0!==l){for(let n=0,i;n<l;n++){i=a[n];for(let a=0;a<t.length;a++){const l=t[a];let s=i[l.dataField];if(l.functions){o[l.dataField]=o[l.dataField]||{},r[l.dataField]=r[l.dataField]||0,r[l.dataField]++;const t=function(t){for(let a in t){let n=o[l.dataField][a];null===n&&(o[l.dataField][a]=0,n=0),"function"==typeof t[a]&&(n=t[a](n,s,l.dataField,i)),o[l.dataField][a]=n}};let a=parseFloat(s);a=!isNaN(a),a&&(s=parseFloat(s)),"number"==typeof s&&isFinite(s)?l.functions.forEach(function(a){let i=o[l.dataField][a];if(null===i&&(i=0,"min"===this&&(i=9999999999999),"max"===this&&(i=-9999999999999)),"sum"===a||"avg"===a||"stdev"===a||"stdevp"===a||"var"===a||"varp"===a)i+=parseFloat(s);else if("product"===a)0==n?i=parseFloat(s):i*=parseFloat(s);else if("min"===a)i=Math.min(i,parseFloat(s));else if("max"===a)i=Math.max(i,parseFloat(s));else if("count"===a)i++;else if("object"==typeof a)return void t(a);o[l.dataField][a]=i}):l.functions.forEach(function(a){if("min"===a||"max"===a||"count"===a||"product"===a||"sum"===a||"avg"===a||"stdev"===a||"stdevp"===a||"var"===a||"varp"===a){if(null===s)return!0;let t=o[l.dataField][a];return null===t&&(t=0),o[l.dataField][a]=t,!0}"object"==typeof a&&t(a)})}}}for(let n=0;n<t.length;n++){const s=t[n];if(s.functions){if(o[s.dataField]||(o[s.dataField]={},s.functions.forEach(function(t){o[s.dataField][t]=0})),void 0!==o[s.dataField].avg){const t=o[s.dataField].avg,a=r[s.dataField];o[s.dataField].avg=0===a||void 0===a?0:t/a}else void 0!==o[s.dataField].count&&(o[s.dataField].count=l);(o[s.dataField].stdev||o[s.dataField].stdevp||o[s.dataField]["var"]||o[s.dataField].varp)&&s.functions.forEach(function(t){if("stdev"===t||"var"===t||"varp"===t||"stdevp"===t){const n=o[s.dataField][t],i=l,r=n/l;let d=0;for(let t=0;t<l;t++){let n=a[t],i=n[s.dataField];d+=(i-r)*(i-r)}let c="stdevp"===t||"varp"===t?i:i-1;0===c&&(c=1),"var"===t||"varp"===t?o[s.dataField][t]=d/c:("stdevp"===t||"stdev"===t)&&(o[s.dataField][t]=Math.sqrt(d/c))}})}}return o}}_getDataItem(t,a){const n=this,i={},o="number"==typeof n.dataSource;if(!t)return{$:{id:a},isEmpty:!0,index:a};if(o){for(let t=0;t<n.dataFields.length;t++){const a=n.dataFields?n.dataFields[t]:{};i[a.name]=""}return i.$={},i.$.id=a,i.$.index=a,i}const r=t;for(let o=0;o<n.dataFields.length;o++){const a=n.dataFields?n.dataFields[o]:{};let l="";if(void 0===a||null===a)continue;if(a.map){let t=a.map.split(n.mapChar);if(0<t.length){let a=r;for(let n=0;n<t.length;n++)r&&(a=a[t[n]]);l=a}else l=r[a.map]}void 0!==l&&null!==l?l=l.toString():void 0===l&&null!==l&&(l="");let s=!1;""===l&&(s=!0,l=t[a.name],void 0!==l&&null!==l?"array"!==a.dataType&&"date"!==a.dataType&&(l=l.toString()):l=""),"[object Object]"===l&&a.map&&s&&(l=""),n._cachedValues[l+"_"+a.dataType]?l=n._cachedValues[l+"_"+a.dataType]:("bool"===a.dataType||"boolean"===a.dataType?"true"===l||"1"===l?l=!0:("false"===l||"0"===l)&&(l=!1):l=n.$document.deserialize(""+l,a.dataType,!0),n._cachedValues[l+"_"+a.dataType]=l),"string"!==a.dataType&&"boolean"!==a.dataType&&"bool"!==a.dataType&&(isNaN(l)||l===-Infinity||l===1/0)&&(l=0),i[a.name]=l}let l=a;return n.id&&(l=r[n.id],"object"==typeof l&&(l=a)),i.$||(i.$={}),i.$.id=l,i.$.index=a,Object(i)}_bindToArray(){const t=this,a="number"==typeof t.dataSource,n=[];t.boundSource.canNotify=!1;for(let o=0;o<t.length;o++){const i=a?{}:t.dataSource[o],r=t._getDataItem(i,o);n.push(r)}t.boundSource=!1===t.observable?n:new Smart.ObservableArray(n);for(let a=0;a<t.length;a++)t[a]=t.boundSource[a],t.dataItemById[t[a].$.id]=t[a];t.boundSource.canNotify=!0}sortBy(t,a,n){const o=this;if(!a)for(let n=0;n<o.dataFields.length;n++){const i=o.dataFields[n];if(i.name===t){a=i.dataType;break}}o._sort(o.boundSource,t,n,a)}_createFilter(t,a){const n={"=":"EQUAL","<>":"NOT_EQUAL","<":"LESS_THAN",">":"GREATER_THAN","<=":"LESS_THAN_OR_EQUAL",">=":"GREATER_THAN_OR_EQUAL",equal:"EQUAL","not equal":"NOT_EQUAL","less than":"LESS_THAN","greater than":"GREATER_THAN","greater than or equal":"GREATER_THAN_OR_EQUAL","less than or equal":"LESS_THAN_OR_EQUAL","starts with":"STARTS_WITH","ends with":"ENDS_WITH",null:"null","":"EMPTY",isblank:"EMPTY",isnotblank:"NOT_EMPTY",contains:"CONTAINS",notcontains:"DOES_NOT_CONTAIN",startswith:"STARTS_WITH",endswith:"ENDS_WITH",NULL:"NULL",NOT_NULL:"NOT_NULL"};let o=[];for(let n=0;n<a.length;n++){const t=a[n],i=t.split(" ");o.push(i)}const r=new Smart.FilterGroup,l=[],s=[];for(let r=0;r<o.length;r++){const a=o[r];if(1<a.length){const i=new Smart.FilterGroup;let o="and",r=0;for(let l=0;l<a.length;l++){const s=a[l];if("and"===s||"or"===s){o=s;continue}if(r++,2===r){const d=i.createFilter(t,s,n[a[l-1]]);r=0,o&&i.addFilter(o,d)}}s.push(i)}else{const t=a[0];if("and"!==t&&"or"!==t)throw new Error("Filter Exprresion expects \"AND\" or \"OR\", but the token is: "+t);l.push(t)}}let d=0;if(1===s.length)return s[0];for(let n=0,i;n<s.length;n++)i=l[d],0==(n+1)%2&&d++,i||(i="and"),r.addFilter(i,s[n]);return r}filterBy(t,...a){const n=this,i=(()=>{for(let a=0;a<n.dataFields.length;a++){const i=n.dataFields[a];if(i.name===t)return i.dataType}})(),o=n._createFilter(i,a);let r=n.boundSource.filter(a=>{const n=o.evaluate(a[t]);return n});return r}_filter(t){const a=this,n=[],o=[];if(0===t.length)return void a.clearFilter();const r=t=>{for(let n=0;n<a.dataFields.length;n++){const i=a.dataFields[n];if(i.name===t)return i.dataType}};for(let l=0;l<t.length;l++){const i=t[l],s=i[0];let d=null;d=i[1]instanceof Smart.FilterGroup?i[1]:a._createFilter(r(s),i.splice(1)),d&&(o.push(s),d.dataField=s,n.push(d))}for(let o=0;o<a.boundSource.length;o++){const t=a.boundSource[o];let i=!0;for(let a=0;a<n.length;a++){const o=n[a];i=i&&o.evaluate(t[o.dataField])}t.$.filtered=i}a.onFilter&&a.onFilter()}clearFilter(){const t=this;for(let a=0;a<t.boundSource.length;a++){const n=t.boundSource[a];n.$.filtered=!0}t.onFilter&&t.onFilter()}clearSort(){const t=this;t._sort(t.boundSource,[],[],[])}_sort(t,n,a,o,i){const r=this;let l=!1;if(t&&t.constructor&&"ObservableArray"===t.constructor.name&&(l=!0),(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)&&!l)throw new Error("sort: Missing or Invalid arguments!");"string"==typeof n&&(n=[n]);const s=[],d=[];void 0===a&&(a=[]);const c=function(t,a){let n;switch(a||typeof t){case"string":n=new Intl.Collator().compare;break;case"number":n=function(t,a){return t-a};break;case"boolean":n=function(t,a){return t===a?0:!1===t?-1:1};break;case"object":if(t instanceof Date)n=function(t,a){return t.getTime()-a.getTime()};else if(t instanceof Smart.Utilities.DateTime||t instanceof Smart.Utilities.BigNumber)n=function(t,a){return t.compare(a)};else if(t instanceof Smart.Utilities.Complex||window.NIComplex&&t instanceof window.NIComplex){const t=new Smart.Utilities.ComplexNumericProcessor;n=function(n,a){return t.compareComplexNumbers(n,a)}}}return n};for(let r=0;r<n.length;r++){s[r]=void 0===a[r]||"asc"===a[r]||"ascending"===a[r]?1:-1;const i=t[0][n[r]];d[r]=c(i,o[r])}if(i)return void i(t,n,a,d);t.sort(function(t,a){for(let o=0;o<n.length;o++){const i=d[o](t[n[o]],a[n[o]]);if(0===i){if(n[o+1])continue;else if(void 0!==t._index)return(t._index-a._index)*s[o];return 0}return i*s[o]}if(0===n.length)return t.$.index<a.$.index?-1:t.$.index>a.$.index?1:0});for(let l=0;l<t.length;l++)r[l]=t[l]}static Filter(t,a,n,o){const i=t.filter(t=>{let r=!0;for(let l=0;l<n.length;l++){const i=n[l],s=a[l];r=o?r&&o(t,s,i):r&&i.evaluate(t[s])}return r});return i}filter(t,a,n){Smart.DataAdapter.Filter(that.boundSource,t,a,n)}sort(t,a,n){Smart.DataAdapter.Sort(that.boundSource,t,a,n)}static Sort(t,n,a,i){const o=function(t){let a;switch(typeof t){case"string":a=new Intl.Collator().compare;break;case"number":a=function(t,a){return t-a};break;case"boolean":a=function(t,a){return t===a?0:!1===t?-1:1};break;case"object":if(t instanceof Date)a=function(t,a){return t.getTime()-a.getTime()};else if(t instanceof Smart.Utilities.DateTime||t instanceof BigNumberNG)a=function(t,a){return t.compare(a)};else if(t instanceof Smart.Utilities.Complex||window.NIComplex&&t instanceof window.NIComplex){const t=new Smart.Utilities.ComplexNumericProcessor;a=function(n,a){return t.compareComplexNumbers(n,a)}}}return a};if(!t||!Array.isArray(t)||0===t.length||!n||Array.isArray(n)&&0===n.length)return;"string"==typeof n&&(n=[n]);const r=[],l=[];void 0===a&&(a=[]);for(let s=0;s<n.length;s++)r[s]=void 0===a[s]||"asc"===a[s]||"ascending"===a[s]?1:-1,l[s]=o(t[0][n[s]]);if(i)return void i(t,n,a,l);const s=t.slice(0);return s.sort(function(t,a){for(let o=0;o<n.length;o++){const i=l[o](t[n[o]],a[n[o]]);if(0===i){if(n[o+1])continue;else if(void 0!==t._index)return(t._index-a._index)*r[o];return 0}return i*r[o]}}),s}}Smart.DataAdapter=DataAdapter;const localTimezoneOffset=-1*new Date().getTimezoneOffset(),__timeZones=[{id:"Local",offset:localTimezoneOffset,offsetHours:localTimezoneOffset/60,displayName:"",supportsDaylightSavingTime:!1},{id:"Dateline Standard Time",offset:-720,offsetHours:-12,displayName:"(UTC-12:00) International Date Line West",supportsDaylightSavingTime:!1},{id:"UTC-11",offset:-660,offsetHours:-11,displayName:"(UTC-11:00) Coordinated Universal Time-11",supportsDaylightSavingTime:!1},{id:"Hawaiteratoran Standard Time",offset:-600,offsetHours:-10,displayName:"(UTC-10:00) Hawaiterator",supportsDaylightSavingTime:!1},{id:"Alaskan Standard Time",offset:-540,offsetHours:-9,displayName:"(UTC-09:00) Alaska",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time (Mexico)",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Baja California",supportsDaylightSavingTime:!0},{id:"Pacific Standard Time",offset:-480,offsetHours:-8,displayName:"(UTC-08:00) Pacific Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Arizona",supportsDaylightSavingTime:!1},{id:"Mountain Standard Time (Mexico)",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",supportsDaylightSavingTime:!0},{id:"Mountain Standard Time",offset:-420,offsetHours:-7,displayName:"(UTC-07:00) Mountain Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"Central America Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Central America",supportsDaylightSavingTime:!1},{id:"Canada Central Standard Time",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Saskatchewan",supportsDaylightSavingTime:!1},{id:"Central Standard Time (Mexico)",offset:-360,offsetHours:-6,displayName:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",supportsDaylightSavingTime:!0},{id:"SA Pacific Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Bogota, Lima, Quito, Rio Branco",supportsDaylightSavingTime:!1},{id:"Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Eastern Time (US & Canada)",supportsDaylightSavingTime:!0},{id:"US Eastern Standard Time",offset:-300,offsetHours:-5,displayName:"(UTC-05:00) Indiana (East)",supportsDaylightSavingTime:!0},{id:"Venezuela Standard Time",offset:-270,offsetHours:-4.5,displayName:"(UTC-04:30) Caracas",supportsDaylightSavingTime:!1},{id:"Atlantic Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Atlantic Time (Canada)",supportsDaylightSavingTime:!0},{id:"Paraguay Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Asuncion",supportsDaylightSavingTime:!0},{id:"Central Brazilian Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Cuiaba",supportsDaylightSavingTime:!0},{id:"Pacific SA Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Santiago",supportsDaylightSavingTime:!0},{id:"SA Western Standard Time",offset:-240,offsetHours:-4,displayName:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",supportsDaylightSavingTime:!1},{id:"Newfoundland Standard Time",offset:-210,offsetHours:-3.5,displayName:"(UTC-03:30) Newfoundland",supportsDaylightSavingTime:!0},{id:"SA Eastern Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Cayenne, Fortaleza",supportsDaylightSavingTime:!1},{id:"Argentina Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Buenos Aires",supportsDaylightSavingTime:!0},{id:"E. South America Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Brasilia",supportsDaylightSavingTime:!0},{id:"Bahia Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Salvador",supportsDaylightSavingTime:!0},{id:"Montevideo Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Montevideo",supportsDaylightSavingTime:!0},{id:"Greenland Standard Time",offset:-180,offsetHours:-3,displayName:"(UTC-03:00) Greenland",supportsDaylightSavingTime:!0},{id:"UTC-02",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Coordinated Universal Time-02",supportsDaylightSavingTime:!1},{id:"Mid-Atlantic Standard Time",offset:-120,offsetHours:-2,displayName:"(UTC-02:00) Mid-Atlantic - Old",supportsDaylightSavingTime:!0},{id:"Azores Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Azores",supportsDaylightSavingTime:!0},{id:"Cape Verde Standard Time",offset:-60,offsetHours:-1,displayName:"(UTC-01:00) Cape Verde Is.",supportsDaylightSavingTime:!1},{id:"Morocco Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Casablanca",supportsDaylightSavingTime:!0},{id:"UTC",offset:0,offsetHours:0,displayName:"(UTC) Coordinated Universal Time",supportsDaylightSavingTime:!1},{id:"GMT Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Dublin, Edinburgh, Lisbon, London",supportsDaylightSavingTime:!0},{id:"Greenwich Standard Time",offset:0,offsetHours:0,displayName:"(UTC) Monrovia, Reykjavik",supportsDaylightSavingTime:!1},{id:"Central European Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",supportsDaylightSavingTime:!0},{id:"Namibia Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Windhoek",supportsDaylightSavingTime:!0},{id:"W. Central Africa Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) West Central Africa",supportsDaylightSavingTime:!1},{id:"W. Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",supportsDaylightSavingTime:!0},{id:"Central Europe Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",supportsDaylightSavingTime:!0},{id:"Romance Standard Time",offset:60,offsetHours:1,displayName:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",supportsDaylightSavingTime:!0},{id:"FLE Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",supportsDaylightSavingTime:!0},{id:"South Africa Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Harare, Pretoria",supportsDaylightSavingTime:!1},{id:"Turkey Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Istanbul",supportsDaylightSavingTime:!0},{id:"GTB Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Athens, Bucharest",supportsDaylightSavingTime:!0},{id:"Libya Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Tripoli",supportsDaylightSavingTime:!0},{id:"E. Europe Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) E. Europe",supportsDaylightSavingTime:!0},{id:"Jordan Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Amman",supportsDaylightSavingTime:!0},{id:"Middle East Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Beirut",supportsDaylightSavingTime:!0},{id:"Egypt Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Cairo",supportsDaylightSavingTime:!0},{id:"Syria Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Damascus",supportsDaylightSavingTime:!0},{id:"Israel Standard Time",offset:120,offsetHours:2,displayName:"(UTC+02:00) Jerusalem",supportsDaylightSavingTime:!0},{id:"Arab Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kuwait, Riyadh",supportsDaylightSavingTime:!1},{id:"E. Africa Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Nairobi",supportsDaylightSavingTime:!1},{id:"Arabic Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Baghdad",supportsDaylightSavingTime:!0},{id:"Kaliningrad Standard Time",offset:180,offsetHours:3,displayName:"(UTC+03:00) Kaliningrad, Minsk",supportsDaylightSavingTime:!0},{id:"Iran Standard Time",offset:210,offsetHours:3.5,displayName:"(UTC+03:30) Tehran",supportsDaylightSavingTime:!0},{id:"Mauritius Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Port Louis",supportsDaylightSavingTime:!0},{id:"Georgian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Tbilisi",supportsDaylightSavingTime:!1},{id:"Caucasus Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Yerevan",supportsDaylightSavingTime:!0},{id:"Arabian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Abu Dhabi, Muscat",supportsDaylightSavingTime:!1},{id:"Azerbaijan Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Baku",supportsDaylightSavingTime:!0},{id:"Russian Standard Time",offset:240,offsetHours:4,displayName:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",supportsDaylightSavingTime:!0},{id:"Afghanistan Standard Time",offset:270,offsetHours:4.5,displayName:"(UTC+04:30) Kabul",supportsDaylightSavingTime:!1},{id:"Pakistan Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Islamabad, Karachi",supportsDaylightSavingTime:!0},{id:"West Asia Standard Time",offset:300,offsetHours:5,displayName:"(UTC+05:00) Ashgabat, Tashkent",supportsDaylightSavingTime:!1},{id:"India Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",supportsDaylightSavingTime:!1},{id:"Sri Lanka Standard Time",offset:330,offsetHours:5.5,displayName:"(UTC+05:30) Sri Jayawardenepura",supportsDaylightSavingTime:!1},{id:"Nepal Standard Time",offset:345,offsetHours:5.75,displayName:"(UTC+05:45) Kathmandu",supportsDaylightSavingTime:!1},{id:"Central Asia Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Astana",supportsDaylightSavingTime:!1},{id:"Bangladesh Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Dhaka",supportsDaylightSavingTime:!0},{id:"Ekaterinburg Standard Time",offset:360,offsetHours:6,displayName:"(UTC+06:00) Ekaterinburg",supportsDaylightSavingTime:!0},{id:"Myanmar Standard Time",offset:390,offsetHours:6.5,displayName:"(UTC+06:30) Yangon (Rangoon)",supportsDaylightSavingTime:!1},{id:"SE Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Bangkok, Hanoi, Jakarta",supportsDaylightSavingTime:!1},{id:"N. Central Asia Standard Time",offset:420,offsetHours:7,displayName:"(UTC+07:00) Novosibirsk",supportsDaylightSavingTime:!0},{id:"Ulaanbaatar Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Ulaanbaatar",supportsDaylightSavingTime:!1},{id:"China Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",supportsDaylightSavingTime:!1},{id:"Singapore Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Kuala Lumpur, Singapore",supportsDaylightSavingTime:!1},{id:"North Asia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Krasnoyarsk",supportsDaylightSavingTime:!0},{id:"Taipei Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Taipei",supportsDaylightSavingTime:!1},{id:"W. Australia Standard Time",offset:480,offsetHours:8,displayName:"(UTC+08:00) Perth",supportsDaylightSavingTime:!0},{id:"Korea Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Seoul",supportsDaylightSavingTime:!1},{id:"North Asia East Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Irkutsk",supportsDaylightSavingTime:!0},{id:"Tokyo Standard Time",offset:540,offsetHours:9,displayName:"(UTC+09:00) Osaka, Sapporo, Tokyo",supportsDaylightSavingTime:!1},{id:"AUS Central Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Darwin",supportsDaylightSavingTime:!1},{id:"Cen. Australia Standard Time",offset:570,offsetHours:9.5,displayName:"(UTC+09:30) Adelaide",supportsDaylightSavingTime:!0},{id:"West Pacific Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Guam, Port Moresby",supportsDaylightSavingTime:!1},{id:"Tasmania Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Hobart",supportsDaylightSavingTime:!0},{id:"E. Australia Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Brisbane",supportsDaylightSavingTime:!1},{id:"AUS Eastern Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Canberra, Melbourne, Sydney",supportsDaylightSavingTime:!0},{id:"Yakutsk Standard Time",offset:600,offsetHours:10,displayName:"(UTC+10:00) Yakutsk",supportsDaylightSavingTime:!0},{id:"Vladivostok Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Vladivostok",supportsDaylightSavingTime:!0},{id:"Central Pacific Standard Time",offset:660,offsetHours:11,displayName:"(UTC+11:00) Solomon Is., New Caledonia",supportsDaylightSavingTime:!1},{id:"Magadan Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Magadan",supportsDaylightSavingTime:!0},{id:"Kamchatka Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old",supportsDaylightSavingTime:!0},{id:"Fiji Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Fiji",supportsDaylightSavingTime:!0},{id:"New Zealand Standard Time",offset:720,offsetHours:12,displayName:"(UTC+12:00) Auckland, Wellington",supportsDaylightSavingTime:!0},{id:"UTC+12",offset:720,offsetHours:12,displayName:"(UTC+12:00) Coordinated Universal Time+12",supportsDaylightSavingTime:!1},{id:"Tonga Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Nuku'alofa",supportsDaylightSavingTime:!1},{id:"Samoa Standard Time",offset:780,offsetHours:13,displayName:"(UTC+13:00) Samoa",supportsDaylightSavingTime:!0}],__daysToMonth365=[0,31,59,90,120,151,181,212,243,273,304,334,365],__daysToMonth366=[0,31,60,91,121,152,182,213,244,274,305,335,366],__daysPer4Years=1461,__daysPer100Years=36524,__daysPer400Years=146097,__daysTo1601=584388,__daysTo1899=693593,__daysTo10000=3652059,__minTicks=0,__maxTicks=3155378976000000000,__maxMillis=315537897600000;Smart.Utilities.Assign("TimeSpan",class{constructor(){const t=this;if(t.ticksPerMillisecond=1e4,t.millisecondsPerTick=1/1e4,t.ticksPerSecond=10000000,t.secondsPerTick=1/10000000,t.ticksPerMinute=600000000,t.minutesPerTick=1/600000000,t.ticksPerHour=36000000000,t.hoursPerTick=1/36000000000,t.ticksPerDay=864000000000,t.daysPerTick=1/864000000000,t.millisPerSecond=1e3,t.millisPerMinute=60000,t.millisPerHour=3600000,t.millisPerDay=86400000,t._ticks=0,1===arguments.length){if(isNaN(arguments[0]))throw new Error("Argument must be a number.");t._ticks=arguments[0]}else if(3===arguments.length)t._ticks=t.timeToMS(arguments[0],arguments[1],arguments[2],0);else if(4===arguments.length){const a=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];t._ticks=(1e3*(24*(3600*a)+3600*n+60*i+o)+0)*t.ticksPerMillisecond}else if(5===arguments.length){const a=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3],r=arguments[4];t._ticks=(1e3*(24*(3600*a)+3600*n+60*i+o)+r)*t.ticksPerMillisecond}}ticks(){return this._ticks}days(){const t=this;return parseInt(t._ticks/t.ticksPerDay)}timeToMS(t,a,n,i){return parseInt((3600*t+60*a+n+i/1e3)*this.ticksPerSecond)}hours(){const t=this;return parseInt(t._ticks/t.ticksPerHour)%24}milliseconds(){const t=this;return parseInt(t._ticks/t.ticksPerMillisecond)%1e3}minutes(){const t=this;return parseInt(t._ticks/t.ticksPerMinute)%60}seconds(){const t=this;return parseInt(t._ticks/t.ticksPerSecond)%60}totalDays(){const t=this;return parseInt(t._ticks*t.daysPerTick)}totalHours(){const t=this;return parseInt(t._ticks*t.hoursPerTick)}totalMilliseconds(){const t=this,a=t._ticks*t.millisecondsPerTick;return parseInt(a)}totalMinutes(){const t=this;return parseInt(t._ticks*t.minutesPerTick)}totalSeconds(){const t=this;return parseInt(t._ticks*t.secondsPerTick)}add(t){const a=this._ticks+t._ticks,n=new Smart.Utilities.TimeSpan(a);return n}subtract(t){const a=this._ticks-t._ticks;return new Smart.Utilities.TimeSpan(a)}duration(){const t=this;return 0<=t._ticks?new Smart.Utilities.TimeSpan(t._ticks):new Smart.Utilities.TimeSpan(-t._ticks)}equals(t){return this._ticks===t._ticks}valueOf(){return this._ticks}compare(t,a){return t._ticks>a._ticks?1:t._ticks<a._ticks?-1:0}interval(t,a){const n=t*a+(0<=t?.5:-.5);return new Smart.Utilities.TimeSpan(n*this.ticksPerMillisecond)}fromDays(t){const a=this;return a.interval(t,a.millisPerDay)}fromHours(t){const a=this;return a.interval(t,a.millisPerHour)}fromMilliseconds(t){return this.interval(t,1)}fromMinutes(t){const a=this;return a.interval(t,a.millisPerMinute)}fromSeconds(t){const a=this;return a.interval(t,a.millisPerSecond)}fromTicks(t){return new Smart.Utilities.TimeSpan(t)}toString(){return this.totalMilliseconds().toString()}negate(){return new Smart.Utilities.TimeSpan(-this._ticks)}}),Smart.Utilities.Assign("DateTime",class{constructor(){function t(t){const i=a.regexISOString.exec(t);n=new Smart.Utilities.DateTime(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4]),parseFloat(i[5]),parseFloat(i[6]),parseFloat(i[7]),0,0,0,0,0,0,0,"UTC")}const a=this;let n;if(a.ticksPerMillisecond=1e4,a.millisecondsPerTick=1/1e4,a.ticksPerSecond=10000000,a.secondsPerTick=1/10000000,a.ticksPerMinute=600000000,a.minutesPerTick=1/600000000,a.ticksPerHour=36000000000,a.hoursPerTick=1/36000000000,a.ticksPerDay=864000000000,a.daysPerTick=1/864000000000,a.millisPerSecond=1e3,a.millisPerMinute=60000,a.millisPerHour=3600000,a.millisPerDay=86400000,a.daysPerYear=365,a.daysPer4Years=__daysPer4Years,a.daysPer100Years=__daysPer100Years,a.daysPer400Years=__daysPer400Years,a.daysTo1601=__daysTo1601,a.daysTo1899=__daysTo1899,a.daysTo10000=__daysTo10000,a.minTicks=0,a.maxTicks=__maxTicks,a.maxMillis=__maxMillis,a.datePartYear=0,a.datePartDayOfYear=1,a.datePartMonth=2,a.datePartDay=3,a.daysToMonth365=__daysToMonth365,a.daysToMonth366=__daysToMonth366,a.minValue=new Date(0),a.maxValue=new Date(3155378976000000000),a.ticksMask=0x3FFFFFFFFFFFFFFF,a.flagsMask=0xC000000000000000,a.localMask=0x8000000000000000,a.ticksCeiling=0x4000000000000000,a.kindUnspecified=0,a.kindUtc=0x4000000000000000,a.kindLocal=0x8000000000000000,a.kindLocalAmbiguousDst=0xC000000000000000,a.kindShift=62,a.regexTrim=/^\s+|\s+$/g,a.regexInfinity=/^[+-]?infinity$/i,a.regexHex=/^0x[a-f0-9]+$/i,a.regexParseFloat=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,a.regexISOString=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).(\d{3})Z$/,a.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",FP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",FPA:"yyyy/MM/dd HH:mm:ss:fffuunnppeeaaxxoo",FPA2:"yyyy-MM-dd HH:mm:ss:fffuunnppeeaaxxoo",FT:"HH:mm:ss:fff:uu:nn:pp:ee:aa:xx:oo",PP:"yyyy-MM-dd HH:mm:ss:fff:uu:nn:pp",PT:"HH:mm:ss:fff:uu:nn:pp"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},a.dateData=0,a.timeZone=null,a.timeZones=__timeZones,a._codeToUnit={u:"_microsecond",uu:"_microsecond",n:"_nanosecond",nn:"_nanosecond",p:"_picosecond",pp:"_picosecond",e:"_femtosecond",ee:"_femtosecond",a:"_attosecond",aa:"_attosecond",x:"_zeptosecond",xx:"_zeptosecond",o:"_yoctosecond",oo:"_yoctosecond"},a._smallUnits=["_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"],a._microsecond=0,a._nanosecond=0,a._picosecond=0,a._femtosecond=0,a._attosecond=0,a._zeptosecond=0,a._yoctosecond=0,0===arguments.length){const t=new Date;a.dateData=a.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+a.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else if(1===arguments.length){void 0===arguments[0]&&(arguments[0]="todayDate");const n="number"==typeof arguments[0]&&isFinite(arguments[0]);if(!n&&"string"==typeof arguments[0]){let n;"today"===arguments[0]?n=new Date:"todayDate"===arguments[0]?(n=new Date,n.setHours(0,0,0,0)):a.regexISOString.test(arguments[0])?t(arguments[0]):n=a.tryparseDate(arguments[0]),n&&(a.dateData=a.dateToMS(n.getFullYear(),n.getMonth()+1,n.getDate())+a.timeToMS(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))}else if("number"==typeof arguments[0])a.dateData=arguments[0];else if(arguments[0]instanceof Date){const t=arguments[0];a.dateData=a.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+a.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else a.dateData=arguments[0]}else if(2===arguments.length){void 0===arguments[0]&&(arguments[0]="todayDate");const n="number"==typeof arguments[0]&&isFinite(arguments[0]);if(!n&&"string"==typeof arguments[0]){let n;"today"===arguments[0]?n=new Date:"todayDate"===arguments[0]?(n=new Date,n.setHours(0,0,0,0)):a.regexISOString.test(arguments[0])?t(arguments[0]):n=a.tryparseDate(arguments[0]),n&&(a.dateData=a.dateToMS(n.getFullYear(),n.getMonth()+1,n.getDate())+a.timeToMS(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))}else if("number"==typeof arguments[0])a.dateData=arguments[0];else if(arguments[0]instanceof Date){const t=arguments[0];a.dateData=a.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+a.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else a.dateData=arguments[0];a.validateTimeZone(arguments[1])}else if(2<arguments.length)if("string"==typeof arguments[0]){const t=a.tryparseDate(arguments[0],arguments[2],arguments[1]);a.dateData=a.dateToMS(t.getFullYear(),t.getMonth()+1,t.getDate())+a.timeToMS(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}else{const t=arguments[0],n=arguments[1]-1,i=arguments[2],o=arguments[3]||0,r=arguments[4]||0,l=arguments[5]||0,s=arguments[6]||0,d=arguments[7]||0,c=arguments[8]||0,m=arguments[9]||0,p=arguments[10]||0,u=arguments[11]||0,g=arguments[12]||0,h=arguments[13]||0,f=new Date(t,n,i,o,r,l,s);1970>t&&f.setFullYear(t),a.dateData=a.dateToMS(f.getFullYear(),f.getMonth()+1,f.getDate())+a.timeToMS(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()),a._microsecond=d,a._nanosecond=c,a._picosecond=m,a._femtosecond=p,a._attosecond=u,a._zeptosecond=g,a._yoctosecond=h,arguments[14]&&a.validateTimeZone(arguments[14])}if(a.timeZone||a.validateTimeZone("Local"),n){const t=n.toTimeZone(a.timeZone);a.dateData=t.dateData}}static validateDate(t,a,n){if(t instanceof Smart.Utilities.DateTime)return t;if(t instanceof Date)return new Smart.Utilities.DateTime(t);try{if(new RegExp(/^\d{1,2}\/\d{1,2}\/\d{4}(, \d{1,2}:\d{2}:\d{1,2} [A|P]M)?$/).test(t)){const a=new Date(t);if(!isNaN(a.getTime()))return new Smart.Utilities.DateTime(a)}if("string"==typeof t)return this.parseDateString(t,a,n);if("number"==typeof t)return new Smart.Utilities.DateTime(new Date(t))}catch(t){}return a}static parseDateString(t,a,n){const i=t.indexOf("Date("),o=t.indexOf("DateTime("),r=t.lastIndexOf(")");let l=t;if((-1!==i||-1!==o)&&-1!==r){if(l=-1===i?t.slice(o+9,r):t.slice(i+5,r),l=l.replace(/'/g,"").replace(/"/g,"").replace(/^\s+|\s+$|\s+(?=\s)/g,""),""===l.trim())return new Smart.Utilities.DateTime;if(new RegExp(/(^(\d+)(\s*,\s*\d+)+(\s*,\s*[a-zA-Z ]+)?$)/g).test(l))return l=l.split(","),l.map(function(t,a){l[a]=isNaN(l[a])?t.trim():parseInt(t)}),-1!==i&&l[1]++,l.unshift(null),l=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,l)),l}else{const a=new Smart.Utilities.DateTime,i=a.parseDate(t,n);if(i)return l=new Smart.Utilities.DateTime(i),a.copySmallTimePartValues(l),l}if(""===l.trim())return a;if(!isNaN(l))return l=new Date(parseInt(l,10)),new Smart.Utilities.DateTime(l);try{const t=l.split(",");2===t.length?(t[1]=t[1].trim(),t.unshift(null),l=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,t))):l=new Smart.Utilities.DateTime(l)}catch(t){l=a}return l}static fromFullTimeStamp(t){t=t.toString();const a=new Smart.Utilities.DateTime(parseFloat(t.slice(0,t.length-21)));for(let n=t.slice(t.length-21),i=0;0<n.length;)a[a._smallUnits[i]]=parseInt(n.slice(0,3),10),n=n.slice(3),i++;return a}static getConstructorParameters(t){return[t.year(),t.month(),t.day(),t.hour(),t.minute(),t.second(),t.millisecond(),t._microsecond,t._nanosecond,t._picosecond,t._femtosecond,t._attosecond,t._zeptosecond,t._yoctosecond,t.timeZone]}static detectDisplayMode(t,a,n){if(t.calendar.patterns[a])return-1===["d","D","M","Y","d1","d2"].indexOf(a)?-1===["t","T","FT","PT"].indexOf(a)?"default":"timePicker":"calendar";const o=["d","M","y"],r=["h","H","m","s","t","f","u","n","p","e","a","x","o"],l=n.groups;let s=!1,d=!1;for(let c=0;c<l.length;c++){const t=l[c].charAt(0);if(-1===o.indexOf(t)?-1!==r.indexOf(t)&&(d=!0):s=!0,s&&d)break}return s==d?"default":s?"calendar":"timePicker"}static getLocalizedNames(t){const a={names:[],namesAbbr:[],namesShort:[]},n={names:[],namesAbbr:[]};if(this[t])return this[t];for(let n=23;30>n;n++){const i=new Date(2017,6,n),o=i.toLocaleString(t,{weekday:"long"});a.names.push(o),a.namesAbbr.push(i.toLocaleString(t,{weekday:"short"})),a.namesShort.push(o.substring(0,2))}for(let a=0;12>a;a++){const i=new Date(2017,a,1),o=i.toLocaleString(t,{month:"long"});n.names.push(o),n.namesAbbr.push(o.substring(0,3))}return n.names.push(""),n.namesAbbr.push(""),this[t]={days:a,months:n},this[t]}internalMS(){return this.dateData}getDatePart(t){const a=this,i=a.internalMS();let o=parseInt(i/a.millisPerDay);const r=parseInt(o/a.daysPer400Years);o-=r*a.daysPer400Years;let l=parseInt(o/a.daysPer100Years);4===l&&(l=3),o-=l*a.daysPer100Years;const s=parseInt(o/a.daysPer4Years);o-=s*a.daysPer4Years;let d=parseInt(o/a.daysPerYear);if(4===d&&(d=3),t===a.datePartYear)return parseInt(400*r+100*l+4*s+d+1);if(o-=d*a.daysPerYear,t===a.datePartDayOfYear)return parseInt(o+1);const c=3===d&&(24!==s||3===l),p=c?a.daysToMonth366:a.daysToMonth365;let u=o>>6;for(;o>=p[u];)u++;return t===a.datePartMonth?parseInt(u):parseInt(o-p[u-1]+1)}dayOfWeek(){const t=this,a=t.dateData,n=parseInt(a/t.millisPerDay+1)%7;return n}dayOfYear(){const t=this;return t.getDatePart(t.datePartDayOfYear)}weekOfYear(t){var a=Math.floor;const n=this,i=n.toDate(),o=t||n.calendar.firstDay,r=new Date(i.getFullYear(),0,1),l=a((i.getTime()-r.getTime()-6e4*(i.getTimezoneOffset()-r.getTimezoneOffset()))/864e5)+1;let s=r.getDay()-o;s=0<=s?s:s+7;let d;if(!(4>s))d=a((l+s-1)/7);else if(d=a((l+s-1)/7)+1,52<d){const t=new Date(i.getFullYear()+1,0,1);let a=t.getDay()-o;a=0<=a?a:a+7,d=4>a?1:53}return d}subtract(t){const a=this;return new Smart.Utilities.TimeSpan(a.dateData*a.ticksPerMillisecond-t.dateData*a.ticksPerMillisecond)}dateToMS(t,a,i){const o=this;if(1<=t&&9999>=t&&1<=a&&12>=a){t=parseInt(t);const r=o.isLeapYear(t)?o.daysToMonth366:o.daysToMonth365;if(1<=i&&i<=r[a]-r[a-1]){const l=t-1,s=365*l+parseInt(l/4)-parseInt(l/100)+parseInt(l/400)+r[a-1]+i-1;return s*o.millisPerDay}}}isLeapYear(t){if(1>t||9999<t)throw new Error("Year out of Range");return 0==t%4&&(0!=t%100||0==t%400)}timeToMS(t,a,n,i){const o=this;if(0<=t&&24>t&&0<=a&&60>a&&0<=n&&60>n){const r=parseInt(3600*t+60*a+n);return 0<i&&1e3>i?r*o.millisPerSecond+i:r*o.millisPerSecond}}daysInMonth(t,a){if(1>a||12<a)throw new Error("Month out of Range");const n=this,i=n.isLeapYear(t)?n.daysToMonth366:n.daysToMonth365;return i[a]-i[a-1]}arrayIndexOf(t,a){return t.indexOf(a)}startsWith(t,a){return 0===t.indexOf(a)}endsWith(t,a){return t.substr(t.length-a.length)===a}trim(t){return(t+"").replace(this.regexTrim,"")}expandFormat(t,a){a=a||"F";let n=t.patterns,i=a.length,o;if(n[a])return n[a];if(1===i){if(o=n[a],!o)throw"Invalid date format string '"+a+"'.";a=o}else 2===i&&"%"===a.charAt(0)&&(a=a.charAt(1));return a}getEra(t,a){if(!a)return 0;if("string"==typeof t)return 0;let n=t.getTime(),o;for(let r=0,i=a.length;r<i;r++)if(o=a[r].start,null===o||n>=o)return r;return 0}toUpper(t){return t.split("\xA0").join(" ").toUpperCase()}toUpperArray(t){const a=[];for(let n=0,i=t.length;n<i;n++)a[n]=this.toUpper(t[n]);return a}getEraYear(t,a,n,i){let o=t.getFullYear();return!i&&a.eras&&(o-=a.eras[n].offset),o}getDayIndex(t,a,n){const i=this,o=t.days;let r=t._upperDays,l;return r||(t._upperDays=r=[i.toUpperArray(o.names),i.toUpperArray(o.namesAbbr),i.toUpperArray(o.namesShort)]),a=a.toUpperCase(),n?(l=i.arrayIndexOf(r[1],a),-1===l&&(l=i.arrayIndexOf(r[2],a))):l=i.arrayIndexOf(r[0],a),l}getMonthIndex(t,a,n){const o=this;let r=t.months,l=t.monthsGenitive||t.months,s=t._upperMonths,d=t._upperMonthsGen;s||(t._upperMonths=s=[o.toUpperArray(r.names),o.toUpperArray(r.namesAbbr)],t._upperMonthsGen=d=[o.toUpperArray(l.names),o.toUpperArray(l.namesAbbr)]),a=o.toUpper(a);let c=o.arrayIndexOf(n?s[1]:s[0],a);return 0>c&&(c=o.arrayIndexOf(n?d[1]:d[0],a)),c}appendPreOrPostMatch(t,a){let n=0,i=!1;for(let o=0,r=t.length;o<r;o++){const r=t.charAt(o);switch(r){case"'":i?a.push("'"):n++,i=!1;break;case"\\":i&&a.push("\\"),i=!i;break;default:a.push(r),i=!1;}}return n}getTokenRegExp(){return /\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyyy|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|uu|u|nn|n|pp|p|ee|e|aa|a|xx|x|oo|o|i{1,24}|zzz|zz|z|gg|g/g}tryparseDate(t,a,n){const o=this;if((void 0===a||null===a)&&(a=o.calendar),void 0!==n){if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=o.parseDate(t,n[r],a);if(i)return i}const i=o.parseDate(t,n,a);if(i)return i}if(""===t)return null;if(null===t||void 0===t||t.substring||(t=t.toString()),null!==t&&void 0!==t&&"/Date("===t.substring(0,6)){const a=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/;let n=new Date(+t.replace(/\/Date\((\d+)\)\//,"$1"));if("Invalid Date"===n){const a=t.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/);n=null,a&&(n=new Date(1*a[1]+36e5*a[2]+6e4*a[3]))}if(null===n||void 0===n||"Invalid Date"===n||isNaN(n)){const n=a.exec(t);if(n){const t=new Date(parseInt(n[1]));if(n[2]){let a=parseInt(n[3]);"-"===n[2]&&(a=-a);const i=t.getUTCMinutes();t.setUTCMinutes(i-a)}if(!isNaN(t.valueOf()))return t}}return n}const i={smartdate:"yyyy-MM-dd HH:mm:ss",d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",ISO8601:"yyyy-MM-ddTHH:mm:ss.sssZ",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",d4:"MM.dd.yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff",iso:"yyyy-MM-ddTHH:mm:ssZ",iso_date1:"yyyy-MM-dd",iso_date2:"yyyy-MM-dd",iso_date3:"yyyy-ddd",iso_date4:"yyyy-MM-dd HH:mm",iso_date5:"yyyy-MM-dd HH:mm Z",iso_date6:"yyyy-MMM-dd",iso_date7:"yyyy-MM",iso_date8:"yyyy-MMM",iso_date9:"yyyy-MMMM",iso_date10:"yyyy-MMMM-dd",iso_time1:"HH:mm:ss.tttt",iso_time2:"HH:mm:ss",iso_time3:"HH:mm",iso_time4:"HH",iso_time5:"yyyyyy-MM-dd",iso_time6:"yyyyyy-MM-dd"};for(let r in i){const n=o.parseDate(t,i[r],a);if(n)return n}const r=a.patterns;for(let i in r){const n=o.parseDate(t,r[i],a);if(n){if("ISO"==i){const n=o.parseDate(t,r.ISO2,a);if(n)return n}return n}}let l;if("string"==typeof t){t=o.trim(t);const n=[":","/","-"," ",","];t=function(t,a,n){return n.replace(new RegExp(t,"g"),a)}(", ",",",t);let i="",r=t;0<=t.indexOf(":")?(i=t.substring(t.indexOf(":")-2),i=o.trim(i),r=t.substring(0,t.indexOf(":")-2)):0<=t.toUpperCase().indexOf("AM")?(i=t.substring(t.toUpperCase().indexOf("AM")-2),i=o.trim(i),r=t.substring(0,t.toUpperCase().indexOf("AM")-2)):0<=t.toUpperCase().indexOf("PM")&&(i=t.substring(t.toUpperCase().indexOf("PM")-2),i=o.trim(i),r=t.substring(0,t.toUpperCase().indexOf("PM")-2));let s=new Date,d=!1;if(r){for(let t=0;t<n.length;t++)if(0<=r.indexOf(n[t])){l=r.split(n[t]);break}let t=[],c=[],p=[],m=null,u=null;for(let n=0;n<l.length;n++){const i=l[n],r=o.parseDate(i,"d",a)||o.parseDate(i,"dd",a)||o.parseDate(i,"ddd",a)||o.parseDate(i,"dddd",a);if(r&&(t.push(r.getDate()),2<i.length)){m=n;break}}for(let t=0;t<l.length;t++){const n=l[t],i=o.parseDate(n,"M",a)||o.parseDate(n,"MM",a)||o.parseDate(n,"MMM",a)||o.parseDate(n,"MMMM",a);if(i){if(null!==m&&void 0!==m&&m===t)continue;if(c.push(i.getMonth()),2<n.length){u=t;break}}}for(let t=0;t<l.length;t++){const n=l[t],i=o.parseDate(n,"yyyy",a);if(i){if(null!==m&&void 0!==m&&m===t)continue;if(null!==u&&void 0!==u&&u===t)continue;p.push(i.getFullYear())}}const i=[];for(let a=0;a<t.length;a++)for(let n=0;n<c.length;n++)for(let o=0;o<p.length;o++){const r=new Date(p[o],c[n],t[a]);1970>p[o]&&r.setFullYear(p[o]),isNaN(r.getTime())||i.push(r)}0<i.length&&(s=i[0],d=!0)}if(i){const t=0<=i.indexOf(":")?i.split(":"):i,n=o.parseDate(i,"h:mm tt",a)||o.parseDate(i,"HH:mm:ss.fff",a)||o.parseDate(i,"HH:mm:ss.ff",a)||o.parseDate(i,"h:mm:ss tt",a)||o.parseDate(i,"HH:mm:ss.tttt",a)||o.parseDate(i,"HH:mm:ss",a)||o.parseDate(i,"HH:mm",a)||o.parseDate(i,"HH",a);let r=0,l=0,c=0,m=0;n&&!isNaN(n.getTime())?(r=n.getHours(),l=n.getMinutes(),c=n.getSeconds(),m=n.getMilliseconds()):(1===t.length&&(r=parseInt(t[0])),2===t.length&&(r=parseInt(t[0]),l=parseInt(t[1])),3===t.length&&(r=parseInt(t[0]),l=parseInt(t[1]),0<=t[2].indexOf(".")?(c=parseInt(t[2].toString().split(".")[0]),m=parseInt(t[2].toString().split(".")[1])):c=parseInt(t[2])),4===t.length&&(r=parseInt(t[0]),l=parseInt(t[1]),c=parseInt(t[2]),m=parseInt(t[3]))),!s||isNaN(r)||isNaN(l)||isNaN(c)||isNaN(m)||(s.setHours(r,l,c,m),d=!0)}if(d)return s}if(null!==t&&void 0!==t){l=[":","/","-"];let a=!0;for(let n=0;n<l.length;n++)-1!==t.indexOf(l[n])&&(a=!1);if(a){const a=new Number(t);if(!isNaN(a))return new Date(a)}}return null}getParseRegExp(t,a){const n=this;let i=t._parseRegExp;if(!i)t._parseRegExp=i={};else{const t=i[a];if(t)return t}let o=n.expandFormat(t,a).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],l=[],s=0,d=0,c=n.getTokenRegExp(),p;for(;null!==(p=c.exec(o));){const t=o.slice(s,p.index);if(s=c.lastIndex,d+=n.appendPreOrPostMatch(t,r),d%2){r.push(p[0]);continue}let a=p[0],i=a.length,m;switch(a){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":m="(\\D+)";break;case"tt":case"t":m="(\\D*)";break;case"yyyyy":m="(\\d{1,4})";break;case"yyyy":m="(\\d{"+i+"})";break;case"fff":case"ff":case"f":m="(\\d{1,"+i+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":m="(\\d\\d?)";break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":m="(\\d{1,3})";break;case"zzz":m="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":m="([+-]?\\d\\d?)";break;case"/":m="/";break;default:if(/i{1,24}/.test(a))m="(\\d{"+a.length+"})";else throw"Invalid date format pattern '"+a+"'.";}(m&&r.push(m),"/"!==a)&&l.push(p[0])}n.appendPreOrPostMatch(o.slice(s),r),r.push("$");const m=r.join("").replace(/\s+/g,"\\s+");return i[a]={regExp:m,groups:l}}outOfRange(t,a,n){return t<a||t>n}expandYear(t,a){const n=this,i=new Date,o=n.getEra(i);if(100>a){let r=t.twoDigitYearMax;r="string"==typeof r?new Date().getFullYear()%100+parseInt(r,10):r;const l=n.getEraYear(i,t,o);a+=l-l%100,a>r&&(a-=100)}return a}padZeros(t,a){let n=t+"",i;return 1<a&&n.length<a?(i=["0","00","000"][a-2]+n,i.substr(i.length-a,a)):(i=n,i)}parseDate(t,a,n){const i=this;(void 0===n||null===n)&&(n=i.calendar),t=i.trim(t);const o=n,r=i.getParseRegExp(o,a),l=new RegExp(r.regExp).exec(t);if(null===l)return null;let s=r.groups,d=null,c=null,m=null,p=null,u=null,g=0,h=0,f=0,_=0,y=null,b=!1,v;for(let r=0,x=s.length;r<x;r++){const t=l[r+1];if(t){const a=s[r],n=a.length,l=parseInt(t,10);switch(a){case"dd":case"d":if(p=l,i.outOfRange(p,1,31))return null;break;case"MMM":case"MMMM":case"MMMMM":case"MMMMMM":case"MMMMMMM":case"MMMMMMMM":if(m=i.getMonthIndex(o,t,3===n),i.outOfRange(m,0,11))return null;break;case"M":case"MM":if(m=l-1,i.outOfRange(m,0,11))return null;break;case"y":case"yy":case"yyyy":if(c=4>n?i.expandYear(o,l):l,i.outOfRange(c,0,9999))return null;break;case"h":case"hh":if(g=l,12===g&&(g=0),i.outOfRange(g,0,11))return null;break;case"H":case"HH":if(g=l,i.outOfRange(g,0,23))return null;break;case"m":case"mm":if(h=l,i.outOfRange(h,0,59))return null;break;case"s":case"ss":if(f=l,i.outOfRange(f,0,59))return null;break;case"tt":case"t":if(b=o.PM&&(t===o.PM[0]||t===o.PM[1]||t===o.PM[2]),!b&&(!o.AM||t!==o.AM[0]&&t!==o.AM[1]&&t!==o.AM[2]))return null;break;case"f":case"ff":case"fff":if(_=l*Math.pow(10,3-n),i.outOfRange(_,0,999))return null;break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":if(i.outOfRange(l,0,1e3))return null;i[i._codeToUnit[a]]=l;break;case"ddd":case"dddd":if(u=i.getDayIndex(o,t,3===n),i.outOfRange(u,0,6))return null;break;case"zzz":{const a=t.split(/:/);if(2!==a.length)return null;if(v=parseInt(a[0],10),i.outOfRange(v,-12,13))return null;const n=parseInt(a[1],10);if(i.outOfRange(n,0,59))return null;y=60*v+(i.startsWith(t,"-")?-n:n);break}case"z":case"zz":if(v=l,i.outOfRange(v,-12,13))return null;y=60*v;break;case"g":case"gg":{let a=t;if(!a||!o.eras)return null;a=this.trim(a.toLowerCase());for(let t=0,n=o.eras.length;t<n;t++)if(a===o.eras[t].nathat.toLowerCase()){d=t;break}if(null===d)return null;break}default:{let a=t;1==a.length%3?a+="00":2==a.length%3&&(a+="0"),_=parseInt(a.slice(0,3),10),a=a.slice(3);for(let t=0;0<a.length;)i[i._smallUnits[t]]=parseInt(a.slice(0,3),10),a=a.slice(3),t++}}}}let x=new Date,C=o.convert,S;if(S=x.getFullYear(),null===c?c=S:o.eras&&(c+=o.eras[d||0].offset),null===m&&(m=0),null===p&&(p=1),!C){if(x.setFullYear(c,m,p),x.getDate()!==p)return null;if(null!==u&&x.getDay()!==u)return null}else if(x=C.toGregorian(c,m,p),null===x)return null;if(b&&12>g&&(g+=12),x.setHours(g,h,f,_),null!==y){const t=x.getMinutes()-(y+x.getTimezoneOffset());x.setHours(x.getHours()+parseInt(t/60,10),t%60)}return x}toString(t,a){function n(t,a){if(h)return h[a];if(void 0!==t.getMonth)switch(a){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();}}var i=Math.floor,o=Math.abs;const r=this;void 0===t&&(t="yyyy-MM-dd HH:mm:ss");const l=r.dateData.toString()+r.getFractionsOfSecondStamp()+t+(r.timeZone||"");if(Smart.Utilities.DateTime.cache&&Smart.Utilities.DateTime.cache[l])return Smart.Utilities.DateTime.cache[l];const s=r.toDate();if((void 0===a||null===a)&&(a=r.calendar),"string"==typeof s)return s;if(!t||!t.length||"i"===t){let t;return t=r.formatDate(s,a.patterns.F,a),t}const d=a.eras,c="s"===t;t=r.expandFormat(a,t);const m=[];let p=0,u=r.getTokenRegExp(),g,h;for(;;){const l=u.lastIndex,h=u.exec(t),f=t.slice(l,h?h.index:t.length);if(p+=r.appendPreOrPostMatch(f,m),!h)break;if(p%2){m.push(h[0]);continue}const _=h[0],y=_.length;let b;if(/i{1,24}/.test(_)){m.push(r.getFirstNDigitsOfPrecision(_.length));continue}switch(_){case"ddd":case"dddd":{const t=3===y?a.days.namesAbbr:a.days.names;m.push(t[s.getDay()]);break}case"d":case"dd":m.push(r.padZeros(n(s,2),y));break;case"MMM":case"MMMM":b=n(s,1),m.push(a.months[3===y?"namesAbbr":"names"][b]);break;case"M":case"MM":m.push(r.padZeros(n(s,1)+1,y));break;case"y":case"yy":case"yyyy":b=r.getEraYear(s,a,r.getEra(s,d),c),4>y&&(b%=100),m.push(r.padZeros(b,y));break;case"h":case"hh":g=s.getHours()%12,0===g&&(g=12),m.push(r.padZeros(g,y));break;case"H":case"HH":m.push(r.padZeros(s.getHours(),y));break;case"m":case"mm":m.push(r.padZeros(s.getMinutes(),y));break;case"s":case"ss":m.push(r.padZeros(s.getSeconds(),y));break;case"t":case"tt":b=12>s.getHours()?a.AM?a.AM[0]:" ":a.PM?a.PM[0]:" ",m.push(1===y?b.charAt(0):b);break;case"f":case"ff":case"fff":m.push(r.padZeros(s.getMilliseconds(),3).substr(0,y));break;case"u":case"n":case"p":case"e":case"a":case"x":case"o":m.push(r[r._codeToUnit[_]]);break;case"uu":case"nn":case"pp":case"ee":case"aa":case"xx":case"oo":m.push(r.padZeros(r[r._codeToUnit[_]],3));break;case"z":case"zz":m.push((0<=r.timeZoneOffsetHours?"+":"-")+r.padZeros(i(o(r.timeZoneOffsetHours)),y));break;case"zzz":m.push((0<=r.timeZoneOffsetHours?"+":"-")+r.padZeros(i(o(r.timeZoneOffsetHours)),2)+":"+r.padZeros(60*o(r.timeZoneOffsetHours%1),2));break;case"g":case"gg":a.eras&&m.push(a.eras[r.getEra(s,d)].name);break;case"/":m.push(a["/"]);break;default:throw"Invalid date format pattern '"+_+"'.";}}const f=m.join("");return Smart.Utilities.DateTime.cache||(Smart.Utilities.DateTime.cache=[]),Smart.Utilities.DateTime.cache[l]=f,f}getFractionsOfSecondStamp(){const t=this;return t._microsecond.toString()+t._nanosecond+t._picosecond+t._femtosecond+t._attosecond+t._zeptosecond+t._yoctosecond}getFirstNDigitsOfPrecision(t,a){const n=this,i=""+(!0===a?"":n.padZeros(n.millisecond(),3))+n.padZeros(n._microsecond,3)+n.padZeros(n._nanosecond,3)+n.padZeros(n._picosecond,3)+n.padZeros(n._femtosecond,3)+n.padZeros(n._attosecond,3)+n.padZeros(n._zeptosecond,3)+n.padZeros(n._yoctosecond,3);return i.slice(0,t)}copySmallTimePartValues(t){const a=this;t._microsecond=a._microsecond,t._nanosecond=a._nanosecond,t._picosecond=a._picosecond,t._femtosecond=a._femtosecond,t._attosecond=a._attosecond,t._zeptosecond=a._zeptosecond,t._yoctosecond=a._yoctosecond}add(t,a,n){const i=this,o=i.internalMS();if(void 0===a){if(!1===n)return i.dateData=o+parseInt(t._ticks/i.ticksPerMillisecond),i;const a=new Smart.Utilities.DateTime(o+parseInt(t._ticks/i.ticksPerMillisecond));return i.copyTimeZone(a),i.copySmallTimePartValues(a),a}const r=t*a;if(r<=-i.maxMillis||r>=i.maxMillis)throw new Error("Out of Range");if(!1===n)return i.dateData=o+r,i;const l=new Smart.Utilities.DateTime(o+r);return i.copyTimeZone(l),i.copySmallTimePartValues(l),l}addDays(t,a){const n=this;return n.add(t,n.millisPerDay,a)}clone(){const t=this,a=new Smart.Utilities.DateTime(t.dateData);return t.copyTimeZone(a),t.copySmallTimePartValues(a),a}clearTime(){const t=this,a=t.month(),n=t.year(),i=t.day(),o=new Smart.Utilities.DateTime(n,a,i,0,0,0,0);return t.copyTimeZone(o),o}addHours(t,a){const n=this;return n.add(t,n.millisPerHour,a)}addDeciseconds(t,a){return this.add(100*t,1,a)}addCentiseconds(t,a){return this.add(10*t,1,a)}addMilliseconds(t,a){return this.add(t,1,a)}addMinutes(t,a){const n=this;return n.add(t,n.millisPerMinute,a)}addMonths(t,a){const n=this;if(-12e4>t||12e4<t)throw new Error("Invalid Months Value");let o=parseInt(n.getDatePart(n.datePartYear)),r=parseInt(n.getDatePart(n.datePartMonth)),i=parseInt(n.getDatePart(n.datePartDay));if(0==t%12)o+=t/12;else{const a=r-1+t;0<=a?(r=a%12+1,o+=a/12):(r=12+(a+1)%12,o+=(a-11)/12),o=parseInt(o)}if(1>o||9999<o)throw new Error("Year out of range");const l=n.daysInMonth(o,r);if(i>l&&(i=l),!1===a)return n.dateData=n.dateToMS(o,r,i)+n.internalMS()%n.millisPerDay,n;const s=new Smart.Utilities.DateTime(n.dateToMS(o,r,i)+n.internalMS()%n.millisPerDay);return n.copyTimeZone(s),n.copySmallTimePartValues(s),s}addSeconds(t,a){const n=this;return n.add(t,n.millisPerSecond,a)}addYears(t,a){return this.addMonths(12*t,a)}addMicroseconds(t,a){if(0===t)return;const n=this;let i,o;0>t&&0===n.hour()&&0===n.minute()&&0===n.second()&&0===n.millisecond()&&0===n._microsecond&&(i=parseInt(t/1e3,10)-1,o=1e3+t%1e3);const r=1e3*n.timeToMS(n.hour(),n.minute(),n.second(),n.millisecond())+n._microsecond,l=r+t;void 0==i&&(i=parseInt(l/1e3,10)-parseInt(r/1e3,10)),void 0===o&&(o=parseInt(l%1e3,10));let s;return 0!==i&&(s=n.addMilliseconds(i,a)),!1===a?void(n._microsecond=o):(s||(s=n.clone()),s._microsecond=o,s)}addFractionsOfSecond(t,a,n,i,o){if(0===t)return;const r=this,l=1e3*r[i]+r[n],s=t+l;let d=parseInt(s/1e3,10)-parseInt(l/1e3,10),c=parseInt(s%1e3,10),m;return 0>t&&0>s&&0>c&&(d--,c=1e3+c),0!=d&&(m=r[o](d,a)),!1===a?void(r[n]=c):(m||(m=r.clone()),m[n]=c,m)}addNanoseconds(t,a){return this.addFractionsOfSecond(t,a,"_nanosecond","_microsecond","addMicroseconds")}addPicoseconds(t,a){return this.addFractionsOfSecond(t,a,"_picosecond","_nanosecond","addNanoseconds")}addFemtoseconds(t,a){return this.addFractionsOfSecond(t,a,"_femtosecond","_picosecond","addPicoseconds")}addAttoseconds(t,a){return this.addFractionsOfSecond(t,a,"_attosecond","_femtosecond","addFemtoseconds")}addZeptoseconds(t,a){return this.addFractionsOfSecond(t,a,"_zeptosecond","_attosecond","addAttoseconds")}addYoctoseconds(t,a){return this.addFractionsOfSecond(t,a,"_yoctosecond","_zeptosecond","addZeptoseconds")}getTimeZoneOffset(){const t=new Date,a=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),6,1),i=t.getTimezoneOffset()<Math.max(a.getTimezoneOffset(),n.getTimezoneOffset());return{offset:-(t.getTimezoneOffset()/60),dst:+i}}isInDaylightSavingTime(){const t=new Date,a=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),6,1);return this.date().getTimezoneOffset()<Math.max(a.getTimezoneOffset(),n.getTimezoneOffset())}supportsDaylightSavingTime(){const t=new Date,a=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),6,1);return a.getTimezoneOffset()!==n.getTimezoneOffset()}date(){const t=this,a=t.month(),n=t.year(),i=t.day(),o=new Smart.Utilities.DateTime(n,a,i);return t.copyTimeZone(o),o}isWeekend(){const t=this;return 0===t.dayOfWeek()||6===t.dayOfWeek()}toDate(t){const a=this,n=a.month(),i=a.year(),o=a.day(),r=a.hour(),l=a.minute(),s=a.second(),d=a.millisecond();let c=new Date(i,n-1,o);if(1970>i&&c.setFullYear(i),c.setHours(r,l,s,d),t){const n=a.timeZones.filter(function(a){return a.id===t});if(n.length){let t=n[0].offset;const i=c.getTime();let o=1e3*(60*c.getTimezoneOffset());if(a.timeZone){const t=a.timeZones.filter(function(t){return t.id===a.timeZone});t.length&&(o=1e3*(60*-t[0].offset))}const r=i+o;c=new Date(r+60000*t)}}return c}toTimeZone(t){const a=this;let n=t;if((null===n||void 0===n)&&(n="Local"),a.timeZone===n)return a.clone();const i=a.timeZones.filter(function(t){return t.id===n});if(0===i.length)return a.clone();const o=this.toDate(n),r=new Smart.Utilities.DateTime(o);return r.timeZone=n,r.timeZoneOffset=i[0].offset,r.timeZoneOffsetHours=i[0].offsetHours,a.copySmallTimePartValues(r),r}day(){const t=this;return t.getDatePart(t.datePartDay)}month(){const t=this;return t.getDatePart(t.datePartMonth)}year(){const t=this;return t.getDatePart(t.datePartYear)}millisecond(){return parseInt(this.internalMS()%1e3)}hour(){const t=this;return parseInt(Math.floor(t.internalMS()/t.millisPerHour)%24)}minute(){const t=this;return parseInt(t.internalMS()/t.millisPerMinute%60)}second(){const t=this;return parseInt(t.internalMS()/t.millisPerSecond%60)}microsecond(){return this._microsecond}nanosecond(){return this._nanosecond}picosecond(){return this._picosecond}femtosecond(){return this._femtosecond}attosecond(){return this._attosecond}zeptosecond(){return this._zeptosecond}yoctosecond(){return this._yoctosecond}valueOf(){return this.dateData}equals(t){const a=this;return a.dateData===t.dateData&&a._microsecond===t._microsecond&&a._nanosecond===t._nanosecond&&a._picosecond===t._picosecond&&a._femtosecond===t._femtosecond&&a._attosecond===t._attosecond&&a._zeptosecond===t._zeptosecond&&a._yoctosecond===t._yoctosecond}equalDateParts(t){const a=this;return!(a.year()!==t.year()||a.month()!==t.month()||a.day()!==t.day())}compare(t){const a=this;if(a.equals(t))return 0;const n=["dateData","_microsecond","_nanosecond","_picosecond","_femtosecond","_attosecond","_zeptosecond","_yoctosecond"];for(let o=0;o<n.length;o++){const i=n[o];if(a[i]>t[i])return 1;if(a[i]<t[i])return-1}return 0}toDateString(){return this.toDate().toDateString()}toLocaleDateString(){const t=this;return t.toDate().toLocaleDateString(t.calendar.locale)}toLocaleString(){const t=this;return t.toDate().toLocaleString(t.calendar.locale)}toLocaleTimeString(){const t=this;return t.toDate().toLocaleTimeString(t.calendar.locale)}validateTimeZone(t){const a=this;if("string"==typeof t){const n=a.timeZones.filter(function(a){return a.id===t});0===n.length||(a.timeZone=t,a.timeZoneOffset=n[0].offset,a.timeZoneOffsetHours=n[0].offsetHours)}}copyTimeZone(t){const a=this;t.timeZone=a.timeZone,t.timeZoneOffset=a.timeZoneOffset,t.timeZoneOffsetHours=a.timeZoneOffsetHours}getTimeStamp(){const t=this,a=new Smart.Utilities.BigNumber(t.dateData.toString()+t.getFirstNDigitsOfPrecision(void 0,!0));return a}}),Smart.Utilities.Assign("Draw",class{constructor(t,a){const n=this;n.host=t,n.renderEngine=a||"",n.refresh();const o=["clear","removeElement","attr","getAttr","line","circle","rect","path","pieslice","pieSlicePath","text","measureText"];for(let r in o)n._addFn(Smart.Utilities.Draw.prototype,o[r])}_addFn(t,a){t[a]||(t[a]=function(){return this.renderer[a].apply(this.renderer,arguments)})}_initRenderer(t){return this.createRenderer(this,t)}_internalRefresh(){const t=this;if(t.renderer||(t.host.innerHTML="",t._initRenderer(t.host)),"none"!==window.getComputedStyle(t.host).display){const a=t.renderer;if(a){const n=a.getRect();t._render({x:1,y:1,width:n.width,height:n.height})}}}_render(t){this._plotRect=t}refresh(){this._internalRefresh()}getSize(){const t=this._plotRect;return{width:t.width,height:t.height}}toGreyScale(t){if(-1===t.indexOf("#"))return t;const a=this.cssToRgb(t);a[0]=a[1]=a[2]=Math.round(.3*a[0]+.59*a[1]+.11*a[2]);const n=this.rgbToHex(a[0],a[1],a[2]);return"#"+n[0]+n[1]+n[2]}decToHex(t){return t.toString(16)}hexToDec(t){return parseInt(t,16)}rgbToHex(t,a,n){return[this.decToHex(t),this.decToHex(a),this.decToHex(n)]}hexToRgb(t,a,n){return[this.hexToDec(t),this.hexToDec(a),this.hexToDec(n)]}cssToRgb(t){return-1>=t.indexOf("rgb")?this.hexToRgb(t.substring(1,3),t.substring(3,5),t.substring(5,7)):t.substring(4,t.length-1).split(",")}hslToRgb(t){let a,n,i;const o=parseFloat(t[0]),d=parseFloat(t[1]),s=parseFloat(t[2]);if(0===d)a=n=i=s;else{const t=.5>s?s*(1+d):s+d-s*d,r=2*s-t;a=this.hueToRgb(r,t,o+1/3),n=this.hueToRgb(r,t,o),i=this.hueToRgb(r,t,o-1/3)}return[255*a,255*n,255*i]}hueToRgb(a,n,i){return(0>i&&(i+=1),1<i&&(i-=1),i<1/6)?a+6*(n-a)*i:i<1/2?n:i<2/3?a+6*((n-a)*(2/3-i)):a}rgbToHsl(t){const a=parseFloat(t[0])/255,n=parseFloat(t[1])/255,i=parseFloat(t[2])/255,o=Math.max(a,n,i),r=Math.min(a,n,i);let d=(o+r)/2,l,c;if(o===r)l=c=0;else{const t=o-r;c=.5<d?t/(2-o-r):t/(o+r);o===a?l=(n-i)/t+(n<i?6:0):o===n?l=(i-a)/t+2:o===i?l=(a-n)/t+4:void 0;l/=6}return[l,c,d]}swap(t,a){const n=t;t=a,a=n}getNum(t){if(!(t.constructor!==Array)){for(let a=0;a<t.length;a++)if(!isNaN(t[a]))return t[a];}else if(isNaN(t))return 0;return 0}_ptRotate(t,a,n,i,o){var r=Math.abs,l=Math.pow;const s=Math.sqrt(l(r(t-n),2)+l(r(a-i),2)),d=Math.asin((t-n)/s),c=d+o;return t=n+Math.cos(c)*s,a=i+Math.sin(c)*s,{x:t,y:a}}log(t,a){var n=Math.log;return n(t)/(a?n(a):1)}_mod(t,n){const i=Math.abs(t>n?n:t);let o=1;if(0!==i)for(;100>i*o;)o*=10;return t*=o,n*=o,t%n/o}createRenderer(t,a){const n=t;let i=n.renderer=null;return document.createElementNS&&"HTML5"!==n.renderEngine&&(i=new Smart.Utilities.SvgRenderer(this)),null===i&&("HTML5"===n.renderEngine||void 0===n.renderEngine)&&(i=new Smart.Utilities.HTML5Renderer(this)),i.init(a),n.renderer=i,i}getByPriority(t){let a;for(let n=0;n<t.length;n++){const i=t[n];if(i!==void 0&&null!==i&&""!==i){a=i;break}}return a}get(t,a,n){return n===void 0?t[a]:t[a][n]}min(t,a){let n=NaN;for(let o=0;o<t.length;o++){const i=this.get(t,o,a);(isNaN(n)||i<n)&&(n=i)}return n}max(t,a){let n=NaN;for(let o=0;o<t.length;o++){const i=this.get(t,o,a);(isNaN(n)||i>n)&&(n=i)}return n}sum(t,a){let n=0;for(let o=0;o<t.length;o++){const i=this.get(t,o,a);isNaN(i)||(n+=i)}return n}count(t,a){let n=0;for(let o=0;o<t.length;o++){const i=this.get(t,o,a);isNaN(i)||n++}return n}avg(t,a){return this.sum(t,a)/Math.max(1,this.count(t,a))}filter(t,a){if(!a)return t;const n=[];for(let o=0;o<t.length;o++)a(t[o])&&n.push(t[o]);return n}scale(t,a,n,i){var o=Math.min,r=Math.abs,l=Math.pow,s=Math.max;if(isNaN(t))return NaN;if((t<o(a.min,a.max)||t>s(a.min,a.max))&&(!i||!0!==i.ignore_range))return NaN;let d=NaN,c=1;if(a.type===void 0||"logarithmic"!==a.type){let n=r(a.max-a.min);n||(n=1),c=r(t-o(a.min,a.max))/n}else if("logarithmic"===a.type){let n=a.base;isNaN(n)&&(n=10);let i=o(a.min,a.max);0>=i&&(i=1);let d=s(a.min,a.max);0>=d&&(d=1);const m=this.log(d,n);d=l(n,m);const p=this.log(i,n);i=l(n,p);const u=this.log(t,n);c=r(u-p)/(m-p)}if("logarithmic"===n.type){let t=n.base;isNaN(t)&&(t=10);const a=this.log(n.max,t),i=this.log(n.min,t);n.flip&&(c=1-c);const s=o(i,a)+c*r(a-i);d=l(t,s)}else d=o(n.min,n.max)+c*r(n.max-n.min),n.flip&&(d=s(n.min,n.max)-d+n.min);return d}axis(t,a,n){var o=Math.round,r=Math.floor,l=Math.pow;if(1>=n)return[a,t];(isNaN(n)||2>n)&&(n=2);let s=0;for(;o(t)!==t&&o(a)!==a&&10>s;)t*=10,a*=10,s++;let d=(a-t)/n;for(;10>s&&o(d)!==d;)t*=10,a*=10,d*=10,s++;const c=[1,2,5];let m=0,p;for(;;){let t=m%c.length,a=r(m/c.length),n=l(10,a)*c[t];if(t=(m+1)%c.length,a=r((m+1)/c.length),p=l(10,a)*c[t],d>=n&&d<p)break;m++}const u=p,g=[];let h=this.renderer._rnd(t,u,!1);for(const i=0>=s?1:l(10,s);h<a+u;)g.push(h/i),h+=u;return g}_widgetToImage(t,a,n,i,o){let r=t;if(!r)return!1;(void 0===n||""===n)&&(n="image."+a);let l=r.renderEngine,s=r.animation;if(r.animation="none",r.renderEngine="HTML5",r.renderEngine!==l)try{r.refresh()}catch(t){return r.renderEngine=l,r.refresh(),r.animation=s,!1}let d=r.renderer.getContainer().firstElementChild,c=!0;"function"==typeof i&&(c=i(t,d));let m=!0;return c&&(m=this.exportImage(d,a,n,o)),r.renderEngine!==l&&(r.renderEngine=l,r.refresh(),r.animation=s),m}_saveAsImage(t,a){return this._widgetToImage(this,t,a)}saveAsPNG(t){return this._saveAsImage("png",t)}saveAsJPEG(t){return this._saveAsImage("jpeg",t)}exportImage(t,a,n,i){if(!t)return!1;let o="pdf"===a.toLowerCase();o&&(a="jpeg"),(n===void 0||""===n)&&(n="image."+a);let r=!0;try{if(t)if(o){i=i||"portrait";const o=t.toDataURL("image/"+a),r={content:{image:o,width:Math.min(t.width/1.35,"portrait"===i?515:762)},pageOrientation:i};pdfMake.createPdf(r).download(n)}else{const i=new Smart.Utilities.DataExporter;t.toBlob(function(t){i.downloadFile(t,a,n)})}}catch(t){r=!1}return r}}),Smart.Utilities.Assign("Renderer",class{constructor(t){const a=this;a.draw=t,a._gradients={},a._toRadiansCoefficient=2*Math.PI/360}pieSlicePath(t,a,n,i,o,r,l){var s=Math.abs,d=Math.sin,c=Math.cos;i||(i=1);const m=s(o-r),p=180<m?1:0;360<=m&&(r=o+359.99);const u=o*this._toRadiansCoefficient,g=r*this._toRadiansCoefficient;let h=t,f=t,_=a,b=a;const v=!isNaN(n)&&0<n;v&&(l=0);const C=c(u),S=d(u),w=c(g),T=d(g);if(0<l+n){if(0<l){const n=(m/2+o)*this._toRadiansCoefficient;t+=l*c(n),a-=l*d(n)}v&&(h=t+n*C,_=a-n*S,f=t+n*w,b=a-n*T)}const D=t+i*C,M=t+i*w,I=a-i*S,$=a-i*T;let N="";const B=.02<s(s(r-o)-360);return v?(N="M "+f+","+b,N+=" a"+n+","+n,N+=" 0 "+p+",1 "+(h-f)+","+(_-b),N+=B?" L"+D+","+I:" M"+D+","+I,N+=" a"+i+","+i,N+=" 0 "+p+",0 "+(M-D)+","+($-I),B&&(N+=" Z")):(N="M "+M+","+$,N+=" a"+i+","+i,N+=" 0 "+p+",1 "+(D-M)+","+(I-$),B&&(N+=" L"+t+","+a,N+=" Z")),N}measureText(t,a,n,i){var o=Math.abs;const r=this._getTextParts(t,a,n),l=r.width;let s=r.height;!1===i&&(s/=.6);let d={};if(isNaN(a)&&(a=0),0===a)d={width:this._rup(l),height:this._rup(s)};else{const t=2*(a*Math.PI)/360,n=o(Math.sin(t)),i=o(Math.cos(t)),r=o(l*n+s*i),c=o(l*i+s*n);d={width:this._rup(c),height:this._rup(r)}}return i&&(d.textPartsInfo=r),d}alignTextInRect(t,a,n,i,o,r,l,s,d,c){const m=2*(d*Math.PI)/360,p=Math.sin(m),u=Math.cos(m),g=o*p,h=o*u;"center"===l||""===l||"undefined"===l?t+=n/2:"right"===l&&(t+=n),"center"===s||"middle"===s||""===s||"undefined"===s?a+=i/2:"bottom"===s?a+=i-r/2:"top"==s&&(a+=r/2),c=c||"";let f="middle";-1===c.indexOf("top")?-1!==c.indexOf("bottom")&&(f="bottom"):f="top";let _="center";return-1===c.indexOf("left")?-1!==c.indexOf("right")&&(_="right"):_="left","center"==_?(t-=h/2,a-=g/2):"right"==_&&(t-=h,a-=g),"top"==f?(t-=r*p,a+=r*u):"middle"==f&&(t-=r*p/2,a+=r*u/2),t=this._rup(t),a=this._rup(a),{x:t,y:a}}adjustColor(t,a){var n=Math.min;if("string"!=typeof t)return"#000000";if(-1===t.indexOf("#"))return t;const o=this.draw;let r=o.cssToRgb(t);const i=o.rgbToHsl(r);i[2]=n(1,i[2]*a),i[1]=n(1,1.1*(i[1]*a)),r=o.hslToRgb(i),t="#";for(let n=0,i;3>n;n++)i=Math.round(r[n]),i=o.decToHex(i),1===i.toString().length&&(t+="0"),t+=i;return t.toUpperCase()}_rup(t){let a=Math.round(t);return t>a&&a++,a}_ptdist(t,a,n,i){return Math.sqrt((n-t)*(n-t)+(i-a)*(i-a))}_rnd(t,n,i,o){if(isNaN(t))return t;void 0===o&&(o=!0);let r=t-(!0===o?t%n:this._mod(t,n));return t===r?r:(i?t>r&&(r+=n):r>t&&(r-=n),1===n?Math.round(r):r)}_ptrnd(t){var a=Math.round;if(!document.createElementNS)return a(t)===t?t:this._rnd(t,1,!1,!0);const n=this._rnd(t,.5,!1,!0);return .5===Math.abs(n-a(n))?n:n>t?n-.5:n+.5}_getContrastColor(t){if(void 0!==t){let a=this.draw.hexToRgb(t.slice(1,3),t.slice(3,5),t.slice(5,7)),n=(.299*a[0]+.587*a[1]+.114*a[2])/255;return .6<n?"#000000":"#FFFFFF"}}}),Smart.Utilities.Assign("SvgRenderer",class extends Smart.Utilities.Renderer{constructor(t){super(t);const a=this;a._svgns="http://www.w3.org/2000/svg",a._openGroups=[],a._clipId=0}init(t){const a=document.createElement("div");a.className="drawContainer",a.onselectstart=function(){return!1},t.appendChild(a),this.host=t,this.container=a;try{const t=document.createElementNS(this._svgns,"svg");t.setAttribute("version","1.1"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("overflow","hidden"),a.appendChild(t),this.canvas=t}catch(t){return!1}return this._id=new Date().getTime(),this.clear(),!0}getType(){return"SVG"}refresh(){}getRect(){var t=Math.max;return{x:0,y:0,width:t(this._rup(this.host.offsetWidth)-1,0),height:t(this._rup(this.host.offsetHeight)-1,0)}}getContainer(){return this.container}clear(){for(;0<this.canvas.childNodes.length;)this.removeElement(this.canvas.firstElementChild);this._defaultParent=void 0,this._defs=document.createElementNS(this._svgns,"defs"),this._gradients={},this.canvas.appendChild(this._defs)}removeElement(t){if(void 0!==t)try{for(;t.firstChild;)this.removeElement(t.firstChild);t.parentNode?t.parentNode.removeChild(t):this.canvas.removeChild(t)}catch(t){}}beginGroup(){const t=this._activeParent(),a=document.createElementNS(this._svgns,"g");return t.appendChild(a),this._openGroups.push(a),a}endGroup(){0===this._openGroups.length||this._openGroups.pop()}_activeParent(){return 0===this._openGroups.length?this.canvas:this._openGroups[this._openGroups.length-1]}createClipRect(t){const a=document.createElementNS(this._svgns,"clipPath"),n=document.createElementNS(this._svgns,"rect");return this.attr(n,{x:t.x,y:t.y,width:t.width,height:t.height,fill:"none"}),this._clipId=this._clipId||0,a.id="cl"+this._id+"_"+(++this._clipId).toString(),a.appendChild(n),this._defs.appendChild(a),a}getWindowHref(){let t=window.location.href;return t?(t=t.replace(/([\('\)])/g,"\\$1"),t=t.replace(/#.*$/,""),t):t}setClip(t,a){const n="url("+this.getWindowHref()+"#"+a.id+")";return this.attr(t,{"clip-path":n})}addHandler(t,a,n){t.addEventListener(a,n)}removeHandler(){}on(t,a,n){this.addHandler(t,a,n)}off(t,a,n){this.removeHandler(t,a,n)}shape(t,a){const n=document.createElementNS(this._svgns,t);if(n){for(let t in a)n.setAttribute(t,a[t]);return this._activeParent().appendChild(n),n}}_getTextParts(t,a,n){const o={width:0,height:0,parts:[]};if(void 0===t)return o;const r=t.toString().split("<br>"),l=this._activeParent(),s=document.createElementNS(this._svgns,"text");this.attr(s,n);for(let d=0;d<r.length;d++){const t=r[d],a=s.ownerDocument.createTextNode(t);s.appendChild(a),l.appendChild(s);let n;try{n=s.getBBox()}catch(t){}const i=this._rup(n.width),c=this._rup(n.height*.6);s.removeChild(a),o.width=Math.max(o.width,i),o.height+=c+(0<d?4:0),o.parts.push({width:i,height:c,text:t})}return l.removeChild(s),o}_measureText(t,a,n,i){return super.measureText(t,a,n,i)}measureText(t,a,n){return this._measureText(t,a,n,!1)}text(t,a,n,i,o,r,l,s,d,c,m){const p=this._measureText(t,r,l,!0,this),u=p.textPartsInfo,g=u.parts,f=this._getContrastColor(arguments[11]);let _;if(d||(d="center"),c||(c="center"),(1<g.length||s)&&(_=this.beginGroup()),s){const t=this.createClipRect({x:this._rup(a)-1,y:this._rup(n)-1,width:this._rup(i)+2,height:this._rup(o)+2});this.setClip(_,t)}let b=this._activeParent(),v=0,C=0;v=u.width,C=u.height,(isNaN(i)||0>=i)&&(i=v),(isNaN(o)||0>=o)&&(o=C);const S=i||0,w=o||0;let h=0;if(!r||0===r){n+=C,"center"===c||"middle"===c?n+=(w-C)/2:"bottom"===c&&(n+=w-C),i||(i=v),o||(o=C),b=this._activeParent();let t;for(let o=g.length-1;0<=o;o--){t=document.createElementNS(this._svgns,"text"),this.attr(t,l),this.attr(t,{cursor:"default"});const i=t.ownerDocument.createTextNode(g[o].text);t.appendChild(i);let r=a;const s=g[o].width,c=g[o].height;"center"===d?r+=(S-s)/2:"right"==d&&(r+=S-s),this.attr(t,{x:this._rup(r),y:this._rup(n+h),width:this._rup(s),height:this._rup(c)}),void 0!==f&&(t.style.fill=f),b.appendChild(t),h-=g[o].height+4}return _?(this.endGroup(),_):t}const T=this.alignTextInRect(a,n,i,o,v,C,d,c,r,m);a=T.x,n=T.y;const D=this.shape("g",{transform:"translate("+a+","+n+")"}),M=this.shape("g",{transform:"rotate("+r+")"});D.appendChild(M),h=0;for(let p=g.length-1;0<=p;p--){const t=document.createElementNS(this._svgns,"text");this.attr(t,l),this.attr(t,{cursor:"default"});const a=t.ownerDocument.createTextNode(g[p].text);t.appendChild(a);let n=0;const i=g[p].width,o=g[p].height;"center"===d?n+=(u.width-i)/2:"right"==d&&(n+=u.width-i),this.attr(t,{x:this._rup(n),y:this._rup(h),width:this._rup(i),height:this._rup(o)}),M.appendChild(t),h-=o+4}return b.appendChild(D),_&&this.endGroup(),D}line(t,a,n,i,o){const r=this.shape("line",{x1:t,y1:a,x2:n,y2:i});return this.attr(r,o),r}path(t,a){const n=this.shape("path");return n.setAttribute("d",t),a&&this.attr(n,a),n}rect(t,a,n,i,o){var r=Math.max;t=this._ptrnd(t),a=this._ptrnd(a),n=r(1,this._rnd(n,1,!1)),i=r(1,this._rnd(i,1,!1));const l=this.shape("rect",{x:t,y:a,width:n,height:i});return o&&this.attr(l,o),l}circle(t,a,n,i){const o=this.shape("circle",{cx:t,cy:a,r:n});return i&&this.attr(o,i),o}pieslice(t,a,n,i,o,r,l,d){const c=this.pieSlicePath(t,a,n,i,o,r,l),m=this.shape("path");return m.setAttribute("d",c),d&&this.attr(m,d),m}attr(t,a){if(t&&a)for(let n in a)"textContent"==n?t.textContent=a[n]:t.setAttribute(n,a[n])}removeAttr(t,a){if(t&&a)for(let n in a)"textContent"==n?t.textContent="":t.removeAttribute(a[n])}getAttr(t,a){return t.getAttribute(a)}_toLinearGradient(t,a,n){const i="grd"+this._id+t.replace("#","")+(a?"v":"h"),o="url("+this.getWindowHref()+"#"+i+")";if(this._gradients[o])return o;const r=document.createElementNS(this._svgns,"linearGradient");this.attr(r,{x1:"0%",y1:"0%",x2:a?"0%":"100%",y2:a?"100%":"0%",id:i});for(let o=0;o<n.length;o++){const a=n[o],i=document.createElementNS(this._svgns,"stop"),l="stop-color:"+this.adjustColor(t,a[1]);this.attr(i,{offset:a[0]+"%",style:l}),r.appendChild(i)}return this._defs.appendChild(r),this._gradients[o]=!0,o}_toRadialGradient(t,a,n){const i="grd"+this._id+t.replace("#","")+"r"+(void 0===n?"":n.key),o="url("+this.getWindowHref()+"#"+i+")";if(this._gradients[o])return o;const r=document.createElementNS(this._svgns,"radialGradient");void 0===n?this.attr(r,{cx:"50%",cy:"50%",r:"100%",fx:"50%",fy:"50%",id:i}):this.attr(r,{cx:n.x,cy:n.y,r:n.outerRadius,id:i,gradientUnits:"userSpaceOnUse"});for(let o=0;o<a.length;o++){const n=a[o],i=document.createElementNS(this._svgns,"stop"),l="stop-color:"+this.adjustColor(t,n[1]);this.attr(i,{offset:n[0]+"%",style:l}),r.appendChild(i)}return this._defs.appendChild(r),this._gradients[o]=!0,o}}),Smart.Utilities.Assign("HTML5Renderer",class extends Smart.Utilities.Renderer{constructor(t){super(t);const a=this;a._renderers=new Smart.Utilities.HTML5RenderHelpers(a)}init(t){try{this.host=t;const a=document.createElement("div"),n=document.createElement("canvas");a.className="chartContainer",a.style.position="relative",a.onselectstart=function(){return!1},n.id="__smartCanvasWrap",n.style.width="100%",n.style.height="100%",a.appendChild(n),t.appendChild(a),this.canvas=n,n.width=t.offsetWidth,n.height=t.offsetHeight,this.ctx=n.getContext("2d"),this._elements={},this._maxId=0,this._gradientId=0,this._gradients={},this._currentPoint={x:0,y:0},this._lastCmd="",this._pos=0}catch(t){return!1}return!0}getType(){return"HTML5"}getContainer(){let t=this.host.getElementsByClassName("chartContainer")[0];return t}getRect(){return{x:0,y:0,width:this.canvas.width-1,height:this.canvas.height-1}}beginGroup(){}endGroup(){}setClip(){}createClipRect(){}addHandler(){}removeHandler(){}on(t,a,n){this.addHandler(t,a,n)}off(t,a,n){this.removeHandler(t,a,n)}clear(){this._elements={},this._maxId=0,this._renderers._gradients={},this._gradientId=0}removeElement(t){void 0===t||this._elements[t.id]&&delete this._elements[t.id]}shape(t,a){let n={type:t,id:this._maxId++};for(let i in a)n[i]=a[i];return this._elements[n.id]=n,n}attr(t,a){for(let n in a)t[n]=a[n]}removeAttr(t,a){for(let n in a)delete t[a[n]]}rect(t,a,n,i,o){if(isNaN(t))throw"Invalid value for \"x\"";if(isNaN(a))throw"Invalid value for \"y\"";if(isNaN(n))throw"Invalid value for \"width\"";if(isNaN(i))throw"Invalid value for \"height\"";let r=this.shape("rect",{x:t,y:a,width:n,height:i});return o&&this.attr(r,o),r}path(t,a){let n=this.shape("path",a);return this.attr(n,{d:t}),n}line(t,a,n,i,o){return this.path("M "+t+","+a+" L "+n+","+i,o)}circle(t,a,n,i){let o=this.shape("circle",{x:t,y:a,r:n});return i&&this.attr(o,i),o}pieslice(t,a,n,i,o,r,l,s){let d=this.path(this.pieSlicePath(t,a,n,i,o,r,l),s);return this.attr(d,{x:t,y:a,innerRadius:n,outerRadius:i,angleFrom:o,angleTo:r}),d}_getCSSStyle(t){const a=document.createElement("div");a.className=t,a.style.position="absolute",a.style.visibility="hidden",this.host.appendChild(a);let n=window.getComputedStyle(a);return n={fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight},this.host.removeChild(a),n}_getTextParts(t,a,n){let i="Arial",o="10pt",r="";if(n&&n["class"]){let t=this._getCSSStyle(n["class"]);t.fontSize&&(o=t.fontSize),t.fontFamily&&(i=t.fontFamily),t.fontWeight&&(r=t.fontWeight)}this.ctx.font=r+" "+o+" "+i;let l={width:0,height:0,parts:[]},s=t.toString().split("<br>");for(let o=0;o<s.length;o++){let t=s[o],a=this.ctx.measureText(t).width,n=document.createElement("span");n.className="smartchart",n.font=this.ctx.font,n.textContent=t,this.host.appendChild(n);let i=n.offsetHeight*.6;this.host.removeChild(n),l.width=Math.max(l.width,this._rup(a)),l.height+=i+(0<o?4:0),l.parts.push({width:a,height:i,text:t})}return l}_measureText(t,a,n,i){return super.measureText(t,a,n,i)}measureText(t,a,n){return this._measureText(t,a,n,!1)}text(a,n,i,o,r,l,s,d,c,m,p){let u=this.shape("text",{text:a,x:n,y:i,width:o,height:r,angle:l,clip:d,halign:c,valign:m,rotateAround:p});if(s&&this.attr(u,s),u.fontFamily="Arial",u.fontSize="10pt",u.fontWeight="",u.color=this._getContrastColor(arguments[11])||"#000000",s&&s["class"]){let t=this._getCSSStyle(s["class"]);u.fontFamily=t.fontFamily||u.fontFamily,u.fontSize=t.fontSize||u.fontSize,u.fontWeight=t.fontWeight||u.fontWeight,u.color=t.color||u.color}let t=this._measureText(a,0,s,!0);return this.attr(u,{textPartsInfo:t.textPartsInfo,textWidth:t.width,textHeight:t.height}),(0>=o||isNaN(o))&&this.attr(u,{width:t.width}),(0>=r||isNaN(r))&&this.attr(u,{height:t.height}),u}_toLinearGradient(t,a,n){if(this._renderers._gradients[t])return t;let o=[];for(let r=0;r<n.length;r++)o.push({percent:n[r][0]/100,color:this.adjustColor(t,n[r][1])});let i="gr"+this._gradientId++;return this.createGradient(i,a?"vertical":"horizontal",o),i}_toRadialGradient(t,a){if(this._renderers._gradients[t])return t;let n=[];for(let o=0;o<a.length;o++)n.push({percent:a[o][0]/100,color:this.adjustColor(t,a[o][1])});let i="gr"+this._gradientId++;return this.createGradient(i,"radial",n),i}createGradient(t,a,n){this._renderers.createGradient(this,t,a,n)}refresh(){for(let t in this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this._elements){let a=this._elements[t];this._renderers.setFillStyle(this,a),this._renderers.setStroke(this,a),this._renderers[this._elements[t].type](this.ctx,a)}}}),Smart.Utilities.Assign("HTML5RenderHelpers",class{constructor(t){this.HTML5Renderer=t,this._cmds="mlcazq"}ptrnd(t){var a=Math.round;if(.5===Math.abs(a(t)-t))return t;let n=a(t);return n<t&&--n,n+.5}createGradient(t,a,n,i){t._gradients[a]={orientation:n,colorStops:i}}setStroke(t,a){let n=t.ctx,i=a["stroke-width"];n.strokeStyle=a.stroke||"transparent",n.lineWidth=0===i?.01:void 0===i?1:i,n.globalAlpha=void 0===a["fill-opacity"]?void 0===a.opacity?1:a.opacity:a["fill-opacity"],n.setLineDash&&(a["stroke-dasharray"]?n.setLineDash(a["stroke-dasharray"].split(",")):n.setLineDash([]))}setFillStyle(t,a){let n=t.ctx;if(n.fillStyle="transparent",n.globalAlpha=void 0===a["fill-opacity"]?void 0===a.opacity?1:a.opacity:a["fill-opacity"],a.fill&&-1===a.fill.indexOf("#")&&t._gradients[a.fill]){let i="horizontal"!==t._gradients[a.fill].orientation,o="radial"===t._gradients[a.fill].orientation,r=this.ptrnd(a.x),l=this.ptrnd(a.y),s=this.ptrnd(a.x+(i?0:a.width)),d=this.ptrnd(a.y+(i?a.height:0)),c;if(("circle"===a.type||"path"===a.type||"rect"===a.type)&&o){let t=this.ptrnd(a.x),i=this.ptrnd(a.y);const o=a.innerRadius||0,r=a.outerRadius||a.r||0;"rect"===a.type&&(t+=a.width/2,i+=a.height/2),c=n.createRadialGradient(t,i,o,t,i,r)}o||((isNaN(r)||isNaN(s)||isNaN(l)||isNaN(d))&&(r=0,l=0,s=i?0:n.canvas.width,d=i?n.canvas.height:0),c=n.createLinearGradient(r,l,s,d));let m=t._gradients[a.fill].colorStops;for(let t=0;t<m.length;t++)c.addColorStop(m[t].percent,m[t].color);n.fillStyle=c}else a.fill&&(n.fillStyle=a.fill)}rect(t,a){0===a.width||0===a.height||(t.fillRect(this.ptrnd(a.x),this.ptrnd(a.y),a.width,a.height),t.strokeRect(this.ptrnd(a.x),this.ptrnd(a.y),a.width,a.height))}circle(t,a){0===a.r||(t.beginPath(),t.arc(this.ptrnd(a.x),this.ptrnd(a.y),a.r,0,2*Math.PI,!1),t.closePath(),t.fill(),t.stroke())}_parsePoint(t){let a=this._parseNumber(t),n=this._parseNumber(t);return{x:a,y:n}}_parseNumber(t){let a=!1,n;for(n=this._pos;n<t.length;n++){if("0"<=t[n]&&"9">=t[n]||"."===t[n]||"e"===t[n]||"-"===t[n]&&!a||"-"===t[n]&&1<=n&&"e"===t[n-1]){a=!0;continue}if(!a&&(" "===t[n]||","===t[n])){this._pos++;continue}break}let o=parseFloat(t.substring(this._pos,n));if(!isNaN(o))return this._pos=n,o}_isRelativeCmd(t){return-1!==this._cmds.indexOf(t)}_parseCmd(t){for(let a=this._pos;a<t.length;a++){if(-1!==this._cmds.toLowerCase().indexOf(t[a].toLowerCase()))return this._pos=a+1,this._lastCmd=t[a],this._lastCmd;if(" "===t[a]){this._pos++;continue}if("0"<=t[a]&&"9">=t[a])if(this._pos=a,""===this._lastCmd)break;else return this._lastCmd}}_toAbsolutePoint(t){return{x:this._currentPoint.x+t.x,y:this._currentPoint.y+t.y}}path(t,a){var n=Math.sqrt,i=Math.pow,o=Math.sin,l=Math.cos,d=Math.PI;let c=a.d;this._pos=0,this._lastCmd="";let r;for(this._currentPoint={x:0,y:0},t.beginPath();this._pos<c.length;){let p=this._parseCmd(c);if(p===void 0)break;if("M"===p||"m"===p){let a=this._parsePoint(c);if(void 0===a)break;t.moveTo(a.x,a.y),this._currentPoint=a,void 0===r&&(r=a);continue}if("L"===p||"l"===p){let a=this._parsePoint(c);if(void 0===a)break;t.lineTo(a.x,a.y),this._currentPoint=a;continue}if("A"===p||"a"===p){let g=this._parseNumber(c),h=this._parseNumber(c),f=this._parseNumber(c)*(d/180),_=this._parseNumber(c),y=this._parseNumber(c),b=this._parsePoint(c);if(this._isRelativeCmd(p)&&(b=this._toAbsolutePoint(b)),0===g||0===h)continue;let x=this._currentPoint,C={x:l(f)*(x.x-b.x)/2+o(f)*(x.y-b.y)/2,y:-o(f)*(x.x-b.x)/2+l(f)*(x.y-b.y)/2},S=i(C.x,2)/i(g,2)+i(C.y,2)/i(h,2);1<S&&(g*=n(S),h*=n(S));let w=(_===y?-1:1)*n((i(g,2)*i(h,2)-i(g,2)*i(C.y,2)-i(h,2)*i(C.x,2))/(i(g,2)*i(C.y,2)+i(h,2)*i(C.x,2)));isNaN(w)&&(w=0);let s={x:w*g*C.y/h,y:w*-h*C.x/g},T={x:(x.x+b.x)/2+l(f)*s.x-o(f)*s.y,y:(x.y+b.y)/2+o(f)*s.x+l(f)*s.y},D=function(t){return n(i(t[0],2)+i(t[1],2))},m=function(t,a){return(t[0]*a[0]+t[1]*a[1])/(D(t)*D(a))},r=function(t,a){return(t[0]*a[1]<t[1]*a[0]?-1:1)*Math.acos(m(t,a))},a=r([1,0],[(C.x-s.x)/g,(C.y-s.y)/h]),M=[(C.x-s.x)/g,(C.y-s.y)/h],u=[(-C.x-s.x)/g,(-C.y-s.y)/h],v=r(M,u);-1>=m(M,u)&&(v=d),1<=m(M,u)&&(v=0),0===y&&0<v&&(v-=2*d),1===y&&0>v&&(v+=2*d);let I=g>h?g:h,$=g>h?1:g/h,N=g>h?h/g:1;t.translate(T.x,T.y),t.rotate(f),t.scale($,N),t.arc(0,0,I,a,a+v,1-y),t.scale(1/$,1/N),t.rotate(-f),t.translate(-T.x,-T.y);continue}if(("Z"===p||"z"===p)&&void 0!==r){t.lineTo(r.x,r.y),this._currentPoint=r;continue}if("C"===p||"c"===p){let a=this._parsePoint(c),n=this._parsePoint(c),i=this._parsePoint(c);t.bezierCurveTo(a.x,a.y,n.x,n.y,i.x,i.y),this._currentPoint=i;continue}if("Q"===p||"q"===p){let a=this._parsePoint(c),n=this._parsePoint(c);t.quadraticCurveTo(a.x,a.y,n.x,n.y),this._currentPoint=n;continue}}t.fill(),t.stroke(),t.closePath()}text(t,a){let n=this.ptrnd(a.x),o=this.ptrnd(a.y),i=this.ptrnd(a.width),r=this.ptrnd(a.height),l=a.halign,s=a.valign,d=a.angle,c=a.rotateAround,m=a.textPartsInfo,p=m.parts,u=a.clip;void 0===u&&(u=!0),t.save(),l||(l="center"),s||(s="center"),u&&(t.rect(n,o,i,r),t.clip());let g=a.textWidth,f=a.textHeight,_=i||0,b=r||0;if(t.fillStyle=a.color,t.font=a.fontWeight+" "+a.fontSize+" "+a.fontFamily,!d||0===d){o+=f,"center"===s||"middle"===s?o+=(b-f)/2:"bottom"===s&&(o+=b-f),i||(i=g),r||(r=f);let a=0;for(let r=p.length-1;0<=r;r--){let i=p[r],s=n,d=p[r].width;"center"===l?s+=(_-d)/2:"right"===l&&(s+=_-d),t.fillText(i.text,s,o+a),a-=i.height+(0<r?4:0)}return void t.restore()}let h=this.HTML5Renderer.alignTextInRect(n,o,i,r,g,f,l,s,d,c);n=h.x,o=h.y;let v=2*(d*Math.PI)/360;t.translate(n,o),t.rotate(v);let C=0,S=m.width;for(let n=p.length-1,i;0<=n;n--)i=0,"center"===l?i+=(S-p[n].width)/2:"right"===l&&(i+=S-p[n].width),t.fillText(p[n].text,i,C),C-=p[n].height+4;t.restore()}}),Smart.Utilities.Assign("Plot",class{constructor(t){this.renderer=t}get(t,a,n){return n===void 0?t[a]:t[a][n]}min(t,a){let n=NaN;for(let o=0,i;o<t.length;o++)i=this.get(t,o,a),(isNaN(n)||i<n)&&(n=i);return n}max(t,a){let n=NaN;for(let o=0,i;o<t.length;o++)i=this.get(t,o,a),(isNaN(n)||i>n)&&(n=i);return n}sum(t,a){let n=0;for(let o=0,i;o<t.length;o++)i=this.get(t,o,a),isNaN(i)||(n+=i);return n}count(t,a){let n=0;for(let o=0,i;o<t.length;o++)i=this.get(t,o,a),isNaN(i)||n++;return n}avg(t,a){return this.sum(t,a)/Math.max(1,this.count(t,a))}filter(t,a){if(!a)return t;let n=[];for(let o=0;o<t.length;o++)a(t[o])&&n.push(t[o]);return n}scale(t,a,n,i){var o=Math.log,r=Math.min,l=Math.abs,s=Math.pow,d=Math.max;if(isNaN(t))return NaN;if((t<r(a.min,a.max)||t>d(a.min,a.max))&&(!i||!0!==i.ignore_range))return NaN;let c=NaN,m=1;if(a.type===void 0||"logarithmic"!==a.type){let n=l(a.max-a.min);n||(n=1),m=l(t-r(a.min,a.max))/n}else if("logarithmic"===a.type){let n=a.base;isNaN(n)&&(n=10);let i=r(a.min,a.max);0>=i&&(i=1);let c=d(a.min,a.max);0>=c&&(c=1);let p=o(c)/o(n);c=s(n,p);let u=o(i)/o(n);i=s(n,u);let g=o(t)/o(n);m=l(g-u)/(p-u)}if("logarithmic"===n.type){let t=n.base;isNaN(t)&&(t=10);let a=o(n.max)/o(t),i=o(n.min)/o(t);n.flip&&(m=1-m);let d=r(i,a)+m*l(a-i);c=s(t,d)}else c=r(n.min,n.max)+m*l(n.max-n.min),n.flip&&(c=d(n.min,n.max)-c+n.min);return c}axis(t,a,n){var o=Math.round,r=Math.floor,l=Math.pow;if(1>=n)return[a,t];(isNaN(n)||2>n)&&(n=2);let s=0;for(;o(t)!==t&&o(a)!==a&&10>s;)t*=10,a*=10,s++;let d=(a-t)/n;for(;10>s&&o(d)!==d;)t*=10,a*=10,d*=10,s++;let c=[1,2,5],m=0,p;for(;;){let t=m%c.length,a=r(m/c.length),n=l(10,a)*c[t];if(t=(m+1)%c.length,a=r((m+1)/c.length),p=l(10,a)*c[t],d>=n&&d<p)break;m++}let u=p,g=[],h=this.renderer._rnd(t,u,!1),f=0>=s?1:l(10,s);for(;h<a+u;)g.push(h/f),h+=u;return g}}),Smart.Utilities.Assign("DataExporter",class{constructor(t,a,n,i){const o=this;t||(t={}),o.style=t.style,o.header=t.header,o.exportHeader=t.exportHeader||!0,o.hierarchical=t.hierarchical,o.expandChar=t.expandChar||"+",o.collapseChar=t.collapseChar||"-",o.pageOrientation=t.pageOrientation,!o.hierarchical&&a&&0<a.length?o.groupBy=a:o.mergedCells=t.mergedCells,!o.groupBy&&n&&0<Object.keys(n).length&&(o.filterBy=n),i&&(o.conditionalFormatting=i),o.timeBetween1900And1970=new Date(1970,0,1).getTime()-new Date(1900,0,1).getTime()}downloadFile(t,a,n){let i;if(i=t instanceof Blob?t:new Blob([t],{type:a}),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,n);else{const t=document.createElement("a"),a=URL.createObjectURL(i);t.href=a,t.download=n,t.style.position="absolute",t.style.visibility="hidden",document.body.appendChild(t),t.click(),setTimeout(function(){document.body.removeChild(t),window.URL.revokeObjectURL(a)},0)}}exportData(t,a,n){const i=this;return(i.actualHierarchy=i.hierarchical,a=a.toLowerCase(),i.exportHeader&&(i.header?(t=t.slice(0),0===t.length&&(i.actualHierarchy=!1),i.processComplexHeader(i.header,t,a)):1===t.length&&(i.actualHierarchy=!1)),0===t.length)?void console.warn("No data to export."):void("xlsx"===a&&(i.xlsxStartIndex=i.complexHeader?i.complexHeader.length:+i.exportHeader),i.actualHierarchy&&(t=i.processHierarchicalData(t,a)),i.getDatafields(t),n.slice(n.length-a.length-1,n.length)!=="."+a&&(n+="."+a),"csv"===a?i.exportToCSVAndTSV(t,{delimiter:", ",MIME:"text/csv",toRemove:2},n):"html"===a?i.exportToHTML(t,n):"json"===a?i.exportToJSON(t,n):"pdf"===a?i.exportToPDF(t,n):"tsv"===a?i.exportToCSVAndTSV(t,{delimiter:"\t",MIME:"text/tab-separated-values",toRemove:1},n):"xlsx"===a?i.exportToXLSX(t,n):"xml"===a?i.exportToXML(t,n):void 0,delete i.complexHeader)}exportToCSVAndTSV(t,a,n){const i=this,o=i.datafields;let r="";for(let l=0;l<t.length;l++){const n=t[l];let s="";for(let t=0;t<o.length;t++){if(i.actualHierarchy&&0==t){s+=("\"\""+a.delimiter).repeat(n._level-1)+"\""+n[o[t]]+"\""+a.delimiter+("\"\""+a.delimiter).repeat(i.maxLevel-n._level);continue}s+="\""+n[o[t]]+"\""+a.delimiter}s=s.slice(0,s.length-a.toRemove)+"\n",r+=s}this.downloadFile(r,a.MIME,n)}exportToHTML(t,a){const o=this,n=o.datafields,i=o.style;let r="",l=0;t=o.processGroupingInformation(t),o.data=t,o.exportHeader&&(r=o.getHTMLHeader(n,t),l=1);let s=`<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style type="text/css">
${o.getRowStyle()}${o.getColumnStyle()}
    </style>${o.toggleableFunctionality()}
</head>
<body>
    <table${o.getTableStyle()}>${r}
        <tbody>\n`;const d={},c={},m=[];o.getMergedCellsInfo(d,c);mainLoop:for(let a=l;a<t.length;a++){const r=t[a],p=a-l;let u=o.getAlternationIndex(p," rowN"),g="",h="",f="",_=0;if(o.actualHierarchy)r._collapsed&&(g=" collapsed"),h=` level="${r._level}"`;else if(o.groupBy)for(let t=0;t<o.groupBy.length;t++){const n=o.groupBy[t],i=r[n],l=o.groups[n][i];if(f+=i,-1===m.indexOf(f)){s+=`            <tr class="row">
                <td class="column group" style="padding-left: ${25*_}px;" colspan="${o.datafields.length}">${l}</td>
            </tr>`,m.push(f),a--;continue mainLoop}_++}let y=`            <tr class="row row${p}${u}${g}"${h}>\n`;for(let t=0;t<n.length;t++){const a=t+","+p;let l=1,s=1;if(d[a])l=d[a].colspan,s=d[a].rowspan;else if(c[a])continue;const m=n[t];let u=r[m],g="";if(o.actualHierarchy&&0==t){let t="";r._expanded?t=o.collapseChar:!1===r._expanded&&(t=o.expandChar),g=`<div class="toggle-element" style="margin-left: ${25*(r._level-1)+5}px;" expanded>${t}</div>`}u=o.getFormattedValue(u,m);let h="";if(i&&i.columns&&i.columns[m]&&i.columns[m][p]){const t=i.columns[m][p];h+=`border-color: ${t.border}; background-color: ${t.background}; color: ${t.color};"`}0==t&&1<_&&(h+=`padding-left: ${25*(_-1)}px;"`),h&&(h=` style="${h}"`),y+=`                <td class="column column${m}"${h} colspan="${l}" rowspan="${s}">${g+u}</td>\n`}s+=y+"            </tr>\n"}s+=`        </tbody>
    </table>
</body>
</html>`,this.downloadFile(s,"text/html",a)}getMergedCellsInfo(t,a,n){const o=this;if(o.mergedCells){const r=n&&0!==n[o.datafields.length-1];o.mergedCellsPDF=o.mergedCells.slice(0);for(let l=0;l<o.mergedCellsPDF.length;l++){const i=o.mergedCellsPDF[l];let s=i.colspan,d=i.rowspan;if(2>d&&2>s)continue;const c=i.cell[1];let m=i.cell[0];if(r&&1<s){const t=n[m],a=n[m+s-1],r=[];if(a>t){let i=t,l=m,p=0;mainLoop:for(let o=t;o<=a;o++){let t=l,a=0;for(;n[l]===i;)if(l++,p++,a++,p===s){r.push({start:t,span:a});break mainLoop}r.push({start:t,span:a}),i=n[l]}s=r[0].span;for(let t=1;t<r.length;t++)o.mergedCellsPDF.push({cell:[r[t].start,c],colspan:r[t].span,rowspan:d,originalCell:m})}}for(let n=m;n<m+s;n++)for(let o=c;o<c+d;o++){const r=n+","+o;if(n===m&&o===c){t[r]={colspan:s,rowspan:d,originalCell:i.originalCell};continue}a[r]=!0}}}}getAlternationIndex(t,a){const n=this;if(!n.style)return"";const i=n.style.rows,o=i&&i.alternationCount;return!o||i.alternationStart&&t<i.alternationStart||i.alternationEnd&&t>i.alternationEnd?"":a+t%i.alternationCount}getFormattedValue(t,a){const n=this,i=n.style;if(a&&i&&i.columns&&i.columns[a]&&i.columns[a].format){if("number"==typeof t)return n.formatNumber(t,i.columns[a].format);if(t instanceof Date)return n.formatDate(t,i.columns[a].format)}else if(t instanceof Date)return n.formatDate(t,"d");return t}exportToJSON(t,a){this.downloadFile(JSON.stringify(t,this.datafields.concat("rows")),"application/json",a)}exportToPDF(t,a){function o(){let t=[];for(let a=0;a<h.length;a++)t.push([]);return t}const r=this,i=r.datafields,l=+r.exportHeader,n=[],s={},d={},c={},m=l?r.complexHeader?r.complexHeader.length:1:0,p={pageOrientation:r.pageOrientation||"portrait"};let u=[],g=[],h;t=r.processGroupingInformation(t),r.data=t,r.headerRows=m,r.getPDFStyle();const f=r.styleInfo;h=f?r.wrapPDFColumns(p,c):[{body:u,datafields:i}],l&&(u=r.getPDFHeader(i,h,c)),r.getMergedCellsInfo(s,d,c);mainLoop:for(let a=l;a<t.length;a++){const m=t[a];let p="",u=0;if(r.groupBy)for(let t=0;t<r.groupBy.length;t++){const i=r.groupBy[t],o=m[i],l=r.groups[i][o];if(p+=o,-1===n.indexOf(p)){r.createGroupHeaderRow(h,{text:l,style:["row","cell","group"],marginLeft:7.5*u}),n.push(p),a--;continue mainLoop}u++}const g=o(),f=a-l;let _=r.getAlternationIndex(f,"");for(let t=0;t<i.length;t++){const a=i[t],n={style:["row","row"+f,"cell","cell"+a]},o=c[t]||0;if(void 0!==_&&n.style.splice(1,0,"rowN"+_),r.mergedCellsPDF){const a=t+","+f,r=s[a];if(r){if(n.colSpan=r.colspan,n.rowSpan=r.rowspan,void 0!==r.originalCell){n.text="",n.style[n.style.length-1]="cell"+i[r.originalCell],g[o].push(n);continue}}else if(d[a]){g[o].push({});continue}}const l=r.getFormattedValue(m[a],a);n.text=l.toString(),r.getUniqueStylePDF(n,a,f),r.setIndentation(n,{j:t,currentRecord:m,value:l,outlineLevel:u}),g[o].push(n)}for(let t=0;t<h.length;t++)h[t].body.push(g[t])}if(f){for(let t=0;t<h.length;t++){const a=h[t].body;for(let n=m-1;0<=n;n--)a.unshift(u[t][n]);g.push({table:{headerRows:m,widths:h[t].widths,heights:function(t){return f.heights[t]?f.heights[t]:f.defaultHeight?f.defaultHeight:void 0},body:a},pageBreak:"after"})}delete g[h.length-1].pageBreak,p.styles=f.styles}else{const t=h[0].body;for(let a=m-1;0<=a;a--)t.unshift(u[0][a]);g=[{table:{headerRows:m,body:t}}],p.styles={header:{bold:!0},group:{bold:!0}}}p.content=g,pdfMake.createPdf(p).download(a),delete r.mergedCellsPDF,delete r.styleInfo}getPDFStyle(){function t(t,n){if(t)for(let o in t)if(t.hasOwnProperty(o))if(void 0!==i[o])for(let i in t[o]){if(!isNaN(i)||!t[o].hasOwnProperty(i))continue;const r=t[o][i],l=a.datafields.indexOf(o);"width"==i&&"*"===s.widths[l]?s.widths[l]=parseFloat(r):a.storePDFStyle({prop:i,value:r,toUpdate:n+o})}else if("height"==o&&"header"===n)for(let n=0;n<a.headerRows;n++)s.heights[n]=parseInt(t[o],10)/a.headerRows/1.57;else a.storePDFStyle({prop:o,value:t[o],toUpdate:n})}const a=this,n=a.style;if(!n)return"";const i=a.data[0],o=n.header,r=n.columns,l=n.rows,s={heights:[],widths:Array(a.datafields.length).fill("*"),styles:{header:{},row:{},cell:{},group:{fillColor:"#FFFFFF",color:"#000000",bold:!0}}};if(a.styleInfo=s,t(o,"header"),t(r,"cell"),!!l){for(let t in l){if(!l.hasOwnProperty(t)||-1!==t.indexOf("alt"))continue;const n=l[t];if(!isNaN(t)){for(let i in n)n.hasOwnProperty(i)&&("height"==i?s.heights[parseFloat(t)+a.headerRows]=parseFloat(n[i])/1.57:a.storePDFStyle({prop:i,value:n[i],toUpdate:"row"+t}));continue}"height"==t?s.defaultHeight=parseFloat(n)/1.57:a.storePDFStyle({prop:t,value:n,toUpdate:"row"})}if(l.alternationCount)for(let t=0;t<l.alternationCount;t++){const a={};l[`alternationIndex${t}Color`]&&(a.color=l[`alternationIndex${t}Color`]),l[`alternationIndex${t}BackgroundColor`]&&(a.fillColor=l[`alternationIndex${t}BackgroundColor`]),s.styles["rowN"+t]=a}}}storePDFStyle(t){const a=this;let n=a.styleInfo.styles[t.toUpdate];n||(n={},a.styleInfo.styles[t.toUpdate]=n);let i=t.value;switch(t.prop){case"backgroundColor":n.fillColor=i;break;case"color":n.color=i;break;case"fontSize":n.fontSize=parseFloat(i);break;case"fontStyle":"italic"===i&&(n.italics=!0);break;case"fontWeight":"bold"===i&&(n.bold=!0);break;case"textAlign":n.alignment=i;}}wrapPDFColumns(t,a){const n=this,o=this.styleInfo,r="portrait"===t.pageOrientation?775:1155,l=[];let s=0;for(let d=0;d<o.widths.length;d++){let t=o.widths[d],i=t;if("*"===t?i=150:t>=r?(i=r,t="*"):t/=1.57,void 0===l[s]){l[s]={body:[],width:i,widths:[t],datafields:[n.datafields[d]]},a[d]=s;continue}const c=l[s];if(c.width+i>r){s++,d--;continue}a[d]=s,c.width+=i,c.widths.push(t),c.datafields.push(n.datafields[d])}return l}getPDFHeader(t,a,n){function o(t,a,n){for(let i=0;i<l;i++){const o=t[i],r=[];for(let a=0;a<o.length;a++){const s=o[a];let d=1,c=1;if(o[a-1]&&o[a-1]===s||t[i-1]&&t[i-1][a]===s){r.push({});continue}let m=a+1;for(;o[m]&&o[m]===o[m-1];)d++,m++;for(m=i+1;t[m]&&t[m][a]===s;)c++,m++;const p=i==l-1||c+i===l?n.datafields[a]:null,u={text:s,colSpan:d,rowSpan:c};p?u.style=["header","header"+p]:(u.alignment="center",u.style="header"),r.push(u)}a.push(r)}}const i=this,r=[],l=i.headerRows,s=i.complexHeader?i.complexHeader:[Object.values(i.data[0])],d=[];let c=[];for(let o=0;o<l;o++){const t=s[o];for(let a=0,i;a<t.length;a++)i=n[a]||0,d[i]||(d[i]=[]),d[i][o]||(d[i][o]=[]),d[i][o].push(t[a])}for(let l=0;l<a.length;l++)c=[],o(d[l],c,a[l]),r.push(c);return r}createGroupHeaderRow(t,a){for(let n=0;n<t.length;n++){const i=Object.assign({},a),o=t[n].datafields.length,r=[i];i.colSpan=o,r.length=o,r.fill({},1,o-1),t[n].body.push(r)}}getUniqueStylePDF(t,a,n){function i(t){const a=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(t.replace(/\s/g,"")),n=parseFloat(a[1]).toString(16).toUpperCase(),i=parseFloat(a[2]).toString(16).toUpperCase(),o=parseFloat(a[3]).toString(16).toUpperCase();return"#"+"0".repeat(2-n.length)+n+"0".repeat(2-i.length)+i+"0".repeat(2-o.length)+o}const o=this.style;if(o&&o.columns&&o.columns[a]){const r=o.columns[a][n];r&&(t.fillColor=i(r.background),t.color=r.color.toLowerCase())}}setIndentation(t,a){if(0===a.j){const n=this;if(n.actualHierarchy){const i=a.currentRecord;void 0===i._expanded?t.marginLeft=25*(i._level-1)+6:(t.marginLeft=25*(i._level-1),t.text=n.collapseChar+" "+a.value)}else 1<a.outlineLevel&&(t.marginLeft=7.5*(a.outlineLevel-1))}}exportToXLSX(t,a){const n=this;let i=n.style;if(t=n.processGroupingInformation(t,!0),n.data=t,n.getColumnsArray(),n.complexHeaderMergedCells=[],n.complexHeaderMergeInfo)for(let t in n.complexHeaderMergeInfo)if(n.complexHeaderMergeInfo.hasOwnProperty(t)){const a=n.complexHeaderMergeInfo[t];if(a.from[0]===a.to[0]&&a.from[1]===a.to[1])continue;n.complexHeaderMergedCells.push({from:n.columnsArray[a.from[1]]+(a.from[0]+1),to:n.columnsArray[a.to[1]]+(a.to[0]+1)})}n.getConditionalFormatting(),i||(i=n.generateDefaultStyle(t));const o=n.generateSharedStrings(t),r=o.collection,l=o.xml,s=n.generateStyles(i),d=n.groupBy?n.generateSheet1WithGrouping(t,r):n.generateSheet1(t,r),c=n.generateAuxiliaryFiles(),m=new JSZip,p=m.folder("_rels"),u=m.folder("docProps"),g=m.folder("xl"),h=g.folder("_rels"),f=g.folder("theme"),_=g.folder("worksheets");p.file(".rels",c._relsRels),u.file("app.xml",c.docPropsAppXml),u.file("core.xml",c.docPropsCoreXml),h.file("workbook.xml.rels",c.xl_relsWorkbookXmlRels),f.file("theme1.xml",c.xlThemeTheme1Xml),_.file("sheet1.xml",d),g.file("sharedStrings.xml",l),g.file("styles.xml",s),g.file("workbook.xml",c.xlWorkbookXml),m.file("[Content_Types].xml",c.Content_TypesXml),m.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}).then(function(t){n.downloadFile(t,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",a)}),delete n.conditionalFormattingXLSX,delete n.complexHeaderMergeInfo,delete n.defaultRowHeight,delete n.rowHeight}processGroupingInformation(t,a){const n=this;if(!n.groupBy)return t;let i;return t=t.slice(0),n.exportHeader&&(a&&n.complexHeader?(i=t.slice(0,n.complexHeader.length),t.splice(0,n.complexHeader.length)):(i=[t[0]],t.splice(0,1))),1<t.length&&sortByMultipleColumns(t,n.groupBy),i&&(t=i.concat(t)),n.getGroupLabels(t),t}exportToXML(t,a){function n(t,a){let o="";for(let r=0;r<t.length;r++){const l=t[r];o+=a+"<row>\n";for(let t=0;t<i.length;t++){const r=i[t];if("rows"===r){if(!l.rows)continue;o+=`${a}    <rows>\n${n(l.rows,a+"        ")}${a}    </rows>\n`;continue}o+=a+`    <${r}>${l[r]}</${r}>\n`}o+=a+"</row>\n"}return o}const i=this.datafields.slice(0);let o="<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<table>\n";-1===i.indexOf("rows")&&i.push("rows"),o+=n(t,"    ")+"</table>",this.downloadFile(o,"application/xml",a)}formatDate(t,a){if(!Smart.Utilities.DateTime)return t;try{return new Smart.Utilities.DateTime(t).toString(a)}catch(a){return t}}formatNumber(t,a){if(!Smart.Utilities.NumberRenderer)return t;const n=new Smart.Utilities.NumberRenderer,i=n.formatNumber(t,a);return void 0===i?t:i}generateAuxiliaryFiles(){const t=new Date().toISOString();return{_relsRels:"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/></Relationships>",docPropsAppXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="1" baseType="lpstr"><vt:lpstr>Sheet1</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>`,docPropsCoreXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>Smart HTML Elements</dc:creator><cp:lastModifiedBy>Smart HTML Elements</cp:lastModifiedBy><dcterms:created xsi:type="dcterms:W3CDTF">${t}</dcterms:created><dcterms:modified xsi:type="dcterms:W3CDTF">${t}</dcterms:modified></cp:coreProperties>`,xl_relsWorkbookXmlRels:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId4" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>`,xlThemeTheme1Xml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="44546A"/></a:dk2><a:lt2><a:srgbClr val="E7E6E6"/></a:lt2><a:accent1><a:srgbClr val="4472C4"/></a:accent1><a:accent2><a:srgbClr val="ED7D31"/></a:accent2><a:accent3><a:srgbClr val="A5A5A5"/></a:accent3><a:accent4><a:srgbClr val="FFC000"/></a:accent4><a:accent5><a:srgbClr val="5B9BD5"/></a:accent5><a:accent6><a:srgbClr val="70AD47"/></a:accent6><a:hlink><a:srgbClr val="0563C1"/></a:hlink><a:folHlink><a:srgbClr val="954F72"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Calibri Light" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="游ゴシック Light"/><a:font script="Hang" typeface="맑은 고딕"/><a:font script="Hans" typeface="等线 Light"/><a:font script="Hant" typeface="新細明體"/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="游ゴシック"/><a:font script="Hang" typeface="맑은 고딕"/><a:font script="Hans" typeface="等线"/><a:font script="Hant" typeface="新細明體"/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><a:font script="Armn" typeface="Arial"/><a:font script="Bugi" typeface="Leelawadee UI"/><a:font script="Bopo" typeface="Microsoft JhengHei"/><a:font script="Java" typeface="Javanese Text"/><a:font script="Lisu" typeface="Segoe UI"/><a:font script="Mymr" typeface="Myanmar Text"/><a:font script="Nkoo" typeface="Ebrima"/><a:font script="Olck" typeface="Nirmala UI"/><a:font script="Osma" typeface="Ebrima"/><a:font script="Phag" typeface="Phagspa"/><a:font script="Syrn" typeface="Estrangelo Edessa"/><a:font script="Syrj" typeface="Estrangelo Edessa"/><a:font script="Syre" typeface="Estrangelo Edessa"/><a:font script="Sora" typeface="Nirmala UI"/><a:font script="Tale" typeface="Microsoft Tai Le"/><a:font script="Talu" typeface="Microsoft New Tai Lue"/><a:font script="Tfng" typeface="Ebrima"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:lumMod val="110000"/><a:satMod val="105000"/><a:tint val="67000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="103000"/><a:tint val="73000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="105000"/><a:satMod val="109000"/><a:tint val="81000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:satMod val="103000"/><a:lumMod val="102000"/><a:tint val="94000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:satMod val="110000"/><a:lumMod val="100000"/><a:shade val="100000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:lumMod val="99000"/><a:satMod val="120000"/><a:shade val="78000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="6350" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="12700" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln><a:ln w="19050" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/><a:miter lim="800000"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="63000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:solidFill><a:schemeClr val="phClr"><a:tint val="95000"/><a:satMod val="170000"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="93000"/><a:satMod val="150000"/><a:shade val="98000"/><a:lumMod val="102000"/></a:schemeClr></a:gs><a:gs pos="50000"><a:schemeClr val="phClr"><a:tint val="98000"/><a:satMod val="130000"/><a:shade val="90000"/><a:lumMod val="103000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="63000"/><a:satMod val="120000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="5400000" scaled="0"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri="{05A4C25C-085E-4340-85A3-A5531E510DB2}"><thm15:themeFamily xmlns:thm15="http://schemas.microsoft.com/office/thememl/2012/main" name="Office Theme" id="{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}" vid="{4A3C46E8-61CC-4603-A589-7422A47A8E4A}"/></a:ext></a:extLst></a:theme>`,xlWorkbookXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15 xr xr6 xr10 xr2" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr6="http://schemas.microsoft.com/office/spreadsheetml/2016/revision6" xmlns:xr10="http://schemas.microsoft.com/office/spreadsheetml/2016/revision10" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2"><fileVersion appName="xl" lastEdited="7" lowestEdited="7" rupBuild="20325"/><workbookPr defaultThemeVersion="166925"/><mc:AlternateContent xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"><mc:Choice Requires="x15"><x15ac:absPath url="C:\Users\jqwidgets\Desktop\" xmlns:x15ac="http://schemas.microsoft.com/office/spreadsheetml/2010/11/ac"/></mc:Choice></mc:AlternateContent><xr:revisionPtr revIDLastSave="0" documentId="13_ncr:1_{0DEDCB6D-5403-4CD8-AAA5-59B6D238A8B6}" xr6:coauthVersionLast="34" xr6:coauthVersionMax="34" xr10:uidLastSave="{00000000-0000-0000-0000-000000000000}"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="19200" windowHeight="6950" xr2:uid="{0CB664E6-3800-4A88-B158-B46A682E7484}"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets><calcPr calcId="179021"/><extLst><ext uri="{140A7094-0E35-4892-8432-C4D2E57EDEB5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:workbookPr chartTrackingRefBase="1"/></ext></extLst></workbook>`,Content_TypesXml:`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="bin" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings"/><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/><Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>`}}generateDefaultStyle(t){const a=this,n={},o=a.datafields,r=a.complexHeader?t[a.complexHeader.length]:t[+a.exportHeader];if(!r)return n;for(let a=0;a<o.length;a++){const t=r[o[a]];t instanceof Date&&(!n.columns&&(n.columns=[]),n.columns[o[a]]={format:"d"})}return n}generateGroupRow(t){const a=t.rowNumber,n="A"+a,i=`        <row r="${a}" outlineLevel="${t.outlineLevel}" spans="1:${t.numberOfColumns}"${this.getCustomRowHeight(a-1)} x14ac:dyDescent="0.45">
            <c r="${n}" t="s">
                <v>${t.sharedStringIndex}</v>
            </c>
        </row>\n`;return t.mergedCells.push({from:n,to:this.columnsArray[t.numberOfColumns-1]+a}),i}generateSharedStrings(t){function a(t){l++,-1===o.indexOf(t)&&(s++,o.push(t),r+=`<si><t>${t}</t></si>`)}const n=this,i=n.datafields,o=[];let r="",l=0,s=0;for(let n=0;n<t.length;n++){const o=t[n];for(let t=0,n;t<i.length;t++)(n=o[i[t]],"string"==typeof n)&&a(n)}if(n.groupLabels)for(let t=0;t<n.groupLabels.length;t++)a(n.groupLabels[t]);return r=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${l}" uniqueCount="${s}">${r}</sst>`,{collection:o,xml:r}}generateSheet1(t,a){function n(t,a){return o.columnsArray[t]+a}const o=this,r=o.columnsArray.length,i=t.length,l=o.columnsArray[r-1]+i,d=o.datafields,s=o.getFilters(),c=[].concat(o.complexHeaderMergedCells);let m=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">
    <sheetPr filterMode="${""!==s}" />
    <dimension ref="A1:${l}" />
    <sheetViews>
        <sheetView tabSelected="1" workbookViewId="0" />
    </sheetViews>
    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${o.getCustomColumnWidths()}
    <sheetData>\n`;for(let l=0;l<=t.length;l++){const i=t[l],c=l+1;let s="";if(o.actualHierarchy){const a=t[l-1];a&&a._collapsed&&(!i||a._level>i._level)&&(s=" collapsed=\"true\"")}if(l===t.length){s&&(m+=`        <row r="${c}" outlineLevel="${Math.max(t[l-1]._level-2,0)}" hidden="false" collapsed="true" />\n`);break}let p=`        <row r="${c}"${o.getOutlineLevel(i)} hidden="${i._hidden||i._collapsed||!1}"${s} spans="1:${r}"${o.getCustomRowHeight(c-1)} x14ac:dyDescent="0.45">\n`;for(let t=0;t<d.length;t++){const r=o.getXLSXCellStyle(n(t,c));p+=o.getActualCellData(i[d[t]],{r:n(t,c),s:r},a)}p+="        </row>\n",m+=p}return m+=`    </sheetData>${o.conditionalFormattingXLSX.conditions}${s}${o.getMergedCells(c)}
    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />
    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />
</worksheet>`,m}generateSheet1WithGrouping(t,a){function n(t,a){return o.columnsArray[t]+a}const o=this,r=o.columnsArray.length,i=t.length,l=o.columnsArray[r-1]+i,d=o.datafields,s=[].concat(o.complexHeaderMergedCells);let c=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac xr xr2 xr3" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision" xmlns:xr2="http://schemas.microsoft.com/office/spreadsheetml/2015/revision2" xmlns:xr3="http://schemas.microsoft.com/office/spreadsheetml/2016/revision3" xr:uid="{7F25248B-C640-4C64-AD47-C0EA0E5D90D0}">
    <dimension ref="A1:${l}" />
    <sheetViews>
        <sheetView tabSelected="1" workbookViewId="0" />
    </sheetViews>
    <sheetFormatPr defaultRowHeight="14.5" x14ac:dyDescent="0.35" />${o.getCustomColumnWidths()}
    <sheetData>\n`,m=0,p=[];mainLoop:for(let l=0;l<t.length;l++){const i=t[l],u=l+1+m;let g=0,h="";if(!o.exportHeader||!o.complexHeader&&0!=l||o.complexHeader&&l>=o.complexHeader.length){let t="";for(let n=0;n<o.groupBy.length;n++){const d=o.groupBy[n],h=i[d],f=o.groups[d][h];if(t+=h,-1===p.indexOf(t)){let n=a.indexOf(f);c+=o.generateGroupRow({rowNumber:u,outlineLevel:g,numberOfColumns:r,sharedStringIndex:n,mergedCells:s}),p.push(t),l--,m++;continue mainLoop}g++}h=` outlineLevel="${g}"`}let f=`        <row r="${u}"${h} spans="1:${r}"${o.getCustomRowHeight(u-1)} x14ac:dyDescent="0.45">\n`;for(let t=0;t<d.length;t++){const r=o.getXLSXCellStyle(n(t,l+1));f+=o.getActualCellData(i[d[t]],{r:n(t,u),s:r},a)}f+="        </row>\n",c+=f}return c+=`    </sheetData>${o.getMergedCells(s)}
    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />
    <pageSetup paperSize="9" orientation="portrait" r:id="rId1" />
</worksheet>`,c}getActualCellData(t,a,n){const i=a.r,o=a.s;if("string"==typeof t)return`            <c r="${i}" t="s"${o}>
                <v>${n.indexOf(t)}</v>
            </c>\n`;if("boolean"==typeof t)return`            <c r="${i}" t="b"${o}>
                <v>${+t}</v>
            </c>\n`;if(t instanceof Date){const a=(t.getTime()+this.timeBetween1900And1970)/864e5+2;return`            <c r="${i}"${o}>
                <v>${a}</v>
            </c>\n`}return`            <c r="${i}"${o}>
                <v>${t}</v>
            </c>\n`}getColumnsArray(){function t(t){return 26>t?"":a(64+Math.floor(t/26))}var a=String.fromCharCode;const n=this,o=n.datafields.length,r=[];for(let n=0;n<o;n++)r.push(t(n)+a(65+(26>n?n:n%26)));n.columnsArray=r}getColumnStyle(){const t=this,a=t.style;if(!a)return`        .header { border: 1px solid black; padding: 5px; }
        .column { border: 1px solid black; padding: 5px; }
        .group { background-color: #FFFFFF; color: #000000; font-weight: bold; }`;const n={header:"border: 1px solid black; padding: 5px; ",column:"white-space: nowrap; overflow: hidden; border: 1px solid black; padding: 5px; ",group:"background-color: #FFFFFF; color: #000000; font-weight: bold; "},i=t.data[0];let o="";const r=a.header||{};for(let a in r){if(!r.hasOwnProperty(a))continue;const o=r[a];if(i[a]){for(let t in n["header"+a]||(n["header"+a]=""),o)if(o.hasOwnProperty(t)){const i=Smart.Utilities.Core.toDash(t)+": "+o[t]+"; ";n["header"+a]+=i,"width"==t&&(!n["column"+a]&&(n["column"+a]=""),n["column"+a]+=i)}continue}n.header+="height"==a&&t.complexHeader?"height: "+parseInt(r[a],10)/t.complexHeader.length+"px; ":Smart.Utilities.Core.toDash(a)+": "+r[a]+"; "}const l=a.columns||{};for(let t in l){if(!l.hasOwnProperty(t))continue;const a=l[t];if(i[t]){for(let i in n["column"+t]||(n["column"+t]=""),a)isNaN(i)&&a.hasOwnProperty(i)&&"format"!=i&&(n["column"+t]+=Smart.Utilities.Core.toDash(i)+": "+a[i]+"; ");continue}n.column+=Smart.Utilities.Core.toDash(t)+": "+a+"; "}for(let t in n)n.hasOwnProperty(t)&&(o+=`        .${t} { ${n[t]}}\n`);return o}getCustomColumnWidths(){const t=this;if(!t.style||!t.columnWidth||0===t.columnWidth.length)return"";let a="\n    <cols>\n";for(let n=0,i;n<t.columnWidth.length;n++)i=t.columnWidth[n],void 0!==i&&(i=Math.round(parseFloat(i))/11,a+=`        <col min="${n+1}" max="${n+1}" width="${i}" customWidth="1" />\n`);return a+="    </cols>",a}getCustomFilter(t,a){let n="equal",i;return t instanceof Date&&(t=(t.getTime()+this.timeBetween1900And1970)/864e5+2),a=a.toUpperCase(),("EMPTY"===a?i="":"NOT_EMPTY"===a?(i="",n="notEqual"):"CONTAINS"===a||"CONTAINS_CASE_SENSITIVE"===a?i=`*${t}*`:"DOES_NOT_CONTAIN"===a||"DOES_NOT_CONTAIN_CASE_SENSITIVE"===a?(i=`*${t}*`,n="notEqual"):"STARTS_WITH"===a||"STARTS_WITH_CASE_SENSITIVE"===a?i=`${t}*`:"ENDS_WITH"===a||"ENDS_WITH_CASE_SENSITIVE"===a?i=`*${t}`:"EQUAL"===a||"EQUAL_CASE_SENSITIVE"===a?i=t:"NULL"===a?i=null:"NOT_NULL"===a?(i=null,n="notEqual"):"NOT_EQUAL"===a?(i=t,n="notEqual"):"LESS_THAN"===a?(i=t,n="lessThan"):"LESS_THAN_OR_EQUAL"===a?(i=t,n="lessThanOrEqual"):"GREATER_THAN"===a?(i=t,n="greaterThan"):"GREATER_THAN_OR_EQUAL"===a?(i=t,n="greaterThanOrEqual"):void 0,`                <customFilter val="${i}" operator="${n}"/>\n`)}getCustomRowHeight(t){const a=this;return a.style?a.rowHeight[t]||a.defaultRowHeight||"":""}getDatafields(t){const a=this,n=t[0],i=[];for(let a in n)n.hasOwnProperty(a)&&"_"!==a.charAt(0)&&i.push(a);a.datafields=i}getFilters(){const t=this,a=t.filterBy;if(!a)return"";let n="";for(let i in a)if(a.hasOwnProperty(i)){const o=t.datafields.indexOf(i);if(-1===o)continue;const r=a[i],l=r.filters;n+=`        <filterColumn colId="${o}">
            <customFilters and="${!r.operator}">\n`;for(let a=0;a<l.length;a++)n+=t.getCustomFilter(l[a].value,l[a].condition);n+=`            </customFilters>
        </filterColumn>`}return n?(n=`\n    <autoFilter ref="A1:${t.columnsArray[t.columnsArray.length-1]+t.data.length}">\n${n}\n    </autoFilter>`,n):""}getGroupLabels(t){const a=this,n=a.xlsxStartIndex===void 0?+a.exportHeader:a.xlsxStartIndex,i={},o=[];for(let r=n;r<t.length;r++){const l=t[r];for(let r=0;r<a.groupBy.length;r++){const s=a.groupBy[r],d=l[s];let c=i[s];c===void 0&&(i[s]={},c=i[s]),c[d]===void 0&&(c[d]=(a.exportHeader?t[n-1][s]:s)+": "+d,o.push(c[d]))}}a.groups=i,a.groupLabels=o}getHTMLHeader(t,a){const n=this;let i="\n        <thead>\n";if(!n.complexHeader){i+="            <tr>\n";for(let n=0;n<t.length;n++){const o=t[n];i+=`                <th class="header header${o}">${a[0][o]}</th>\n`}return i+="            </tr>\n        </thead>",i}for(let o=0;o<n.complexHeader.length;o++){const a=n.complexHeader[o];i+="            <tr>\n";for(let r=0;r<a.length;r++){const l=a[r];let s=1,d=1;if(a[r-1]&&a[r-1]===l||n.complexHeader[o-1]&&n.complexHeader[o-1][r]===l)continue;let c=r+1;for(;a[c]&&a[c]===a[c-1];)s++,c++;for(c=o+1;n.complexHeader[c]&&n.complexHeader[c][r]===l;)d++,c++;const m=o==n.complexHeader.length-1||d+o===n.complexHeader.length?" header"+t[r]:"";i+=`                <th class="header${m}" colspan="${s}" rowspan="${d}">${l}</th>\n`}i+="            </tr>\n"}return i+="        </thead>",i}getConditionalFormatting(){const t=this,a=t.conditionalFormatting;if(!a)return void(t.conditionalFormattingXLSX={conditions:"",styles:""});const n=[];let o="",i="";for(let r=a.length-1;0<=r;r--){const l=a[r],s=t.columnsArray[t.datafields.indexOf(l.column)],d=s+(t.xlsxStartIndex+1),c=d+":"+s+t.data.length,m=l.background+l.color,p=t.getConditionalAttributes(l,d);let u=n.indexOf(m);if(-1===u){const a=`        <dxf>
            <font>
                <b val="0"/>
                <i val="0"/>
                <color rgb="${"White"===l.color?"FFFFFFFF":"FF000000"}"/>
                <sz val="10"/>
            </font>
            <fill>
                <patternFill>
                    <bgColor rgb="${t.toARGB(l.background)}"/>
                </patternFill>
            </fill>
        </dxf>\n`;i+=a,u=n.length,n.push(m)}o+=`    <conditionalFormatting sqref="${c}">
        <cfRule dxfId="${u}" text="${p.text}" rank="${p.rank}" percent="${p.percent}" bottom="${p.bottom}" equalAverage="${p.equalAverage}" aboveAverage="${p.aboveAverage}"${p.operator}${p.timePeriod} priority="${r+2}" type="${p.type}">
${p.formula}        </cfRule>
    </conditionalFormatting>\n`}i=`    <dxfs count="${n.length}">\n${i}    </dxfs>`,t.conditionalFormattingXLSX={conditions:o,styles:i}}getConditionalAttributes(t,a){let n=t.condition,i=t.comparator,o="",r=0,l=0,s=0,d=0,c="",m="",p="",u="";return"equal"===n?(c="equal",p="cellIs",u=`            <formula>${i}</formula>\n`):"lessThan"===n?(c="lessThan",p="cellIs",u=`            <formula>${i}</formula>\n`):"greaterThan"===n?(c="greaterThan",p="cellIs",u=`            <formula>${i}</formula>\n`):"notEqual"===n?(c="notEqual",p="cellIs",u=`            <formula>${i}</formula>\n`):"between"===n?(c="between",p="cellIs",u=`            <formula>${t.min}</formula>
            <formula>${t.max}</formula>\n`):"duplicate"===n?(p="duplicateValues",u=`            <formula>0</formula>\n`):"topNItems"===n?(r=i,p="top10"):"bottomNItems"===n?(r=i,s=1,p="top10"):"topNPercent"===n?(r=i,l=1,p="top10"):"bottomNPercent"===n?(r=i,l=1,s=1,p="top10"):"aboveAverage"===n?(d=1,p="aboveAverage",u=`            <formula>0</formula>\n`):"belowAverage"===n?(p="aboveAverage",u=`            <formula>0</formula>\n`):"contains"===n?(o=i,c="containsText",p="containsText",u=`            <formula>NOT(ISERROR(SEARCH("${i}",${a})))</formula>\n`):"doesNotContain"===n?(o=i,c="notContains",p="notContainsText",u=`            <formula>ISERROR(SEARCH("${i}",${a}))</formula>\n`):"dateOccur"===n?(m=` timePeriod="${i}"`,p="timePeriod"):void 0,c&&(c=` operator="${c}" `),{text:o,rank:r,percent:l,bottom:s,equalAverage:0,aboveAverage:d,operator:c,timePeriod:m,type:p,formula:u}}getMergedCells(t){const a=this;let n="";for(let a=0;a<t.length;a++)t[a].from!==t[a].to&&(n+=`\n        <mergeCell ref="${t[a].from}:${t[a].to}" />\n`);if(a.mergedCells)for(let t=0;t<a.mergedCells.length;t++){const i=a.mergedCells[t];if(2>i.rowspan&&2>i.colspan)continue;const o=a.columnsArray[i.cell[0]]+(i.cell[1]+a.xlsxStartIndex+1),r=a.columnsArray[i.cell[0]+i.colspan-1]+(i.cell[1]+a.xlsxStartIndex+i.rowspan);n+=`\n        <mergeCell ref="${o}:${r}" />\n`}return n&&(n=`\n    <mergeCells count="${t.length}">${n}    </mergeCells>`),n}getNumFmtIndex(t,a){let n=a.collection.indexOf(t);return-1===n?(n=a.collection.length+100,a.collection.push(t),a.xml+=`<numFmt numFmtId="${n}" formatCode="${t}"/>`):n+=100,n}getOutlineLevel(t){return this.actualHierarchy&&1!==t._level?` outlineLevel="${t._level-1}"`:""}getRowStyle(){const t=this,a=t.style;if(!a)return"";const n=a.rows;if(!n)return"";const o={row:""};let r="";for(let t in n){if(!n.hasOwnProperty(t)||"alternationCount"==t||"alternationStart"==t||"alternationEnd"==t)continue;const a=n[t];if(-1!==t.indexOf("alt")){const n=t.slice(16,17),i=t.slice(17);o["rowN"+n]||(o["rowN"+n]=""),o["rowN"+n]+="Color"===i?"color : "+a+"; ":"BorderColor"===i?"border-color : "+a+"; ":"background-color : "+a+"; ";continue}if(!isNaN(t)){for(let n in o["row"+t]||(o["row"+t]=""),a)a.hasOwnProperty(n)&&(o["row"+t]+=Smart.Utilities.Core.toDash(n)+": "+a[n]+"; ");continue}o.row+=Smart.Utilities.Core.toDash(t)+": "+n[t]+"; "}let l=Object.keys(o);l.sort(function(t,a){if("row"===t)return-1;if("row"===a)return 1;const n=!isNaN(t.slice(3)),i=!isNaN(a.slice(3));return n&&!i?1:!n&&i?-1:+(t<a)});for(let t=0;t<l.length;t++)r+=`        .${l[t]} { ${o[l[t]]}}\n`;return r}getTableStyle(){const t=this,a=t.style;if(!a)return" style=\"table-layout: fixed; border: 1px solid black; border-collapse: collapse;\"";let n="table-layout: fixed; ";for(let t in a)a.hasOwnProperty(t)&&-1===["header","columns","rows"].indexOf(t)&&(n+=Smart.Utilities.Core.toDash(t)+": "+a[t]+"; ");return n&&(n=" style=\""+n+"\""),n}getXLSXCellStyle(t){const a=this;return void 0===a.cellStyleMapping[t]?"":` s="${a.cellStyleMapping[t]}"`}getXLSXFormat(t,a){if("number"==typeof a){let a=parseFloat(t.slice(1))||0,n=0<a?"."+"0".repeat(a):"";return t=t.slice(0,1),"C"===t||"c"===t?"$#,0"+n:"D"===t||"d"===t?a?"0".repeat(a):"0":"E"===t||"e"===t?"0"+n+t+"000":"F"===t||"f"===t?"0"+n:"N"===t||"n"===t?"#,0"+n:"P"===t||"p"===t?"#,0"+n+" %":void 0}return a instanceof Date?"d"===t?"m/d/yyyy":"D"===t?"nnnnmmmm dd, yyyy":"t"===t?"h:m AM/PM":"T"===t?"h:mm:ss AM/PM":"f"===t?"nnnnmmmm dd, yyyy h:m AM/PM":"F"===t?"nnnnmmmm dd, yyyy h:mm:ss AM/PM":"M"===t?"mmmm d":"Y"===t?"yyyy mmmm":"FP"===t||"PP"===t?"yyyy-mm-dd hh:mm:ss":"FT"===t||"PT"===t?"hh:mm:ss":(t=t.replace(/f|u|n|p|e|a|x|o/gi,""),t=t.replace(/tt/gi,"AM/PM"),t=t.replace(/:{2,}|:\s|:$|\.$/g,""),t=t.trim(),t):void 0}processColumnStyle(t){const a=this,n=t.header,o=t.columns,i=a.data[0],r=a.xlsxStartIndex;if(a.columnWidth=[],r&&n)for(let t=0;t<a.columnsArray.length;t++){const o=a.columnsArray[t],l=o+r,s=n[a.datafields[t]];for(let t in n)if(n.hasOwnProperty(t)&&void 0===i[t])if(a.complexHeader){for(let i=0;i<a.complexHeader.length;i++)if("height"==t){a.rowHeight[i]=` ht="${parseFloat(n.height)/a.complexHeader.length/2}"`;continue}else a.storeCellStyle(o+(i+1),t,n[t]);}else{if("height"==t){a.rowHeight[0]=` ht="${parseFloat(n.height)/2}"`;continue}a.storeCellStyle(l,t,n[t])}if(s)for(let n in s)if(s.hasOwnProperty(n)){if("width"==n){a.columnWidth[t]=s.width;continue}a.storeCellStyle(l,n,s[n])}}else if(n)for(let t=0;t<a.columnsArray.length;t++){const i=n[a.datafields[t]];i&&void 0!==i.width&&(a.columnWidth[t]=i.width)}if(!o)return"";for(let n=r;n<a.data.length;n++)for(let t=0;t<a.columnsArray.length;t++){const r=a.columnsArray[t],l=r+(n+1),s=a.datafields[t],d=o[s];for(let t in o)o.hasOwnProperty(t)&&void 0===i[t]&&a.storeCellStyle(l,t,o[t]);if(d)for(let t in d)isNaN(t)&&d.hasOwnProperty(t)&&a.storeCellStyle(l,t,d[t],a.data[n][s])}}processComplexHeader(t,a,n){function i(a){for(let n=0;n<t.columngroups.length;n++){const i=t.columngroups[n];if(i.name===a)return i}}function o(t){for(const a=[];t;)if(a.unshift(t.label),t.parentGroup)t=i(t.parentGroup);else return a}const r=this,l={},s=-1!==["html","pdf","xlsx"].indexOf(n)&&t.columngroups,d=[],c={},m=[];let p=0;if(s){for(let a=0;a<t.columngroups.length;a++){const n=t.columngroups[a],i=o(n);c[n.name]=i,p=Math.max(p,i.length)}p++;for(let t=0;t<p;t++)m[t]=[]}for(let o=0;o<t.columns.length;o++){const a=t.columns[o];if(l[a.dataField]=a.label,!s)continue;if(d[o]=a.dataField,m[p-1][o]=a.label,!a.columnGroup)continue;const n=c[a.columnGroup];for(let t=0;t<n.length;t++)m[t][o]=n[t]}if(1<m.length){const t=Object.keys(l).length;for(let o=0;o<p-1;o++){const i={};for(let a=0;a<t;a++){if(void 0===m[o][a]){let t=o+1;for(;void 0===m[t][a];)t++;m[o][a]=m[t][a]}i[d[a]]=m[o][a]}"xlsx"===n&&a.splice(o,0,i)}if(r.complexHeader=m,"xlsx"!==n)a.unshift(l);else{a.splice(p-1,0,l);const n={};for(let a=0;a<p;a++)for(let i=0;i<t;i++){const t=m[a][i];n[t]?n[t].to=[a,i]:(n[t]={from:[a,i]},n[t].to=n[t].from)}r.complexHeaderMergeInfo=n}}else a.unshift(l)}processHierarchicalData(t,a){function n(t,a,o){const r=s[t];if(c=i(c,a),void 0!==r)for(let t=0;t<r.length;t++){const i=r[t],l=i._keyDataField;i._collapsed=o,i._level=a,d.push(i),s[l]&&(m=!0,i._expanded=void 0===i._expanded||i._expanded,n(l,a+1,o||!i._expanded))}}function o(t,n,r){const l=s[t];if(c=i(c,n),void 0!==l)for(let t=0;t<l.length;t++){const i=l[t],d=i._keyDataField;let c;if("json"===a)for(let t in c={},i)i.hasOwnProperty(t)&&"_"!==t.charAt(0)&&(c[t]=i[t]);else c=Object.assign({},i);r.push(c),s[d]&&(m=!0,c.rows=[],o(d,n+1,c.rows))}}var i=Math.max;const r=this,l="xlsx"===a?r.xlsxStartIndex:+r.exportHeader,s={},d=[];let c=0,m=!1;if(void 0===t[l]._keyDataField)return r.processNestedData(t,a,l);for(let n=l;n<t.length;n++){const a=Object.assign({},t[n]),i=a._parentDataField;void 0===s[i]?s[i]=[a]:s[i].push(a)}if(l)for(let n=0;n<l;n++)d.push(Object.assign({},t[n])),-1===["json","pdf","xml"].indexOf(a)&&(d[n]._level=1);return"json"!==a&&"xml"!==a?n(null,1,!1):o(null,1,d),m||(r.actualHierarchy=!1),r.maxLevel=c,d}processNestedData(t,a,n){function o(t,a,n,r){d=i(d,n);for(let l=t;l<a.length;l++){const t=Object.assign({},a[l]);t._collapsed=r,t._level=n,s.push(t),t.children&&0<t.children.length&&(c=!0,t._expanded=void 0===t._expanded||t._expanded,o(0,t.children,n+1,r||!t._expanded)),delete t.children}}function r(t,a,n,o){d=i(d,o);for(let l=t;l<a.length;l++){const t=Object.assign({},a[l]);1===o?s[l]=t:n[l]=t,t.children&&0<t.children.length&&(c=!0,t.rows=[],r(0,t.children,t.rows,o+1)),delete t.children}}var i=Math.max;const l=this,s=[];let d=0,c=!1;if(n)for(let o=0;o<n;o++)s.push(Object.assign({},t[o])),-1===["json","pdf","xml"].indexOf(a)&&(s[o]._level=1);return"json"!==a&&"xml"!==a?o(n,t,1,!1):r(n,t,void 0,1),c||(l.actualHierarchy=!1),l.maxLevel=d,s}processRowStyle(t){function a(t,a,i){for(let o=0;o<n.columnsArray.length;o++){const l=n.columnsArray[o]+(t+1+r);n.storeCellStyle(l,a,i)}}const n=this,o=t.rows;if(n.rowHeight=[],!o)return;const r=n.xlsxStartIndex;o.height&&(n.defaultRowHeight=` ht="${parseFloat(o.height)/2}"`);for(let l=r;l<n.data.length;l++){const t=l-r;for(let n in o)o.hasOwnProperty(n)&&-1===n.indexOf("alt")&&isNaN(n)&&"height"!=n&&a(t,n,o[n]);if(o.alternationCount&&!(o.alternationStart&&t<o.alternationStart)&&!(o.alternationEnd&&t>o.alternationEnd)){const n=o.alternationStart||0,r=(t-n)%o.alternationCount;o[`alternationIndex${r}Color`]&&a(t,"color",o[`alternationIndex${r}Color`]),o[`alternationIndex${r}BorderColor`]&&a(t,"borderColor",o[`alternationIndex${r}BorderColor`]),o[`alternationIndex${r}BackgroundColor`]&&a(t,"backgroundColor",o[`alternationIndex${r}BackgroundColor`])}if(o[t])for(let i in o[t])if(o[t].hasOwnProperty(i)){if("height"==i){n.rowHeight[l]=` ht="${parseFloat(o[t].height)/2}"`;continue}a(t,i,o[t][i])}}}storeCellStyle(t,a,n){const i=this,o=i.styleMap[t];switch(a){case"backgroundColor":o.fills.fgColor=n;break;case"color":o.fonts.color=n;break;case"fontFamily":o.fonts.name=n;break;case"fontSize":o.fonts.sz=parseFloat(n);break;case"fontStyle":"italic"===n?o.fonts.i=!0:delete o.fonts.i;break;case"fontWeight":"bold"===n?o.fonts.b=!0:delete o.fonts.b;break;case"numFmt":{o.numFmt=n;break}case"textAlign":o.alignment.horizontal=n;break;case"textDecoration":"underline"===n?o.fonts.u=!0:delete o.fonts.u;break;case"verticalAlign":"middle"===n&&(n="center"),o.alignment.vertical=n;}}toARGB(t){t=t.replace(/\s/g,"");const a=/rgb\((\d+),(\d+),(\d+)\)/gi.exec(t);if(null!==a){const t=parseFloat(a[1]).toString(16).toUpperCase(),n=parseFloat(a[2]).toString(16).toUpperCase(),i=parseFloat(a[3]).toString(16).toUpperCase();return"FF"+"0".repeat(2-t.length)+t+"0".repeat(2-n.length)+n+"0".repeat(2-i.length)+i}const n=/rgba\((\d+),(\d+),(\d+)\,(\d*.\d+|\d+)\)/gi.exec(t);if(null!==n){const t=Math.round(255*parseFloat(n[4])).toString(16).toUpperCase(),a=parseFloat(n[1]).toString(16).toUpperCase(),i=parseFloat(n[2]).toString(16).toUpperCase(),o=parseFloat(n[3]).toString(16).toUpperCase();return"0".repeat(2-t.length)+t+"0".repeat(2-a.length)+a+"0".repeat(2-i.length)+i+"0".repeat(2-o.length)+o}const i=/^#(.)(.)(.)$/gi.exec(t);if(null!==i){const t=i[1].toUpperCase(),a=i[2].toUpperCase(),n=i[3].toUpperCase();return"FF"+t+t+a+a+n+n}return"FF"+t.toUpperCase().slice(1)}toggleableFunctionality(){const t=this;return t.actualHierarchy?`\n    <style type="text/css">
        .toggle-element {
            width: 5px;
            height: 1px;
            padding-right: 5px;
            float: left;
            text-align: right;
            cursor: pointer;
            user-select: none;
        }

        .collapsed {
            display: none;
        }
    </style>
    <script type="text/javascript">
        window.onload = function () {
            var expandChar = '${t.expandChar}',
                collapseChar = '${t.collapseChar}',
                toggleElements = document.getElementsByClassName('toggle-element');

            function getParent(child) {
                var prevSibling = child.previousElementSibling;

                while (prevSibling) {
                    if (child.getAttribute('level') > prevSibling.getAttribute('level')) {
                        return prevSibling;
                    }

                    prevSibling = prevSibling.previousElementSibling;
                }

            }

            function getFirstCollapsedAncestor(child) {
                var parent = getParent(child);

                while (parent) {
                    if (parent.firstElementChild.firstElementChild.innerHTML === expandChar) {
                        return parent;
                    }

                    parent = getParent(parent);
                }
            }

            for (var i = 0; i < toggleElements.length; i++) {
                toggleElements[i].addEventListener('click', function (event) {
                    var expanded = this.innerHTML === collapseChar,
                        row = this.parentElement.parentElement,
                        sibling = row.nextElementSibling;

                    if (expanded) {
                        this.innerHTML = expandChar;
                    }
                    else {
                        this.innerHTML = collapseChar;
                    }

                    while (sibling && row.getAttribute('level') < sibling.getAttribute('level')) {
                        if (expanded) {
                            sibling.style.display = 'none';
                        }
                        else {
                            var firstCollapsedAncestor = getFirstCollapsedAncestor(sibling);

                            if (!firstCollapsedAncestor || firstCollapsedAncestor === row) {
                                sibling.classList.remove('collapsed');
                                sibling.style.display = null;
                            }

                        }

                        sibling = sibling.nextElementSibling;
                    }
                });
            }
        }
    </script>`:""}generateStyles(t){const a=this;if(a.cellStyleMapping={},0===Object.keys(t).length&&!a.complexHeader)return`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision"><fonts count="1" x14ac:knownFonts="1"><font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><charset val="204"/><scheme val="minor"/></font></fonts><fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${a.conditionalFormattingXLSX.styles||"<dxfs count=\"0\"/>"}<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`;a.styleMap={};for(let n=0;n<a.data.length;n++)for(let t=0;t<a.columnsArray.length;t++)a.styleMap[a.columnsArray[t]+(n+1)]={numFmts:{},fonts:{},fills:{},borders:{},alignment:{}};if(t&&t.columns)for(let n=0;n<a.columnsArray.length;n++){const i=a.datafields[n];if(!t.columns[i]||!t.columns[i].format)continue;const o=a.getXLSXFormat(t.columns[i].format,a.data[a.data.length-1][i]);o&&(t.columns[i].numFmt=o)}a.processRowStyle(t),a.processColumnStyle(t);const n={};for(let o=0;o<a.complexHeaderMergedCells.length;o++){const t=a.complexHeaderMergedCells[o];if(parseFloat(t.to[1])===a.complexHeader.length){n[t.to]=t.from;continue}a.styleMap[t.from].alignment.horizontal="center",a.styleMap[t.from].alignment.vertical="center"}const i={xml:"<font><sz val=\"11\" /><color theme=\"1\" /><name val=\"Calibri\" /><family val=\"2\" /><charset val=\"204\" /><scheme val=\"minor\" /></font>",collection:["default"]},o={xml:"<fill><patternFill patternType=\"none\" /></fill><fill><patternFill patternType=\"gray125\" /></fill>",collection:["default","gray125"]},r={xml:"",collection:[]},l={xml:"<xf fontId=\"0\" fillId=\"0\" />",collection:["default"]};for(let s=0;s<a.data.length;s++)for(let t=0;t<a.columnsArray.length;t++){const d=a.columnsArray[t]+(s+1),c=a.styleMap[d];let m="",p="",u="",g=[],h=[],f=[],_=[];for(let t in c.fonts)if(c.fonts.hasOwnProperty(t)){const n=c.fonts[t];"color"==t?(g[0]=n,m+=`<color rgb="${a.toARGB(n)}" />`):"name"==t?(g[1]=n,m+=`<name val="${n}" />`):"sz"==t?(g[2]=n,m+=`<sz val="${n}" />`):"i"==t?(g[3]=n,m+="<i />"):"b"==t?(g[4]=n,m+="<b />"):"u"==t?(g[5]=n,m+="<u />"):void 0}for(let t in c.fills)if(c.fills.hasOwnProperty(t)){const n=c.fills[t];"fgColor"==t?(h[0]=n,p+=`<fgColor rgb="${a.toARGB(n)}" />`):void 0}for(let t in c.alignment)if(c.alignment.hasOwnProperty(t)){const a=c.alignment[t];"horizontal"==t?(f[0]=a,u+=`horizontal="${a}" `):"vertical"==t?(f[1]=a,u+=`vertical="${a}" `):void 0}if(g=g.toString(),h=h.toString(),""!=m){let t=i.collection.indexOf(g);-1===t&&(t=i.collection.length,i.xml+="<font>"+m+"</font>",i.collection.push(g)),_[0]=t}if(""!=p){let t=o.collection.indexOf(h);-1===t&&(t=o.collection.length,o.xml+="<fill><patternFill patternType=\"solid\">"+p+"</patternFill></fill>",o.collection.push(h)),_[1]=t}0<f.length&&(_[2]=u),void 0!==c.numFmt&&(_[3]=a.getNumFmtIndex(c.numFmt,r));const y=_.toString();if(""!==y){let t=l.collection.indexOf(y);if(-1===t){let a="<xf ";t=l.collection.length,void 0!==_[0]&&(a+=`fontId="${_[0]}" `),void 0!==_[1]&&(a+=`fillId="${_[1]}" `),void 0!==_[3]&&(a+=`numFmtId="${_[3]}" `),a+=void 0===_[2]?"/>":`applyAlignment="1"><alignment ${u}/></xf>`,l.xml+=a,l.collection.push(y)}a.cellStyleMapping[n[d]||d]=t}}return r.collection.length&&(r.xml=`<numFmts count="${r.collection.length}">${r.xml}</numFmts>`),`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac x16r2 xr" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:x16r2="http://schemas.microsoft.com/office/spreadsheetml/2015/02/main" xmlns:xr="http://schemas.microsoft.com/office/spreadsheetml/2014/revision">${r.xml}<fonts count="${i.collection.length}" x14ac:knownFonts="1">${i.xml}</fonts><fills count="${o.collection.length}">${o.xml}</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="${l.collection.length}">${l.xml}</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>${a.conditionalFormattingXLSX.styles}<dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>`}});let bigIntNativeSupport;try{BigInt,bigIntNativeSupport=!0}catch(t){bigIntNativeSupport=!1}Smart.Utilities.Assign("BigNumber",class{constructor(t,a,l){var s=Math.abs,d=this,o;if(Smart.Utilities.BigNumber.bigIntSupport){if(t instanceof Smart.Utilities.BigNumber)if(Array.isArray(t._d))t=(t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0")+(t._f==t._d.length?"":"."+t._d.slice(t._f).join(""));else return new Smart.Utilities.BigNumber(t._d);try{d._d=BigInt(t)}catch(a){d._d=BigInt(Math.round(t))}return d._f=d._d.toString().replace("-","").length,void(d._s=0>d._d)}if(t instanceof Smart.Utilities.BigNumber){if("bigint"==typeof t._d)return new Smart.Utilities.BigNumber(t._d.toString());for(o in{precision:0,roundType:0,_s:0,_f:0})d[o]=t[o];return d._d=t._d.slice(),void(t._s&&1===t._d.length&&0===t._d[0]&&(d._s=!1))}if(void 0!==t&&("-0"===t&&(t="0"),new RegExp(/e/i).test(t))){var c=t.toString().toLowerCase(),m=c.indexOf("e"),u=new Smart.Utilities.BigNumber(c.slice(0,m)),g=c.slice(m+2),h=c.slice(m+1,m+2),f=new Smart.Utilities.BigNumber(10),_=f.pow(h+g),y=u.multiply(_);t=y.toString()}for(d.precision=isNaN(a=s(a))?Smart.Utilities.BigNumber.defaultPrecision:a,d.roundType=isNaN(l=s(l))?Smart.Utilities.BigNumber.defaultRoundType:l,d._s="-"==(t+="").charAt(0),d._f=((t=t.replace(/[^\d.]/g,"").split(".",2))[0]=t[0].replace(/^0+/,"")||"0").length,o=(t=d._d=(t.join("")||"0").split("")).length;o;t[--o]=+t[o]);d.round()}static get defaultPrecision(){return 40}static get defaultRoundType(){return 4}static get bigIntSupport(){return bigIntNativeSupport&&!0!==Smart.Utilities.BigNumber.ignoreBigIntNativeSupport}add(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d+new Smart.Utilities.BigNumber(t)._d);let l=this.normalizeOperand(this);if(t=l.normalizeOperand(t),l.isZero()&&l._s&&(l._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(l);if(l._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,l.subtract(t);var s=new Smart.Utilities.BigNumber(l),o=s._d,a=t._d,d=s._f,c=t._f,m,p;for(t=Math.max(d,c),d!=c&&(0<(c=d-c)?s._zeroes(a,c,1):s._zeroes(o,-c,1)),m=(d=o.length)==(c=a.length)?o.length:(0<(c=d-c)?s._zeroes(a,c):s._zeroes(o,-c)).length,p=0;m;p=(o[--m]=o[m]+a[m]+p)/10>>>0,o[m]%=10);return p&&++t&&o.unshift(p),s._f=t,s.round()}subtract(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d-new Smart.Utilities.BigNumber(t)._d);let r=this.normalizeOperand(this);if(t=r.normalizeOperand(t),r.isZero()&&r._s&&(r._s=!1),0===t||t.constructor===Smart.Utilities.BigNumber&&1===t._d.length&&0===t._d[0])return new Smart.Utilities.BigNumber(r);if(r._s!=(t=new Smart.Utilities.BigNumber(t))._s)return t._s^=1,r.add(t);var l=new Smart.Utilities.BigNumber(r),o=l.abs().compare(t.abs())+1,s=o?l:t,c=o?t:l,m=s._f,p=c._f,u=m,d,g;for(s=s._d,c=c._d,m!=p&&(0<(p=m-p)?l._zeroes(c,p,1):l._zeroes(s,-p,1)),d=(m=s.length)==(p=c.length)?s.length:(0<(p=m-p)?l._zeroes(c,p):l._zeroes(s,-p)).length;d;){if(s[--d]<c[d]){for(g=d;g&&!s[--g];s[g]=9);--s[g],s[d]+=10}c[d]=s[d]-c[d]}return o||(l._s^=1),l._f=u,l._d=c,l.round()}multiply(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*new Smart.Utilities.BigNumber(t)._d);let l=this.normalizeOperand(this);t=l.normalizeOperand(t);var d=new Smart.Utilities.BigNumber(l),o=d._d.length>=(t=new Smart.Utilities.BigNumber(t))._d.length,c=(o?d:t)._d,a=(o?t:d)._d,m=c.length,p=a.length,u=new Smart.Utilities.BigNumber,g,h,f;for(g=p;g;o&&f.unshift(o),u.set(u.add(new Smart.Utilities.BigNumber(f.join("")))))for(f=Array(p- --g).join("0").split(""),o=0,h=m;h;o+=c[--h]*a[g],f.unshift(o%10),o=o/10>>>0);return d._s=d._s!=t._s,d._f=((o=m+p-d._f-t._f)>=(h=(d._d=u._d).length)?l._zeroes(d._d,o-h+1,1).length:h)-o,d.round()}divide(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d/new Smart.Utilities.BigNumber(t)._d);let d=this.normalizeOperand(this);if(t=d.normalizeOperand(t),"0"==(t=new Smart.Utilities.BigNumber(t)))throw new Error("Division by 0");else if("0"==d)return new Smart.Utilities.BigNumber;var m=new Smart.Utilities.BigNumber(d),o=m._d,a=t._d,p=o.length-m._f,u=a.length-t._f,g=new Smart.Utilities.BigNumber,r=0,h=1,_=0,v=0,x,C,S;for(g._s=m._s!=t._s,g.precision=Math.max(m.precision,t.precision),g._f=+g._d.pop(),p!=u&&m._zeroes(p>u?a:o,Math.abs(p-u)),t._f=a.length,a=t,a._s=!1,a=a.round(),t=new Smart.Utilities.BigNumber;"0"==o[0];o.shift());out:do{for(S=_=0,"0"==t&&(t._d=[],t._f=0);r<o.length&&-1==t.compare(a);++r){if((S=r+1==o.length,!h&&1<++_||(v=S&&"0"==t&&"0"==o[r]))&&(g._f==g._d.length&&++g._f,g._d.push(0)),"0"==o[r]&&"0"==t||(t._d.push(o[r]),++t._f),v)break out;if(S&&-1==t.compare(a)&&(g._f==g._d.length&&++g._f,1)||(S=0))for(;g._d.push(0),t._d.push(0),++t._f,-1==t.compare(a););}if(h=0,-1==t.compare(a)&&!(S=0))for(;S?g._d.push(0):S=1,t._d.push(0),++t._f,-1==t.compare(a););var w;for(C=new Smart.Utilities.BigNumber,x=0;t.compare(w=C.add(a))+1&&++x;C.set(w));t.set(t.subtract(C)),S||g._f!=g._d.length||++g._f,g._d.push(x)}while((r<o.length||"0"!=t)&&g._d.length-g._f<=g.precision);return g.round()}mod(t){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d%new Smart.Utilities.BigNumber(t)._d);let a=this.normalizeOperand(this);t=a.normalizeOperand(t);var i=a.subtract(a.divide(t).intPart().multiply(t));return i.isZero()&&i._s&&(i._s=!i._s),i}pow(t){if(Smart.Utilities.BigNumber.bigIntSupport){let a=BigInt(1);for(let n=BigInt(0);n<new Smart.Utilities.BigNumber(t)._d;n+=BigInt(1))a*=this._d;return new Smart.Utilities.BigNumber(a)}let a=this.normalizeOperand(this);t=a.normalizeOperand(t);var r=new Smart.Utilities.BigNumber(a),o;if(0==(t=new Smart.Utilities.BigNumber(t).intPart()))return r.set(1);for(o=Math.abs(t);--o;r.set(r.multiply(a)));return 0>t?r.set(new Smart.Utilities.BigNumber(1).divide(r)):r}set(t){return t=new Smart.Utilities.BigNumber(t),this._d=t._d,this._f=t._f,this._s=t._s,this}compare(t){if(Smart.Utilities.BigNumber.bigIntSupport){const a=new Smart.Utilities.BigNumber(t)._d;return this._d===a?0:this._d>a?1:-1}let o=this.normalizeOperand(this);t=o.normalizeOperand(t);var s=o,a=o._f,d=new Smart.Utilities.BigNumber(t),c=d._f,m=[-1,1],r,p,u;if(s.isZero()&&d.isZero())return 0;if(s._s!=d._s)return s._s?-1:1;if(a!=c)return m[a>c^s._s];for(a=(u=s._d).length,c=(d=d._d).length,r=-1,p=Math.min(a,c);++r<p;)if(u[r]!=d[r])return m[u[r]>d[r]^s._s];return a==c?0:m[a>c^s._s]}negate(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d*BigInt(-1));let t=this.normalizeOperand(this);var a=new Smart.Utilities.BigNumber(t);return a._s^=1,a}abs(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(0>this._d?this._d*BigInt(-1):this._d);let t=this.normalizeOperand(this);var a=new Smart.Utilities.BigNumber(t);return a._s=0,a}intPart(){if(Smart.Utilities.BigNumber.bigIntSupport)return new Smart.Utilities.BigNumber(this._d);let t=this.normalizeOperand(this);return new Smart.Utilities.BigNumber((t._s?"-":"")+(t._d.slice(0,t._f).join("")||"0"))}valueOf(t,a){let n=this.normalizeOperand(this);return n.toString(t,a)}toString(t,a){function n(t,a,n){var i="";if(String.prototype.repeat){var o="0".repeat(n-t.length);t=o+t}for(;t.length<n;)t="0"+t;i=t.replace(/0/g,"a"),i=i.replace(/1/g,"b"),i=i.replace(/a/g,"1"),i=i.replace(/b/g,"0");for(var r=!0,s="",d=i.length-1;0<=d;d--){var c=i.charAt(d),m;"0"===c?!0===r?(m="1",r=!1):m="0":!0===r?m="0":m="1",s=m+""+s}switch(a){case 2:return s;case 8:var p,u;8===n?(p=3,u="0"):16===n?(p=6,u="00"):32===n?(p=11,u="0"):64===n?(p=22,u="00"):void 0,s=u+s;for(var g="",h=p,f;1<=h;h--)f=s[3*h-3]+""+s[3*h-2]+""+s[3*h-1],g=parseInt(f,2).toString(8)+""+g;return g;case 16:var _;8===n?_=2:16===n?_=4:32===n?_=8:64===n?_=16:void 0;for(var y="",b=_,v;1<=b;b--)v=s[4*b-4]+""+s[4*b-3]+""+s[4*b-2]+""+s[4*b-1],y=parseInt(v,2).toString(16)+""+y;return y.toUpperCase();}}function i(t){var a=new Smart.Utilities.BigNumber(2),n=[],i,o;o=void 0===t?s:t;do i=o.mod(a),n.push(i.toString()),o=o.subtract(i).divide(a).intPart();while(1===o.compare(new Smart.Utilities.BigNumber(0)));return n.reverse().join("")}function r(t){for(var a="";0!=t.length%3;)t="0"+t;for(var n=t.length/3,i;1<=n;n--)i=t[3*n-3]+""+t[3*n-2]+""+t[3*n-1],a=parseInt(i,2).toString(8)+""+a;return a}function l(t){for(var a="";0!=t.length%4;)t="0"+t;for(var n=t.length/4,i;1<=n;n--)i=t[4*n-4]+""+t[4*n-3]+""+t[4*n-2]+""+t[4*n-1],a=parseInt(i,2).toString(16)+""+a;return a}let s,d;if(Smart.Utilities.BigNumber.bigIntSupport?(s=this,d=Array.isArray(s._d)?(s._s?"-":"")+(s._d.slice(0,s._f).join("")||"0")+(s._f==s._d.length?"":"."+s._d.slice(s._f).join("")):this._d.toString()):(s=this.normalizeOperand(this),d=(s._s?"-":"")+(s._d.slice(0,s._f).join("")||"0")+(s._f==s._d.length?"":"."+s._d.slice(s._f).join(""))),void 0===t||10===t)return d;let c;if(-1<s.compare(0))2===t?c=i():8===t?c=r(i()):16===t?c=l(i()).toUpperCase():void 0;else{var m=s.negate(),p=i(m);c=n(p,t,a)}return c}_zeroes(a,n,i){var t=["push","unshift"][i||0];for(++n;--n;a[t](0));return a}round(){if("_rounding"in this)return this;var t=Smart.Utilities.BigNumber,a=this.roundType,i=this._d,o,r,l,s;for(this._rounding=!0;1<this._f&&!i[0];--this._f,i.shift());for(o=this._f,r=this.precision+o,l=i[r];i.length>o&&!i[i.length-1];i.pop());return s=(this._s?"-":"")+(r-o?"0."+this._zeroes([],r-o-1).join(""):"")+1,i.length>r&&(l&&a!=t.DOWN&&(a==t.UP||(a==t.CEIL?!this._s:a==t.FLOOR?this._s:a==t.HALF_UP?5<=l:a==t.HALF_DOWN?5<l:a==t.HALF_EVEN&&5<=l&&1&i[r-1]))&&this.add(s),i.splice(r,i.length-r)),(delete this._rounding,this)}isZero(){return 1===this._d.length&&0===this._d[0]}normalizeOperand(t){return t instanceof Smart.Utilities.BigNumber&&"bigint"==typeof t._d?new Smart.Utilities.BigNumber(t._d.toString()):t}}),Smart.Utilities.Assign("NumericProcessor",class{constructor(t,a){switch(t[a]){case"integer":return new Smart.Utilities.IntegerNumericProcessor(t,a);case"floatingPoint":return new Smart.Utilities.DecimalNumericProcessor(t,a);case"complex":return new Smart.Utilities.ComplexNumericProcessor(t,a);}}}),Smart.Utilities.Assign("BaseNumericProcessor",class{constructor(t,a){const n=this;n.context=t,n._longestLabelSize=0,n.numericFormatProperty=a,n.regexScientificNotation=new RegExp(/^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)(Y|Z|E|P|T|G|M|k|c|m|u|n|p|f|a|z|y){1}$/),n.regexNoLeadingZero=new RegExp(/^(-)?[.]\d+$/),n.regexLeadingZero=new RegExp(/^[+\-]?(0+)[1-9]+|^[+\-]?(0{2,})[.]|^(0{2,})$/),n.prefixesToPowers={Y:24,Z:21,E:18,P:15,T:12,G:9,M:6,k:3,c:-2,m:-3,u:-6,n:-9,p:-12,f:-15,a:-18,z:-21,y:-24},n.complexConstructor=window.NIComplex?window.NIComplex:Smart.Utilities.Complex}prepareForValidation(t,a,n){const i=this.context,o=t||void 0!==a;if(n=n.toString(),n=n.replace(/\s/g,""),n=i._discardDecimalSeparator(n),this.regexLeadingZero.test(n)){const t=this.regexLeadingZero.exec(n);n=t[1]?n.replace(t[1],""):t[2]?n.replace(t[2],"0"):n.replace(t[3],"0")}this.regexNoLeadingZero.test(n)?"-"===n.charAt(0)?n="-0"+n.slice(1):n="0"+n:("integer"===i[this.numericFormatProperty]&&(10===i._radixNumber||o)||"floatingPoint"===i[this.numericFormatProperty])&&this.regexScientificNotation.test(n)&&(n=this.scientificToDecimal(n));let r=!1,l;if("complex"===i[this.numericFormatProperty]&&!1===i._regexSpecial.nonNumericValue.test(n))try{if(i._regexSpecial.exaValue.test(n)){const t=n.indexOf("E"),a=1000000000000000000*parseFloat(n.slice(0,t)),i=parseFloat(n.slice(t+1,-1));l=new this.complexConstructor(a,i)}else l=new this.complexConstructor(n);r=!0}catch(t){r=!1}return!1==r&&(!o&&!1===i._regex[i._radixNumber].test(n)||o&&!1===i._regex[10].test(n))?void i._handleNonNumericValue(t,a,n):{value:n,enteredComplexNumber:l}}isENotation(t){const a=new RegExp(/e/i);return a.test(t.toString())}scientificToDecimal(t){const a=this.regexScientificNotation.exec(t),n=a[1],i=a[2],o=parseFloat(n)*Math.pow(10,this.prefixesToPowers[i]);return o}_createMeasureLabel(){const t=this.context,a=document.createElement("div");return a.className="smart-label",a.style.position="absolute",a.style.visibility="hidden",t._measureLabelScale="far"===t.scalePosition?t.$.scaleFar:t.$.scaleNear,t._measureLabelScale.appendChild(a),a}_addMajorTickAndLabel(t,a,n,i,o){const r=this.context,l=r._settings.leftOrTop,s=this.valueToPx(i);let d="",c="";if(parseInt(s)>parseInt(r._measurements.trackLength))return{tick:d,label:c};if(r.logarithmicScale&&(t=r._formatLabel(Math.pow(10,i))),"smart-tank"===r.nodeName.toLowerCase()||r._intervalHasChanged){let a=r._tickIntervalHandler.labelsSize;if(o){r._labelDummy.innerHTML=t;let o=this.valueToPx(i),l=this.valueToPx(r._drawMax),s=this.valueToPx(r._drawMin),d=r._labelDummy[r._settings.size],c="vertical"===r.orientation?r._labelDummy.offsetWidth:r._labelDummy.offsetHeight,m=(d+a.minLabelSize)/2,p=(d+a.maxLabelSize)/2;n=r._normalLayout?o+p<l&&o-m>s:o-p>l&&o+m<s,c>this._longestLabelSize&&(this._longestLabelSize=c)}else this._longestLabelSize=Math.max(a.minLabelOtherSize,a.maxLabelOtherSize,this._longestLabelSize)}if(r._tickValues.push(i),d="<div style=\""+l+": "+s+"px;\" class=\"smart-tick\"></div>",!1!==n){void 0===a&&(r._labelDummy.innerHTML=t,a=r._labelDummy[r._settings.size]);const n=s-a/2;c+="<div class=\"smart-label"+(o?" smart-label-middle":"")+"\" style=\""+l+": "+n+"px;\">"+t+"</div>"}return{tick:d,label:c}}getWordLength(t){return this.context._unsigned="u"===t.charAt(0),"int8"===t||"uint8"===t?8:"int16"===t||"uint16"===t?16:"int32"===t||"uint32"===t?32:"int64"===t||"uint64"===t?64:void 0}getAngleByValue(t,a,n){var i=Math.PI;const o=this.context;!1!==a&&o.logarithmicScale&&(t=Math.log10(t));const r=(t-o._drawMin)*o._angleRangeCoefficient;let l;return l=o.inverted?o.startAngle+r:o.endAngle-r,n?l:l*i/180+i/2}getValueByAngle(t,a){var n=Math.pow;const i=this.context;let o,r,l;for(i.inverted?(o=t,r=i._normalizedStartAngle):(o=i.endAngle,r=t);o<r;)o+=360;if(l=(o-r)/i._angleDifference*i._range+parseFloat(i._drawMin),i.logarithmicScale){if(i.customInterval)return parseFloat(n(10,this.getCoercedValue(l,!0)).toFixed(12));l=n(10,l)}return a&&!i.coerce?Math.round(l):(l=this.createDescriptor(l,void 0,!0,!0),this.getCoercedValue(l,!1))}updateGaugeValue(t){const a=this.context,n=a.value;a.value=t,a._drawValue=a.logarithmicScale?Math.log10(t).toString():t,a._number=this.createDescriptor(a.value),a.$.digitalDisplay.value=t,a.$.fireEvent("change",{value:t,oldValue:n}),delete a._valueBeforeCoercion}validateColorRange(t){const a=this.context;return Math.min(Math.max(t,a.min),a.max)}getActualValue(t){return this.context.logarithmicScale?Math.pow(10,t):t}drawGaugeLogarithmicScaleMinorTicks(t,a,n){var o=Math.pow;const r=this.context;let l;for(let o in a instanceof Smart.Utilities.BigNumber&&(a=parseFloat(a.toString())),t)if(l=o,0<=o&&0==o%1)break;for(let s=parseFloat(l);s<r._drawMax;s+=a)for(let t=2;9>=t;t++){const i=t*o(10,s+a-1);i<r.max&&n(i)}for(let s=parseFloat(l);s>r._drawMin;s-=a)for(let t=2;9>=t;t++){const a=t*o(10,s-1);a>r.min&&n(a)}}_getAngleDifference(t,a){const n=Math.abs(a-t)%360,i=180<n?360-n:n;return i}addCustomTicks(){function t(t){const i=n.customTicks[t],s=o?a.createDescriptor(i):Math.log10(i),d=0<t&&t<n.customTicks.length-1,c=a._addMajorTickAndLabel(n._formatLabel(i),void 0,!0,s,d);r+=c.tick,l+=c.label}const a=this,n=a.context,o=!n.logarithmicScale;let r="",l="";if(a._longestLabelSize=0,n._tickValues=[],n._labelDummy=a._createMeasureLabel(),!n._normalLayout)for(let a=n.customTicks.length-1;0<=a;a--)t(a);else for(let a=0;a<n.customTicks.length;a++)t(a);"smart-tank"===n.nodeName.toLowerCase()&&n._updateScaleWidth(a._longestLabelSize),n._appendTicksAndLabelsToScales(r,l)}addGaugeCustomTicks(){function t(t){const i=n.customTicks[t],o=a.createDescriptor(i),s=a.getAngleByValue(o,!0),d=0<t&&t<n.customTicks.length-1;r(s),l(s,i,d)}const a=this,n=a.context,i=n._distance,o=n._measurements.radius-i.majorTickDistance;let r,l;r="none"!==n.ticksVisibility&&!1!==n._plotTicks?function(t){n._drawTick(t,o,"major")}:function(){},l="none"!==n.labelsVisibility&&!1!==n._plotLabels?function(t,a,o){n._drawLabel(t,a,i.labelDistance,o)}:function(){};for(let a=n.customTicks.length-1;0<=a;a--)t(a)}}),Smart.Utilities.Assign("IntegerNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,a){super(t,a);const n=this;n.context=t,n.defaultMins={int8:"-128",uint8:"0",int16:"-32768",uint16:"0",int32:"-2147483648",uint32:"0",int64:"-9223372036854775808",uint64:"0"},n.defaultMaxs={int8:"127",uint8:"255",int16:"32767",uint16:"65535",int32:"2147483647",uint32:"4294967295",int64:"9223372036854775807",uint64:"18446744073709551615"}}createDescriptor(t,a,n,i,o){const r=this.context;let l;if(t.constructor!==Smart.Utilities.BigNumber){let n=!o&&r._radixNumber?r._radixNumber:10;10===n&&a&&t.constructor!==Smart.Utilities.BigNumber&&this.isENotation(t)&&(t=new Smart.Utilities.NumberRenderer(t).largeExponentialToDecimal()),l=r._toBigNumberDecimal?r._toBigNumberDecimal(t.toString(n,r._wordLengthNumber),n):new Smart.Utilities.BigNumber(t)}else l=new Smart.Utilities.BigNumber(t);return n&&(r._unsigned&&-1===l.compare(0)&&(l=l.set(0)),i&&(l=this.validate(l,r._minObject,r._maxObject)),l=this.round(l)),l}round(t){const a=this.context;if(t instanceof window.Smart.Utilities.BigNumber&&"bigint"==typeof t._d)return t;if(!1==t instanceof window.Smart.Utilities.BigNumber||!a._wordLengthNumber||64>a._wordLengthNumber)return new Smart.Utilities.BigNumber(Math.round(t.toString()));const n=t.mod(1);return 1===n._d.length&&0===n._d[0]||(t=t.intPart(),t._s?(5<n._d[1]||5===n._d[1]&&n._d[2])&&(t=t.add(-1)):4<n._d[1]&&(t=t.add(1))),t}validate(t,a,n){let i;return i=-1===t.compare(a)?a:1===t.compare(n)?n:t,i}validateMinMax(t,a){const n=this.context;let i=this.defaultMins[n.wordLength],o=new Smart.Utilities.BigNumber(i),r=this.defaultMaxs[n.wordLength],l=new Smart.Utilities.BigNumber(r),s="date"!==n.mode;if(void 0===n._numberRenderer&&(n._numberRenderer=new Smart.Utilities.NumberRenderer),t&&s){null!==n.min&&(n.min=n.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.min)&&(n.min=this.scientificToDecimal(n.min)));let t=this.round(new Smart.Utilities.BigNumber(n.min));null===n.min||n._minIsNull&&n._initialized||!(0<=t.compare(o))?(n._minIsNull=!0,n.min=i,n._minObject=o):n._minObject=t}if(a&&s){null!==n.max&&(n.max=n.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.max)&&(n.max=this.scientificToDecimal(n.max)));let t=this.round(new Smart.Utilities.BigNumber(n.max));null===n.max||n._maxIsNull&&n._initialized||!(0>=t.compare(l))?(n._maxIsNull=!0,n.max=r,n._maxObject=l):n._maxObject=t}s||(n._minObject=new Smart.Utilities.BigNumber(n.min),n._maxObject=new Smart.Utilities.BigNumber(n.max)),this.compare(n._minObject,n._maxObject)||(n._minObject=o,n._maxObject=l,n._drawMin=n.logarithmicScale?0:i,n._drawMax=n.logarithmicScale?10:r,n.min=i,n.max=r),s||(n._minDate=Smart.Utilities.DateTime.fromFullTimeStamp(n.min),n._maxDate=Smart.Utilities.DateTime.fromFullTimeStamp(n.max))}valueToPx(t){const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const n=this.context,i=new Smart.Utilities.BigNumber(n._measurements.trackLength).divide(new Smart.Utilities.BigNumber(n._range));let o;if(n._normalLayout){const a=n._drawMin instanceof Smart.Utilities.BigNumber?n._drawMin:new Smart.Utilities.BigNumber(n._drawMin);t=new Smart.Utilities.BigNumber(t),o=parseFloat(i.multiply(t.subtract(a)).toString())}else{const a=n._drawMax instanceof Smart.Utilities.BigNumber?n._drawMax:new Smart.Utilities.BigNumber(n._drawMax);o=parseFloat(this.round(a.subtract(t).multiply(i)).toString())}return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a,o}pxToValue(t){const a=this.context,n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let i;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,i=a._normalLayout?a._valuePerPx.multiply(t-a._trackStart):a._valuePerPx.multiply(a._trackEnd-t),i=this.round(i).toString(),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,a.logarithmicScale){let t=parseFloat(i)+parseFloat(a._drawMin);return new Smart.Utilities.BigNumber(Math.round(Math.pow(10,t)))}let o=this.createDescriptor(a._minObject.add(i),!1,!0,!0);return o}compare(t,a,n){if((null===t||null===a)&&t!==a)return!0;t.constructor!==Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t));const i=t.compare(a);return!0===n?i:0!==i}incrementDecrement(t,a,n){const i=this.context;let o;if(t.constructor!==Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t)),"add"===a){if(o=t.add(n),void 0!==i._drawMax)return 0<o.compare(i._drawMax)?new Smart.Utilities.BigNumber(i._drawMax):o;}else if(o=t.subtract(n),void 0!==i._drawMin)return 0>o.compare(i._drawMin)?new Smart.Utilities.BigNumber(i._drawMin):o;return o}render(t,a){const n=this.context;if(!n.scientificNotation&&!0===a)return new Smart.Utilities.NumberRenderer(new Smart.Utilities.BigNumber(t)).bigNumberToExponent(n.significantDigits);let i=t;return n.scientificNotation&&!0===a?i=new Smart.Utilities.NumberRenderer(i).toScientific(n.significantDigits,n.precisionDigits):"string"!=typeof t&&(i=t.toString(n._radixNumber,n._wordLengthNumber)),i}addTicksAndLabels(){const t=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const a=this.context,n=a._measurements.trackLength,i=a._normalLayout,o=a._majorTicksInterval,r=this.round(new Smart.Utilities.BigNumber(a._range).divide(o)),l=n/r,s=new Smart.Utilities.BigNumber(a._drawMin),d=new Smart.Utilities.BigNumber(a._drawMax);let c="",m="",p,u,g,h,f,_,y,b,v;a._tickValues=[],this._longestLabelSize=0,i?(p=s,u=o.add(p.subtract(p.mod(o))),g=u.subtract(p),f=a._formatLabel(s),_=a._tickIntervalHandler.labelsSize.minLabelSize,h=d,y=a._formatLabel(d),b=a._tickIntervalHandler.labelsSize.maxLabelSize):(p=d,u=p.subtract(p.mod(o)),g=p.subtract(u),f=a._formatLabel(d),_=a._tickIntervalHandler.labelsSize.maxLabelSize,h=s,y=a._formatLabel(s),b=a._tickIntervalHandler.labelsSize.minLabelSize),a._labelDummy=this._createMeasureLabel(),v=this._addMajorTickAndLabel(f,_,!0,p),c+=v.tick,m+=v.label;const x=g.divide(o).multiply(l);if(0!==u.compare(a.max)&&0>x.compare(n)){const t=a._formatLabel(u.toString()),n=0<x.compare(_);v=this._addMajorTickAndLabel(t,void 0,n,u,!0),c+=v.tick,m+=v.label}v=this.addMiddleMajorTicks(r,l,x,g,i,o),c+=v.tick,m+=v.label,v=this._addMajorTickAndLabel(y,b,!0,h),c+=v.tick,m+=v.label,"date"!==a.mode&&(c+=this.addMinorTicks(i)),a._measureLabelScale.removeChild(a._labelDummy),delete a._labelDummy,delete a._measureLabelScale,"smart-tank"===a.nodeName.toLowerCase()&&a._updateScaleWidth(this._longestLabelSize),a._appendTicksAndLabelsToScales(c,m),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=t}addMiddleMajorTicks(t,a,n,o,r,l){const s=this.context;let i="",d="",c;for(let m=1;m<t;m++){let p=n.add(m*a),u;if(r?u=l.multiply(m).add(o.add(new Smart.Utilities.BigNumber(s._drawMin))):(u=new Smart.Utilities.BigNumber(s._drawMax).subtract(o).subtract(l.multiply(m)),m==t-1&&0===u.compare(0)&&(s._numberRenderer.numericValue=s._tickIntervalHandler.nearestPowerOfTen,c=s._numberRenderer.bigNumberToExponent(1))),0!==u.compare(s._drawMax)){let n=s._formatLabel(u.toString()),o=!0;s._labelDummy.innerHTML=c?c:n;let r=s._labelDummy[s._settings.size];0<=p.add(r).compare(t*a)&&(o=!1);const l=this._addMajorTickAndLabel(n,void 0,o,u,!0);i+=l.tick,d+=l.label}}return{tick:i,label:d}}addMinorTicks(t){function a(t){-1===r.indexOf(t)&&0==t%s&&(c+="<div style=\""+d+": "+o._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function n(){let t=o._measurements.trackLength,a=t/r.length,n=.1;20>a?n=1:20<=a&&40>a?n=1<p-m?1:.5:40<=a&&80>a&&(n=.2);let l=Math.floor(o._drawMax),s=o._drawMax-l,u=o._drawMax-o._drawMin>r.length;for(let t=o._drawMax;0<t;--t){let a=0<s?i(10,t-s+1):i(10,t),r=a*n;for(let t=a;0<t;t-=r)if(t<o.max&&t>o.min){let a=new Smart.Utilities.BigNumber(Math.log10(t));(0==a%1&&u||!u)&&(c+="<div style=\""+d+": "+o._numericProcessor.valueToPx(a)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var i=Math.pow;const o=this.context,r=o._tickValues,l=o._tickIntervalHandler.nearestPowerOfTen,s=o._minorTicksInterval,d=o._settings.leftOrTop;let c="",m,p,u;if(t?(m=r[0],p=r[1],u=r[r.length-1]):(m=r[r.length-1],p=r[r.length-2],u=r[0]),o.logarithmicScale)n();else{for(let t=p;0>m.compare(t);t=t.subtract(l))a(t);for(let t=p.add(l);0<u.compare(t);t=t.add(l))a(t)}return c}validateCustomTicks(){const t=this.context,a="date"!==t.mode;let n=[];for(let o=0,i;o<t.customTicks.length;o++)i=t.customTicks[o],a?i=this.createDescriptor(i,!1,!0):void 0===i._d&&(i=Smart.Utilities.DateTime.validateDate(i).getTimeStamp()),0<=i.compare(t._minObject)&&0>=i.compare(t._maxObject)&&n.push(i);if(n.sort(function(t,a){return t.compare(a)}),a){for(let t=0;t<n.length;t++)n[t]=n[t].toString();n=n.filter(function(t,a,n){return!a||t!==n[a-1]})}t.customTicks=n.slice(0)}addGaugeTicksAndLabels(){var t=Math.PI;const a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const n=this.context,o=this,r=Math.max(n._tickIntervalHandler.labelsSize.minLabelSize,n._tickIntervalHandler.labelsSize.maxLabelSize),l=n._majorTicksInterval,s=n._minorTicksInterval,d={},c=n._distance,m=n._measurements.radius,p=m-c.majorTickDistance,u=m-c.minorTickDistance,g=new Smart.Utilities.BigNumber(n._drawMin),h=new Smart.Utilities.BigNumber(n._drawMax);let f,_,y,b,v,x;"none"!==n.ticksVisibility&&!1!==n._plotTicks?(f=function(t){n._drawTick(t,p,"major")},_=function(t){n._drawTick(o.getAngleByValue(t,!0),u,"minor")}):(f=function(){},_=function(){}),y="none"!==n.labelsVisibility&&!1!==n._plotLabels?function(t,a,i){n._drawLabel(t,a,c.labelDistance,i)}:function(){},n.inverted?(v=n.startAngle,x=n.endAngle):(v=n.endAngle,x=n.startAngle),b=o.getAngleByValue(g,!1),f(b),d[n._drawMin.toString()]=!0,y(b,n.min,!1);let C=g.subtract(g.mod(l)),S;-1!==g.compare(0)&&(C=C.add(l));for(let t=new Smart.Utilities.BigNumber(C);-1!==t.compare(g);t=t.subtract(s))S=t;b=o.getAngleByValue(C,!1),f(b),d[C.toString()]=!0,2*t*n._measurements.innerRadius*(this._getAngleDifference(v,o.getAngleByValue(C,!1,!0))/360)>r&&y(b,this.getActualValue(C),-1===C.compare(h));let w;for(w=C.add(l);-1===w.compare(h.subtract(l));w=w.add(l))b=o.getAngleByValue(w,!1),f(b),d[w.toString()]=!0,y(b,this.getActualValue(w),!0);if(void 0===d[w.toString()]&&1!==w.compare(h)&&(b=o.getAngleByValue(w,!1),f(b),d[w.toString()]=!0,2*t*n._measurements.innerRadius*(this._getAngleDifference(x,o.getAngleByValue(w,!1,!0))/360)>=r&&y(b,this.getActualValue(w),!0),n._normalizedStartAngle!==n.endAngle&&(b=o.getAngleByValue(h,!1),f(b),2*t*n._measurements.innerRadius*(this._getAngleDifference(x,v)/360)>=r&&y(b,n.max,!1))),"date"===n.mode)return void(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a);if(!n.logarithmicScale)for(let t=S;-1===t.compare(h);t=t.add(s))d[t.toString()]||_(t);else this.drawGaugeLogarithmicScaleMinorTicks(d,l,_);Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a}updateToolTipAndValue(t,a,n){const i=this.context,o=i.logarithmicScale;i._updateTooltipValue(t.toString()),o&&(t=parseFloat(Math.pow(10,parseFloat(t)).toFixed(11))),t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);const r=t.toString();i._number=t,i._drawValue=o?Math.log10(r):t,0!==t.compare(a)&&n&&("numeric"===i.mode?(i.value=r,t=r):(a=i._valueDate,i._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(r),i.value=t,t=i._valueDate),!i._programmaticValueIsSet&&i.$.fireEvent("change",{value:t,oldValue:a}),i.$.hiddenInput&&(i.$.hiddenInput.value=t))}validateInterval(t){const a=this.context,n=a._maxObject.subtract(a._minObject);a._validInterval=new Smart.Utilities.BigNumber(t),a._validInterval=this.round(a._validInterval),1===a._validInterval.compare(n)&&(a._validInterval=n),a.interval=a._validInterval.toString()}getCoercedValue(t,a,n){var o=Math.abs;const i=this.context;if(!i.coerce)return t;const r=!i.logarithmicScale;t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);let l,s;if(i.customInterval){const a=i.customTicks;if(0===a.length)return t;let s,d;if(r||n){l=i._minObject,s=l.subtract(t).abs(),d=l;for(let n=0;n<a.length;n++){const i=this.createDescriptor(a[n]),o=i.subtract(t).abs();-1===o.compare(s)&&(s=o,d=i)}}else{l=i._drawMin,s=o(l-parseFloat(t.toString())),d=l;for(let n=0;n<a.length;n++){const i=Math.log10(a[n]),r=o(i-t);r<s&&(s=r,d=i)}d=new Smart.Utilities.BigNumber(d)}return d}let d=i._validInterval;if("date"===i.mode){if("addYears"===i._dateIncrementMethod)return this.coerceYear(t);if("addMonths"===i._dateIncrementMethod)return this.coerceMonth(t);d=new Smart.Utilities.BigNumber(i._dateIntervalNumber).multiply(d)}!1===a?(l=new Smart.Utilities.BigNumber(i.min),s=new Smart.Utilities.BigNumber(i.max)):(l=new Smart.Utilities.BigNumber(i._drawMin),s=new Smart.Utilities.BigNumber(i._drawMax));let c=t.subtract(l),m=c.mod(d);if(0===m.compare(0))return t;let p=c.subtract(m),u=p.add(d);if(0>c.subtract(p).abs().compare(c.subtract(u).abs()))return p.add(l);else{const t=u.add(l);return 0>=t.compare(s)?t:p.add(l)}}coerceMonth(t){const a=this.context,n=parseFloat(a._validInterval),i=Smart.Utilities.DateTime.fromFullTimeStamp(t),o=i.year(),r=i.month(),l=i.day(),s=a._minDate.year(),d=a._minDate.month(),c=12*(a._maxDate.year()-s-1)+12-d+a._maxDate.month();let m=12*(o-1-s)+(12-d)+r;1===n&&(-1===[1,3,5,7,8,10,12].indexOf(r)?2===r?i.isLeapYear(o)?(15<l||15===l&&11<i.hour())&&m++:14<l&&m++:15<l&&m++:(16<l||16===l&&11<i.hour())&&m++),m=this.getCoercedTimePart(0,c,m,n);let p=a._minDate.addMonths(m,!0);return 1===p.compare(a._maxDate)&&(p=a._minDate.addMonths(m-n,!0)),a._drawValue=new Smart.Utilities.BigNumber(p.getTimeStamp()),a._drawValue}coerceYear(t){const a=this.context,n=parseFloat(a._validInterval),i=Smart.Utilities.DateTime.fromFullTimeStamp(t),o=a._maxDate.year(),r=Smart.Utilities.DateTime.getConstructorParameters(a._minDate);let l=i.year();6<i.month()&&l++;let s=this.getCoercedTimePart(a._minDate.year(),o,l,n);s>o&&(s-=n),r[0]=s,r.unshift(null);const d=new(Function.prototype.bind.apply(Smart.Utilities.DateTime,r));return a._drawValue=new Smart.Utilities.BigNumber(d.getTimeStamp()),a._drawValue}getCoercedTimePart(t,a,n,i){var o=Math.abs;let r=n-t,l=r%i;if(0==l)return n;let s=parseFloat((r-l).toFixed(12)),d=s+i;if(a-t<=i)return n>=t+(a-t)/2?a:t;if(o(r-s)<o(r-d))return s+t;else{const n=d+t;return n>a?s+t:n}}updateValue(t){const a=this.context;t=t instanceof Smart.Utilities.BigNumber?t:new Smart.Utilities.BigNumber(t);const n=this.validate(t,a._minObject,a._maxObject);let i=a._number;a._number=n,a._drawValue=a.logarithmicScale?Math.log10(n):n,"numeric"===a.mode?a.value=t.toString():(i=a._valueDate,a._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(t),a.value=t,t=a._valueDate),!a._programmaticValueIsSet&&(this.compare(t,a._number)||a._scaleTypeChangedFlag)&&a.$.fireEvent("change",{value:t,oldValue:i}),a.$.hiddenInput&&(a.$.hiddenInput.value=t),a._moveThumbBasedOnValue(a._drawValue)}getValuePerPx(t,a){const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const i=new Smart.Utilities.BigNumber(t).divide(a);return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,i}restrictValue(t){t[1].constructor===Smart.Utilities.BigNumber?-1===t[1].compare(t[0])&&t[1].set(t[0]):t[1]<t[0]&&(t[1]=t[0])}getAngleByValue(t,a,n){var i=Math.PI;const o=this.context,r=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;if(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,64>o._wordLengthNumber)return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=r,super.getAngleByValue(parseFloat(t.toString()),a,n);!1==t instanceof Smart.Utilities.BigNumber&&(t=new Smart.Utilities.BigNumber(t)),!1!==a&&o.logarithmicScale&&(t=new Smart.Utilities.BigNumber(Math.log10(t.toString())));const l=t.subtract(o._drawMin).multiply(o._angleRangeCoefficient);let s;return s=o.inverted?l.add(o.startAngle):l.multiply(-1).add(o.endAngle),s=parseFloat(s.toString()),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=r,n?s:s*i/180+i/2}getValueByAngle(t){const a=this.context;if(64>a._wordLengthNumber)return super.getValueByAngle(t,!0);const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;let i,o,r;for(Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,a.inverted?(i=t,o=a._normalizedStartAngle):(i=a.endAngle,o=t);i<o;)i+=360;r=new Smart.Utilities.BigNumber((i-o)/a._angleDifference).multiply(a._range).add(a._drawMin),a.logarithmicScale&&(r=new Smart.Utilities.BigNumber(Math.pow(10,r.toString())));let l;return l=a.coerce?this.getCoercedValue(r,!1):this.round(r),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,new Smart.Utilities.BigNumber(l)}updateGaugeValue(t){!1==t instanceof Smart.Utilities.BigNumber&&super.updateGaugeValue(t);const a=this.context,n=a._getEventValue();"numeric"===a.mode?(a.value=t.toString(),a.$.digitalDisplay.value=a.value):(a._valueDate=Smart.Utilities.DateTime.fromFullTimeStamp(t),a.value=t,a.$.digitalDisplay.$.input.value=a._valueDate),a._drawValue=a.logarithmicScale?Math.log10(a.value).toString():a.value,a._number=t,a.$.fireEvent("change",{value:a._getEventValue(),oldValue:n})}validateColorRange(t){const a=this.context;if(64>a._wordLengthNumber)return super.validateColorRange(t);"numeric"===a.mode?t=new Smart.Utilities.BigNumber(t):(t=Smart.Utilities.DateTime.validateDate(t),t=t.getTimeStamp());const n=new Smart.Utilities.BigNumber(a.min),i=new Smart.Utilities.BigNumber(a.max);return-1===t.compare(n)&&(t=n),1===t.compare(i)&&(t=i),t}lockRotation(t,a){const n=this.context;if(!1==a instanceof Smart.Utilities.BigNumber&&(a=new Smart.Utilities.BigNumber(a)),t&&-1===a.compare(n._number)){if(n._lockCW=!0,-1===a.compare(n._maxObject))return new Smart.Utilities.BigNumber(n._maxObject);}else if(!t&&1===a.compare(n._number)&&(n._lockCCW=!0,1===a.compare(n._minObject)))return new Smart.Utilities.BigNumber(n._minObject)}getAngleRangeCoefficient(){const t=this.context,a=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0,t._angleRangeCoefficient=new Smart.Utilities.BigNumber(t._angleDifference).divide(t._range),Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=a}}),Smart.Utilities.Assign("DecimalNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,a){super(t,a),this.context=t}getPreciseModulo(t,a,n){var i=Math.round,o=Math.abs;const r=0<=t?1:-1;if(t=o(t),a=o(a),"undefined"==typeof n){const n=t.toExponential(),i=a.toExponential(),l=parseInt(n.slice(n.indexOf("e")+1),10),s=parseInt(i.slice(i.indexOf("e")+1),10),d=0>l?o(l):0,c=0>s?o(s):0,m=Math.max(d,c);if(this.roundCoefficient=m,t<a)return r*t;if(t===a)return 0;if((-1>t||1<t)&&(-1>a||1<a||1===a))if(0==t%1&&0==a%1)return r*(t%a);else{const n=Smart.Utilities.BigNumber.ignoreBigIntNativeSupport;Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=!0;const i=r*parseFloat(new Smart.Utilities.BigNumber(t).mod(a).toString());return Smart.Utilities.BigNumber.ignoreBigIntNativeSupport=n,i}const p=Math.pow(10,m);return r*(t*p%(a*p)/p)}return r*(i(t*n)%i(a*n))}createDescriptor(t,a,n,i){let o=parseFloat(t);return i&&(o=this.validate(o,this.context._minObject,this.context._maxObject)),o}round(t){return Math.round(t)}validate(t,a,n){let i;return i=t<a?a:t>n?n:t,i}validateMinMax(t,a){const n=this.context,i="undefined"!=typeof n._regexSpecial&&n._regexSpecial.inf.test(n.min),o="undefined"!=typeof n._regexSpecial&&n._regexSpecial.inf.test(n.max);t&&(null===n.min||i?(n.min=-Infinity,n._minObject=-Infinity):(n.min=n.min.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.min)&&(n.min=this.scientificToDecimal(n.min)),n._minObject=n._discardDecimalSeparator(n.min))),a&&(null===n.max||o?(n.max=1/0,n._maxObject=1/0):(n.max=n.max.toString().replace(/\s/g,""),this.regexScientificNotation.test(n.max)&&(n.max=this.scientificToDecimal(n.max)),n._maxObject=n._discardDecimalSeparator(n.max))),this.compare(n._minObject,n._maxObject)||(n._maxObject=parseFloat(n._maxObject)+1,n.max=n._maxObject)}valueToPx(t){const a=this.context,n=a._measurements.trackLength/a._range;let i;return i=a._normalLayout?n*(t-a._drawMin):n*(a._drawMax-t),Math.round(i)}pxToValue(t){const a=this.context;let n;if(n=a._normalLayout?(t-a._trackStart)*a._valuePerPx:(a._trackEnd-t)*a._valuePerPx,a.logarithmicScale){const t=n+parseFloat(a._drawMin);return Math.pow(10,t)}return this.validate(n+a._minObject,a._minObject,a._maxObject)}compare(t,a,n){return!0===n?(t=parseFloat(t),a=parseFloat(a),t<a?-1:t>a?1:0):t!==a}incrementDecrement(t,a,n){const i=this.context;let o;if("add"===a){if(o=parseFloat(t)+parseFloat(n),void 0!==i._drawMax)return o>parseFloat(i._drawMax)?i._drawMax:o;}else if(o=parseFloat(t)-parseFloat(n),void 0!==i._drawMin)return o<parseFloat(i._drawMin)?i._drawMin:o;return o}render(t){const a=this.context,n="undefined"!=typeof a._regexSpecial&&a._regexSpecial.nonNumericValue.test(t);if(n)return t;else{const n=new Smart.Utilities.NumberRenderer(t);return a.scientificNotation?n.toScientific(a.significantDigits,a.precisionDigits):n.toDigits(a.significantDigits,a.precisionDigits)}}addTicksAndLabels(){const t=this.context,a=t._measurements.trackLength,n=t._normalLayout,i=t._majorTicksInterval,o=Math.round(t._range/parseFloat(i.toString())),r=a/o,l=parseFloat(t._drawMin),s=parseFloat(t._drawMax);let d="",c="",m,p,u,g,h,f,_,y,b;t._tickValues=[],this._longestLabelSize=0,n?(m=l,p=t.logarithmicScale&&0>l&&-1!==l?parseFloat(m-this.getPreciseModulo(m,i)):parseFloat(m-this.getPreciseModulo(m,i)+parseFloat(i)),u=p-m,h=t._formatLabel(l),f=t._tickIntervalHandler.labelsSize.minLabelSize,g=s,_=t._formatLabel(s),y=t._tickIntervalHandler.labelsSize.maxLabelSize):(m=s,p=parseFloat(m-this.getPreciseModulo(m,i)),u=m-p,h=t._formatLabel(s),f=t._tickIntervalHandler.labelsSize.maxLabelSize,g=l,_=t._formatLabel(l),y=t._tickIntervalHandler.labelsSize.minLabelSize),t._labelDummy=this._createMeasureLabel(),b=this._addMajorTickAndLabel(h,f,!0,m),d+=b.tick,c+=b.label;const v=u/i*r;if(p.toString()!==t._drawMax.toString()&&v<a){const a=t._formatLabel(p.toString()),n=f<v;b=this._addMajorTickAndLabel(a,void 0,n,p,!0),d+=b.tick,c+=b.label}b=this.addMiddleMajorTicks(o,r,v,u,n,i),d+=b.tick,c+=b.label,b=this._addMajorTickAndLabel(_,y,!0,g),d+=b.tick,c+=b.label,d+=this.addMinorTicks(n),t._measureLabelScale.removeChild(t._labelDummy),delete t._labelDummy,delete t._measureLabelScale,"smart-tank"===t.nodeName.toLowerCase()&&t._updateScaleWidth(this._longestLabelSize),t._appendTicksAndLabelsToScales(d,c)}addMiddleMajorTicks(t,a,n,o,r,l){const s=this.context;let i="",d="";for(let c=1;c<t;c++){let m=c*a+n,p;if(p=r?parseFloat(s._drawMin)+l*c+o:parseFloat(s._drawMax)-l*c-o,p.toString()!==s._drawMax.toString()){let n=s._formatLabel(p.toString()),o=!0;s._labelDummy.innerHTML=n;let r=s._labelDummy[s._settings.size];m+r>=t*a&&(o=!1);const l=this._addMajorTickAndLabel(n,void 0,o,p,!0);i+=l.tick,d+=l.label}}return{tick:i,label:d}}addMinorTicks(t){function a(t){return parseFloat(t.toFixed(m))}function n(t){-1===s.indexOf(t)&&0===l._numericProcessor.getPreciseModulo(t,c,p)&&(g+="<div style=\""+u+": "+l._numericProcessor.valueToPx(t)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}function i(){let t=l._measurements.trackLength,a=t/s.length,n=.1;20>a?n=1:20<=a&&40>a?n=1<f-h?1:.5:40<=a&&80>a&&(n=.2);let i=Math.floor(l._drawMax),d=l._drawMax-i,c=l._drawMax-l._drawMin>s.length;for(let t=l._drawMax;t>l._drawMin-1;--t){let a=0<d?r(10,t-d+1):r(10,t),s=a*n;for(let t=a;0<t;t-=s)if(t<l.max&&t>l.min){let a=new Smart.Utilities.BigNumber(o(t));(0==a%1&&c||!c)&&(g+="<div style=\""+u+": "+l._numericProcessor.valueToPx(a)+"px;\" class=\"smart-tick smart-tick-minor\"></div>")}}}var o=Math.log10,r=Math.pow;const l=this.context,s=l._tickValues,d=l._tickIntervalHandler.nearestPowerOfTen,c=l._minorTicksInterval,m=0>o(d)?Math.round(Math.abs(o(d))):0,p=r(10,m),u=l._settings.leftOrTop;let g="",h,f,_;if(t?(h=s[0],f=s[1],_=s[s.length-1]):(h=s[s.length-1],f=s[s.length-2],_=s[0]),l.logarithmicScale)i();else{for(let t=f;t>h;t=a(t-d))n(t);for(let t=a(f+d);t<_;t=a(t+d))n(t)}return g}validateCustomTicks(){const t=this.context;let a=[];for(let n=0;n<t.customTicks.length;n++){const i=t.customTicks[n],o=this.createDescriptor(i);o>=t._minObject&&o<=t._maxObject&&a.push(o.toString())}a.sort(function(t,a){return t-a}),a=a.filter(function(t,a,n){return!a||t!==n[a-1]}),t.customTicks=a.slice(0)}addGaugeTicksAndLabels(){var t=Math.PI;const a=this.context,n=this,o=Math.max(a._tickIntervalHandler.labelsSize.minLabelSize,a._tickIntervalHandler.labelsSize.maxLabelSize),r=a._majorTicksInterval,l=a._minorTicksInterval,s={},d=a._distance,c=a._measurements.radius,m=c-d.majorTickDistance,p=c-d.minorTickDistance;let u,g,h,f,_,y;"none"!==a.ticksVisibility&&!1!==a._plotTicks?(u=function(t){a._drawTick(t,m,"major")},g=function(t){a._drawTick(n.getAngleByValue(t,!0),p,"minor")}):(u=function(){},g=function(){}),h="none"!==a.labelsVisibility&&!1!==a._plotLabels?function(t,n,i){a._drawLabel(t,n,d.labelDistance,i)}:function(){},a.inverted?(_=a.startAngle,y=a.endAngle):(_=a.endAngle,y=a.startAngle),f=n.getAngleByValue(a._drawMin,!1),u(f),s[a._drawMin]=!0,h(f,a.min,!1);let b=a._drawMin-n.getPreciseModulo(a._drawMin,r),v;0<=a._drawMin&&(b+=r);for(let t=b;t>=a._drawMin;t-=l)v=t;f=n.getAngleByValue(b,!1),u(f),s[b]=!0,2*t*a._measurements.innerRadius*(this._getAngleDifference(_,n.getAngleByValue(b,!1,!0))/360)>o&&h(f,this.getActualValue(b),b<a._drawMax);let x;for(x=b+r;x<a._drawMax-r;x+=r)f=n.getAngleByValue(x,!1),u(f),s[x]=!0,h(f,this.getActualValue(x),!0);if(void 0===s[x]&&x<=a._drawMax&&(f=n.getAngleByValue(x,!1),u(f),s[x]=!0,2*t*a._measurements.innerRadius*(this._getAngleDifference(y,n.getAngleByValue(x,!1,!0))/360)>=o&&h(f,this.getActualValue(x),!0),a._normalizedStartAngle!==a.endAngle&&(f=n.getAngleByValue(a._drawMax,!1),u(f),s[a._drawMax]=!0,2*t*a._measurements.innerRadius*(this._getAngleDifference(y,_)/360)>=o&&h(f,a.max,!1))),!a.logarithmicScale)for(let t=v;t<a._drawMax;t+=l)s[t]||g(t);else this.drawGaugeLogarithmicScaleMinorTicks(s,r,g)}updateToolTipAndValue(t,a,n){const i=this.context,o=i.logarithmicScale;i._updateTooltipValue(t),o&&(t=parseFloat(Math.pow(10,parseFloat(t)).toFixed(11)));const r=t.toString();i._number=t,i._drawValue=o?Math.log10(r):t,r!==a&&n&&(i.value=i._discardDecimalSeparator(r),!i._programmaticValueIsSet&&i.$.fireEvent("change",{value:i.value,oldValue:a}),i.$.hiddenInput&&(i.$.hiddenInput.value=i.value))}validateInterval(t){const a=this.context,n=a._maxObject-a._minObject;a._validInterval=Math.min(parseFloat(t),n),a.interval=a._validInterval}getCoercedValue(t,a,n){var o=Math.abs;const i=this.context;if(!i.coerce)return t;let r=!i.logarithmicScale,l,s;if(i.customInterval){const s=i.customTicks;if(0===s.length)return t;r=r||n,l=!1===a?i._minObject:parseFloat(i._drawMin);let d=o(l-t),c=l;for(let a=0;a<s.length;a++){const n=this.createDescriptor(s[a]),i=r?n:Math.log10(n),l=o(i-t);l<d&&(d=l,c=i)}return c}!1===a?(l=parseFloat(i.min),s=parseFloat(i.max)):(l=parseFloat(i._drawMin),s=parseFloat(i._drawMax));let d=t-l,c=this.getPreciseModulo(d,parseFloat(i.interval)),m=this.roundCoefficient;if(0===c)return t;0===this.roundCoefficient&&(m=12);let p=parseFloat((d-c).toFixed(m)),u=p+parseFloat(i.interval);if(i.max-i.min<=parseFloat(i.interval)&&r){let a=l,n=s;return t>=a+(n-a)/2?n:a}if(o(d-p)<o(d-u))return p+l;else{const t=u+l;return t>s?p+l:t}}updateValue(t){const a=this.context,n=this.validate(t,a._minObject,a._maxObject),i=a._number.toString();t.toString()!==i.toString()||a._scaleTypeChangedFlag?(a.value=t.toString(),a._number=n,!a._programmaticValueIsSet&&a.$.fireEvent("change",{value:a.value,oldValue:i})):a.value="string"==typeof t?t:t.toString(),a._drawValue=a.logarithmicScale?Math.log10(n).toString():n.toString(),a._moveThumbBasedOnValue(a._drawValue),a.$.hiddenInput&&(a.$.hiddenInput.value=a.value)}getValuePerPx(t,a){return parseFloat(t)/a}restrictValue(t){t[1]<t[0]&&(t[1]=t[0])}lockRotation(t,a){const n=this.context;if(t&&a<n._number){if(n._lockCW=!0,a<n._maxObject)return n._maxObject;}else if(!t&&a>n._number&&(n._lockCCW=!0,a>n._minObject))return n._minObject}getAngleRangeCoefficient(){const t=this.context;t._angleRangeCoefficient=t._angleDifference/t._range}}),Smart.Utilities.Assign("ComplexNumericProcessor",class extends Smart.Utilities.BaseNumericProcessor{constructor(t,a){super(t,a),this.context=t}createDescriptor(t,a,n,i,o,r){let l;return l=r?r:t.constructor===this.complexConstructor?new this.complexConstructor(t.realPart,t.imaginaryPart):new this.complexConstructor(t),i&&(l=this.validate(l,this.context._minObject,this.context._maxObject)),l}validate(t,a,n){let i=t;return a===-Infinity?n!==1/0&&1===this.compareComplexNumbers(t,n)&&(i=new this.complexConstructor(n.realPart,n.imaginaryPart)):-1===this.compareComplexNumbers(t,a)&&(i=new this.complexConstructor(a.realPart,a.imaginaryPart)),i}compare(t,a,n){return!0===n?this.compareComplexNumbers(t,a):0!==this.compareComplexNumbers(t,a)}validateMinMax(t,a){const n=this.context;t&&(null===n.min||n._regexSpecial.inf.test(n.min)?(n.min=-Infinity,n._minObject=-Infinity):n._minObject=new this.complexConstructor(n.min)),a&&(null===n.max||n._regexSpecial.inf.test(n.max)?(n.max=1/0,n._maxObject=1/0):n._maxObject=new this.complexConstructor(n.max))}incrementDecrement(t,a){let n=new this.complexConstructor(t.realPart,t.imaginaryPart),i=this.context._spinButtonsStepObject;return"add"===a?(n.realPart+=i.realPart,n.imaginaryPart+=i.imaginaryPart):(n.realPart-=i.realPart,n.imaginaryPart-=i.imaginaryPart),n}render(t){let a=t;if(!1===this.context._regexSpecial.nonNumericValue.test(t)){let t=a.realPart,n=a.imaginaryPart,i=this.context.significantDigits,o=this.context.precisionDigits,r;0<=n?r="+":(r="-",n=Math.abs(n));const l=new Smart.Utilities.NumberRenderer(t),s=new Smart.Utilities.NumberRenderer(n);this.context.scientificNotation?(t=l.toScientific(i,o),n=s.toScientific(i,o)):(t=l.toDigits(i,o),n=s.toDigits(i,o)),a=`${t} ${r} ${n}i`}return a}compareComplexNumbers(t,a){if(!1==t instanceof this.complexConstructor||!1==a instanceof this.complexConstructor)return-1;const n=t.realPart,i=a.realPart;if(n<i)return-1;if(n>i)return 1;else{const n=t.imaginaryPart,i=a.imaginaryPart;return n<i?-1:n>i?1:0}}}),Smart.Utilities.Assign("NumberRenderer",class{constructor(t){const a=this;a.numericValue=t,a.powersToPrefixes={24:"Y",21:"Z",18:"E",15:"P",12:"T",9:"G",6:"M",3:"k",0:"","-2":"c","-3":"m","-6":"u","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},a.localizationObject={currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",defaultPrecision:2}}isENotation(t){return new RegExp(/e/i).test(t)}largeExponentialToDecimal(t){let a;t===void 0&&(t=this.numericValue,a=!0);let n=t.toString().toLowerCase(),i=n.indexOf("e"),o=new Smart.Utilities.BigNumber(n.slice(0,i)),r=n.slice(i+1,i+2);"+"!==r&&"-"!==r&&(n=n.slice(0,i)+"e+"+n.slice(i+1),r="+");let l=n.slice(i+2),s=new Smart.Utilities.BigNumber(10),d=s.pow(r+(a?Math.min(20,l):l)),c=o.multiply(d);return c.toString()}bigNumberToExponent(t,a){let n=this.numericValue;n.constructor!==Smart.Utilities.BigNumber&&(n=new Smart.Utilities.BigNumber(n));const i=n._f;let o=n.toString();if(10>=i)return a?parseFloat(o).toExponential(null===t?void 0:t-1):new Smart.Utilities.NumberRenderer(parseFloat(o)).toDigits(t);if(t>=i&&!a)return o;else{let r;!1===n._s?r="":(r="-",o=o.slice(1));const l=parseFloat(o.slice(t,t+1));5<=l&&(o=new Smart.Utilities.BigNumber(o.slice(0,t)).add(1).toString());let s=o.slice(1,t);if(a)t--,0<s.length&&t>s.length?s+="0".repeat(t-s.length):0===s.length&&(s="0".repeat(t));else for(;0<s.length&&"0"===s.charAt(s.length-1);)s=s.slice(0,s.length-1);const d=0<s.length?".":"";return r+o.slice(0,1)+d+s+"E+"+(i-1)}}toScientific(){const t=this;let a=t.numericValue._d?t.bigNumberToExponent(null===arguments[0]?arguments[1]+1:arguments[0],!0).toLowerCase():(+t.numericValue.toString()).toExponential();const n=a.indexOf("e"),i=a.slice(n+1);let o=parseFloat(a.slice(0,n));if("-2"===i)return o+"c";const r=parseInt(i,10)%3;if(0<r)for(let t=0;t<r;t++)o*=10;else 0>r&&(o=parseFloat(new Smart.Utilities.BigNumber(o).multiply(Math.pow(10,r)).toString()));if(0<i){const t=0<=o?0:1,i=a.slice(t,n).length-r-2;0<=i&&(o=o.toFixed(i))}const l=new Smart.Utilities.NumberRenderer(o);o=l.toDigits(arguments[0],arguments[1]);const s=parseInt(i,10)-r,d=o+t.powersToPrefixes[s.toString()];return d}bigNumberToScientific(){const t=this,a=t.numericValue._f-1,n=parseInt(a,10)%3,i=parseInt(a,10)-n;let o=t.numericValue.toString(),r,l;if("-"===o.charAt(0)?(r="-",o=o.slice(1)):r="",null!==arguments[0])for(l=o.slice(0,arguments[0]),5<=parseFloat(o.slice(arguments[0],arguments[0]+1))&&(l=new Smart.Utilities.BigNumber(l).add(1).toString());l.length>1+n&&"0"===l.charAt(l.length-1);)l=l.slice(0,l.length-1);else null!==arguments[1]&&(l=o.slice(0,arguments[1]+1),5<=parseFloat(o.slice(arguments[1]+1,arguments[1]+2))&&(l=new Smart.Utilities.BigNumber(l).add(1).toString()),arguments[1]+n>l.length-1&&(l+="0".repeat(arguments[1]+n-l.length+1)));return l.length>1+n&&(l=l.slice(0,1+n)+"."+l.slice(1+n)),r+l+t.powersToPrefixes[i.toString()]}toDigits(t,a){const n=this;let i;return i=null===t?null===a?n.applySignificantDigits(8):n.applyPrecisionDigits(a):n.applySignificantDigits(t),i}applySignificantDigits(t){function a(t){for(;"0"===t.charAt(t.length-1);)t=t.slice(0,-1);return"."===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t}const n=this;t=Math.max(1,Math.min(t,21));let i=parseFloat(n.numericValue).toPrecision(t).toUpperCase();if(-1!==i.indexOf("."))if(n.isENotation(i)){const t=i.indexOf("."),n=i.indexOf("E");let o=i.slice(t,n);o=a(o),i=i.slice(0,t)+o+i.slice(n)}else i=a(i);return i}applyPrecisionDigits(t){const a=this;t=Math.max(0,Math.min(t,20));let n=parseFloat(a.numericValue).toFixed(t);return a.isENotation(n)&&(n=a.largeExponentialToDecimal(n)+"."+"0".repeat(t)),n}getLogarithm(t){var a=Math.log;const n=this.numericValue;let i;if(void 0===t&&(t=10),10===t)try{i=Math.log10(n)}catch(t){i=a(n)/2.302585092994046}else i=a(n)/a(t);return i}applySeparators(t,a){const n=this;t=t.toString();const i=t.indexOf(".");if(-1!==i){const o=t.slice(0,i),r=t.slice(i+1);return n.applyThousandsSeparator(o,a)+n.localizationObject.decimalseparator+r}return n.applyThousandsSeparator(t,a)}applyThousandsSeparator(t,a){if(a)return t;let n="";t=t.toString(),"-"===t.charAt(0)&&(n="-",t=t.slice(1));let o=t.split("").reverse();for(let n=2;n<o.length-1;n+=3)o[n]=this.localizationObject.thousandsseparator+o[n];return o.reverse(),o=o.join(""),n+o}formatNumber(t,a,n){var i=Math.round;const o=this;if(void 0===arguments[3]&&delete o._ignoreMinus,delete o._wordLengthNumber,!/^([a-zA-Z]\d*)$/g.test(a))try{const n=o.applyCustomFormat(t,a);return n}catch(a){return t.toString()}const r=a.slice(0,1);let l=a.slice(1);if(""!==l&&(isNaN(parseFloat(l))||0>parseFloat(l)||99<parseFloat(l)?l="":0!=parseFloat(l)%1&&(l=i(l))),t._d)o.inputFormat="integer";else{if(t.imaginaryPart)return o.formatComplexNumber(t,a,r,l);o.inputFormat="floatingPoint"}let s=new Smart.Utilities.NumericProcessor(o,"inputFormat"),d=s.createDescriptor(t),c;switch(o._wordLengthNumber=s.getWordLength(n?n:"int32"),"integer"===o.inputFormat&&(d=s.round(d)),o.numericValue=d,r){case"C":case"c":return""===l&&(l=o.localizationObject.defaultPrecision),l=parseFloat(l),c="floatingPoint"===o.inputFormat?o.applyPrecisionDigits(l):d.toString()+(0<l?"."+"0".repeat(l):""),c=o.applySeparators(c),"before"===o.localizationObject.currencysymbolposition?"-"===c.charAt(0)?"-"+o.localizationObject.currencysymbol+c.slice(1):o.localizationObject.currencysymbol+c:c+" "+o.localizationObject.currencysymbol;case"D":case"d":{if(c=d,"floatingPoint"===o.inputFormat&&(c=i(d)),c=c.toString(),""===l)return c;let t="";"-"===c.charAt(0)&&(t="-",c=c.slice(1));const a=l-c.length;return 0<a&&(c="0".repeat(a)+c),t+c}case"E":case"e":case"U":case"u":{""===l&&(l=6),c="floatingPoint"===o.inputFormat?d.toExponential(l):o.bigNumberToExponent(parseFloat(l)+1,!0).toLowerCase();const t=c.indexOf("e"),a=c.slice(t+2).length;return(3>a&&(c=c.slice(0,t+2)+"0".repeat(3-a)+c.slice(t+2)),"u"===r.toLowerCase())?o.exponentialToSuperscript(o.applySeparators(c,!0)):("E"===r&&(c=c.toUpperCase()),o.applySeparators(c,!0))}case"F":case"f":case"N":case"n":return""===l&&(l=o.localizationObject.defaultPrecision),l=parseFloat(l),c="floatingPoint"===o.inputFormat?o.applyPrecisionDigits(l):d.toString()+(0<l?"."+"0".repeat(l):""),o.applySeparators(c,"f"===r.toLowerCase());case"G":case"g":{(""===l||"0"===l)&&(l="floatingPoint"===o.inputFormat?15:"int8"===n||"uint8"===n?3:"int16"===n||"uint16"===n?5:"int64"===n?19:"uint64"===n?20:10),l=parseFloat(l);let a=o.formatNumber(t,"E"+l,n),i=a.indexOf("E");const s=parseInt(a.slice(i+1),10);if(-5<s&&s<l)return"floatingPoint"===o.inputFormat?o.applySeparators(o.applySignificantDigits(l),!0):d.toString();if(-100<s&&100>s&&(a=a.slice(0,i+2)+a.slice(i+3)),-1!==a.indexOf(o.localizationObject.decimalseparator)){for(;"0"===a.charAt(i-1);)a=a.slice(0,i-1)+a.slice(i),i=a.indexOf("E");a.charAt(i-1)===o.localizationObject.decimalseparator&&(a=a.slice(0,i-1)+a.slice(i))}return"g"===r&&(a=a.toLowerCase()),a}case"P":case"p":return""===l&&(l=o.localizationObject.defaultPrecision),l=parseFloat(l),"floatingPoint"===o.inputFormat?(o.numericValue=100*d,c=o.applyPrecisionDigits(l)):c=d.multiply(100).toString()+(0<l?"."+"0".repeat(l):""),o.applySeparators(c)+" %";case"B":case"b":case"O":case"o":case"X":case"x":{"integer"!==o.inputFormat&&(o.inputFormat="integer",s=new Smart.Utilities.NumericProcessor(o,"inputFormat"),d=s.round(s.createDescriptor(t)));let a;if(a="B"===r||"b"===r?2:"O"===r||"o"===r?8:16,c=d.toString(a,o._wordLengthNumber),""!==l){const t=parseFloat(l)-c.length;0<t&&(c="0".repeat(t)+c)}return"x"===r&&(c=c.toLowerCase()),c}case"S":case"s":return""===l&&(l=o.localizationObject.defaultPrecision),l=parseFloat(l),o.toScientific(null,l).replace(".",o.localizationObject.decimalseparator);default:return t.toString();}}formatComplexNumber(t,a,n){const i=this;return"E"===n||"e"===n||"U"===n||"u"===n||"F"===n||"f"===n||"G"===n||"g"===n||"N"===n||"n"===n||"S"===n||"s"===n?0<=t.imaginaryPart?i.formatNumber(t.realPart,a)+" + "+i.formatNumber(t.imaginaryPart,a)+"i":i.formatNumber(t.realPart,a)+" - "+i.formatNumber(Math.abs(t.imaginaryPart),a)+"i":t.toString()}toString(t,a,n){return a?this.formatNumber(t,a,n):t.toString()}applyCustomFormat(t,a){const n=this;a=a.replace(/_.|\[\w*\]|.\*|\*./g,""),a=a.replace(/\?/g,"#");const i=a.split(";");if("string"==typeof t&&isNaN(t))return i[i.length-1].replace(/"/g,"").replace(/@/g,t.toString());if(t._d)n.inputFormat="integer";else{if(t.imaginaryPart)return t.toString();t=parseFloat(t),n.inputFormat="floatingPoint"}let o=new Smart.Utilities.NumericProcessor(n,"inputFormat"),r=o.createDescriptor(t);"integer"===n.inputFormat&&(r=o.round(r)),n.numericProcessor=o;const l=n.getRelevantFormatSection(i,r);if(void 0===l)return t.toString();if(-1!==l.indexOf("@"))return i[i.length-1].replace(/"/g,"").replace(/@/g,t.toString());const s=-1!==l.replace(/".*"/g,"").indexOf("%"),d=n.getTextParts(l);if(-1!==d.main.toLowerCase().indexOf("e"))return n.applyCustomExponentialFormat(r,d,o);if(-1!==d.main.indexOf("/"))return n.applyCustomFractionalFormat(r,d,o);if(s&&("integer"===n.inputFormat?r=r.multiply(100):r=Math.round(100*r)),""===d.main){if(!s)return d.suffix;let t=r.toString();return n._ignoreMinus&&"-"===t.charAt(0)&&(t=t.slice(1)),t+d.suffix}let c=d.main.replace(/[^0#,. \/]/g,""),m=c.indexOf(".");for(-1!==m&&(c=c.substring(0,m+1)+c.substring(m+1).replace(/\./g,""),"."===c.charAt(c.length-1)&&(c=c.slice(0,c.length-1)),0===m&&(c="#"+c));","===c.charAt(c.length-1);)c=c.slice(0,c.length-1),"floatingPoint"===n.inputFormat?r/=1e3:r=r.multiply(.001);"integer"===n.inputFormat&&(r=o.round(r));const p=-1!==c.indexOf(",");c=c.replace(/,/g,"");const u=c.split("."),g=u[0];let h=u[1],f="";if(1===u.length)return"floatingPoint"===n.inputFormat&&(r=o.round(r)),f=r.toString(),n.setTextParts(n.formatWholeNumber(f,g,p),d);f=r.toString();let _=f.split("."),y=n.formatWholeNumber(_[0],g,p),b=_[1]||"";if(h.length<=b.length&&(f=parseFloat(r.toFixed(h.length)).toString(),_=f.split("."),y=n.formatWholeNumber(_[0],g,p),b=_[1]||"",b))return n.setTextParts(y+n.localizationObject.decimalseparator+b.slice(0,h.length),d);h=h.slice(b.length-h.length);let v=h.lastIndexOf("0");return-1===v?""===b?n.setTextParts(y,d):n.setTextParts(y+n.localizationObject.decimalseparator+b,d):n.setTextParts(y+n.localizationObject.decimalseparator+b+"0".repeat(v+1),d)}getRelevantFormatSection(t,a){const n=this,i=n.numericProcessor.compare(a,0,!0);if(1===i)return t[0];let o,r;return 3<=t.length?(n._ignoreMinus=!0,o=1,r=2):2===t.length?(n._ignoreMinus=!0,r=0,o=1):1===t.length&&(r=0,o=0),0===i?t[r]:-1===i?t[o]:void 0}getTextParts(t){const a=t.replace(/"[^"]*"/g,""),n=t.match(/"[^"]*"/g),i=a.search(/0|#|\./g),o=Math.max(a.lastIndexOf("0"),a.lastIndexOf("#"),a.lastIndexOf("."),a.lastIndexOf(",")),r=a.slice(i,o+1);if(""===r)return{prefix:"",main:"",suffix:t.replace(/"/g,"")};let l=t.indexOf(r),s=l+r.length;if(n)for(let a=0;a<n.length;a++){const i=t.indexOf(n[a]);l>=i&&s<=i+n[a].length&&(l=t.indexOf(r,i+n[a].length),s=l+r.length)}const d=t.slice(0,l).replace(/"/g,""),c=t.slice(s).replace(/"/g,"");return{prefix:d,main:r,suffix:c}}applyCustomExponentialFormat(t,a,n){var i=Math.pow;const o=this;let r=a.main,l;const s=-1!==r.indexOf(",");r=r.replace(/[^0#.eE+-]/g,"");const d=r.toLowerCase().indexOf("e");r=r.substring(0,d+1)+r.substring(d+1).replace(/[eE\.]/g,"");const c=r.charAt(d),m=r.indexOf(".");-1!==m&&(r=r.substring(0,m+1)+r.substring(m+1).replace(/\./g,"")),"."===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1));const p=r.split(c);let u=p[0];const g=u.split("."),h=g[0],f=g[1],_=p[1];let y=t.toString().split(".")[0].replace(/-/,""),b=0;if("0"===y&&n.compare(t,0)){let a=h.length-1;for(;0===parseInt(t);)b++,t*=10;y=t.toString().split(".")[0].replace(/-/,""),b+=a,t*=i(10,a)}if(s&&(u=u.slice(0,1)+","+u.slice(1)),y.length<=h.length)l=o.formatNumber(t,u,void 0,!0)+c+o.formatExponent(0-b,_);else{const a=y.length-h.length;let r="floatingPoint"===o.inputFormat?t/i(10,a):t.divide(i(10,a));if(!f){let t=o.applyThousandsSeparator(n.round(r).toString(),!s);l=t+c+o.formatExponent(a-b,_)}let d=r.toString().split(".")[1]||"";d.length===f.length?l=o.applySeparators(r,!s)+c+o.formatExponent(a-b,_):d.length<f.length?l=o.formatNumber(r,u,void 0,!0)+c+o.formatExponent(a-b,_):(r="floatingPoint"===o.inputFormat?r.toFixed(f.length):r=n.round(t.divide(i(10,a-f.length))).divide(i(10,f.length)),l=o.formatNumber(parseFloat(r),u,void 0,!0)+c+o.formatExponent(a-b,_))}return o.setTextParts(l,a)}formatExponent(t,a){let n;return-1!==["+","-"].indexOf(a.charAt(0))&&(n=a.charAt(0),(0<t&&"-"===n||0>t&&"+"===n)&&(n=void 0)),0>t&&(t=Math.abs(t),n="-"),a=a.replace(/[+-]/g,""),t=this.formatNumber(t,a,void 0,!0),(n?n:"")+t}formatWholeNumber(t,a,n){const i=this;let o="";if("-"===t.charAt(0)&&(!i._ignoreMinus&&(o="-"),t=t.slice(1)),"0"===t){if(a==="#".repeat(a.length))return o;t=""}if(a.length<=t.length)return o+i.applyThousandsSeparator(t,!n);a=a.slice(0,a.length-t.length);for(let o=a.length-1;0<=o;o--)"0"===a.charAt(o)&&(t="0"+t);return o+i.applyThousandsSeparator(t,!n)}setTextParts(t,a){return a.prefix+t+a.suffix}applyCustomFractionalFormat(t,a,n){var i=Math.abs;const o=this,r=/^([0#,]+[ ]+)?([0#,]+\/[0#,]+)$/;let l=a.main.trim(),s;if(!r.test(l))return t.toString();const d=r.exec(l);if(d[2]=d[2].replace(/,/g,""),"integer"===o.inputFormat){const n=d[2].split("/");return void 0===d[1]?s=o.formatNumber(t,n[0],void 0,!0)+"/"+o.formatNumber(1,n[1],void 0,!0):(s=o.formatNumber(t,d[1].trim(),void 0,!0),-1!==d[2].indexOf("0")&&(s+=" "+o.formatNumber(0,n[0],void 0,!0)+"/"+o.formatNumber(1,n[1],void 0,!0))),o.setTextParts(s,a)}if(void 0===d[1])s=(0>t?"-":"")+o.formatAsFraction(i(t),d[2]);else{const a=d[1].trim(),r=d[2];s=o.formatNumber(parseInt(t,10),a,void 0,!0)+" "+o.formatAsFraction(n.getPreciseModulo(i(t),1),r)}return o.setTextParts(s.trim(),a)}formatAsFraction(t,a){const n=this,i=a.split("/");if(0===t)return-1===a.indexOf("0")?"":n.formatNumber(0,i[0],void 0,!0)+"/"+n.formatNumber(1,i[1],void 0,!0);if(0==t%1)return n.formatNumber(t,i[0],void 0,!0)+"/"+n.formatNumber(1,i[1],void 0,!0);const o=[];n.approximateFractions(t,o);const r=2<=i[1].length?2:1;let l=[],s=[];o.forEach(function(a,n){const i=a.denominator.toString().length,o=Math.abs(t-a.numerator/a.denominator);return void 0===l[i]?(s[i]=n,void(l[i]=o)):void(o<l[i]&&(s[i]=n,l[i]=o))});let d=s[r]?o[s[r]]:o[s[1]];return n.formatNumber(d.numerator,i[0],void 0,!0)+"/"+n.formatNumber(d.denominator,i[1],void 0,!0)}approximateFractions(t,a){const n=[0,1],o=[1,0],r=this.getMaxNumerator(t);let l=t,s=NaN,d;for(let c=2;1e3>c;c++){const i=Math.floor(l);if(n[c]=i*n[c-1]+n[c-2],Math.abs(n[c])>r)return;if(o[c]=i*o[c-1]+o[c-2],d=n[c]/o[c],d===s)return;if(a.push({numerator:n[c],denominator:o[c]}),d===t)return;s=d,l=1/(l-i)}}getMaxNumerator(t){let a=null,n=t.toString().indexOf("E");-1===n&&(n=t.toString().indexOf("e")),a=-1===n?t.toString():t.toString().substring(0,n);let i=null;const o=a.toString().indexOf(".");-1===o?i=a:0===o?i=a.substring(1,a.length):o<a.length&&(i=a.substring(0,o)+a.substring(o+1,a.length));let r=i;const l=r.toString().length,s=t;let d=s.toString().length;0===s&&(d=0);const c=l-d;for(let a=c;0<a&&0==r%2;a--)r/=2;for(let a=c;0<a&&0==r%5;a--)r/=5;return r}exponentialToSuperscript(t){const a=t.indexOf("e"),n=t.slice(a+1).replace(/0{1,2}/,"");let i=t.slice(0,a+1);return i=i.replace("e","\xD710"),i+=this.toSuperscript(n),i=i.replace("+",""),i}toSuperscript(t,a){const o="-0123456789",r="\u207B\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";let l="";for(let s=0;s<t.length;s++)if(!0===a){const a=r.indexOf(t.charAt(s));l+=-1===a?t[s]:o[a]}else{const a=o.indexOf(t.charAt(s));l+=-1===a?t[s]:r[a]}return l}}),Smart.Utilities.Assign("ConditionalFormatter",class{constructor(t){const a=this;a.data=t||[],a._allowedDateComparators=["yesterday","today","tomorrow","last7Days","lastWeek","thisWeek","nextWeek","lastMonth","thisMonth","nextMonth","lastYear","thisYear","nextYear"],a._colorSchemes=[{name:"scheme01",colors:["#307DD7","#AA4643","#89A54E","#71588F","#4198AF"]},{name:"scheme02",colors:["#7FD13B","#EA157A","#FEB80A","#00ADDC","#738AC8"]},{name:"scheme03",colors:["#E8601A","#FF9639","#F5BD6A","#599994","#115D6E"]},{name:"scheme04",colors:["#D02841","#FF7C41","#FFC051","#5B5F4D","#364651"]},{name:"scheme05",colors:["#25A0DA","#309B46","#8EBC00","#FF7515","#FFAE00"]},{name:"scheme06",colors:["#0A3A4A","#196674","#33A6B2","#9AC836","#D0E64B"]},{name:"scheme07",colors:["#CC6B32","#FFAB48","#FFE7AD","#A7C9AE","#888A63"]},{name:"scheme08",colors:["#3F3943","#01A2A6","#29D9C2","#BDF271","#FFFFA6"]},{name:"scheme09",colors:["#1B2B32","#37646F","#A3ABAF","#E1E7E8","#B22E2F"]},{name:"scheme10",colors:["#5A4B53","#9C3C58","#DE2B5B","#D86A41","#D2A825"]},{name:"scheme11",colors:["#993144","#FFA257","#CCA56A","#ADA072","#949681"]},{name:"scheme12",colors:["#105B63","#EEEAC5","#FFD34E","#DB9E36","#BD4932"]},{name:"scheme13",colors:["#BBEBBC","#F0EE94","#F5C465","#FA7642","#FF1E54"]},{name:"scheme14",colors:["#60573E","#F2EEAC","#BFA575","#A63841","#BFB8A3"]},{name:"scheme15",colors:["#444546","#FFBB6E","#F28D00","#D94F00","#7F203B"]},{name:"scheme16",colors:["#583C39","#674E49","#948658","#F0E99A","#564E49"]},{name:"scheme17",colors:["#142D58","#447F6E","#E1B65B","#C8782A","#9E3E17"]},{name:"scheme18",colors:["#4D2B1F","#635D61","#7992A2","#97BFD5","#BFDCF5"]},{name:"scheme19",colors:["#844341","#D5CC92","#BBA146","#897B26","#55591C"]},{name:"scheme20",colors:["#56626B","#6C9380","#C0CA55","#F07C6C","#AD5472"]},{name:"scheme21",colors:["#96003A","#FF7347","#FFBC7B","#FF4154","#642223"]},{name:"scheme22",colors:["#5D7359","#E0D697","#D6AA5C","#8C5430","#661C0E"]},{name:"scheme23",colors:["#16193B","#35478C","#4E7AC7","#7FB2F0","#ADD5F7"]},{name:"scheme24",colors:["#7B1A25","#BF5322","#9DA860","#CEA457","#B67818"]},{name:"scheme25",colors:["#0081DA","#3AAFFF","#99C900","#FFEB3D","#309B46"]},{name:"scheme26",colors:["#0069A5","#0098EE","#7BD2F6","#FFB800","#FF6800"]},{name:"scheme27",colors:["#FF6800","#A0A700","#FF8D00","#678900","#0069A5"]},{name:"scheme28",colors:["#63BE7B","#FDD17F","#F8696B"]},{name:"scheme29",colors:["#F8696B","#FDD17F","#63BE7B"]},{name:"scheme30",colors:["#63BE7B","#FCFCFF","#F8696B"]},{name:"scheme31",colors:["#F8696B","#FCFCFF","#63BE7B"]},{name:"scheme32",colors:["#5A8AC6","#FCFCFF","#F8696B"]},{name:"scheme33",colors:["#F8696B","#FCFCFF","#5A8AC6"]},{name:"scheme34",colors:["#FCFCFF","#F8696B"]},{name:"scheme35",colors:["#F8696B","#FCFCFF"]},{name:"scheme36",colors:["#63BE7B","#FCFCFF"]},{name:"scheme37",colors:["#FCFCFF","#63BE7B"]},{name:"scheme38",colors:["#63BE7B","#FFEF9C"]},{name:"scheme39",colors:["#FFEF9C","#63BE7B"]},{name:"scheme40",colors:["#000000","#8b0000 ","#FFFF00","#FFFFFF"]},{name:"scheme41",colors:["#63BE7B","#FDD17F ","#F8696B","#FF69B4"]},{name:"scheme42",colors:["#63BE7B","#FDD17F ","#FDD17F","#F8696B"]},{name:"scheme00",colors:["#63BE7B","#FDD17F","#FDD17F","#FDD17F","#F8696B"]}]}format(t,a,n){const i=this,o=i.data;if(0!==o.length&&(t?i.condition=t:t=i.condition,!!t)){(void 0===i.comparator||null===i.comparator)&&(i.comparator=n),a?i.columns=a:a=i.columns,i.color&&(i.color=/^#[0-9A-F]{6}$/i.test(i.color)?i.color:void 0),a&&Array.isArray(a)&&(!Array.isArray(a)||0!==a.length)||(a=i.columns=[]);let t={};for(let n=0;n<a.length;n++){const r=a[n];null!==o[0][r]&&void 0!==o[0][r]&&(t[r]=i._validateColumnData(r))}return 0===Object.keys(t).length?void 0:t}}_applyColorScale(t){function a(t){let a=0;for(;a<u;){if(t<=c[a].max)return a;a++}return o(0,n(u-1,a))}var n=Math.min,o=Math.max;const r=this,l=t.length;if(0===l)return;const s=r.colorScheme===void 0?[r.color]:r._getSchemeColors();if(0===s.length||void 0===s[0]||null===s[0])return;let d={},c={},m,p;const u=s.length-("iconSet"===r.condition?0:1),i=r._getColumnRange(t),h=parseFloat(r.min)||i.min,f=o(h,parseFloat(r.max)||i.max);for(let a=0;a<u;a++)c[a]={min:c[a-1]?c[a-1].max:h,max:h+(f-h)*((a+1)/u)};0==u&&(c[0]={min:h,max:f});for(let g=0,i;g<l;g++)(i=t[g]instanceof Date?t[g].getTime():t[g],i=n(f,o(h,i)),"number"==typeof i)&&(m=a(i)||0,"iconSet"===r.condition?d[g]={"--icon-set":" ","--icon-set-color":s[m],"--icon-set-rotation-angle":r._getRotationAngle(m/(u-1)||0)+"deg"}:(p=1-((i-c[m].min)/(c[m].max-c[m].min)||0),d[g]=r._getCellStyle(r._mixColors(s[m],s[n(m+1,u)],p))));return d}_applyColorBar(t){const a=this,n=t.length,i=a._getColumnRange(t),o=a.min?parseFloat(a.min)||0:i.min,r=a.max?parseFloat(a.max)||0:i.max,l=a.colorScheme===void 0?[a.color]:a._getSchemeColors();let s="",d={},c;for(let a=0;a<l.length;a++)void 0!==l[a]&&null!==l[a]&&(s+=l[a]+",");if(!s)return void console.log("Invalid color/colorScheme detected.");s=s.slice(0,-1),c=1===l.length?l[0]:"-webkit-linear-gradient(left,"+s+")";for(let a=0,i;a<n;a++)(i=t[a]instanceof Date?t[a].getTime():t[a],i=Math.min(r,Math.max(o,t[a])),"number"==typeof i)&&(d[a]={"--color-bar":" ","--bar-width":(100*((i-o)/(r-o))||0)+"%","--bar-color":c});return d}_applyRule(t){function a(a){switch(i){case"between":{if(a instanceof Date&&(a=a.getTime()),a>=r&&a<=l)return a;break}case"contains":if(-1<(a+"").indexOf(s))return a;break;case"duplicate":{let n=0;for(let r=0;r<o;r++)if(t[r]===a&&n++,1<n)return a;break}case"dateOccur":{const t=n._getDateRange(a,s);if(!t)break;if(a=new Date(a),isNaN(a.getTime()))break;const i=a.getTime(),o=t.min.getTime(),r=t.max.getTime();if(i>=o&&i<=r)return a;break}case"doesNotContain":if(0>(a+"").indexOf(s))return a;break;case"equal":if("number"==typeof a&&a===parseFloat(s))return a;if("string"==typeof a&&0===a.localeCompare(s+""))return a;if("boolean"==typeof a&&a+""==s+"")return a;if(a instanceof Date&&a.getTime()===new Date(s).getTime())return a;break;case"greaterThan":if(a>parseFloat(s))return a;break;case"lessThan":if(a<parseFloat(s))return a;break;case"notEqual":if("number"==typeof a&&a!==parseFloat(s))return a;if("string"==typeof a&&0!==a.localeCompare(s+""))return a;if("boolean"==typeof a&&a+""!=s+"")return a;if(a instanceof Date&&a.getTime()!==new Date(s).getTime())return a;break;case"topNItems":case"bottomNItems":case"topNPercent":case"bottomNPercent":if(d||(d=t.slice(0).sort(0===i.indexOf("top")?(t,a)=>t<a?1:t>a?-1:0:(t,a)=>t>a?1:t<a?-1:0).slice(0,parseInt(0<i.indexOf("Percent")?o*s/100:s))),-1<d.indexOf(a))return a;break;case"aboveAverage":case"belowAverage":if(!c){let a=0;t.map(t=>a+=parseFloat(t)),c=a/o}if("aboveAverage"===i&&a>c)return a;if("belowAverage"===i&&a<c)return a;}return null}const n=this,o=t.length,i="string"==typeof n.condition?n.condition.trim():"";let r=parseFloat(n.min)||0,l=Math.max(r,parseFloat(n.max)||0),s,d,c;if(s="dateOccur"===i?"string"==typeof n.comparator&&-1<n._allowedDateComparators.indexOf(n.comparator.trim())?n.comparator.trim():void 0:Array.isArray(n.comparator)?n.comparator[0].trim():n.comparator,!t||0===t.length)return;if(0>["odd","even","duplicate","dateOccur","between","aboveAverage","belowAverage"].indexOf(i)&&0!==i.indexOf("everyN")&&(void 0===s||null===s))return console.warn(n.condition+" requires a comparator."),[];if("odd"===i||"even"===i||0===i.indexOf("everyN"))return n._getAlternateItems(t);let m=[],p;for(let n=0;n<o;n++)p=a(t[n],n),void 0!==p&&null!==p&&m.push(n);return m}_getAlternateItems(t){const a=this,n=t.length,o="string"==typeof a.condition?a.condition.trim():"",r=parseInt(a.min)||0,l=Math.max(r,parseInt(a.max)||n)-1,s=parseInt(a.comparator);let d=[],c=0;for(let a=0;a<=n;a++)if(!(a<r)){if(a>l)break;"even"===o&&0==(a+1)%2?d.push(a):"odd"===o&&0!=(a+1)%2?d.push(a):void 0!==s&&!isNaN(s)&&(c===s?(d.push(a),c=0):c++)}return d}_getColumnRange(t){const a=t.length;let n=0,o,r;for(let l=0;l<a;l++)r=t[l],r instanceof Date&&(r=r.getTime()),r>n&&(n=r),void 0===o&&(o=r),r<o&&(o=r);return{min:parseFloat(o)||0,max:parseFloat(n)||0}}_getCellStyle(t,a){var n=this._hexToRgba(t,a).toString(),i=this._getTextElementByColor(this._hexToRgba(t,.7));return{background:n,color:i,border:t}}_getDateRange(t,a){var n=Math.abs;const i=new Date(t);let o,r;if(i instanceof Date&&a){const t=new Date;switch(a){case"yesterday":case"today":case"tomorrow":{"yesterday"===a?r=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1):"today"===a?(r=new Date,r.setHours(0,0,0,0)):r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),o=r;break}case"last7Days":r=new Date(t.getFullYear(),t.getMonth(),t.getDate()-6),o=new Date(t);break;case"lastWeek":case"thisWeek":case"nextWeek":r="lastWeek"===a?new Date(t.getFullYear(),t.getMonth(),t.getDate()-6-t.getDay()):"thisWeek"===a?new Date(t.getFullYear(),t.getMonth(),t.getDate()-n(1-t.getDay())):new Date(t.getFullYear(),t.getMonth(),t.getDate()+n(7-t.getDay())),o=new Date(r.getFullYear(),r.getMonth(),r.getDate()+6);break;case"lastMonth":case"thisMonth":case"nextMonth":"lastMonth"===a?(o=new Date(t.getFullYear(),t.getMonth(),0),r=new Date(o.getFullYear(),o.getMonth(),1)):"thisMonth"===a?(r=new Date(t.getFullYear(),t.getMonth(),1),o=new Date(t.getFullYear(),t.getMonth()+1,0)):(r=new Date(t.getFullYear(),t.getMonth()+1,1),o=new Date(t.getFullYear(),t.getMonth()+2,0));break;case"lastYear":case"thisYear":case"nextYear":"lastYear"===a?(r=new Date(t.getFullYear()-1,0,1),o=new Date(t.getFullYear()-1,12,0)):"thisYear"===a?(r=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),12,0)):(r=new Date(t.getFullYear()+1,0,1),o=new Date(t.getFullYear()+1,12,0));}return{min:r,max:o}}}_getRotationAngle(t){var a=Math.round;let n=t;return .25>t?n=a(t)?.25:0:.25<t&&.5>t?n=a(t)?.5:.25:.5<t&&.75>t?n=a(t)?.75:.5:.75<t&&1>t&&(n=a(t)?1:.75),180*n}_getSchemeColors(){const t=this;let a;if("string"==typeof t.colorScheme)a=0===t.colorScheme.indexOf("scheme")?t._colorSchemes.filter(a=>a.name===t.colorScheme)[0]:void 0;else if("number"==typeof t.colorScheme)a=t._colorSchemes[t.colorScheme]?t._colorSchemes[t.colorScheme]:void 0;else return[];return a="object"==typeof a?a.colors:t._colorSchemes[0].colors}_getTextElementByColor(t){return 125<=.299*t.r+.587*t.g+.114*t.b?"Black":"White"}_hexToRgba(t,a){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);var i=function(){return 1<this.alpha||void 0===this.alpha||null===this.alpha?this.alpha=1:0>this.alpha&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"};return void 0===a?n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),toString:i}:null:(1<a?a=1:0>a&&(a=0),n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),alpha:a,toString:i}:null)}_mixColors(t,a,n){const i=t=>t.toString(16),o=t=>parseInt(t,16);let r="#",l;n="undefined"==typeof n?.5:n,t=t.replace(/#/g,""),a=a.replace(/#/g,"");for(let s=0;5>=s;s+=2){const d=o(t.substr(s,2)),c=o(a.substr(s,2));for(l=i(Math.floor(c+(d-c)*n));2>l.length;)l="0"+l;r+=l}return r}_shadeColor(a,n){var i=Math.round,o=parseInt(a.slice(1),16),r=0>n?0:255,t=0>n?-1*n:n,l=o>>16,s=255&o>>8,d=255&o;return"#"+(16777216+65536*(i((r-l)*t)+l)+256*(i((r-s)*t)+s)+(i((r-d)*t)+d)).toString(16).slice(1)}_validateColumnData(t){const a=this,n=[],i=a.data;let o={},l;for(let a=0;a<i.length;a++)n.push(i[a][t]);if("colorScale"===a.condition||"iconSet"===a.condition)return a._applyColorScale(n);if("colorBar"===a.condition)return a._applyColorBar(n);if(l=a._applyRule(n),!!l){if(!a.color)return void console.warn("No color is provided. \"color\" property is not set.");for(let t=0;t<l.length;t++)o[l[t]]=a._getCellStyle(a.color);return o}}}),Smart.Utilities.Assign("TickIntervalHandler",class{constructor(t,a,n,i,o,r,l){const s=this;s.context=t,s.minLabel=a,s.maxLabel=n,s.labelClass=i,s.dimension=o,s.logarithmic=l,s.labelsSize=t.customInterval?0<t.customTicks.length?s.getCustomTicksLabelSize():{minLabelSize:0,minLabelOtherSize:0,maxLabelSize:0,maxLabelOtherSize:0}:s.getMinAndMaxLabelSize(),r?(s.getNiceInterval=s.getNiceIntervalInteger,s.getPossibleBiggerLabel=s.getPossibleBiggerLabelInteger):(s.getNiceInterval=s.getNiceIntervalFloatingPoint,s.getPossibleBiggerLabel=s.getPossibleBiggerLabelFloatingPoint)}getInterval(t,a,n,i){var o=Math.max;const r=this.context,l=r._measurements.innerRadius;let s=1,d;"radial"===t?(d=o(this.labelsSize.minLabelSize,this.labelsSize.minLabelOtherSize,this.labelsSize.maxLabelSize,this.labelsSize.maxLabelOtherSize),s=1.35):(d=o(this.labelsSize.minLabelSize,this.labelsSize.maxLabelSize),s=1.45),d*=s;let c;c="radial"===t?function(){let t=2*Math.PI*l*(Math.abs(r.startAngle-r.endAngle)/360);return Math.round(t)}():r[this.dimension]-this.labelsSize.minLabelSize/2-this.labelsSize.maxLabelSize/2,c=o(10,c);const m=Math.ceil(c/d),p="radial"===t?4*m:3*m;let u=this.getNiceInterval(a,n,m,!0),g=this.getNiceInterval(a,n,p);if(r._cachedLabelsSize=this.labelsSize,2<m&&!r.customInterval){const l=this.getPossibleBiggerLabel(m,u);if(l.length>o(this.minLabel.length,this.maxLabel.length)){const o=this.minLabel;this.minLabel=l,this.labelsSize=this.getMinAndMaxLabelSize(),r._cachedLabelsSize=this.labelsSize;const s=this.getInterval(t,a,n,i);return this.minLabel=o,this.labelsSize=this.getMinAndMaxLabelSize(),s}}return{major:u,minor:g}}getNiceIntervalFloatingPoint(t,a,n,i){var o=Math.log10;const r=a-t,l=Math.floor(o(r)-o(n));let s=Math.pow(10,l),d=n*s,c;c=r<2*d?1:r<3*d?2:r<7*d?5:10;let m=c*s;return i&&this.context._range/m>n&&(5===c?c=10:2===c?c=5:1===c?c=2:void 0,m=c*s),this.nearestPowerOfTen=s,this.logarithmic&&i?Math.max(1,m):m}getPossibleBiggerLabelFloatingPoint(t,a){var n=Math.pow;const o=this.context;let i=parseFloat(o.min-o._numericProcessor.getPreciseModulo(parseFloat(o.min),a)+parseFloat(a)),r=i,l,s;this.logarithmic&&(i=n(10,i)),l=o._formatLabel(i);for(let d=1;d<t&&(r+=a,!(r>=o._drawMax));d++)s=this.logarithmic?n(10,r):r,s=o._formatLabel(s),s.length>l.length&&(l=s);return l}getNiceIntervalInteger(t,a,n,i){var o=Math.log10;const r=new Smart.Utilities.BigNumber(a).subtract(new Smart.Utilities.BigNumber(t)),l=Math.floor(o(r.toString())-o(n)),s=new Smart.Utilities.BigNumber(10).pow(new Smart.Utilities.BigNumber(l)),d=new Smart.Utilities.BigNumber(n).multiply(s);let c=-1===r.compare(new Smart.Utilities.BigNumber(2*d))?1:-1===r.compare(new Smart.Utilities.BigNumber(3*d))?2:-1===r.compare(new Smart.Utilities.BigNumber(7*d))?5:10;let m=new Smart.Utilities.BigNumber(c).multiply(s);return i&&1===new Smart.Utilities.BigNumber(this.context._range).divide(m).compare(n)&&(5===c?c=10:2===c?c=5:1===c?c=2:void 0,m=new Smart.Utilities.BigNumber(c).multiply(s)),-1===m.compare(1)&&(m=new Smart.Utilities.BigNumber(1)),this.nearestPowerOfTen=s,m}getPossibleBiggerLabelInteger(t,a){const n=this.context,o=new Smart.Utilities.BigNumber(10);let i=new Smart.Utilities.BigNumber(n.min).subtract(new Smart.Utilities.BigNumber(n.min).mod(a)).add(a),r=i,l,s;this.logarithmic&&(i=o.pow(i)),l=n._formatLabel(i);for(let d=1;d<t&&(r=r.add(a),-1===r.compare(n._drawMax));d++)s=this.logarithmic?o.pow(r):r,s=n._formatLabel(s),s.length>l.length&&(l=s);return l}getMinAndMaxLabelSize(){const t=this,a=t.context,n=a.$.container,i=document.createElement("span");i.className=t.labelClass,i.style.position="absolute",i.style.visibility="hidden",n.appendChild(i),i.innerHTML=t.minLabel;const o=i[t.dimension],r=i[a._settings.otherSize];i.innerHTML=t.maxLabel;const l=i[t.dimension],s=i[a._settings.otherSize];return n.removeChild(i),{minLabelSize:o,minLabelOtherSize:r,maxLabelSize:l,maxLabelOtherSize:s}}getCustomTicksLabelSize(){const t=this,a=t.context,n=a.$.container,o=document.createElement("span"),i=a.customTicks;o.className=t.labelClass,o.style.position="absolute",o.style.visibility="hidden",n.appendChild(o),o.innerHTML=a._formatLabel(i[0]);let r=o[t.dimension],l=o[a._settings.otherSize];for(let n=1;n<a.customTicks.length;n++){o.innerHTML=a._formatLabel(a.customTicks[n]);const i=o[t.dimension],s=o[a._settings.otherSize];i>r&&(r=i),s>l&&(l=s)}return n.removeChild(o),{minLabelSize:r,minLabelOtherSize:l,maxLabelSize:r,maxLabelOtherSize:l}}}),Smart("smart-button",class extends Smart.ContentElement{static get properties(){return{value:{type:"string"},name:{type:"string"},type:{type:"string"},clickMode:{allowedValues:["hover","press","release","pressAndRelease"],type:"string",value:"release"}}}static get styleUrls(){return["smart.button.css"]}template(){return"<button class='smart-button' inner-h-t-m-l='[[innerHTML]]' id='button' type='[[type]]' name='[[name]]' value='[[value]]' disabled='[[disabled]]' role='button'></button>"}static get listeners(){return{"button.down":"_downHandler","button.mouseenter":"_mouseEnterHandler","button.mouseleave":"_mouseLeaveHandler","button.touchend":"_touchEndHandler","button.click":"_clickHandler","button.up":"_upHandler",up:"_upHandler","button.focus":"_focusHandler","button.blur":"_blurHandler"}}_upHandler(t){const a=this;t.stopPropagation(),a.$.setAttributeValue("active",!1)}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_clickHandler(t){const a=this;("release"!==a.clickMode&&"pressAndRelease"!==a.clickMode||a.readonly)&&(t.preventDefault(),t.stopPropagation())}_downHandler(t){const a=this;if(!a.disabled&&(a.enableShadowDOM||t.originalEvent.stopPropagation(),a.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),a.$.setAttributeValue("active",!0),("press"===a.clickMode||"pressAndRelease"===a.clickMode)&&!a.readonly)){const n="buttons"in t?t.buttons:t.which;a.$.fireEvent("click",{buttons:n,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}}_mouseEnterHandler(t){const a=this;if(!a.readonly&&(a.$button.setAttributeValue("hover",!0),a.$.setAttributeValue("hover",!0),"hover"===a.clickMode)){const n="buttons"in t?t.buttons:t.which;a.$.fireEvent("click",{buttons:n,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}}_touchEndHandler(){const t=this;setTimeout(function(){t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)},300)}_mouseLeaveHandler(){const t=this;t.$button.setAttributeValue("hover",!1),t.$.setAttributeValue("hover",!1)}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;"disabled"===t?(i._setFocusable(),i.$button&&i.$button.setAttributeValue("hover",!1),i.$.setAttributeValue("hover",!1),i instanceof Smart.RepeatButton&&i._stopRepeat()):"unfocusable"==t&&i._setFocusable()}_setFocusable(){const t=this,a=t.$.button?t.$.button:t;return t.disabled||t.unfocusable?(a.removeAttribute("tabindex"),void(a.tabIndex=-1)):void(a.tabIndex=0<t.tabIndex?t.tabIndex:0)}ready(){const t=this;super.ready(),t._setFocusable()}}),Smart("smart-repeat-button",class extends Smart.Button{static get properties(){return{delay:{value:50,type:"number"},initialDelay:{value:150,type:"number"}}}static get listeners(){return{"button.mousedown":"_startRepeat","button.mouseenter":"_updateInBoundsFlag","button.mouseleave":"_updateInBoundsFlag","document.mouseup":"_stopRepeat"}}_clickHandler(t){const a=this;("release"!==a.clickMode||a.preventDefaultClick||a.readonly||a.disabled)&&(t.preventDefault(),t.stopPropagation(),a.preventDefaultClick=!1)}_updateInBoundsFlag(t){const a=this;a._isPointerInBounds=!0,"mouseleave"===t.type?(a._isPointerInBounds=!1,a.$button.setAttributeValue("hover",!1),a.$.setAttributeValue("hover",!1)):(a.$button.setAttributeValue("hover",!0),a.$.setAttributeValue("hover",!0));const n="buttons"in t?t.buttons:t.which;1!==n&&a._stopRepeat(t)}_startRepeat(t){const a=this;a._initialTimer||a.readonly||(a._initialTimer=setTimeout(function(){a._repeatTimer=setInterval(()=>{if(a._isPointerInBounds){const n="buttons"in t?t.buttons:t.which;a.$.fireEvent("click",{buttons:n,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY}),a.preventDefaultClick=!0}},a.delay)},a.initialDelay))}_stopRepeat(){const t=this;t.readonly||(t.$.setAttributeValue("active",!1),t._repeatTimer&&(clearInterval(t._repeatTimer),t._repeatTimer=null),t._initialTimer&&(clearTimeout(t._initialTimer),t._initialTimer=null))}}),Smart("smart-toggle-button",class extends Smart.Button{static get properties(){return{checked:{value:!1,type:"boolean?"},falseContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminate:{value:!1,type:"boolean"},trueContent:{value:"",reflectToAttribute:!1,type:"string"},indeterminateTemplate:{value:null,type:"any"},trueTemplate:{value:null,type:"any"},falseTemplate:{value:null,type:"any"},type:{value:"toggle",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}static get listeners(){return{keydown:"_keyHandler",keyup:"_keyHandler",dragstart:"_dragStartHandler","button.click":"_buttonClickHandler","button.mouseenter":"_buttonMouseEnterHandler","button.mouseleave":"_buttonMouseLeaveHandler","document.up":"_documentUpHandler"}}ready(){super.ready()}_buttonClickHandler(){}_buttonMouseLeaveHandler(){const t=this;t.removeAttribute("hover")}_buttonMouseEnterHandler(){const t=this;t.setAttribute("hover","");t.disabled||t.readonly||"hover"!==t.clickMode||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue())}_documentUpHandler(){const t=this;t._pressed&&(t._pressed=!1,t.disabled||t.readonly||"press"===t.clickMode||(t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()))}_downHandler(t){const a=this;a.disabled||a.readonly||(a.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),a._pressed=!0,("press"===a.clickMode||"pressAndRelease"===a.clickMode)&&(a._changeCheckState("pointer"),a.$.fireEvent("click"),a._updateHidenInputNameAndValue()),"press"===a.clickMode&&(t.preventDefault(),t.stopPropagation()))}_dragStartHandler(t){t.preventDefault()}_keyHandler(t){const a=this;if(!0!==a.disabled&&!a.readonly&&32===t.keyCode){if("keydown"===t.type)return void t.preventDefault();if("none"===a.switchMode)return;a._changeCheckState("keyboard"),a._updateHidenInputNameAndValue()}}_changeCheckState(t){const a=this;let n=null;null===a.checked?a.checked=!0:(n=a.checked,a.checked=!a.checked),a._handleTextSelection(),a.$.fireEvent("change",{value:a.checked,oldValue:n,changeType:t})}_handleTextSelection(){const t=this;t.$.addClass("smart-unselectable"),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(()=>t.$.removeClass("smart-unselectable"),500)}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;"checked"===t&&i.$.fireEvent("change",{value:n,oldValue:a,changeType:"api"});"trueTemplate"===t?i._handleTemplate(!0):"falseTemplate"===t?i._handleTemplate(!1):"indeterminateTemplate"===t?i._handleTemplate():void 0}_htmlBindOnInitialization(){const t=this;t._bindContentProperty("trueContent","smart-true-content"),t._bindContentProperty("falseContent","smart-false-content"),t._bindContentProperty("indeterminateContent","smart-indeterminate-content")}_bindContentProperty(t,a){const n=this;if(!n.$[t+"Container"])return;let i=document.createElement("div");i.innerHTML=n.innerHTML;let o=i.getElementsByClassName(a),r;if(0<o.length)for(let t=0;t<o.length;t++)r=o[t];""===n[t]&&(n[t]=r===void 0?"":r.outerHTML),n.$[t+"Container"].innerHTML=n[t]}_updateContentProperties(){function t(t){a.$[t+"Container"]&&(a[t]=a.$[t+"Container"].innerHTML)}const a=this;t("trueContent"),t("falseContent"),t("indeterminateContent")}_updateHidenInputValue(){const t=this;if(!t.$.hiddenInput)return;let a;a=null===t.checked?"null":!1===t.checked?"off":t.value||"on",t.$.hiddenInput.setAttribute("value",a)}_updateHidenInputName(){const t=this;if(t.$.hiddenInput){let a=!1===t.checked?"":t.name||"";t.$.hiddenInput.setAttribute("name",a)}}_updateHidenInputNameAndValue(){const t=this;t._updateHidenInputName(),t._updateHidenInputValue()}_handleTemplate(t,a){const n=this;let i,o,r;if(!0===t?(i=n.trueTemplate,o=n.$.trueContentContainer,r=n.trueContent):!1===t?(i=n.falseTemplate,o=n.$.falseContentContainer,r=n.falseContent):(i=n.indeterminateTemplate,o=n.$.indeterminateContentContainer,r=n.indeterminateContent),a&&(o.innerHTML=r?r:""),null===i||!i)return;if("function"==typeof i)return void i(o,{value:r});if(!("content"in document.createElement("template")))return void n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}));if(i=document.getElementById(i),null===i||!("content"in i))return void n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:"template"}));const l=i.content,s=l.childNodes.length,d=/{{\w+}}/g;let c=[],m;for(let n=0;n<s;n++)for(m=d.exec(l.childNodes[n].innerHTML);m;)c.push({childNodeIndex:n,bindingString:m[0]}),m=d.exec(l.childNodes[n].innerHTML);const p=c.length;let u=document.importNode(i.content,!0),g,h;for(let n=0;n<p;n++){g=u.childNodes[c[n].childNodeIndex],h=c.length;for(let t=0;t<h;t++)g.innerHTML=g.innerHTML.replace(c[n].bindingString,r)}o.innerHTML="";for(let n=0;n<u.childNodes.length;n++)u.childNodes[n].outerHTML&&(o.innerHTML+=u.childNodes[n].outerHTML)}}),Smart("smart-breadcrumb",class extends Smart.BaseElement{static get properties(){return{addNewItem:{value:!1,type:"boolean"},allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},closeButtons:{value:!1,type:"boolean"},dataSource:{value:[],type:"array",reflectToAttribute:!1},itemTemplate:{value:null,type:"any"},minimizeWidth:{value:150,type:"number?"}}}static get listeners(){return{move:"_moveHandler",resize:"_resizeHandler","container.click":"_containerClickHandler","container.down":"_containerDownHandler","container.transitionend":"_containerTransitionendHandler","hamburgerIcon.click":"_hamburgerIconClickHandler","document.move":"_documentMoveHandler","document.up":"_documentUpHandler"}}template(){return`<div id="container">
                    <div id="minimizedHeader" class="smart-header smart-minimized-header smart-hidden">
                        <div id="hamburgerIcon" class="smart-hamburger-icon">
                            <div id="hamburgerIconLineTop" class="smart-hamburger-icon-line smart-hamburger-icon-line-top"></div>
                            <div id="hamburgerIconLineCenter" class="smart-hamburger-icon-line smart-hamburger-icon-line-center"></div>
                            <div id="hamburgerIconLineBottom" class="smart-hamburger-icon-line smart-hamburger-icon-line-bottom"></div>
                        </div>
                    </div>
                    <template>
                        <div id="itemsContainer" class="smart-breadcrumb-items" *items={{dataSource}}>
                            <div class="smart-breadcrumb-item">
                                <div class="smart-breadcrumb-item-label" inner-H-T-M-L={{item.label}}></div>
                                <div class="smart-close-button">&#xe81f</div>
                            </div>
                        </div>
                    </template>
                </div>`}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const o=this;switch(t){case"addNewItem":n?o._appendNewItemButton():(o.$.templateContainer.firstElementChild.removeChild(o._addNewItemButton),delete o._addNewItemButton),o._setIndentation();break;case"animation":case"disabled":case"unfocusable":o.addNewItem&&(o._addNewItemButton[t]=n),"disabled"===t&&o._minimizedDropDownOpened&&o._hamburgerIconClickHandler();break;case"itemTemplate":for(let t=0;t<o._items.length;t++)o._items[t].firstElementChild.innerHTML=o.dataSource[t].label;n&&o._applyTemplate();break;case"minimizeWidth":null!==n&&o.offsetWidth<=n?o.minimize():o.maximize();break;case"closeButtons":o._minimized||o._setIndentation();}}ready(){super.ready();const t=this;t._edgeMacFF=Smart.Utilities.Core.Browser.Edge||Smart.Utilities.Core.Browser.Firefox&&-1!==navigator.platform.toLowerCase().indexOf("mac"),t.templateContainer=t.$.container.children[1],null!==t.minimizeWidth&&t.offsetWidth<=t.minimizeWidth&&t.minimize()}templateAttached(){this._handleDataSourceRefresh()}addItem(t){const a=this,n=a.dataSource.slice(0);!t||"object"!=typeof t||isNaN(t.index)||0>t.index||(n.splice(t.index,0,{label:t.label,value:t.value}),a.dataSource=n)}maximize(){const t=this;t._minimized&&(t.$minimizedHeader.addClass("smart-hidden"),t.templateContainer.classList.remove("smart-visibility-hidden"),t._edgeMacFF&&t.templateContainer.classList.remove("not-in-view"),t.$hamburgerIcon.removeClass("smart-close-button"),t.removeAttribute("minimized"),t._minimizedDropDownOpened=!1,t._minimized=!1,t._setIndentation())}minimize(){const t=this;if(t._minimized)return;const a=t.animation,n=t.hasAnimation;n&&(t.animation="none"),t.$minimizedHeader.removeClass("smart-hidden"),t.templateContainer.classList.add("smart-visibility-hidden"),t._edgeMacFF&&t.templateContainer.classList.add("not-in-view"),n&&setTimeout(function(){t.animation=a},0),t.setAttribute("minimized",""),t._minimized=!0,t._setIndentation()}removeItem(t){const a=this,n=a._items.indexOf(t),i=a.dataSource.slice(0);-1===n||(i.splice(n,1),a.dataSource=i)}_moveHandler(t){"touchmove"===t.originalEvent.type&&t.originalEvent.preventDefault()}_resizeHandler(){const t=this;null!==t.minimizeWidth&&t.offsetWidth<=t.minimizeWidth?t.minimize():t._minimized?t.maximize():t._setIndentation()}_containerClickHandler(t){const a=this;if(!a.disabled&&a.templateContainer.contains(t.target)){const n=t.target.closest(".smart-close-button");if(n){const t=n.closest(".smart-breadcrumb-item"),i=a.$.fireEvent("closing",{item:t});if(!i.defaultPrevented){const n=a.dataSource.slice(0);n.splice(a._items.indexOf(t),1),a.dataSource=n,a.$.fireEvent("close",{item:t})}}}}_containerDownHandler(t){const a=this,n=t.originalEvent.target;if(!(!a.allowDrag||a.disabled||n.classList.contains("smart-close-button"))){const i=n.closest(".smart-breadcrumb-item");i&&(a._dragDetails={item:i,x:t.pageX,y:t.pageY})}}_containerTransitionendHandler(t){const a=this;a._edgeMacFF&&t.target===a.templateContainer&&!a._minimizedDropDownOpened&&a.hasAnimation&&a.templateContainer.classList.add("not-in-view")}_hamburgerIconClickHandler(){const t=this;t._minimizedDropDownOpened?(t.$hamburgerIcon.removeClass("smart-close-button"),t.templateContainer.classList.add("smart-visibility-hidden"),t._minimizedDropDownOpened=!1):(t.$hamburgerIcon.addClass("smart-close-button"),t._edgeMacFF&&t.templateContainer.classList.remove("not-in-view"),t.templateContainer.classList.remove("smart-visibility-hidden"),t._minimizedDropDownOpened=!0)}_documentMoveHandler(t){var a=Math.abs;const n=this,i=n._dragDetails;if(!i)return;let o=i.feedback;if(t.originalEvent.preventDefault(),!o)if(5<a(i.x-t.pageX)||5<a(i.y-t.pageY))o=document.createElement("div"),o.className="smart-breadcrumb-feedback",o.style.height=n._dragDetails.item.offsetHeight+"px",o.innerHTML=n._dragDetails.item.firstElementChild.innerHTML,document.body.appendChild(o),i.feedback=o,n._getItemCoordinates();else return;const r=Smart.Utilities.Core.isMobile?document.elementFromPoint(t.clientX,t.clientY):t.originalEvent.target;if(o.style.left=t.pageX+10+"px",o.style.top=t.pageY+10+"px",!n.allowDrop)return o.classList.add("error"),void n.$.fireEvent("dragging",{item:i.item,target:r,originalEvent:t.originalEvent});if(delete i.target,n._clearItemDragClass(),!n.contains(r))return o.classList.add("error"),void n.$.fireEvent("dragging",{item:i.item,target:r,originalEvent:t.originalEvent});let l=r.closest(".smart-breadcrumb-item");if(l)return void n._applyItemDragClass(l,l.getBoundingClientRect(),t);if(n._minimized)return o.classList.add("error"),void n.$.fireEvent("dragging",{item:i.item,target:r,originalEvent:t.originalEvent});if(n.contains(r)){const a=n._itemCoordinates.rows,o=n._itemCoordinates.coordinates,l=parseFloat(window.getComputedStyle(n).getPropertyValue("--smart-breadcrumb-padding"))/2;let s;for(let n=0;n<a.length;n++)if(t.clientY<a[n].bottom+l){s=n;break}if(void 0===s)return i.feedback.classList.add("error"),void n.$.fireEvent("dragging",{item:i.item,target:r,originalEvent:t.originalEvent});let d=n._items[o[s][o[s].length-1].index],c;for(let a=0;a<o[s].length;a++)if(c=o[s][a].rect,t.clientX<c.right+l){d=n._items[o[s][a].index];break}return void n._applyItemDragClass(d,c,t)}}_getItemCoordinates(){const t=this,a=t._items,n=[[]],o=[];let r=a[0].offsetTop,l=0;n[0].push({index:0,rect:a[0].getBoundingClientRect()}),o[0]={top:n[0][0].rect.top,bottom:n[0][0].rect.bottom};for(let t=1;t<a.length;t++){const i=a[t],s=i.getBoundingClientRect(),d=a[t].offsetTop;d>r&&(r=d,l++,n[l]=[],o[l]={top:s.top,bottom:s.bottom}),n[l].push({index:t,rect:s})}t._itemCoordinates={coordinates:n,rows:o}}_applyItemDragClass(t,a,n){const i=this,o=i._dragDetails;let r,l,s;o.target=t,o.feedback.classList.remove("error"),o.before=!1,i._minimized?(r=n.clientY,l="top",s="height"):(r=n.clientX,l="left",s="width"),r<=a[l]+a[s]/2?(t.classList.add("target"),o.before=!0):t.nextElementSibling?t.nextElementSibling.classList.add("target"):t.classList.add("afterTarget"),i.$.fireEvent("dragging",{item:o.item,target:t,originalEvent:n.originalEvent})}_clearItemDragClass(){const t=this.querySelector(".target, .afterTarget");t&&(t.classList.remove("target"),t.classList.remove("afterTarget"))}_documentUpHandler(t){const a=this,n=a._dragDetails;if(n&&(delete a._dragDetails,n.feedback)){if(document.body.removeChild(n.feedback),a._clearItemDragClass(),!a.allowDrop)return;if(!n.target||n.item===n.target)return void a.$.fireEvent("dragEnd",{item:n.item,target:n.target||!Smart.Utilities.Core.isMobile?t.originalEvent.target:document.elementFromPoint(t.clientX,t.clientY),originalEvent:t.originalEvent});const i=a._items.slice(0),o=i.indexOf(n.item),r=a.dataSource.slice(0),l=r.splice(o,1);i.splice(o,1);const s=i.indexOf(n.target)+(n.before?0:1);o!==s&&(r.splice(s,0,l[0]),a.dataSource=r),a.$.fireEvent("dragEnd",{item:n.item,target:n.target,droppedBeforeTarget:n.before,originalEvent:t.originalEvent})}}_handleDataSourceRefresh(){const t=this;t._items=Array.from(t.$.templateContainer.firstElementChild.children),t.addNewItem&&t._appendNewItemButton(),t._applyTemplate(),t._setIndentation()}_appendNewItemButton(){const t=this,a=document.createElement("smart-button");a.innerHTML="+",a.animation=t.animation,a.disabled=t.disabled,a.unfocusable=t.unfocusable,a.addEventListener("click",function(){t.$.fireEvent("addNewItem")}),t.$.templateContainer.firstElementChild.appendChild(a),t._addNewItemButton=a}_setIndentation(){const t=this,a=t._items.slice(0);if(t._addNewItemButton&&a.push(t._addNewItemButton),0===a.length)return;let n=a[0].offsetTop,o=0;if(a.forEach(function(t){t.style.marginLeft=null}),!t._minimized)for(let t=1;t<a.length;t++){const i=a[t],r=a[t].offsetTop;r>n&&(n=r,o++,i.style.marginLeft=10*o+"px")}}_applyTemplate(){const t=this,a=t.itemTemplate;if(null===a)return;let n;if(n=a instanceof HTMLTemplateElement?a:document.getElementById(a),null!==n&&n instanceof HTMLTemplateElement){const a=document.importNode(n.content,!0),i=document.createElement("div");i.appendChild(a);const o=i.innerHTML;for(let a=0;a<t._items.length;a++){const n=t.dataSource,i=n[a].label,r=n[a].value,l=t._items[a].firstElementChild;l.innerHTML=o.replace(/{{label}}/g,i).replace(/{{value}}/g,r)}}}}),Smart("smart-check-box",class extends Smart.ToggleButton{static get properties(){return{checkMode:{value:"both",allowedValues:["both","input","label"],type:"string"},type:{value:"checkbox",type:"string",defaultReflectToAttribute:!0,readonly:!0}}}template(){return`<div id='container' class='smart-container'>
                 <div class ='smart-overlay'></div>
                 <span id='checkBoxInput' class ='smart-input'></span>
                 <span id='checkBoxLabel' inner-h-t-m-l='[[innerHTML]]' class ='smart-label'><content></content></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}static get listeners(){return{down:"_downHandler","document.up":"_documentUpHandler","checkBoxInput.mouseenter":"_mouseEnterHandler","checkBoxInput.mouseleave":"_mouseLeaveHandler",focus:"_focusHandler",blur:"_blurHandler"}}static get styleUrls(){return["smart.checkbox.css"]}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_mouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_mouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}ready(){const t=this;super.ready(),t.indeterminate&&(t._valueCashe=t.checked,t.checked=null),t._updateHidenInputNameAndValue()}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;i._updateContentProperties();"indeterminate"===t?(n?(i._valueCashe=i.checked,i.checked=null):i.checked=i._valueCashe,i._updateHidenInputNameAndValue()):"value"===t?i._updateHidenInputNameAndValue():"checked"===t?i._updateHidenInputNameAndValue():"name"===t?i._updateHidenInputName():void 0}_documentUpHandler(t){const a=this,n=a.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(a._pressed)return a._pressed=!1,a.$.setAttributeValue("active",!1),a.disabled||a.readonly||"input"===a.checkMode&&n!==a.$.checkBoxInput||"label"===a.checkMode&&n!==a.$.checkBoxLabel?void 0:"press"===a.clickMode?(t.preventDefault(),void t.stopPropagation()):void(a._changeCheckState("pointer"),a.focus(),a._handleTextSelection(),a._updateHidenInputNameAndValue())}_downHandler(t){const a=this,n=a.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(!(a.disabled||a.readonly||"input"===a.checkMode&&n!==a.$.checkBoxInput||"label"===a.checkMode&&n!==a.$.checkBoxLabel)){if(a.$.setAttributeValue("active",!0),a.hasRippleAnimation){const t=a.$.checkBoxInput.getBoundingClientRect(),n=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset;Smart.Utilities.Animation.Ripple.animate(a.$.checkBoxInput,t.left+t.width/2+n,t.top+t.height/2+i)}a._pressed=!0,("press"===a.clickMode||"pressAndRelease"===a.clickMode)&&(a._changeCheckState("pointer"),a.$.fireEvent("click"),a.focus(),a._updateHidenInputNameAndValue())}}}),Smart("smart-led",class extends Smart.ToggleButton{static get properties(){return{shape:{value:"round",allowedValues:["round","square"],type:"string"}}}static get styleUrls(){return["smart.led.css"]}template(){return`<div id='container' class='smart-container'>
                 <div id='ledAnimation' class ='smart-animation'></div>
                 <div id='button' class='smart-input'>
                    <span id='falseContentContainer' inner-h-t-m-l='[[falseContent]]' class ='smart-false-content-container'></span>
                    <span id='indeterminateContentContainer' inner-h-t-m-l='[[indeterminateContent]]' class ='smart-indeterminate-content-container'></span>
                    <span id='trueContentContainer' inner-h-t-m-l='[[trueContent]]' class ='smart-true-content-container'></span>
                 </div>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready(),t._htmlBindOnInitialization(),t.indeterminate&&(t._valueCashe=t.checked,t.checked=null),t._handleTemplate(!0),t._handleTemplate(!1),t._handleTemplate(),t._updateHidenInputNameAndValue()}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;"indeterminate"===t?(n?(i._valueCashe=i.checked,i.checked=null):i.checked=i._valueCashe,i._updateHidenInputNameAndValue()):"trueContent"===t?(i.trueContent=n,i._handleTemplate(!0)):"falseContent"===t?(i.falseContent=n,i._handleTemplate(!1)):"indeterminateContent"===t?(i.indeterminateContent=n,i._handleTemplate()):"value"===t?i._updateHidenInputNameAndValue():"checked"===t?i._updateHidenInputNameAndValue():"name"===t?i._updateHidenInputName():void 0}_documentUpHandler(t){const a=this;return!a._pressed||a.readonly?void 0:"press"===a.clickMode?(t.preventDefault(),t.stopPropagation(),void(a._pressed=!1)):void(super._documentUpHandler(t),a.indeterminate=!1,a._updateHidenInputNameAndValue(),a._pressed=!1)}_mouseDownHandler(){const t=this;t.readonly||t.disabled||(t._pressed=!0,("press"===t.clickMode||"pressAndRelease"===t.clickMode)&&(t._changeCheckState("pointer"),t.$.fireEvent("click"),t.indeterminate=!1,t._updateHidenInputNameAndValue()))}}),Smart("smart-power-button",class extends Smart.ToggleButton{static get styleUrls(){return["smart.powerbutton.css"]}template(){return`<div id='container' class='smart-container'>
                 <div id='powerButtonAnimation' class ='smart-animation'></div>
                 <span id='button' class ='smart-input'></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready(),t._updateHidenInputNameAndValue()}}),Smart("smart-radio-button",class extends Smart.ToggleButton{static get properties(){return{checkMode:{value:"both",allowedValues:["both","input","label"],type:"string"},type:{value:"radio",type:"string",defaultReflectToAttribute:!0,readonly:!0},groupName:{value:"",type:"string"}}}template(){return`<div  id='container' class='smart-container'>
                 <div class ='smart-overlay'></div>
                 <span id='radioButtonInput' class ='smart-input'></span>
                 <span id='radioButtonLabel' inner-h-t-m-l='[[innerHTML]]' class ='smart-label'><content></content></span>
                 <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}static get listeners(){return{down:"_downHandler","document.up":"_documentUpHandler",mouseenter:"_elementMouseEnterHandler","radioButtonInput.mouseenter":"_radioMouseEnterHandler","radioButtonInput.mouseleave":"_radioMouseLeaveHandler",focus:"_focusHandler",blur:"_blurHandler"}}static get styleUrls(){return["smart.radiobutton.css"]}_radioMouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_radioMouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}_focusHandler(){const t=this;t.$.setAttributeValue("focus",!0)}_blurHandler(){const t=this;t.$.setAttributeValue("focus",!1)}_mouseEnterHandler(){const t=this;t.$.setAttributeValue("hover",!0)}_mouseLeaveHandler(){const t=this;t.$.setAttributeValue("hover",!1)}ready(){const t=this;super.ready(),t._handleMultipleCheckedInstances(),t._updateHidenInputNameAndValue()}_downHandler(t){const a=this,n=a.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;if(!(a.disabled||a.readonly||"input"===a.checkMode&&n!==a.$.radioButtonInput||"label"===a.checkMode&&n!==a.$.radioButtonLabel)){if(a.$.setAttributeValue("active",!0),a.hasRippleAnimation){const t=a.$.radioButtonInput.getBoundingClientRect(),n=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset;Smart.Utilities.Animation.Ripple.animate(a.$.radioButtonInput,t.left+t.width/2+n,t.top+t.height/2+i)}return a._preventAction?void(a._preventAction=!1):void(("release"===a.clickMode||"pressAndRelease"===a.clickMode)&&(a._pressed=!0),("press"===a.clickMode||"pressAndRelease"===a.clickMode)&&("pressAndRelease"===a.clickMode&&(""===a.groupName?a._checkedBeforeChange=a.parentNode.querySelector("smart-radio-button[checked]"):a._checkedBeforeChange=document.querySelector("smart-radio-button[group-name=\""+a.groupName+"\"][checked]")),a._handleMouseInteraction()))}}_elementMouseEnterHandler(){const t=this;"hover"!==t.clickMode||t.disabled||t.readonly||t._handleMouseInteraction()}_documentUpHandler(t){const a=this,n=a.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target;!a._pressed||a.disabled||a.readonly||"input"===a.checkMode&&n!==a.$.radioButtonInput||"label"===a.checkMode&&n!==a.$.radioButtonLabel||("release"===a.clickMode?a._handleMouseInteraction():(null===a._checkedBeforeChange?(a.$.fireEvent("change",{value:!1,oldValue:!0,changeType:"pointer"}),a.checked=!1):a._checkedBeforeChange._changeCheckState("pointer"),a.focus(),a._updateHidenInputNameAndValue()),a.$.setAttributeValue("active",!1),a._pressed=!1)}_handleMouseInteraction(){const t=this;t._handleTextSelection(),t._changeCheckState("pointer"),t.focus(),t._updateHidenInputNameAndValue()}_handleMultipleCheckedInstances(){const t=this,a=Array.from(document.querySelectorAll("smart-radio-button[group-name=\""+t.groupName+"\"][checked]")),n=a.length;2>n||a.forEach((t,a)=>a<n-1&&(t.checked=!1))}_changeCheckState(t){const a=this;let n=document.querySelectorAll("smart-radio-button[group-name=\""+a.groupName+"\"]");if(!0===a.checked&&"api"===t||!1===a.checked)if(0<n.length)a._changeCheckStateInGroup(n,t);else{let i=a.parentNode;n=i.querySelectorAll("smart-radio-button:not([group-name])"),a._changeCheckStateInGroup(n,t)}}_changeCheckStateInGroup(t,a){const n=this;for(let o=0;o<t.length;o++)t[o]._isUpdating=!0,t[o]===n?(n.checked=!0,n.$.fireEvent("change",{value:!0,oldValue:!1,changeType:a})):t[o].checked&&(t[o].checked=!1),t[o]._isUpdating=!1}propertyChangedHandler(t,a,n){const i=this;switch(t){case"value":i._updateHidenInputNameAndValue();break;case"checked":i._isUpdating||i._changeCheckState("api"),i._updateHidenInputNameAndValue();break;case"name":i._updateHidenInputName();break;default:super.propertyChangedHandler(t,a,n);}}}),Smart("smart-switch-button",class extends Smart.ToggleButton{static get properties(){return{inverted:{value:!1,type:"boolean"},orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"},switchMode:{value:"default",allowedValues:["default","click","drag","none"],type:"string"},clickMode:{value:"release",allowedValues:["press","release","pressAndRelease"],type:"string"}}}static get listeners(){return{"container.down":"_mouseDownHandler","document.move":"_drag","document.up":"_switchThumbDropHandler",mouseenter:"_switchButtonOnMouseEnter",mouseleave:"_switchButtonOnMouseLeave",resize:"_resizeHandler","container.resize":"_resizeHandler","document.selectstart":"_selectStartHandler"}}template(){return`<div  id='container' class='smart-container'>
                    <div  id='innerContainer' class ='smart-inner-container'>
                           <span id='falseContentContainer' inner-h-t-m-l='[[falseContent]]' class ='smart-false-content-container'></span>
                           <span id='switchThumb' class ='smart-thumb'></span>
                           <span id='trueContentContainer' inner-h-t-m-l='[[trueContent]]' class ='smart-true-content-container'></span>
                    </div>
                    <input id='hiddenInput' class ='smart-hidden-input' type='hidden'>
               </div>`}ready(){const t=this;super.ready();let a=t.animation;t.hasAnimation&&(t.animation="none"),t._supportCSSVariables=Smart.Utilities.Core.CSSVariablesSupport()&&!!window.getComputedStyle(t.$.container).getPropertyValue("--smart-switch-button-default-width"),t._htmlBindOnInitialization(),t._resizeHandler(),t._initializePrivateVariables(),t._getContainersSizeAndBreakPoint(),t.indeterminate&&(t._valueCache=t.checked,t.checked=null),t._handleTemplate(!0),t._handleTemplate(!1),t._handleTemplate(),t._updateHidenInputNameAndValue(),t._updateThumbPosition(),t.animation=a}_mouseDownHandler(t){const a=this;a.disabled||a.readonly||"none"===a.switchMode||(t.originalEvent.target.closest(".smart-thumb")===a.$.switchThumb&&("default"===a.switchMode||"drag"===a.switchMode)&&a._switchThumbDragStartHandler(t),a._isSwitchClicked=a,a._updateContentProperties(),"release"!==a.clickMode&&"click"===a.switchMode&&(a._updateStateOnClick(),a.$.fireEvent("click"),a.indeterminate=!1,a._updateHidenInputNameAndValue()))}_updateStateOnClick(){const t=this;t._changeCheckState(),t.focus()}_drag(t){const a=this;a._mouseDown&&(Smart.Utilities.Core.isMobile&&t.originalEvent.preventDefault(),a._switchThumbDragHandler(t))}_switchThumbDragStartHandler(t){const a=this;a.disabled||("click"===a.switchMode&&"release"!==a.clickMode&&(t.preventDefault(),t.stopPropagation()),a._isInactiveOn("drag")||(a._mouseDown=!0,a._getContainersSizeAndBreakPoint(),a._pointerPosition="vertical"===a.orientation?t.pageY:t.pageX,t.preventDefault()))}_selectStartHandler(t){const a=this;a._mouseDown&&t.preventDefault()}_switchThumbDragHandler(t){var a=Math.max;const n=this;if(!n._isInactiveOn("drag")){if(!1===n._mouseDown)return void n._removeDragStyles();n.hasAttribute("dragged")||n.setAttribute("dragged","");let i=n.$.innerContainer,o=n.$.container.getBoundingClientRect(),r="vertical"===n.orientation?document.body.scrollTop||document.documentElement.scrollTop:document.body.scrollLeft||document.documentElement.scrollLeft,l="vertical"===n.orientation?o.top+r:o.left+r,s="vertical"===n.orientation?n._pointerPosition-i.offsetTop:n._pointerPosition-i.offsetLeft,d=n._pointerPosition>=l&&n._pointerPosition<=l+n._switchContainerSize;const c=-1*(n.offsetWidth-n.$.switchThumb.offsetWidth),m=-1*(n.offsetHeight-n.$.switchThumb.offsetHeight);if(n._pointerPosition="vertical"===n.orientation?t.pageY:t.pageX,d){let t=n._pointerPosition-s;t<-n._switchTrackLength&&(t=-n._switchTrackLength),0<t&&(t=0),"vertical"===n.orientation?n.$.innerContainer.style.top=a(m,t)+"px":n.$.innerContainer.style.left=a(c,t)+"px"}}}_switchThumbDropHandler(){const t=this;t.hasAttribute("dragged")?t._endDrag():t._isSwitchClicked&&t._endClick(),t._mouseDown=!1,delete t._isSwitchClicked}_endDrag(){const t=this;if(t.indeterminate=!1,t._updateHidenInputNameAndValue(),!t._isInactiveOn("drag")&&t._mouseDown){t.removeAttribute("dragged");let a="vertical"===t.orientation?t.$.innerContainer.offsetTop+t.$.switchThumb.offsetTop+t.$.switchThumb.clientHeight/2:t.$.innerContainer.offsetLeft+t.$.switchThumb.offsetLeft+t.$.switchThumb.clientWidth/2;const n=a>t._switchBreakPoint;null===t.checked?n?t._changeCheckState(t.inverted):t._changeCheckState(!t.inverted):!t.inverted==(n===t.checked)&&t._changeCheckState(!t.checked),t._removeDragStyles(),t._updateThumbPosition()}}_endClick(){const t=this;t._resizeHandler();t.disabled||t.readonly||t._isInactiveOn("click")||("release"!==t.clickMode&&"pressAndRelease"!==t.clickMode||t._updateStateOnClick(),t.indeterminate=!1,t._updateHidenInputNameAndValue())}_switchButtonOnMouseEnter(){const t=this;t.disabled||t.readonly||t.$.addClass("hovered")}_switchButtonOnMouseLeave(){const t=this;t.disabled||t.readonly||t.$.removeClass("hovered")}_isInactiveOn(t){const a=this,n=a.disabled||a.readonly||a.switchMode!==t;return"default"!==a.switchMode&&n}_keyUpHandler(t){const a=this;a.disabled||a.readonly||32!==t.keyCode||"none"===a.switchMode||(a._getContainersSizeAndBreakPoint(),a._changeCheckState())}_initializePrivateVariables(){const t=this;t._switchContainerSize=t._switchTrackLength=t._switchBreakPoint=t._pointerPosition=0,t._mouseDown=!1}_changeCheckState(t){const a=this;let n=a.checked;return null===n&&void 0!==t?(a.$.fireEvent("change",{value:t,oldValue:null}),a.checked=t,void a._updateThumbPosition()):void(a.checked=!(null!==a.checked)||!a.checked,a._updateThumbPosition(),a.$.fireEvent("change",{value:a.checked,oldValue:n}),a._updateHidenInputNameAndValue())}_getContainersSizeAndBreakPoint(){const t=this;t._switchContainerSize="vertical"===t.orientation?t.$.container.clientHeight:t.$.container.clientWidth,t._switchTrackLength="vertical"===t.orientation?t._switchContainerSize-t.$.switchThumb.clientHeight:t._switchContainerSize-t.$.switchThumb.clientWidth,t._switchBreakPoint=t._switchContainerSize/2}_removeDragStyles(){const t=this;t._supportCSSVariables?t.$.innerContainer.removeAttribute("style"):t.$.innerContainer.style.left="",t._supportCSSVariables?t.$.innerContainer.removeAttribute("style"):t.$.innerContainer.style.top="",t._mouseDown=!1}propertyChangedHandler(t,a,n){const i=this;super.propertyChangedHandler(t,a,n),i._updateContentProperties();"indeterminate"===t?n?(i._valueCache=i.checked,i.checked=null):i.checked=i._valueCache:"trueContent"===t?i.trueContent=n:"falseContent"===t?i.falseContent=n:"orientation"===t?i._resizeHandler():void 0;i._getContainersSizeAndBreakPoint(),i._removeDragStyles(),i._resizeHandler()}_resizeHandler(){const t=this,a=window.getComputedStyle(t,null),n=parseInt(a.getPropertyValue("border-top-width")),i=parseInt(a.getPropertyValue("border-right-width")),o=parseInt(a.getPropertyValue("border-bottom-width")),r=parseInt(a.getPropertyValue("border-left-width")),l="vertical"===t.orientation?t.offsetHeight-(n+o):t.offsetWidth-(r+i);t._getContainersSizeAndBreakPoint(),t._supportCSSVariables?t.$.container.style.setProperty("--smart-switch-button-default-width",l+"px"):(t._innerContainerSize=l,t.$.innerContainer.style.height=t.$.innerContainer.style.width="",t.$.trueContentContainer.style.height=t.$.trueContentContainer.style.width="",t.$.falseContentContainer.style.height=t.$.falseContentContainer.style.width="","horizontal"===t.orientation?(t.$.innerContainer.style.setProperty("width",2*l-t.$.switchThumb.clientWidth+"px"),t.$.trueContentContainer.style.setProperty("width",t._switchTrackLength+"px"),t.$.falseContentContainer.style.setProperty("width",t._switchTrackLength+"px")):(t.$.innerContainer.style.setProperty("height",2*l-t.$.switchThumb.clientHeight+"px"),t.$.trueContentContainer.style.setProperty("height",t._switchTrackLength+"px"),t.$.falseContentContainer.style.setProperty("height",t._switchTrackLength+"px")),t._updateThumbPosition())}_updateThumbPosition(){const t=this;return t._supportCSSVariables||(t.inverted?!0===t.checked:!1===t.checked)||!t._innerContainerSize?void(t.$.innerContainer.style.left=t.$.innerContainer.style.top=""):void((t.inverted?!1===t.checked:t.checked)&&("horizontal"===t.orientation?(t.$.innerContainer.style.left=-1*(t._innerContainerSize-t.$.switchThumb.offsetWidth)+"px",t.$.innerContainer.style.top=""):(t.$.innerContainer.style.top=-1*(t._innerContainerSize-t.$.switchThumb.offsetHeight)+"px",t.$.innerContainer.style.left="")),null===t.checked&&("horizontal"===t.orientation?(t.$.innerContainer.style.left=-1*(t._innerContainerSize/2-t.$.switchThumb.offsetWidth/2)+"px",t.$.innerContainer.style.top=""):(t.$.innerContainer.style.top=-1*(t._innerContainerSize/2-t.$.switchThumb.offsetHeight/2)+"px",t.$.innerContainer.style.left="")))}}),Smart("smart-accordion-item",class extends Smart.ContentElement{static get properties(){return{dragged:{value:!1,type:"boolean"},expanded:{value:!1,type:"boolean"},focused:{value:!1,type:"boolean"},index:{value:null,type:"number?"},label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}static get listeners(){return{"accordionItemHeader.mouseenter":"_headerMouseEnterHandler","accordionItemHeader.mouseleave":"_headerMouseLeaveHandler","accordionItemHeader.down":"_ripple"}}template(){return`<div id="container">
                    <div id="accordionItemHeader" class ="smart-accordion-item-header smart-unselectable">
                        <span id="arrow" class ="smart-arrow"></span>
                        <span id="label" class ="smart-label" inner-h-t-m-l='[[label]]'></span>
                    </div>
                    <div id="accordionItemContent" class ="smart-accordion-item-content">
                        <div id="contentContainer" class ="smart-content-container"><content></content></div>
                    </div>
                </div>`}propertyChangedHandler(t,a,n){if(super.propertyChangedHandler(t,a,n),a=parseInt(a),n=parseInt(n),!("index"!==t||isNaN(a)||isNaN(n))){const t=this,i=t.parentElement.parentElement._items.length;0>n?n=0:n>=i&&(n=i-1),n!==a&&t.$.fireEvent("indexChange",{newIndex:n,oldIndex:a}),t.index=n}}_headerMouseEnterHandler(){const t=this;t.disabled||t.setAttribute("hovered","")}_headerMouseLeaveHandler(){const t=this;t.disabled||t.removeAttribute("hovered")}_ripple(t){const a=this;a.disabled||a.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(a.$.container,t.pageX,t.pageY)}_setIndex(t){const a=this,n=a.context;a.context=a,a.index=t,a.context=n}}),Smart("smart-accordion",class extends Smart.BaseElement{static get properties(){return{expandedIndexes:{value:[],type:"array"},expandMode:{allowedValues:["single","singleFitHeight","multiple","toggle","none"],value:"singleFitHeight",type:"string"},messages:{extend:!0,value:{en:{accordionItemRequired:"{{elementType}}: \"{{method}}\" requires an item from type \"smart-accordion-item\".",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter.",missingReference:"{{elementType}}: Missing reference to {{files}}.",noItems:"{{elementType}}: No child elements found.",overridingProperties:"{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The \"{{property1}}\" property is used by default."}},type:"object"},reorder:{value:!1,type:"boolean"}}}static get listeners(){return{down:"_downHandler",focus:"_focusHandler",indexChange:"_indexChangeHandler",keydown:"_keyDownHandler",move:"_moveHandler",resize:"_resizeHandler",styleChanged:"_resizeHandler","document.up":"_upHandler"}}template(){return`<div id="container">
                    <content></content>
                </div>`}static get styleUrls(){return["smart.accordion.css"]}ready(){super.ready();const t=this;t._createElement()}propertyChangedHandler(t,a,n){function i(){o._toggleItems("expand",[0]),o.expandedIndexes=[0]}const o=this;if("expandedIndexes"===t){if(a.toString()===n.toString())return;let t=[];if(0<o._items.length)for(let a=0,i;a<n.length;a++)if(i=parseInt(n[a]),!isNaN(i))if(o._expandModeIs(["single","singleFitHeight","toggle"])){1>t.length&&0<=i&&i<o._items.length&&t.push(i);break}else 0<=i&&i<=o._items.length&&-1===t.indexOf(i)&&t.push(i);if(0===t.length&&o._expandModeIs(["single","singleFitHeight"]))return n=a.slice(),void(o.expandedIndexes=n);n=t;const i=o._compareExpandedIndexes(a,n);return o._toggleItems("collapse",i.collapse),o._toggleItems("expand",i.expand),void(o.expandedIndexes=n)}switch(super.propertyChangedHandler(t,a,n),t){case"disabled":o._setFocusable(),o._enableDisableHandler();break;case"expandMode":if(0===o._items.length)break;if("multiple"===a&&"none"!==n||"none"===a&&"multiple"!==n){const t=o.expandedIndexes.slice(1);o._toggleItems("collapse",t),0===o.expandedIndexes.length&&o._expandModeIs(["single","singleFitHeight"])&&i()}else"toggle"===a&&o._expandModeIs(["single","singleFitHeight"])&&0===o.expandedIndexes.length&&i();if(!o._supportCSSVariables||!o._usedCSSVariables){const t=o.expandedIndexes[0];"singleFitHeight"===a?o._items[t].$.accordionItemContent.style.height="":"singleFitHeight"===n&&(o._items[t].$.accordionItemContent.style.height=o._expandedItemsContainerHeight-1+"px")}break;case"unfocusable":o._setFocusable();break;default:}}appendChild(t){const a=this;if(!a.isCompleted||t instanceof HTMLElement&&(t.classList.contains("smart-resize-trigger-container")||t.classList.contains("smart-measure-element"))){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.AccordionItem||a.error(a.localize("accordionItemRequired",{method:"appendChild"})),a.insert(a._items.length,t)}collapse(t,a){const n=this;if(t=n._validateItemsIndex(t,"collapse"),!isNaN(t)){const i=n._items[t].expanded;!i||n._expandModeIs(["single","singleFitHeight"])&&-1<n.expandedIndexes.indexOf(t)||n._collapseItem(t,a)}}expand(t,a){const n=this;if(t=n._validateItemsIndex(t,"expand"),!isNaN(t)){const i=n._items[t].expanded;i||(n._expandModeIs(["single","singleFitHeight","toggle"])&&n._toggleItems("collapse",n.expandedIndexes),n._expandItem(t,a))}}insert(t,a){const n=this,i=0===n._items.length;let o,r;if(a||("number"==typeof t?a=[{label:"",content:""}]:(a=[{label:t?t.toString():"",content:t?t.toString():""}],t=0)),a instanceof HTMLElement)a instanceof Smart.AccordionItem?o=a:n.error(n.localize("accordionItemRequired",{method:"insert"}));else if(Array.isArray(a)){r=document.createDocumentFragment();for(let t=0;t<a.length;t++){const i=n._createItem(a[t]);r.appendChild(i)}}else o=a instanceof Object?n._createItem(a):"string"==typeof a||"number"==typeof a?n._createItem({label:a.toString(),content:a.toString()}):n._createItem({label:"",content:""});t>n._items.length?o?n.$.container.appendChild(o):n.$.container.appendChild(r):o?n.$.container.insertBefore(o,n._items[t]):n.$.container.insertBefore(r,n._items[t]),o&&(o.tabIndex=n._tabIndex),n._storeItems(),i&&n._expandModeIs(["single","singleFitHeight"])?n._expandItem(0):n.expandedIndexes=n._getExpandedIndexes(),n._updateExpanedContentHeight(),n._updateInlineHeight(),n._storeItemsCoordinates(),n._updateItemsIndexProperty()}insertBefore(t,a){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t!==void 0&&a!==void 0&&t instanceof Smart.AccordionItem&&a instanceof Smart.AccordionItem||n.error(n.localize("accordionItemRequired",{method:"insertBefore"})),a!==void 0&&null!==a?(!n.contains(a)&&n.error(n.localize("referenceNodeNotChild",{argument:"referenceNode"})),n.insert(n._items.indexOf(a),t)):n.insert(n._items.indexOf(a),t)}remove(t){const a=this;let n;if(t instanceof HTMLElement)t instanceof Smart.AccordionItem?!a.contains(t)&&a.error(a.localize("referenceNodeNotChild",{argument:"node"})):a.error(a.localize("accordionItemRequired",{method:"remove"})),n=t,t=n.index;else{if(t=a._validateItemsIndex(t,"remove"),isNaN(t))return;n=a._items[t]}n&&(n.parentNode.removeChild(n),a._storeItems(),a._expandModeIs(["singleFitHeight"])&&(a._preventAnimation=!0),a._expandModeIs(["single","singleFitHeight"])&&t===a.expandedIndexes[0]&&0<a._items.length&&(a._expandItem(0),a._selectedItem=a._items[0],a._selectedItemIndex=0,a._itemIsFocussed=!0),a.expandedIndexes=a._getExpandedIndexes(),a._updateExpanedContentHeight(),a._updateInlineHeight(),a._storeItemsCoordinates(),a._updateItemsIndexProperty())}removeChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}return(t instanceof HTMLElement||a.error(a.localize("accordionItemRequired",{method:"removeChild"})),"smart-resize-trigger-container"===t.className)?void super.removeChild(t):void(t instanceof Smart.AccordionItem||a.error(a.localize("accordionItemRequired",{method:"removeChild"})),a.contains(t)||a.error(a.localize("referenceNodeNotChild",{argument:"node"})),a.remove(t))}_setFocusable(){const t=this;if(t.disabled||t.unfocusable){t.removeAttribute("tabindex");for(let a=0;a<t._items.length;a++)t._items[a].removeAttribute("tabindex");return}t.tabIndex=t._tabIndex;for(let a=0;a<t._items.length;a++)t._items[a].tabIndex=t._tabIndex}update(t,a){const n=this;if(t=n._validateItemsIndex(t,"update"),!isNaN(t)){let i=n._items[t];if(a||n.error(n.localize("invalidSettings",{elementType:n.nodeName.toLowerCase(),method:"update"})),i)if(Array.isArray(a)&&(0===a.length?a={label:"",content:""}:a=a[0]),"string"==typeof a)i.content=a;else for(let t in a)i[t]=a[t];const o=n._getItemsHeights(t);n._updateExpanedContentLocalHeight(n._items[t],o),n._updateInlineHeight(),n._storeItemsCoordinates()}}_adjustHeightValue(t){const a=this,n=a._items.length;let o,r;for(let l=0;l<n&&(a._items[l].expanded?o=a._items[l]:r=a._items[l],!(o&&r));l++);if(o||(o=a._items[0]),o||r){const a=o.expanded;o.expanded=!0;const i=window.getComputedStyle(o,null),l=!!r&&window.getComputedStyle(r,null),s=parseInt(i.getPropertyValue("margin-top"))+parseInt(i.getPropertyValue("margin-bottom")),d=l?parseInt(l.getPropertyValue("margin-top"))+parseInt(l.getPropertyValue("margin-bottom")):0;return o.expanded=a,t-((n-1)*d+s)}}_collapseItem(t,a){const n=this;let i=n._items[t];if(i.expanded&&!("none"===n.expandMode&&a)){if(i.expanded=!1,n.$.fireEvent("collapsing",{index:t,label:i.label,content:i.content.innerHTML}),-1<n.expandedIndexes.indexOf(t)){let a=n.expandedIndexes.indexOf(t),i=n.expandedIndexes.slice();i.splice(a,1),n.expandedIndexes=i}i.$.accordionItemContent.style.height="",n._handleAnimationsDuration(i,t,"collapsed")}}_compareExpandedIndexes(t,a){let n=[],o=[],r=[],l=t.length,s=a.length;for(let r=0;r<l;r++)-1===a.indexOf(t[r])?-1===n.indexOf(t[r])&&n.push(t[r]):-1===o.indexOf(t[r])&&o.push(t[r]);for(let n=0;n<s;n++)-1===o.indexOf(a[n])&&r.push(a[n]);return{collapse:n,expand:r}}_createElement(){const t=this;t._reorderItemsByIndex(),t._usedCSSVariables=!!window.getComputedStyle(t.$.container).getPropertyValue("--smart-accordion-animation-duration"),t._supportCSSVariables=Smart.Utilities.Core.CSSVariablesSupport(),t._storeItems(),t._enableDisableHandler(),t._expandedIndexesHandler(),t._updateExpanedContentHeight(),t._tabIndex=0>=t.tabIndex?0:t.tabIndex,t._setFocusable(),t._updateItemsIndexProperty(),t._updateInlineHeight();for(let a=0;a<t._items.length;a++)t._items[a].$.arrow.classList.add("smart-animate-trigger")}_createItem(t){const a=this,n=document.createElement("smart-accordion-item");if(t)return(n.disabled=a.disabled,-1<a._tabIndex&&(n.tabIndex=a._tabIndex),"string"==typeof t||"number"==typeof t)?(n.label=t+"",n.content=t+"",n):(n.label=t.label||"",n.content=t.content||"",n)}_downHandler(t){const a=this;if(a.disabled||a.readonly||"none"===a.expandMode||a._toggled)return;const n=a.enableShadowDOM?a.shadowRoot.elementFromPoint(t.pageX,t.pageY):t.originalEvent.target,i=n.closest(".smart-accordion-item-header"),o=n.closest("smart-accordion-item");return i?void(a._selectedItem=o,a._itemIsPressed=a._itemIsFocussed=!0,a._reorderedIndex=a._selectedItemIndex=a._items.indexOf(o),a._storeItemsCoordinates()):void(o&&(o.focused=!0))}_enableDisableHandler(){const t=this;if(t.disabled)for(let a=0;a<t._items.length;a++)t._items[a].disabled=!0;else for(let a=0;a<t._items.length;a++)t._items[a].disabled=!1}_expandedIndexesHandler(){const t=this;let a=t._getExpandedIndexes("initial"),n=a.length,i=t.expandedIndexes.length;if(0!==t._items.length){if(0===i&&0<n&&(t.expandedIndexes=a,i=n),t._expandModeIs(["multiple","none"])||1===i)return void t._toggleItems("expand",t.expandedIndexes);switch(t.expandMode){case"single":case"singleFitHeight":0===i?t._toggleItems("expand",[0]):1<i&&(t._toggleItems("collapse",t.expandedIndexes.splice(0,1)),t._toggleItems("expand",t.expandedIndexes));break;case"toggle":1<i&&(t._toggleItems("collapse",t.expandedIndexes.splice(0,1)),t._toggleItems("expand",t.expandedIndexes));break;default:}}}_expandItem(t,a){const n=this;let i=n._items[t];if(!(i.expanded||"none"===n.expandMode&&a)){if(i.$.container.style.getPropertyValue("--smart-accordion-expanded-content-local-height")||(i.expanded=!0,i.$.container.style.setProperty("--smart-accordion-expanded-content-local-height",i.$.accordionItemContent.scrollHeight+"px"),i.expanded=!1),i.expanded=!0,n.$.fireEvent("expanding",{index:t,label:i.label,content:i.content.innerHTML}),-1===n.expandedIndexes.indexOf(t)){let a=n.expandedIndexes.slice();a.push(t),n.expandedIndexes=a}n._supportCSSVariables&&n._usedCSSVariables||"singleFitHeight"!==n.expandMode||(i.$.accordionItemContent.style.height=n._expandedItemsContainerHeight-1+"px"),n._handleAnimationsDuration(i,t,"expanded")}}_expandModeIs(t){const a=this;return-1<t.indexOf(a.expandMode)}_focusHandler(){const t=this;t.disabled||0===t._items.length||(t._itemIsFocussed?t._selectedItem.focused=!1:t._items[0].focused=!1)}_getExpandedIndexes(t){const a=this,n=[];for(let o=0;o<a._items.length;o++)"initial"===t?a._items[o].hasAttribute("expanded")&&(n.push(o),a._items[o].removeAttribute("expanded")):a._items[o].expanded&&n.push(o);return n.slice()}_getItemsHeights(t){const a=this,n=a._items,o=n.length;let r=[];if(0!==o){if(!isNaN(t)&&0<=t&&t<o){const a=n[t];let i=0;return a.expanded?i=a.$.accordionItemContent.scrollHeight:(a.expanded=!0,i=a.$.accordionItemContent.scrollHeight,a.expanded=!1),i+"px"}for(let t=0;t<o;t++){const a=n[t];let i=0;a.expanded?i=a.$.accordionItemContent.scrollHeight:(a.expanded=!0,i=a.$.accordionItemContent.scrollHeight,a.expanded=!1),r.push(i+"px")}return a._heightCalcAfterInitialization=!0,r}}_handleAnimationsDuration(t,a,n){const i=this;if(!i._animationAfterInitialization)return void(i._animationAfterInitialization=!0);if(1===i._items.length&&"singleFitHeight"===i.expandMode)return void i.$.fireEvent(n,{index:a,label:t.label,content:t.content.innerHTML});if(!1===i.hasAnimation||!i._supportCSSVariables)return void i.$.fireEvent(n,{index:a,label:t.label,content:t.content.innerHTML});if(i._preventAnimation)return i.$.fireEvent(n,{index:a,label:t.label,content:t.content.innerHTML}),void(i._preventAnimation=!1);i._toggled=!0;let o=window.getComputedStyle(i).animationDuration,r;if(-1<o.indexOf("ms"))o=parseFloat(o.substring(0,o.length-2)),r=isNaN(o)||0>o?0:o-50;else if(-1<o.indexOf("s"))o=parseFloat(o.substring(0,o.length-1)),r=isNaN(o)||0>o?0:1e3*o-50;else return void i.$.fireEvent(n,{index:a,label:t.label,content:t.content.innerHTML});t instanceof Smart.AccordionItem&&(t.$.addClass("smart-toggled-item"),i.$container.addClass("smart-toggling"),setTimeout(function(){t.$.removeClass("smart-toggled-item"),i.$container.removeClass("smart-toggling"),i.$.fireEvent(n,{index:a}),i._toggled=!1},r))}_indexChangeHandler(t){const a=this,n=a._items,i=n.length,o=t.detail;o.newIndex>=i?a.$.container.appendChild(n[o.oldIndex]):o.newIndex>o.oldIndex?a.$.container.insertBefore(n[o.oldIndex],n[o.newIndex+1]):a.$.container.insertBefore(n[o.oldIndex],n[o.newIndex]);let r=a.enableShadowDOM?a.shadowRoot.querySelectorAll("smart-accordion-item"):a.getElementsByTagName("smart-accordion-item");a._items=Array.from(r),a._updateItemsIndexProperty()}_keyDownHandler(t){function a(t){t===d||isNaN(t)||(s.focused=!1,d=t,s=o._items[d],s.focused=!0)}function n(t){return"up"===t?void(0>d-1?a(0):a(d-1)):void(d+1>l?a(l):a(d+1))}const o=this,i=t.key;if("none"===o.expandMode||o.disabled||o.readonly||o._toggled)return;if(-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home"," ","Enter","Tab"].indexOf(i)||!(document.activeElement instanceof Smart.AccordionItem))return;"Tab"!==i&&t.preventDefault();let r=o._items.length,l=r-1,s,d;for(let a=0,n;a<r;a++)n=o._items[a],n.focused&&(s=n,d=a);switch(i){case"Tab":t.shiftKey?n("up"):n("down");break;case"ArrowLeft":o.collapse(d);break;case"ArrowDown":n("down");break;case"ArrowRight":o.expand(d);break;case"ArrowUp":n("up");break;case"End":a(l);break;case"Home":a(0);break;case" ":case"Enter":if(s.expanded)return void o.collapse(d);o.expand(d);break;default:}}_moveHandler(t){var a=Math.abs;const n=this;if(n._itemIsPressed&&n.reorder&&!n.readonly&&!(2>n._items.length))if(n._dragStart){if(n.$container.addClass("smart-reordering"),!n._dragging){const a=n._selectedItem;n.$.fireEvent("dragStart",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,index:n._selectedItemIndex,label:a.label,content:a.content.innerHTML}),n._selectedItem.dragged=n._dragging=!0}const o=t.clientY;let r=!1;for(let t=0;t<n._itemsCoordinates.length;t++){const a=n._itemsCoordinates[t];if(o>=a.fromY&&o<=a.toY){r=t;break}}if(!0!==n._preventReorder&&!1!==r&&r!==n._reorderedIndex){if(1<a(n._reorderedIndex-r)){const t=0>n._reorderedIndex-r?-1:1;n._swapItems(n._reorderedIndex,r+t)}n._swapItems(n._reorderedIndex,r),n._reorderedIndex=r,n._storeItemsCoordinates()}n._preventReorder=!!(o<n._itemsCoordinates[n._reorderedIndex].fromY||o>n._itemsCoordinates[n._reorderedIndex].toY),1<a(n._reorderedIndex-r)&&(n._preventReorder=!1)}else n._dragStart=!0}_reorderItemsByIndex(){const t=this;let a=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-accordion-item"):t.getElementsByTagName("smart-accordion-item"),n=Array.from(a),i=!1,o=n.map(function(t){return null===t.index?t.index=0:i=!0,t.index});if(i){const r=n.length;if(!(2>r)){let n=o.slice();if(n.sort(function(t,a){return parseInt(t)-parseInt(a)}),o.toString()!==n.toString())for(let o=0;o<r;o++){let i;for(let t=0;t<r;t++)a[t].index===n[o]&&(i=a[t]);t.$.container.insertBefore(i,a[o])}}}}_resizeHandler(){const t=this;t._updateExpanedContentHeight(),t._updateInlineHeight(),t._storeItemsCoordinates()}_storeItems(){const t=this,a=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-accordion-item"):t.getElementsByTagName("smart-accordion-item");if(t._items=Array.from(a),0===t._items.length)return void t.$container.addClass("smart-empty");t.$container.removeClass("smart-empty");const n=t._getItemsHeights();for(let a=0;a<t._items.length;a++)t._updateExpanedContentLocalHeight(t._items[a],n[a])}_storeItemsCoordinates(){const t=this;if(!t.disabled&&t.reorder){const a=[];for(let n=0;n<t._items.length;n++){const i=t._items[n],o=i.getBoundingClientRect();a.push({fromY:o.top+(window.scrollY||window.pageYOffset),toY:o.bottom+(window.scrollY||window.pageYOffset)})}t._itemsCoordinates=a}}_swapItems(t,a){const n=this,i=Math.min(t,a),o=Math.max(t,a),r=n._items;let l=n.expandedIndexes.slice();if(n._items[t].expanded&&!n._items[a].expanded){const i=l.indexOf(t);l[i]=a,n.expandedIndexes=l.slice()}else if(n._items[a].expanded&&!n._items[t].expanded){const i=l.indexOf(a);l[i]=t,n.expandedIndexes=l.slice()}n.selectedIndex=n.selectedIndex===t?a:t,n.$.container.insertBefore(r[o],r[i]),function(t,a,n){const i=t[n];t[n]=t[a],t[a]=i}(r,t,a),n._items[t].$.removeClass("hovered"),n._reorderedIndex=a}_toggleItems(t,a){const n=this,o=a.length;if(0<o)for(let r=0;r<o;r++)n["_"+t+"Item"](a[r])}_updateExpanedContentHeight(){const t=this;t.$.container.style.setProperty("--smart-accordion-item-header-height","");const a=t._items.length,n=t.$.container.offsetHeight,o=t._items[t.expandedIndexes[0]];let r=0,l=0,s=0,d=0;if(1===a){let a=t._items[0];a.expanded=!1,r=a.offsetHeight,l=a.$.accordionItemHeader.offsetHeight,a.expanded=!0}else for(;0===r&&d<a;){const a=t._items[d];a instanceof Smart.AccordionItem&&!a.expanded&&(r=a.offsetHeight,l=a.$.accordionItemHeader.offsetHeight),d++}if(1<a&&o instanceof Smart.AccordionItem){const t=o.$.accordionItemHeader.offsetHeight;s=t-l}const c=getComputedStyle(t.$.root),m=r*a;let p=n-m-s-parseFloat(c.paddingBottom)-parseFloat(c.paddingTop);"singleFitHeight"===t.expandMode&&(p=t._adjustHeightValue(p)),p=0<=p?p:0,t.$.container.style.setProperty("--smart-accordion-expanded-content-height",p+"px"),t.$.container.style.setProperty("--smart-accordion-item-header-height",l+"px"),t._expandedItemsContainerHeight=p}_updateExpanedContentLocalHeight(t,a){const n=this;n._supportCSSVariables&&n._usedCSSVariables&&t.$.container.style.setProperty("--smart-accordion-expanded-content-local-height",a)}_updateInlineHeight(){const t=this;t._supportCSSVariables&&t._usedCSSVariables||"singleFitHeight"!==t.expandMode||0===t._items.length||(t._items[t.expandedIndexes[0]].$.accordionItemContent.style.height=t._expandedItemsContainerHeight-1+"px")}_updateItemsIndexProperty(){const t=this;let a=[];for(let n=0;n<t._items.length;n++)t._items[n]._setIndex(n),t._items[n].expanded&&a.push(n);t.expandedIndexes=a.slice()}_upHandler(t){const a=this;if(!(!a._itemIsPressed||a.disabled||a.readonly)){for(let t=0;t<a._items.length;t++)t!==a._selectedItemIndex&&(a._items[t].focused=!1);if(a._selectedItem.focused=!0,!a._dragging)a._selectedItem.expanded?a.collapse(a._selectedItemIndex,!0):a.expand(a._selectedItemIndex,!0);else{const n=a._selectedItem;a.$container.removeClass("smart-reordering"),a.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,index:a._selectedItemIndex,label:n.label,content:n.content.innerHTML})}a._reorderedIndex=void 0,a._dragStart=!1,a._dragging=!1,a._itemIsPressed=!1,a._selectedItem.dragged=!1,a._updateItemsIndexProperty()}}_validateItemsIndex(t,a){const n=this;return isNaN(parseInt(t))||0>t||t>n._items.length-1?void n.log(n.localize("indexOutOfBound",{elementType:n.nodeName.toLowerCase(),method:a})):parseInt(t)}}),Smart("smart-calendar",class extends Smart.BaseElement{static get properties(){return{animationSettings:{value:null,type:"object"},calendarMode:{value:"default",allowedValues:["default","classic"],type:"string"},dayNameFormat:{value:"firstTwoLetters",allowedValues:["narrow","firstTwoLetters","long","short"],type:"string"},dateFormatFunction:{value:null,type:"function"},disableAutoNavigation:{value:!1,type:"boolean"},displayMode:{value:"month",allowedValues:["month","year","decade"],type:"string"},displayModeView:{value:"table",allowedValues:["table","list"],type:"string"},dropDownHeight:{value:"200",type:"string"},dropDownWidth:{value:"initial",type:"string"},firstDayOfWeek:{value:0,type:"number",defaultValue:0,validator:"_firstDayOfWeekValidator"},footerTemplate:{value:null,type:"any"},headerTemplate:{value:null,type:"any"},hideDayNames:{value:!1,type:"boolean"},hideOtherMonthDays:{value:!1,type:"boolean"},hideTooltipArrow:{value:!1,type:"boolean"},importantDates:{value:[],type:"array",defaultValue:[]},importantDatesTemplate:{value:null,type:"any"},max:{value:new Date(2100,1,1),type:"any",defaultValue:new Date(2100,1,1)},min:{value:new Date(1900,1,1),type:"any",defaultValue:new Date(1900,1,1)},months:{value:1,type:"number",defaultValue:1,validator:"_monthsValidator"},monthNameFormat:{value:"long",allowedValues:["narrow","firstTwoLetters","long","short","2-digit","numeric"],type:"string"},name:{value:"",type:"string"},restrictedDates:{value:[],type:"array",defaultValue:[]},scrollButtonsNavigationMode:{value:"landscape",allowedValues:["portrait","landscape"],type:"string"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},selectedDates:{value:[],type:"array"},selectionMode:{value:"default",allowedValues:["none","default","one","many","zeroOrMany","oneOrMany","zeroOrOne","week"],type:"string"},spinButtonsDelay:{value:80,type:"number"},spinButtonsInitialDelay:{value:0,type:"number"},titleTemplate:{value:null,type:"any"},tooltip:{value:!1,type:"boolean"},tooltipDelay:{value:100,type:"number"},tooltipPosition:{value:"top",allowedValues:["bottom","top","left","right","absolute"],type:"string"},tooltipTemplate:{value:null,type:"any"},view:{value:"portrait",allowedValues:["landscape","portrait"],type:"string"},viewSections:{value:["header"],type:"array"},weekNumbers:{value:!1,type:"boolean"},weeks:{value:6,type:"number",defaultValue:6,validator:"_weeksValidator"},yearFormat:{value:"numeric",allowedValues:["2-digit","numeric"],type:"string"}}}static get listeners(){return{"container.down":"_downHandler","document.up":"_documentUpHandler","container.move":"_moveHandler","container.wheel":"_containerWheelHandler","body.focus":"_bodyFocusStateHandler","body.blur":"_bodyBlurStateHandler","header.click":"_headerClickHandler","header.change":"_headerChangeHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler","listViewContainer.keydown":"_listViewContainerKeyDownHandler","listViewContainer.change":"_listViewContainerChangeEventHandler",mouseenter:"_mouseEventsHandler",mouseleave:"_mouseEventsHandler","container.mouseover":"_mouseEventsHandler","container.mouseout":"_mouseEventsHandler","tooltip.open":"_tooltipEventHandler","tooltip.close":"_tooltipEventHandler"}}static get methods(){return{select:"select(date=new Date(): date|string): void",clearSelection:"clearSelection(): void",today:"today(): date",navigate:"navigate(step: int): bool"}}static get styleUrls(){return["smart.button.css","smart.dropdownlist.css","smart.dropdown.css","smart.tooltip.css","smart.calendar.css"]}template(){return`<div id="container">
                    <div id="title" class="smart-calendar-title">
                        <div id="yearContainer" class="smart-calendar-year-container"></div>
                        <div id="dateContainer" class="smart-calendar-date-container smart-calendar-selected"></div>
                    </div>
                    <div id="calendarContainer" class="smart-calendar-container">
                        <div id="header" class="smart-calendar-header">
                            <smart-repeat-button prev-month class="smart-calendar-button" id="previousMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                <div class="smart-arrow">&#xe809</div>
                            </smart-repeat-button>
                            <div id="dateElement" class="smart-calendar-date-element">
                                <div id="defaultHeaderDate"></div>
                                <div id="classicHeaderDate">
                                    <smart-drop-down-list class="smart-calendar-month-element" id="monthElement" drop-down-position="bottom" selection-mode="one" disabled="[[disabled]]" readonly="[[readonly]]" drop-down-width="[[dropDownWidth]]" drop-down-height="[[dropDownHeight]]" theme="[[theme]]">
                                    </smart-drop-down-list>
                                    <input class="smart-calendar-year-element" id="yearElement" disabled="[[disabled]]" readonly="[[readonly]]"/>
                                    <span class="smart-calendar-year-elements">
                                        <smart-repeat-button next-year class="smart-calendar-button" id="nextYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                            <span class="smart-arrow">&#xe801</span>
                                        </smart-repeat-button>
                                        <smart-repeat-button prev-year class="smart-calendar-button" id="previousYearButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                            <span class="smart-arrow">&#xe804</span>
                                        </smart-repeat-button>
                                    </span>
                                </div>
                            </div>
                            <smart-repeat-button next-month class="smart-calendar-button" id="nextMonthButton" animation="[[animation]]" initial-delay="[[spinButtonsInitialDelay]]" delay="[[spinButtonsDelay]]" disabled="[[disabled]]" readonly="[[readonly]]">
                                <div class="smart-arrow">&#xe810</div>
                            </smart-repeat-button>
                        </div>
                        <div id="body" class="smart-content smart-calendar-body">
                           <div id="monthsContainer" class="smart-calendar-months-container">
                              <div id="month" class="smart-calendar-month">
                                   <div id="monthName" class="smart-calendar-month-name"></div>
                                   <div id="weekTitles" class="smart-calendar-week-titles">
                                       <div class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                       <div  class="smart-calendar-week-title"></div>
                                   </div>
                                   <div id="weeks" class="smart-calendar-weeks">
                                        <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                        </div>
                                        <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                       <div class="smart-calendar-week">
                                           <div class="smart-calendar-week-number"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"></div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                           <div class="smart-calendar-cell"> </div>
                                       </div>
                                   </div>
                                </div>
                            </div>
                            <div id="dateViewContainer" class="smart-calendar-date-view-container smart-hidden">
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                                    <div class="smart-calendar-cell"></div>
                            </div>
                            <div id="monthsSeparator" class="smart-calendar-month-separator"></div>
                            <div id="nextMonthsContainer" class="smart-calendar-next-months-container"></div>
                            <smart-list-box item-height="30" unfocusable id="listViewContainer" selection-mode="one" class="smart-calendar-list-view smart-hidden" animation="simple"></smart-list-box>
                            <div id="animationPanel" class="smart-calendar-animation-panel smart-hidden"></div>
                        </div>
                        <div id="footer" class="smart-calendar-footer smart-hidden">
                            <div id="selectedDatesRange"></div>
                        </div>
                        <smart-tooltip id="tooltip" open-mode="manual" arrow
                                   tooltip-template="[[tooltipTemplate]]"
                                   position="[[tooltipPosition]]"
                                   delay="[[tooltipDelay]]"
                                   disabled="[[disabled]]">
                         </smart-tooltip>
                        <input id="hiddenInput" type="hidden" name="[[name]]">
                    </div>
                </div>`}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const o=this;switch(t){case"animationSettings":o._applyAnimationSettings();break;case"disabled":case"unfocusable":o._setFocusable();break;case"calendarMode":o.displayMode="month",o._refreshCalendarMode(),o._setDisplayModeContent();break;case"dayNameFormat":o._refreshDayOfWeekTitles(o.$.month);break;case"dateFormatFunction":{let t=o.$.monthsContainer.children;for(let a=0;a<t.length;a++)t[a].firstElementChild.innerHTML=n?n(t[a]._date):o._monthsNames[t[a]._date.getMonth()]+" "+t[a]._date.toLocaleDateString(o.locale,{year:o.yearFormat});o._refreshHeaderTitle();break}case"displayMode":o._setDisplayMode(a,n);break;case"displayModeView":o._applyAnimationSettings(!0),"month"!==o.displayMode&&o._setDisplayModeContent();break;case"firstDayOfWeek":o._handleMonths(),o._refreshDayOfWeekTitles();break;case"hideTooltipArrow":o.$.tooltip.arrow=!n;break;case"titleTemplate":case"headerTemplate":case"footerTemplate":o._handleLayoutTemplate(o.$[t.split(/[T]/)[0]],n),"titleTemplate"===t?o._refreshTitle():"headerTemplate"===t?o._refreshHeaderTitle():o._refreshFooter();break;case"importantDates":o.importantDates=o._getValidDates(n),o._refreshImportantDates();break;case"importantDatesTemplate":o._handleImportantDateTemplate(),o._refreshImportantDates();break;case"locale":o._refreshMonthNames(),o._refreshDayOfWeekTitles(),o._refreshHeaderTitle(),o._refreshTitle(),o._refreshFooter(),o.displayMode&&"month"!==o.displayMode&&o._setDisplayModeContent();break;case"max":case"min":o._validateMinMax(t,n,a),o._validateSelectedDates(),o._noFocusingRequired=!1,o._refreshHeaderElements();break;case"months":o._handleMonths();break;case"monthNameFormat":o._refreshCalendarMode(),o._refreshHeaderTitle();break;case"restrictedDates":o._setRestrictedDates(o.restrictedDates=o._getValidDates(n));break;case"rightToLeft":o._refreshDayOfWeekTitles(),o._handleMonths();break;case"scrollButtonsNavigationMode":o._setScrollButtonsNavigationMode();break;case"selectedDates":if(o._clearSelection(!0),o._validateSelectedDates(o._getValidDates(n)),o._applySelectionMode(!0),o._viewDates){let t=o.selectedDates[o.selectedDates.length-1];o._isDateInView(t)?o.selectedDates.map(t=>o._selectDate(t,!0,!0)):o._handleMonths(t)}o._refreshFooter(),o._setWeeksVisibility(o.$.monthsContainer),o.$.hiddenInput.value=o.selectedDates.toString(),o.$.fireEvent("change",{value:o.selectedDates}),o._refreshTitle();break;case"selectionMode":o._applySelectionMode(),o._refreshTitle();break;case"view":o._refreshTitle();break;case"viewSections":-1<n.indexOf("title")?o.$title.removeClass("smart-hidden"):o.$title.addClass("smart-hidden"),o._refreshTitle(),-1<n.indexOf("header")?o.$header.removeClass("smart-hidden"):o.$header.addClass("smart-hidden"),o._refreshHeaderTitle(),-1<n.indexOf("footer")?o.$footer.removeClass("smart-hidden"):o.$footer.addClass("smart-hidden"),o._refreshFooter();break;case"weeks":o._setWeeksVisibility(o.$.monthsContainer);break;case"yearFormat":if(o._refreshCalendarMode(),o._refreshFooter(),1<o.months&&"month"===o.displayMode){let t=o._animationStarted?o.$.nextMonthsContainer.children:o.$.monthsContainer.children;for(let a=0;a<t.length;a++)t[a].firstElementChild.innerHTML=o.dateFormatFunction?o.dateFormatFunction(t[a]._date):o._monthsNames[t[a]._date.getMonth()]+" "+t[a]._date.toLocaleDateString(o.locale,{year:n})}o._refreshTitle(),o._refreshHeaderTitle();}}ready(){super.ready();const t=this;t._keysPressed={},t._applyAnimationSettings(),t.importantDates=t._getValidDates(t.importantDates),t.restrictedDates=t._getValidDates(t.restrictedDates),t._refreshMonthNames(),t._validateMinMax(),t._validateSelectedDates(t._getValidDates(t.selectedDates)),t._handleLayoutTemplate(t.$.title,t.titleTemplate),t._handleLayoutTemplate(t.$.header,t.headerTemplate),t._handleLayoutTemplate(t.$.footer,t.footerTemplate),t._handleImportantDateTemplate(),t._setFocusable(),t._refreshDayOfWeekTitles(),t._applySelectionMode(!0),t._handleMonths(0===t.selectedDates.length?new Date(new Date().setHours(0,0,0,0)):t.selectedDates[t.selectedDates.length-1]),t._updateViewSectionsVisibility(),t._setScrollButtonsNavigationMode(),t._refreshCalendarMode(),t._setDisplayMode(),t._refreshTitle(),t._refreshFooter(),t._refreshImportantDates(),t.$.monthElement&&t.$.monthElement._setDropDownSize(),t._changeEventFired=0}_updateViewSectionsVisibility(){const t=this;-1<t.viewSections.indexOf("title")?t.$title.removeClass("smart-hidden"):t.$title.addClass("smart-hidden"),-1<t.viewSections.indexOf("header")?t.$header.removeClass("smart-hidden"):t.$header.addClass("smart-hidden"),-1<t.viewSections.indexOf("footer")?t.$footer.removeClass("smart-hidden"):t.$footer.addClass("smart-hidden")}clearSelection(){this._clearSelection()}_setFocusable(){function t(t,a){return a?t&&t instanceof a?("function"==typeof t._setFocusable&&t.isCompleted?t.unfocusable=-1>=n:t.setAttribute("tabindex",n),t):void 0:void 0}const a=this;let n=0<a.tabIndex?a.tabIndex:0;(a.disabled||a.unfocusable)&&(n=-1),a.$.previousMonthButton=t(a.$.previousMonthButton,Smart.Button),a.$.nextMonthButton=t(a.$.nextMonthButton,Smart.Button),a.$.nextYearButton=t(a.$.nextYearButton,Smart.Button),a.$.previousYearButton=t(a.$.previousYearButton,Smart.Button),a.$.monthElement=t(a.$.monthElement,Smart.DropDownList),a.$.yearElement=t(a.$.yearElement,HTMLInputElement),-1<a.viewSections.indexOf("title")&&(a.$.dateContainer.setAttribute("tabindex",n),a.$.yearContainer.setAttribute("tabindex",n)),a.$.body.setAttribute("tabindex",n),"default"===a.calendarMode?a.$.dateElement.setAttribute("tabindex",n):a.$.dateElement.removeAttribute("tabindex"),a.tabIndex=a.readonly&&!a.disabled?0<a.tabIndex?a.tabIndex:0:n}static get requires(){return{"Smart.Tooltip":"smart.tooltip.js"}}navigate(t){const a=this;if(t=parseInt(t),isNaN(t)||0===t)return!1;const n=a._getNextDate(t);return!!n&&("month"===a.displayMode?(a.hasAnimation?(a._animateNavigation(n,t),a.$nextMonthsContainer.hasClass("smart-date-view-container")&&a.$nextMonthsContainer.removeClass("smart-date-view-container")):(a._handleMonths(n),a._refreshHeaderElements(),a._refreshHeaderTitle()),!0):(a.hasAnimation?(a.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),"list"===a.displayModeView?a._setDisplayModeContent(n):(!a._navigationDate||a._navigationDate.getTime()!==n.getTime())&&a._animateNavigation(n,t)):a._setDisplayModeContent(n),!0))}select(t){const a=this;"undefined"!=typeof a._viewDates[0]&&"none"!==a.selectionMode&&t&&(t=a._getValidDate(t),!(t instanceof Date)||"one"===a.selectionMode&&-1<a.selectedDates.map(Number).indexOf(t.getTime())||t.getTime()<a.min.getTime()||t.getTime()>a.max.getTime()||(("one"===a.selectionMode||"default"===a.selectionMode||"zeroOrOne"===a.selectionMode)&&a._clearSelection(!0),a._selectDate(t),1===a.selectedDates.length&&!a._isDateInView(a.selectedDates[0])&&a._handleMonths(a.selectedDates[0])))}today(){const t=this;let a=new Date;return a.setHours(0,0,0,0),a.getTime()<t.min.getTime()||a.getTime()>t.max.getTime()?a=new Date(t.max):t.selectedDates=[a],t._handleMonths(a),a}_animateNavigation(t,a,n){function i(){let t=0<a?l.$.body[l._animationSettings.scrollSize]>=d:0===l.$.body[l._animationSettings.scrollSize],n=l._scrollStep/2;return t?void l._animateNavigationCompleted():void(0<a&&l.$.body[l._animationSettings.scrollSize]>d*l._animationSettings.easeThreshold?(n=r(l.$.body[l._animationSettings.scrollSize]/l._animationSettings.stepEaseSize,o(n-(d-l.$.body[l._animationSettings.scrollSize])*l._animationSettings.step)),l._scrollStep=l._scrollStep*l._animationSettings.step+n):0>a&&l.$.body[l._animationSettings.scrollSize]<d*l._animationSettings.easeThreshold&&(n=r(l.$.body[l._animationSettings.scrollMax]/l._animationSettings.stepEaseSize,o(n-l.$.body[l._animationSettings.scrollSize]*l._animationSettings.step)),l._scrollStep=l._scrollStep*l._animationSettings.step+n),l.$.body[l._animationSettings.scrollSize]+=0<a?l._scrollStep:-l._scrollStep,l._animationId=requestAnimationFrame(i))}var o=Math.abs,r=Math.max;const l=this;l._navigationDate=t,l._animationSettings||l._applyAnimationSettings(),l.$animationPanel.addClass("smart-hidden"),l.$.dateViewContainer.style.transform="",l.$.dateViewContainer.style.opacity="",l.$.monthsContainer.style.transform="",l.$.monthsContainer.style.opacity="";const s="month"===l.displayMode?l.$.monthsContainer:l.$.dateViewContainer,d=l.$.body[l._animationSettings.scrollMax]-l.$.body[l._animationSettings.size];l._scrollStep=l.$.body[l._animationSettings.size]*l._animationSettings.startSpeed,l._animationStarted=!0,"month"===l.displayMode?l._handleMonths(t,l.$.nextMonthsContainer):(l._setCellState(l._focusedCell,"focus",!1),l._setDisplayModeContent(t,l.$.nextMonthsContainer)),n||(0<a?(s.style.order=1,l.$.nextMonthsContainer.style.order=3,(!l._animationStarted||l._animationStarted&&l.$.body[l._animationSettings.scrollSize]>2*(l.$.body[l._animationSettings.scrollMax]*l._animationSettings.resetThreshold))&&(l.$.body[l._animationSettings.scrollSize]=0)):(s.style.order=3,l.$.nextMonthsContainer.style.order=1,(!l._animationStarted||l._animationStarted&&l.$.body[l._animationSettings.scrollSize]<l.$.body[l._animationSettings.scrollMax]*l._animationSettings.resetThreshold)&&(l.$.body[l._animationSettings.scrollSize]=l.$.body[l._animationSettings.scrollMax]))),cancelAnimationFrame(l._animationId),l._animationId=requestAnimationFrame(i)}_animateNavigationCompleted(){const t=this;let a="month"===t.displayMode?t.$.monthsContainer:t.$.dateViewContainer,n,o,r;if(cancelAnimationFrame(t._animationId),"month"!==t.displayMode){let i=[].slice.call(a.children).indexOf(t._focusedCell);a.innerHTML=t.$.nextMonthsContainer.innerHTML;let l=a.children[i],s;o=a.children,r=t.$.nextMonthsContainer.children;for(let a=0;a<o.length;a++)o[a].value=r[a].value,o[a].restricted=r[a].restricted,o[a].important=r[a].important,o[a].otherMonth=r[a].otherMonth,o[a].value.getTime()<=t.max.getTime()&&(s=o[a]);n=l&&l.value.getTime()>=t.max.getTime()?s.value:t._focusedCell?t._focusedCell.value:void 0}else{let n=a.children,l=t.$.nextMonthsContainer.children;for(let a=0;a<n.length;a++){n[a]._date=l[a]._date,n[a].innerHTML=l[a].innerHTML,o=t._getMonthCells(n[a]),r=t._getMonthCells(l[a]);for(let t=0;t<o.length;t++)o[t].value=r[t].value,o[t].restricted=r[t].restricted,o[t].important=r[t].important,o[t].otherMonth=r[t].otherMonth}0<t._selectedCells.length&&(t._selectedCells=t._selectedCells.map(a=>a=t._getCellByDate(a.value)).filter(t=>"undefined"!=typeof t))}t._focusCell(t._getCellByDate(n)),a.style.order=1,t.$.nextMonthsContainer.style.order=3,t.$.body[t._animationSettings.scrollSize]=0,t._animationStarted=!1,delete t._navigationDate}_applyAnimationSettings(t){const a=this;if(!a.hasAnimation)return void delete a._animationSettings;a._animationSettings=a.animationSettings?a.animationSettings:a._animationSettings?a._animationSettings:{},"portrait"===a.scrollButtonsNavigationMode?(a._animationSettings.scrollMax="scrollHeight",a._animationSettings.size="offsetHeight",a._animationSettings.scrollSize="scrollTop"):(a._animationSettings.scrollMax="scrollWidth",a._animationSettings.size="offsetWidth",a._animationSettings.scrollSize="scrollLeft");t||(a._animationSettings.startSpeed=a._animationSettings.startSpeed?a._animationSettings.startSpeed:.2,a._animationSettings.easeThreshold=a._animationSettings.easeThreshold?a._animationSettings.easeThreshold:.5,a._animationSettings.step=a._animationSettings.step?a._animationSettings.step:.25,a._animationSettings.stepEaseSize=a._animationSettings.stepEaseSize?a._animationSettings.stepEaseSize:200,a._animationSettings.resetThreshold=a._animationSettings.resetThreshold?a._animationSettings.resetThreshold:.2)}_applySelectionMode(t){var a=Math.min,n=Math.max;const i=this;let o=[],r=!!t;switch(i.selectionMode){case"none":return void i._clearSelection(r);case"many":case"default":case"oneOrMany":if(0===i.selectedDates.length){o.push(new Date(a(n(i.min.getTime(),new Date().setHours(0,0,0,0)),i.max.getTime())));break}return;case"one":if(1===i.selectedDates.length)return;1<i.selectedDates.length?(o.push(i.selectedDates[i.selectedDates.length-1]),i._clearSelection(r)):o.push(new Date(a(n(i.min.getTime(),new Date().setHours(0,0,0,0)),i.max.getTime())));break;case"zeroOrOne":if(1<i.selectedDates.length){o.push(i.selectedDates[i.selectedDates.length-1]),i._clearSelection(r);break}return;case"zeroOrMany":return;case"week":if(1<=i.selectedDates.length){let t=i.selectedDates[i.selectedDates.length-1];for(let a=0;8>a;a++)o.push(new Date(t)),t.setDate(t.getDate()+1);i._clearSelection(r)}}if(i.selectedDates=[],t)return void(i.selectedDates=o);const l=o.length;for(let a=0;a<l;a++)i._selectDate(o[a],a<l-1)}_clearSelection(t){const a=this;if(a._selectedCells&&a._selectedCells.map(t=>{a._setCellState(t,"selected",!1)}),a.selectedDates=[],a._selectedCells=[],"many"===a.selectionMode){const t=a.$.monthsContainer.children;for(let n=0;n<t.length;n++)a._getMonthCells(t[n]).map(t=>{a._setCellState(t,"hover",!1)})}a._refreshFooter(),a.$.hiddenInput.value=a.selectedDates.toString(),t||a.$.fireEvent("change",{value:[]}),a._refreshTitle()}_bodyBlurStateHandler(t){const a=this;a._bodyStateHandler(t)}_bodyFocusStateHandler(t){const a=this;a._bodyStateHandler(t)}_bodyStateHandler(t){const a=this;if(a._focusedCell){if("blur"===t.type||"focus"===t.type&&a._noFocusingRequired)return a._noFocusingRequired=!1,void a._setCellState(a._focusedCell,"focus",!1);if("month"!==a.displayMode)return void("focus"!==t.type||a.$.dateViewContainer.querySelector("smart-calendar-cell[focus]")||a._setCellState(a._focusedCell||a.$.dateViewContainer.querySelector(".smart-calendar-cell"),"focus",!0))}"focus"===t.type&&a._focusCell()}_containerWheelHandler(t){const a=this;if(a.disabled||a.readonly)return;let n,i,o;o=i=document.activeElement,a.enableShadowDOM&&(o=a.shadowRoot.activeElement,o?i=o?a.shadowRoot.getRootNode().host:void 0:(o=function(){for(let t=a.shadowRoot;t&&t.host;){if(t.activeElement)return t.activeElement;t=t.host.getRootNode()}}(),i=o?o.closest("smart-calendar"):void 0)),a.$.yearElement===o&&(n=12),i&&i.closest("smart-calendar")===a&&(n=t.target===a.$.yearElement?12:1);n&&(t.preventDefault(),n=12==n?n:n*a.months,0<t.deltaY?a.navigate(-n):a.navigate(n))}_downHandler(t){const a=this;let n=t.originalEvent.target;if(a._dragStartDetails=void 0,!(a.disabled||a.readonly)){if(a.hasRippleAnimation&&(n.value instanceof Date||n.parentElement&&n.parentElement.classList.contains("smart-calendar-title")||n.parentElement===a.$.dateElement)&&Smart.Utilities.Animation.Ripple.animate(n,t.pageX,t.pageY),n=t.originalEvent.target.closest(".smart-calendar-header"),t.originalEvent.target.closest(".smart-calendar-year-container")&&"decade"!==a.displayMode)return"classic"===a.calendarMode?void 0:void a._showDateView("year");if(t.originalEvent.target.closest(".smart-calendar-date-container")&&"month"!==a.displayMode)return"classic"===a.calendarMode?void 0:void a._displayModeHandler("list"===a.displayModeView?a.$.listViewContainer.getItem(a.$.listViewContainer.selectedValues[0]):a._focusedCell,"month");if(a._animationStarted&&a._animateNavigationCompleted(),Smart.Utilities.Core.isMobile&&!(n&&n===a.$.header))return void(a._dragStartDetails={x:t.pageX,y:t.pageY,startTime:Date.now(),target:t.originalEvent.target});if(n=t.originalEvent.target,n.closest(".smart-calendar-week")||n.parentElement===a.$.dateViewContainer){for(;n&&!(n.value instanceof Date);)n=n.parentElement;return void(n&&("month"===a.displayMode?a._weeksDownHandler(t,n):a._displayModeHandler(n)))}if(!n.closest(".smart-calendar-month-element")){if(t.originalEvent.stopPropagation(),"list"===a.displayModeView&&"month"!==a.displayMode)return n=(a.enableShadowDOM?t.originalEvent.composedPath()[0]:t.originalEvent.target).closest("smart-list-item"),void(n&&a._displayModeHandler(n));const i=document.scrollingElement||document.documentElement,o=i.scrollLeft,r=i.scrollTop;a.focus(),window.scrollTo(o,r)}}}_displayModeHandler(t,a){const n=this;if(n._animationStarted&&n._animateNavigationCompleted(),t instanceof HTMLElement&&t.parentElement.classList.contains("smart-calendar-week")&&t.otherMonth){if("decade"===n.displayMode&&(t.value.getFullYear()<n.min.getFullYear()||t.value.getFullYear()>n.max.getFullYear()))return;if("year"===n.displayMode&&(t.value.getFullYear()<n.min.getFullYear()||t.value.getFullYear()===n.min.getFullYear()&&t.value.getMonth()<n.min.getMonth()||t.value.getFullYear()>n.max.getFullYear()||t.value.getFullYear()===n.max.getFullYear()&&t.value.getMonth()>n.max.getMonth()))return}if(a=a?a:n.displayMode,"year"===a?a="month":"decade"===a?a="year":void 0,n.displayMode!==a){const i=n.$.fireEvent("displayModeChanging",{oldDisplayMode:n.displayMode,newDisplayMode:a}).defaultPrevented;i||(n.displayMode=a,n.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),t.parentElement===n.$.dateViewContainer&&!t.disabled&&!t.restricted&&n._focusCell(t),n.hasAnimation?(t instanceof Smart.ListItem||t.ownerListBox===n.$.listViewContainer?t.offsetHeight?n.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(0<t.dataItem.top?t.offsetTop-t.offsetHeight/2:t.offsetTop+t.offsetHeight/2)+"px":n.$.animationPanel.style.transformOrigin=n.$.listViewContainer.offsetLeft+n.$.listViewContainer.offsetWidth/2+"px "+(n.$.listViewContainer.offsetTop+n.$.listViewContainer.offsetHeight/2)+"px":(t=n._focusedCell,n.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(t.offsetTop+t.offsetHeight/2)+"px"),n._animateView(1,t)):n._setDisplayModeContent(t.value instanceof Date?t.value:new Date(t.value)))}}_animateView(t,a){function n(){return(0<t&&3.5<=s||0>t&&0>=s)&&(l=!0),l?(cancelAnimationFrame(o._animationId),o.$animationPanel.addClass("smart-hidden"),o.$.animationPanel.style.transform="",o.$.animationPanel.style.opacity="",m.style.transform="",m.style.opacity="",void("month"===o.displayMode?o.$.body.focus():"list"===o.displayModeView&&o.focus())):void(o.$.animationPanel.style.opacity=d,m.style.opacity=1-d,d-=.05,0<t?(o.$.animationPanel.style.transform="scale("+s+")",m.style.transform="scale("+Math.min((s-1)/2,1)+")",s+=.125):(o.$.animationPanel.style.transform="scale("+i(s,0)+")",m.style.transform="scale("+i(1+s,1)+")",s-=.06),o._animationId=requestAnimationFrame(n))}var i=Math.max;const o=this;let r=a instanceof Date?a:new Date(a.value),l=!1,s=1,d=1,c,m;if("list"===o.displayModeView?(c=a instanceof Smart.ListItem||a.ownerListBox===o.$.listViewContainer?o.$.listViewContainer:"month"===o.displayMode?o.$.listViewContainer:o.$.monthsContainer,m="month"===o.displayMode?o.$.monthsContainer:o.$.listViewContainer):!(a.value instanceof Date)&&(a=o._focusedCell?o._focusedCell:0<o._selectedCells.length?o._selectedCells[o._selectedCells.length-1]:o._getCellByDate(new Date)),c||(c=a.parentElement===o.$.dateViewContainer?o.$.dateViewContainer:o.$.monthsContainer),m||(m="month"===o.displayMode?o.$.monthsContainer:o.$.dateViewContainer),m.style.transformOrigin=o.$.animationPanel.style.transformOrigin,c instanceof Smart.ListBox)for(o.$.animationPanel.innerHTML="",o.$.animationPanel.appendChild(c.cloneNode(!1));c.$.itemsInnerContainer.firstElementChild;)o.$.animationPanel.children[0].appendChild(c.$.itemsInnerContainer.firstElementChild);else o.$.animationPanel.innerHTML=c.innerHTML;if(o._setDisplayModeContent(r),o.$.animationPanel.style.width=o.$.body.offsetWidth+"px",o.$.animationPanel.style.height=o.$.body.offsetHeight+"px",o.$.animationPanel.style.transform="scale(1)",o.$.animationPanel.style.opacity=1,o.$animationPanel.removeClass("smart-hidden"),m.style.opacity="0",m.style.transform="scale(3.5)",c.$.hasClass("smart-calendar-date-view-container")?o.$animationPanel.addClass("smart-calendar-date-view-container"):o.$animationPanel.removeClass("smart-calendar-date-view-container"),c instanceof Smart.ListBox){const t=o.$.animationPanel.children[0];t.whenReady(function(){t._refreshLayout(),t.ensureVisible(t.selectedValues[0])})}cancelAnimationFrame(o._animationId),o._animationId=requestAnimationFrame(n)}_documentUpHandler(t){var a=Math.abs;const n=this;if(!Smart.Utilities.Core.isMobile||!n._dragStartDetails)return;const i=Date.now();let o=t.originalEvent.target,r={};if("portrait"===n.scrollButtonsNavigationMode?(r.coordinate="y",r.direction="pageY"):(r.coordinate="x",r.direction="pageX"),10>=a(n._dragStartDetails[r.coordinate]-t[r.direction])){if(o="list"===n.displayModeView&&"month"!==n.displayMode?o.closest("smart-list-item"):o,!o)return void(n._dragStartDetails=void 0);if("month"!==n.displayMode)return n._displayModeHandler(o),"portrait"===n.scrollButtonsNavigationMode?n.$.body.scrollTop=0:n.$.body.scrollLeft=0,void(n._dragStartDetails=void 0);if(n._weeksDownHandler(t,o),!n.disableAutoNavigation&&o.otherMonth)return}else{const o=a((t[r.direction]-n._dragStartDetails[r.coordinate])/(i-n._dragStartDetails.startTime));if(1<o){const t=parseInt(o);for(let a=0;a<t;a++)n.navigate(n._dragStartDetails.step);return void(n._dragStartDetails=void 0)}}if(!n.hasAnimation)return void(n._dragStartDetails=void 0);let l=("month"===n.displayMode?n.$.monthsContainer[n._animationSettings.scrollMax]:n.$.dateViewContainer[n._animationSettings.scrollMax])+n.$.monthsSeparator[n._animationSettings.size];return 0<n._dragStartDetails.step&&n.$.body[n._animationSettings.scrollSize]>l*n._animationSettings.easeThreshold||0>n._dragStartDetails.step&&n.$.body[n._animationSettings.scrollSize]<l*n._animationSettings.easeThreshold?(n._animateNavigation(n._dragStartDetails.navigationDate,n._dragStartDetails.step,!0),void(n._dragStartDetails=void 0)):void(n._animateMonthRepositioning(void 0,n._dragStartDetails.step),n._dragStartDetails=void 0)}_animateMonthRepositioning(t,a){function n(){let t=0>a?r.$.body[r._animationSettings.scrollSize]>=s:0===r.$.body[r._animationSettings.scrollSize],d=r._scrollStep/2;return t?(cancelAnimationFrame(r._animationId),l.style.order=1,r.$.nextMonthsContainer.style.order=3,r.$.body[r._animationSettings.scrollSize]=0,void(r._animationStarted=!1)):void(0<a?(d=o(r.$.body[r._animationSettings.scrollMax]/r._animationSettings.stepEaseSize,i(d-r.$.body[r._animationSettings.scrollSize]*r._animationSettings.step)),r._scrollStep=r._scrollStep*r._animationSettings.step+d):(d=o(r.$.body[r._animationSettings.scrollMax]/r._animationSettings.stepEaseSize,i(d-(s-r.$.body[r._animationSettings.scrollSize])*r._animationSettings.step)),r._scrollStep=r._scrollStep*r._animationSettings.step+d),r.$.body[r._animationSettings.scrollSize]+=0>a?r._scrollStep:-r._scrollStep,r._animationId=requestAnimationFrame(n))}var i=Math.abs,o=Math.max;const r=this,l="month"===r.displayMode?r.$.monthsContainer:r.$.dateViewContainer;r._animationSettings||r._applyAnimationSettings();const s=l[r._animationSettings.scrollMax]+r.$.monthsSeparator[r._animationSettings.size];r._scrollStep=r.$.body[r._animationSettings.size]*r._animationSettings.startSpeed,cancelAnimationFrame(r._animationId),r._animationId=requestAnimationFrame(n),r._animationStarted=!0}_focusCell(t){const a=this;if(a._focusedCell&&a._setCellState(a._focusedCell,"focus",!1),!(a.disabled||a.readonly)){if(t)return"month"===a.displayMode?t.disabled||t.restricted?void 0:(a._setCellState(t,"focus",!0),a._focusedCell=t,void a._updateWeeksVisibility()):(a._setCellState(t,"focus",!0),void(a._focusedCell=t));if("month"===a.displayMode||0!==a.$.monthsContainer.offsetHeight){if(0<a._selectedCells.length){const t=a._selectedCells[a._selectedCells.length-1];a._setCellState(t,"focus",!0),a._focusedCell=t}else{const t=a.$.monthsContainer.children;if(a.min.getTime<t[0]._date.getTime())return;const n=a._getMonthCells(t[0],a.rightToLeft);for(let t=0;t<n.length;t++){const i=n[t];if(!i.otherMonth){if(i.disabled||i.restricted)continue;a._focusedCell=i;break}}}a._focusedCell&&(a._setCellState(a._focusedCell,"focus",!0),a._updateWeeksVisibility())}}}_getDays(t,a){const n=a.length;let i=[];if(0<n)for(let o=0;o<n;o++)a[o].getFullYear()===t.getFullYear()&&a[o].getMonth()===t.getMonth()&&i.push(a[o].getDate());return i}_getCellByDate(t,a){const n=this;if(!(t instanceof Date))return;if(a||(a=n.$.monthsContainer),"month"!==n.displayMode){if("list"===n.displayModeView)return;let a=arguments[1]?n.$.nextMonthsContainer.children:n.$.dateViewContainer.children;for(let o=0;o<a.length;o++)if("year"===n.displayMode){if(a[o].value.getMonth()===t.getMonth())return a[o];continue}else if(a[o].value.getFullYear()===t.getFullYear())return a[o];return}let o=a.children,r,l;for(let n=0;n<o.length;n++)if(t.getFullYear()===o[n]._date.getFullYear()&&t.getMonth()===o[n]._date.getMonth()){r=o[n];break}if(r){l=n._getMonthCells(r);for(let a=0;a<l.length;a++)if((!l[a].otherMonth||l[a].hover)&&l[a].value.getMonth()===t.getMonth()&&l[a].value.getDate()===t.getDate())return l[a]}}_getMonthCells(t,a){const n=t.getElementsByClassName("smart-calendar-week");let i=[];if(a)for(let t=0,a;t<n.length;t++){a=n[t].children;for(let t=a.length-1;0<t;t--)i.push(a[t])}else for(let t=0,a;t<n.length;t++){a=n[t].children;for(let t=1;t<a.length;t++)i.push(a[t])}return i}_getWeekNumber(t){var a=Math.round;const n=this;let i=new Date(t.getFullYear(),0,1),o=a((t.getTime()-i.getTime()-6e4*(t.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1,r=i.getDay()-n.firstDayOfWeek,l;return r=0<=r?r:r+7,4>r?(l=Math.floor((o+r-1)/7)+1,52<l&&(i=new Date(t.getFullYear()+1,0,1),r=i.getDay()-n.firstDayOfWeek,r=0<=r?r:r+7,l=4>r?1:53)):l=a((o+r-1)/7),l}_handleDateSelection(t){function a(t,a){if(n._clearSelection(!0),t.getTime()<a.value.getTime())for(;t.getTime()<=a.value.getTime();)n._selectDate(t,!0),t.setDate(t.getDate()+1);else if(t.getTime()>a.value.getTime())for(;t.getTime()>=a.value.getTime();)n._selectDate(t,!0),t.setDate(t.getDate()-1);else n._selectDate(a,!0);n.$.hiddenInput.value=n.selectedDates.toString(),n._refreshFooter(),n.$.fireEvent("change",{value:n.selectedDates}),n._refreshTitle()}const n=this;if(!("undefined"==typeof t||t.disabled||t.restricted))switch(n.selectionMode){case"none":n._focusCell(t);break;case"one":case"default":if(n._keysPressed.Control)return 1<n.selectedDates.length||1===n.selectedDates.length&&!t.selected?void n._selectDate(t.value):void n._focusCell(t);if(n._keysPressed.Shift)return void a(new Date(n.selectedDates[0]),t);n._clearSelection(!0),n._selectDate(t.value,!!(-1<n._selectedCells.indexOf(t.value)));break;case"many":{if(0===n.selectedDates.length)return void n._selectDate(t.value);const i=n.selectedDates[n.selectedDates.length-1];let o=new Date(n.selectedDates[0]);if(t.value.getTime()===o.getTime()||t.value.getTime()===i.getTime())return n._clearSelection(),void n._focusCell(t);0<n.selectedDates.length&&a(o,t);break}case"zeroOrMany":n._selectDate(t.value);break;case"oneOrMany":if(1===n.selectedDates.length&&t.selected)return void n._focusCell(t);n._selectDate(t.value);break;case"zeroOrOne":if(1===n.selectedDates.length&&t.selected)return void n._selectDate(t.value);n._clearSelection(!0),n._selectDate(t.value);break;case"week":{if(t.selected&&(t.value.getTime()===n.selectedDates[0].getTime()||t.value.getTime()===n.selectedDates[n.selectedDates.length-1].getTime()))return n._clearSelection(),void n._focusCell(t);n._clearSelection(!0);let a=new Date(t.value);n._selectDate(a);for(let t=1;8>t;t++)a.setDate(a.getDate()+1,7>t),n._selectDate(a);n._isDateInView(a)||n.navigate(1);break}}}_handleImportantDateTemplate(){const t=this;if(t._importantDatesTemplate=t._validateTemplate("importantDatesTemplate",t.importantDatesTemplate),!t._importantDatesTemplate||!t._importantDatesTemplate.content)return;let a=t._importantDatesTemplate.content;const n=a.childNodes.length,o=/{{\w+}}/g;let r;t._bindingDetails=[];for(let l=0;l<n;l++)if(r=o.exec(a.childNodes[l].innerHTML),r)return void t._bindingDetails.push({childNodeIndex:l,bindingString:r[0]})}_handleLayoutTemplate(t,a){const n=this,i=n._validateTemplate(t.$.hasClass("smart-header")?"headerTemplate":t.$.hasClass("smart-calendar-footer")?"footerTemplate":"titleTemplate",a);if(!i||!i.content)return void("function"==typeof a&&a(t,{}));n._layoutTemplates||(n._layoutTemplates=[]);let o=document.importNode(i.content,!0);t.innerHTML="";const r=o.childNodes.length,l=/{{\w+}}/g;let s=[],d;for(let n=0;n<r;n++)d=l.exec(o.childNodes[n].innerHTML),d&&s.push({childNodeIndex:n,bindingString:d[0]});return n._layoutTemplates=n._layoutTemplates.filter(a=>a.selector!==t),n._layoutTemplates.push({selector:t,template:i,bindings:s}),n.enableShadowDOM?(t.innerHTML="<slot></slot>",void n.appendChild(o)):void t.appendChild(o)}_handleCalendarCellHover(t,a){const n=this;if(!n._animationStarted){if("month"===n.displayMode)if("mouseover"===t.type&&"many"===n.selectionMode&&0<n.selectedDates.length){const t=n.$.monthsContainer.children;for(let a=0;a<t.length;a++)n._getMonthCells(t[a]).map(t=>{n._setCellState(t,"hover",!1)});let i=new Date(n.selectedDates[0]),o=new Date(a.value),r=a;const l=i.getTime()>o.getTime()?-1:1,s=function(){r=n._getCellByDate(i,n.$.monthsContainer),!r||r.selected||r.restricted||n._setCellState(r,"hover",!0)};if(i.getTime()!==o.getTime()){for(i.setDate(i.getDate()+l);i.getTime()!==o.getTime();)s(),i.setDate(i.getDate()+l);s()}}else n._setCellState(a,"hover",!1);"mouseover"!==t.type||a.otherMonth?n._setCellState(a,"hover",!1):n._setCellState(a,"hover",!0)}}_handleMonths(t,a){function n(t){let a=t.children.length,n=document.createDocumentFragment(),i;for(a;a<o.months;a++)i=o.$.month.cloneNode(!1),i.innerHTML=o.$.month.innerHTML,n.appendChild(i);return n}function i(a){let n=a.children;for(let r=0;r<n.length;r++)o._setMonth(t,n[r]),t.setMonth(t.getMonth()+1);o._setWeeksVisibility(a),o._refreshHeaderElements(),o._refreshHeaderTitle(),o.tooltip&&o.$.tooltip.close(),o.$.body===document.activeElement&&o._focusCell()}const o=this;let r;if(t||(t=o._viewDates&&0<o._viewDates.length?o._viewDates[0]:new Date),t=new Date(Math.min(Math.max(o.min.getTime(),t.getTime()),o.max.getTime())),a||(a=o.$.monthsContainer),o._selectedCells=[],o.hasAnimation){for(r=o.$.nextMonthsContainer.children,0<r.length&&r[0].value instanceof Date&&(o.$.nextMonthsContainer.innerHTML="");o.$.nextMonthsContainer.childElementCount<o.months;)o.$.nextMonthsContainer.appendChild(n(o.$.nextMonthsContainer));for(;o.$.nextMonthsContainer.childElementCount>o.months;)o.$.nextMonthsContainer.removeChild(r[o.$.nextMonthsContainer.childElementCount-1]);if(arguments[1]===o.$.nextMonthsContainer)return void i(o.$.nextMonthsContainer)}if(r=o.$.monthsContainer.children,r.length>o.months){for(;o.$.monthsContainer.childElementCount>o.months;)o.$.monthsContainer.removeChild(r[o.$.monthsContainer.childElementCount-1]),o._viewDates.pop();return void i(o.$.monthsContainer)}return o.$.monthsContainer.children.length===o.months?void i(o.$.monthsContainer):void(o._viewDates=[],o.$.monthsContainer.appendChild(n(o.$.monthsContainer)),i(o.$.monthsContainer))}_headerChangeHandler(t){const a=this;return t.stopPropagation(),a.disabled||a.readonly?void 0:t.target.ownerElement===a.$.monthElement&&0!==a._changeEventFired?void a._changeEventFired--:void(t.target===a.$.yearElement&&(a._viewDates[0].setFullYear(Math.min(Math.max(a.min.getFullYear(),isNaN(parseInt(a.$.yearElement.value))?0:parseInt(a.$.yearElement.value)),a.max.getFullYear())),a._handleMonths(a._viewDates[0])),a.$.monthElement&&t.target.ownerElement===a.$.monthElement&&a._handleMonths(new Date(a.$.monthsContainer.children[0]._date.getFullYear(),a.$.monthElement.selectedIndexes[0],1)))}_headerClickHandler(t){const a=this;if(!(a.disabled||a.readonly)){let n=t.target.closest("smart-repeat-button");if(!(n&&n.disabled))return n===a.$.previousMonthButton?(a._isInteractiveNavigation=!0,void a.navigate(-1*a.months)):n===a.$.nextMonthButton?(a._isInteractiveNavigation=!0,void a.navigate(1*a.months)):n===a.$.previousYearButton?void a.navigate(-12):n===a.$.nextYearButton?void a.navigate(12):"classic"===a.calendarMode?void(a.displayMode="month"):void(t.target.closest(".smart-calendar-date-element")&&(a._animationStarted&&a._animateNavigationCompleted(),a._isInteractiveNavigation=!0,a._showDateView()))}}_setDisplayMode(t,a,n){const i=this;if(i.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),0===arguments.length||!i.hasAnimation)return"classic"===i.calendarMode?void(i.displayMode="month"):("month"!==i.displayMode&&(i.$monthsContainer.addClass("smart-hidden"),i.$dateViewContainer.hasClass("smart-hidden")&&i.$dateViewContainer.removeClass("smart-hidden")),!i.isCompleted&&"month"===i.displayMode)?void 0:void i._setDisplayModeContent();if(i._animationStarted&&(i.displayMode=t,i._animateNavigationCompleted(),i.displayMode=a),"month"===t&&"year"===a||"year"===t&&"decade"===a)i.displayMode=t,i._showDateView(n?void 0:i.displayMode);else if("month"===t&&"decade"===a)i._showDateView(i.displayMode="year");else{let t;"list"===i.displayModeView?(t=(i.$.listViewContainer.enableShadowDOM?i.$.listViewContainer.shadowRoot:i.$.listViewContainer).querySelector("smart-list-item[selected]"),i.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(0<t.dataItem.top?t.offsetTop-t.offsetHeight/2:t.offsetTop+t.offsetHeight/2)+"px"):(t=i._focusedCell,i.$.animationPanel.style.transformOrigin=t.offsetLeft+t.offsetWidth/2+"px "+(t.offsetTop+t.offsetHeight/2)+"px"),i._animateView(1,t)}}_setDisplayModeContent(t,a){const n=this;let o=t&&"Invalid Date"!==t.toString()?t:0<n.selectedDates.length?n.selectedDates[n.selectedDates.length-1]:new Date;o.setTime(Math.min(Math.max(o.getTime(),n.min.getTime()),n.max.getTime())),o.setHours(0,0,0,0);const r=n._prepareView(o);if(!r)return;let i;a?(n.$.nextMonthsContainer.innerHTML=n.$.dateViewContainer.innerHTML,i=n.$.nextMonthsContainer):i=n.$.dateViewContainer;const l=i.children;let s;for(let d=0;d<l.length;d++){const t=l[d];t.innerHTML=r.viewContent[d],t.value=r.dates[d],"year"===n.displayMode?(t.value.getFullYear()<n.min.getFullYear()||t.value.getFullYear()===n.min.getFullYear()&&t.value.getMonth()<n.min.getMonth()||t.value.getFullYear()>n.max.getFullYear()||t.value.getFullYear()===n.max.getFullYear()&&t.value.getMonth()>n.max.getMonth()?n._setCellState(t,"otherMonth",!0):n._setCellState(t,"otherMonth",!1),o.getFullYear()===t.value.getFullYear()&&o.getMonth()===t.value.getMonth()&&(s=t)):"decade"===n.displayMode&&(0==d||d==l.length-1||t.value.getFullYear()<n.min.getFullYear()||t.value.getFullYear()>n.max.getFullYear()?n._setCellState(t,"otherMonth",!0):n._setCellState(t,"otherMonth",!1),o.getFullYear()===t.value.getFullYear()&&(s=t)),n._setCellState(t,"hover",!1)}if(s.otherMonth)for(let t=0;t<l.length;t++)if(!l[t].otherMonth){s=l[t];break}return n._focusedCell&&n._setCellState(n._focusedCell,"focus",!1),n._focusedCell=s,n._focusCell(n._focusedCell),n._refreshHeaderTitle(),n._refreshHeaderElements(),n.$.fireEvent("displayModeChange"),n._isInteractiveNavigation?void(n._isInteractiveNavigation=void 0):void(n._setCellState(s,"focus",!0),setTimeout(function(){n.$.body.focus(),n._focusCell(n._focusedCell)},0))}_prepareView(t){function a(t,a,n){let i=new Date(t,a+1,0),o=i.getDate();return n>o?i.setDate(o):i.setDate(n),i}const n=this;let o=[],r=[],l,i;if("month"===n.displayMode)return n.$nextMonthsContainer.hasClass("smart-date-view-container")&&n.$nextMonthsContainer.removeClass("smart-date-view-container"),n.$listViewContainer.addClass("smart-hidden"),n.$dateViewContainer.hasClass("smart-visibility-hidden")&&n.$dateViewContainer.removeClass("smart-visibility-hidden"),n._isDateInView(t)||n._handleMonths(t),n.$header.hasClass("smart-hidden")&&n.$header.removeClass("smart-hidden"),n.$body.hasClass("smart-calendar-list-view")&&n.$body.removeClass("smart-calendar-list-view"),n.$dateContainer.addClass("smart-calendar-selected"),n.$yearContainer.removeClass("smart-calendar-selected"),n.$dateViewContainer.addClass("smart-hidden"),n.$monthsContainer.removeClass("smart-hidden"),n._refreshHeaderTitle(),n.$.body.setAttribute("tabindex",0<n.tabIndex?n.tabIndex:0),n._refreshHeaderElements(),n.$.body.focus(),n._focusCell(n._getCellByDate(t)),void n.$.fireEvent("displayModeChange");if("list"===n.displayModeView)return n._setDisplayModeListContent(t),void n.$.fireEvent("displayModeChange");if(n.$header.hasClass("smart-hidden")&&n.$header.removeClass("smart-hidden"),n.$dateViewContainer.hasClass("smart-visibility-hidden")&&n.$dateViewContainer.removeClass("smart-visibility-hidden"),n.$listViewContainer.addClass("smart-hidden"),n.$.body.setAttribute("tabindex",0<n.tabIndex?n.tabIndex:0),"year"===n.displayMode){let l=new Date;for(let s=0;12>s;s++)l=a(l.getFullYear(),s,l.getDate()),o.push(l.toLocaleDateString(n.locale,{month:"short"})),r.push(a(t.getFullYear(),s,t.getDate()))}else{l=t?t.getFullYear():n._viewDates[0].getFullYear(),i=l%10,0!==i&&(l-=i),l-=1;for(let a=0;12>a;a++)o.push(l+""),r.push(new Date(l,t.getMonth(),t.getDate())),++l}return{viewContent:o,dates:r}}_setDisplayModeListContent(t){function a(t,a,n){let i=new Date(t,a+1,0),o=i.getDate();return n>o?i.setDate(o):i.setDate(n),i}const n=this;let o=[];if(n.$dateViewContainer.addClass("smart-visibility-hidden"),n.$listViewContainer.hasClass("smart-hidden")&&(n.$body.addClass("smart-calendar-list-view"),n.$listViewContainer.removeClass("smart-hidden"),n.$.listViewContainer._setFocusable(),n.$.body.removeAttribute("tabindex")),"year"===n.displayMode){let r=new Date;for(let l=0;12>l;l++)r=a(r.getFullYear(),l,r.getDate()),o.push({label:r.toLocaleDateString(n.locale,{month:"short"}),value:a(t.getFullYear(),l,t.getDate()).toDateString()});n.$yearContainer.removeClass("smart-calendar-selected"),n.$dateContainer.addClass("smart-calendar-selected")}else{let a=n.min.getFullYear(),r=n.max.getFullYear();r=Math.min(n.max.getFullYear(),t.getFullYear()+10),a=Math.max(n.min.getFullYear(),r-10);for(let n=a;n<r;n++)o.push({label:n.toString(),value:new Date(n,t.getMonth(),t.getDate()).toDateString()});n.$yearContainer.addClass("smart-calendar-selected"),n.$dateContainer.removeClass("smart-calendar-selected")}n.$.listViewContainer.dataSource=o,n.$.listViewContainer.selectedValues=[t.toDateString()],n.$.listViewContainer.ensureVisible(n.$.listViewContainer.selectedValues[0]),n._refreshHeaderTitle(),n._refreshHeaderElements(),n.focus()}_isDateInView(t){const a=this;if(!t)return!1;for(let n=0;n<a._viewDates.length;n++)if(t.getFullYear()===a._viewDates[n].getFullYear()&&t.getMonth()===a._viewDates[n].getMonth()){let n=a._getCellByDate(t,a._animationStarted?a.$.nextMonthsContainer:a.$.monthsContainer);return n?!(n.otherMonth||n.classList.contains("smart-visibility-hidden")):void 0}return!1}_keyDownHandler(t){const a=this;if(!(a.disabled||a.readonly))switch(a.enableShadowDOM?a.shadowRoot.activeElement||document.activeElement:document.activeElement){case a.$.yearElement:"Escape"===t.key&&a._refreshHeaderElements();break;case a.$.dateElement:if("default"===a.calendarMode&&" "===t.key||"Enter"===t.key)return t.preventDefault(),a._isInteractiveNavigation=!0,void a._showDateView();a._focusedCell||a._focusCell(),-1<t.key.indexOf("Arrow")&&a.$.dateElement===document.activeElement&&a.$.body.focus(),a._navigateDays(t);break;case a.$.body:(" "===t.key||"Enter"===t.key)&&t.preventDefault(),a._navigateDays(t);break;case a.$.yearContainer:if((" "===t.key||"Enter"===t.key)&&"decade"!==a.displayMode&&(t.preventDefault(),a._isInteractiveNavigation=!0,a._showDateView("year")),-1<t.key.indexOf("Arrow")){if(t.preventDefault(),a._focusedCell||a._focusCell(),"month"!==a.displayMode&&"list"===a.displayModeView)return a.focus(),void a.$.listViewContainer._handleKeyStrokes(t.key);a._navigateDays(t)}break;case a.$.dateContainer:if((" "===t.key||"Enter"===t.key)&&"month"!==a.displayMode&&(t.preventDefault(),a._displayModeHandler("list"===a.displayModeView?a.$.listViewContainer.getItem(a.$.listViewContainer.selectedValues[0]):a._focusedCell,"month")),-1<t.key.indexOf("Arrow")){if(a._focusedCell||a._focusCell(),"month"!==a.displayMode&&"list"===a.displayModeView)return a.focus(),void a.$.listViewContainer._handleKeyStrokes(t.key);a._navigateDays(t)}break;default:if("month"!==a.displayMode&&"list"===a.displayModeView)return(["Arrow","End","Home","Page"].indexOf(t.key)&&t.preventDefault()," "===t.key||"Enter"===t.key||t.ctrlKey&&("ArrowUp"===t.key||"ArrowDown"===t.key))?void a._navigateDays(t):void a.$.listViewContainer._handleKeyStrokes(t.key);-1<t.key.indexOf("Arrow")&&(!a._focusedCell&&a._focusCell(),a._navigateDays(t));}}_listViewContainerChangeEventHandler(t){t.stopPropagation()}_listViewContainerKeyDownHandler(t){const a=this;"list"!==a.displayModeView||(" "===t.key||"Enter"===t.key)&&a._navigateDays(t)}_showDateView(t){const a=this;if(t=t?t:a.displayMode,"month"===t?t="year":"year"===t?t="decade":void 0,a.displayMode===t)return;const n=a.$.fireEvent("displayModeChanging",{oldDisplayMode:a.displayMode,newDisplayMode:t}).defaultPrevented;if(n)return;a.displayMode=t;let i;return arguments[0]&&"list"===a.displayModeView&&"month"!==a.displayMode&&0<a.$.listViewContainer.items.length?(i=a.$.listViewContainer.getItem(a.$.listViewContainer.selectedValues[0]),a.$.animationPanel.style.transformOrigin=i.offsetHeight?i.offsetLeft+i.offsetWidth/2+"px "+(0<i.dataItem.top?i.offsetTop-i.offsetHeight/2:i.offsetTop+i.offsetHeight/2)+"px":a.$.listViewContainer.offsetLeft+a.$.listViewContainer.offsetWidth/2+"px "+(0<i.dataItem.top?i.offsetTop-i.offsetHeight/2:a.$.listViewContainer.offsetTop+a.$.listViewContainer.offsetHeight/2)+"px"):(!a._focusedCell&&a._focusCell(),i=a._focusedCell,a.$.animationPanel.style.transformOrigin=i.offsetLeft+i.offsetWidth/2+"px "+(i.offsetTop+i.offsetHeight/2)+"px"),a.$monthsContainer.addClass("smart-hidden"),a.$dateViewContainer.hasClass("smart-hidden")&&a.$dateViewContainer.removeClass("smart-hidden"),"decade"===a.displayMode&&(a.$yearContainer.addClass("smart-calendar-selected"),a.$dateContainer.removeClass("smart-calendar-selected")),a.hasAnimation?void a._animateView(-1,i):void a._setDisplayModeContent(a._focusedCell?a._focusedCell.value:a._viewDates[0])}_keyUpHandler(t){const a=this;a.disabled||a.readonly||"default"===a.selectionMode&&("Shift"===t.key||"Control"===t.key)&&(a._keysPressed[t.key]=!1)}_mouseEventsHandler(t){const a=this;if(a.disabled||a.readonly)return;if("mouseenter"===t.type)return void a.$.setAttributeValue("hover",!0);if("mouseleave"===t.type)return a.$.setAttributeValue("hover",!1),void(a.tooltip&&a.$.tooltip.close());const n=a.enableShadowDOM?t.composedPath()[0]:t.target;if(!n.closest(".smart-calendar-week"))return void(a.tooltip&&a.$.tooltip.close());let i=n,o;for(;i&&!(i.value instanceof Date);)i=i.parentElement,o=!0;if(i&&(Smart.Utilities.Core.isMobile||a._handleCalendarCellHover(t,i),a.tooltip)){if(i.hasAttribute("important")&&"mouseover"===t.type)return a.$.tooltip.open(),a.tooltipTemplate?a.$.tooltip.value=i.value+"":a.$.tooltip.innerHTML=0===a.$.tooltip.innerHTML.trim().length?"Important day!":a.$.tooltip.innerHTML,a.$.tooltip.selector=i,void(a.$.tooltip.selector!==i&&a.$.tooltip.close());if(o||a.$.tooltip.selector===i)return;a.$.tooltip.close()}}_moveHandler(t){var a=Math.round;const n=this;if(!Smart.Utilities.Core.isMobile||!n._dragStartDetails||"list"===n.displayModeView&&"month"!==n.displayMode)return;t.originalEvent.preventDefault(),t.preventDefault(),t.stopPropagation();const i={x:a(t.pageX),y:a(t.pageY)};let o="portrait"===n.scrollButtonsNavigationMode?i.y>n._dragStartDetails.y?-1*n.months:1*n.months:i.x<n._dragStartDetails.x?1*n.months:-1*n.months;const r=n._getNextDate(o);if(!r)return;if(n._dragStartDetails.step=o,n._dragStartDetails.navigationDate=new Date(r),!n.hasAnimation)return;let l;if("month"!==n.displayMode)n.$nextMonthsContainer.addClass("smart-calendar-date-view-container"),l=n.$.dateViewContainer,n.$.nextMonthsContainer.children[0].value instanceof Date&&n.$.nextMonthsContainer.children[1].value.getFullYear()===r.getFullYear()||n._setDisplayModeContent(r,n.$.nextMonthsContainer);else if(n.$nextMonthsContainer.hasClass("smart-calendar-date-view-container")&&n.$nextMonthsContainer.removeClass("smart-calendar-date-view-container"),l=n.$.monthsContainer,!n.$.nextMonthsContainer.children[0]._date||n.$.nextMonthsContainer.children[0]._date.getTime()!==r.getTime()){let t=n.$.nextMonthsContainer.children;for(let a=0;a<t.length;a++)r.setMonth(n._dragStartDetails.navigationDate.getMonth()+a),n._setMonth(r,t[a],!0)}0>o?(l.style.order=3,n.$.nextMonthsContainer.style.order=1,n.$.body[n._animationSettings.scrollSize]=n.$.body[n._animationSettings.scrollMax]):(l.style.order=1,n.$.nextMonthsContainer.style.order=3,n.$.body[n._animationSettings.scrollSize]=0);const s="portrait"===n.scrollButtonsNavigationMode?"y":"x";10<Math.abs(n._dragStartDetails[s]-i[s])&&(n.$.body[n._animationSettings.scrollSize]+=2*-(i[s]-n._dragStartDetails[s]))}_getNextDate(t){const a=this;let n;if("month"!==a.displayMode){let i;const o=a._focusedCell&&a._focusedCell.value.getFullYear();if("list"===a.displayModeView)n=new Date(a.$.listViewContainer.items[0].value);else{let t=a._animationStarted?a.$.nextMonthsContainer:a.$.dateViewContainer;n=new Date("year"===a.displayMode?t.children[0].value:t.children[1].value)}if(i="year"===a.displayMode?1:0===t?1:10,n.setFullYear(n.getFullYear()+(0<t?i:-i)),n.getTime()<a.min.getTime()&&(n=a.min),n.getTime()>a.max.getTime()&&(n=a.max),"year"===a.displayMode){if(n.getFullYear()<a.min.getFullYear()||n.getFullYear()>a.max.getFullYear()||o===n.getFullYear())return;}else if(n.getFullYear()<a.min.getFullYear()||n.getFullYear()>a.max.getFullYear()||o===n.getFullYear())return}else{let i=a._viewDates[0];if(n=new Date(i),n.setDate(1),n.setMonth(n.getMonth()+t),n.setTime(Math.min(Math.max(n.getTime(),a.min.getTime()),a.max.getTime())),i.getMonth()===n.getMonth()&&i.getFullYear()===n.getFullYear())return}return n}_navigateDays(t){const a=this;let n="ArrowUp"===t.key||"ArrowDown"===t.key?7:1,i="ArrowUp"===t.key||"ArrowLeft"===t.key||"PageUp"===t.key?-1:1;switch(t.key){case"ArrowUp":case"ArrowLeft":case"ArrowDown":case"ArrowRight":if(!a._handleArrowKeys(t,n,i))return;break;case" ":case"Enter":if("month"!==a.displayMode)return void a._displayModeHandler("list"===a.displayModeView?a.$.listViewContainer.getItem(a.$.listViewContainer.selectedValues[0]):a._focusedCell);break;case"Control":case"Shift":return void("default"===a.selectionMode&&(a._keysPressed[t.key]=!0));case"Home":case"End":{t.preventDefault();let n=function(a){if("Home"===t.key){for(let t=0;t<a.length;t++)if(!a[t].otherMonth&&(!a[t].disabled||!a[t].restricted))return a[t];}else for(let t=a.length-1;0<=t;t--)if(!a[t].otherMonth&&(!a[t].disabled||!a[t].restricted))return a[t]},i;if(i="month"===a.displayMode?n(a._getMonthCells(a._focusedCell.closest(".smart-calendar-month"),a.rightToLeft)):n(a.$.dateViewContainer.children),!i)return;if(a._focusCell(i),"month"!==a.displayMode)return;break}case"PageUp":case"PageDown":{if(!a._handlePageUpDownKeys(t,i))return;break}default:return;}a._focusedCell&&a._handleDateSelection(a._focusedCell)}_handleArrowKeys(t,a,n){const i=this;let o;if("month"!==i.displayMode||i._animationStarted||i.$.body.focus(),i._focusedCell||i._focusCell(i._getCellByDate(new Date)),!t.altKey){if(t.ctrlKey){if("ArrowDown"===t.key||"ArrowUp"===t.key){let a;switch(i.displayMode){case"month":a="ArrowDown"===t.key?"month":"year";break;case"year":a="ArrowDown"===t.key?"month":"decade";break;case"decade":a="ArrowDown"===t.key?"year":"decade";}if(a!==i.displayMode){const t=i.displayMode;i.displayMode=a,i._setDisplayMode(t,a,"month"===t),i._keysPressed&&delete i._keysPressed.Control}}return}if(t.preventDefault(),i.rightToLeft&&("ArrowLeft"===t.key||"ArrowRight"===t.key)&&(n*=-1),"month"!==i.displayMode){let r=i._animationStarted?i.$.nextMonthsContainer.children:i.$.dateViewContainer.children;if(a="ArrowUp"===t.key||"ArrowDown"===t.key?4:1,"year"===i.displayMode){const t=i._focusedCell.value.getMonth()+n*a;let r=new Date(i._focusedCell.value.getFullYear(),t+1,0);i._focusedCell.value.getDate()<=r.getDate()&&(r=i._focusedCell.value),o=new Date(i._focusedCell.value.getFullYear(),t,r.getDate())}else o=new Date(i._focusedCell.value.getFullYear()+n*a,i._focusedCell.value.getMonth(),i._focusedCell.value.getDate());if("year"===i.displayMode){if(o.getFullYear()<i.min.getFullYear()||o.getFullYear()===i.min.getFullYear()&&o.getMonth()<i.min.getMonth()||o.getFullYear()>i.max.getFullYear()||o.getFullYear()===i.max.getFullYear()&&o.getMonth()>i.max.getMonth())return;o.getTime()>r[r.length-1].value.getTime()?i.navigate(1):o.getTime()<r[0].value.getTime()&&i.navigate(-1)}else{if(o.getFullYear()<i.min.getFullYear()||o.getFullYear()>i.max.getFullYear())return;if(o.getFullYear()<r[1].value.getFullYear()||o.getFullYear()>r[10].value.getFullYear()){let a=i._focusedCell;i.navigate(n),("ArrowUp"===t.key||"ArrowDown"===t.key)&&(a===r[3]||a===r[4]||a===r[7]||a===r[8]?o.setFullYear(o.getFullYear()+2*n):o.setFullYear(o.getFullYear()-2*n))}}return void i._focusCell(i._getCellByDate(o,i._animationStarted?i.$.nextMonthsContainer:void 0))}const r=i.restrictedDates.map(Number);for(o=new Date(i._focusedCell.value.getFullYear(),i._focusedCell.value.getMonth(),i._focusedCell.value.getDate()+n*a,0,0,0,0);-1<r.indexOf(o.getTime());)o.setDate(o.getDate()+n);if(!(o.getTime()<i.min.getTime()||o.getTime()>i.max.getTime())){i._isDateInView(o)||i.navigate(n*i.months);let t=i._getCellByDate(o,i._animationStarted?i.$.nextMonthsContainer:void 0);return i._focusCell(t),!(-1<["zeroOrMany","oneOrMany","none","many","week"].indexOf(i.selectionMode))||void 0}}}_handlePageUpDownKeys(t,a){const n=this;t.preventDefault();let i;if("month"!==n.displayMode){if(i=n._focusedCell,!n.navigate(a))return;for(;i&&i.classList.contains("smart-visibility-hidden");)i=null===i.previousElementSibling?i.nextElementSibling:i.previousElementSibling;return n._focusCell(i),void(n.hasAnimation&&"decade"===n.displayMode&&n._focusedCell.value.setFullYear(n._focusedCell.value.getFullYear()+10*a))}i=new Date(n._focusedCell.value.getFullYear(),n._focusedCell.value.getMonth()+a,1,0,0,0,0);let o=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();return n._focusedCell.value.getDate()>o?i.setDate(o):i.setDate(n._focusedCell.value.getDate()),n._isDateInView(i)||n.navigate(a*n.months),n._animationStarted?n._focusCell(n._getCellByDate(i,n.$.nextMonthsContainer)):n._focusCell(n._getCellByDate(i)),!0}_selectDate(t,a,n){const i=this;if("undefined"==typeof i._viewDates||"none"===i.selectionMode)return;let o=i.selectedDates.slice(0),r=i._getCellByDate(t,i._animationStarted?i.$.nextMonthsContainer:i.$.monthsContainer);r&&i._selectCell(r);let l;t=new Date(t),t.setHours(0,0,0,0),l=o.map(Number).indexOf(t.getTime());-1<i.restrictedDates.map(Number).indexOf(t.getTime())||t.getTime()<i.min.getTime()||t.getTime()>i.max.getTime()||(-1<l?o.splice(l,1):o.push(t),!n&&(i.selectedDates=o),i._refreshFooter(),i.$.hiddenInput.value=i.selectedDates.toString(),!a&&i.$.fireEvent("change",{value:[t]}),i._refreshTitle())}_selectCell(t){const a=this;if(!(!t||-1<a.restrictedDates.map(Number).indexOf(t.value.getTime())||a.disableAutoNavigation&&!1===t.otherMonth||t.value.getTime()<a.min.getTime()||t.value.getTime()>a.max.getTime())){const n=a._selectedCells.indexOf(t);-1<n?(a._setCellState(t,"selected",!1),a._selectedCells.splice(n,1)):(a._setCellState(t,"selected",!0),a._selectedCells.push(t)),a._focusCell(t)}}_refreshDayOfWeekTitles(){function t(t){let n;return"firstTwoLetters"===a.dayNameFormat?(n=new Intl.DateTimeFormat(a.locale,{weekday:"long"}).format(t),n=8206===n.charCodeAt(0)?n.substring(1,3):n.substring(0,2)):n=new Intl.DateTimeFormat(a.locale,{weekday:a.dayNameFormat}).format(t),n}const a=this;let n=[],o=new Date,r;for(let a=1;8>a;a++)o.setDate(a),r={number:o.getDay(),name:t(o)},n.push(r);n.sort((t,a)=>t.number>a.number?1:-1);const i=a.$.monthsContainer.children;let l,s;for(let t=0;t<i.length;t++)if(l=i[t].getElementsByClassName("smart-calendar-week-titles")[0].children,s=6<a.firstDayOfWeek?0:a.firstDayOfWeek,a.rightToLeft)for(let t=l.length-1;0<=t;t--)l[t].textContent=n[s++].name,s=6<s?0:s;else for(let t=1;t<l.length;t++)l[t].textContent=n[s++].name,s=6<s?0:s;if(a.hasAnimation){const t=a.$.monthsContainer.getElementsByClassName("smart-calendar-week-titles")[0].innerHTML,n=a.$.nextMonthsContainer.getElementsByClassName("smart-calendar-week-titles");for(let a=0;a<n.length;a++)n[a].innerHTML=t}}_refreshCalendarMode(){const t=this;if(!t.headerTemplate)if(t._refreshMonthNames(),"default"===t.calendarMode){t.$classicHeaderDate.addClass("smart-hidden"),t.$defaultHeaderDate.removeClass("smart-hidden");const a=t._viewDates.slice(0).sort((t,a)=>t.getTime()-a.getTime()),n=a[0],i=a[a.length-1];n.setDate(2);let o=n.toLocaleDateString(t.locale,{year:t.yearFormat,month:t.monthNameFormat});1<t.months&&(i.setDate(2),o+=" - "+i.toLocaleDateString(t.locale,{year:t.yearFormat,month:t.monthNameFormat})),t.$.defaultHeaderDate.innerHTML=o,t.unfocusable||t.$.dateElement.setAttribute("tabindex",0<t.tabIndex?t.tabIndex:0)}else t.$defaultHeaderDate.addClass("smart-hidden"),t.$classicHeaderDate.removeClass("smart-hidden"),t.$.dateElement.removeAttribute("tabindex")}_refreshFooter(){function t(){if(0===a.selectedDates.length)return"";if(1===a.selectedDates.length)return a.selectedDates[0].toLocaleDateString(a.locale,{year:a.yearFormat,weekday:"short",month:"short",day:"numeric"});else{let t=a.selectedDates.slice(0).sort((t,a)=>t.getTime()-a.getTime());return t[0].toLocaleDateString(a.locale,{year:a.yearFormat,weekday:"short",month:"short",day:"numeric"})+" - "+t[t.length-1].toLocaleDateString(a.locale,{year:a.yearFormat,weekday:"short",month:"short",day:"numeric"})}}const a=this;if(!(0>a.viewSections.indexOf("footer")||0===a.$.footer.offsetHeight)){if(a.footerTemplate){if("function"==typeof a.footerTemplate)return;let n=a._layoutTemplates.filter(t=>t.selector===a.$.footer)[0],i=document.importNode(n.template.content,!0);if(0<n.bindings.length){let a=i.childNodes[n.bindings[0].childNodeIndex];n.selector.childNodes[n.bindings[0].childNodeIndex].innerHTML=a.innerHTML.replace(n.bindings[0].bindingString,t())}return}a.$.selectedDatesRange.innerHTML=t()}}_refreshImportantDates(){const t=this;if("month"===t.displayMode){t._clearImportantDates();for(let a=0;a<t.importantDates.length;a++)t._setImportantDate(t.importantDates[a])}}_clearImportantDates(){const t=this,a=t.$.monthsContainer.children;for(let n=0;n<a.length;n++)t._getMonthCells(a[n]).map(a=>{t._setCellState(a,"important",!1)})}_setImportantDate(t,a){const n=this,i=n._getCellByDate(t);a||(a=i),a&&(n._setCellState(a,"important",!0),n._applyImportantDateTemplate(a))}_applyImportantDateTemplate(t){const a=this;if(!a._importantDatesTemplate)return"function"==typeof a.importantDatesTemplate?void a.importantDatesTemplate(t,{value:t.value}):void(t.innerHTML=t.value.getDate()+"");let n=document.importNode(a._importantDatesTemplate.content,!0);if(a._bindingDetails&&0<a._bindingDetails.length){let i=n.childNodes[a._bindingDetails[0].childNodeIndex];i.innerHTML=i.innerHTML.replace(a._bindingDetails[0].bindingString,t.value.getDate())}t.innerHTML="";for(let a=0;a<n.childNodes.length;a++)n.childNodes[a].outerHTML&&(t.innerHTML+=n.childNodes[a].outerHTML)}_setMonth(t,a,n){const o=this,i=o._getDays(t,o.selectedDates),r=o._getDays(t,o.importantDates),l=o._getDays(t,o.restrictedDates);t.setDate(1),a||(a=o.$.month),a._date=new Date(t),n||((!o._viewDates||o._viewDates.length>=o.months)&&(o._viewDates=[]),o._viewDates.push(new Date(t))),t=new Date(t);let s=(t.getDay()-o.firstDayOfWeek+7)%7;t.setDate(0);let d=t.getDate();if(t.setDate(32),t.setDate(1),t.setDate(32),o._selectedCells)for(let t=0;t<o._selectedCells.length;t++)o._selectedCells[t].closest(".smart-calendar-month")===a&&o._setCellState(o._selectedCells[t],"selected",!1);o._setMonthContent(t,a,{previusMonthDays:d,firstDayOfWeek:s,selectedDates:i,importantDates:r,restrictedDates:l})}_setMonthContent(t,a,n){const i=this,o=32-t.getDate(),r=i._getMonthCells(a,i.rightToLeft),l=a._date.getMonth(),s=a._date.getFullYear(),c=new Date;let m=1,p=1,u;c.setHours(0,0,0,0),r.map(t=>{i._setCellState(t,"restricted",!1),i._setCellState(t,"selected",!1),i._setCellState(t,"otherMonth",!1),i._setCellState(t,"focus",!1),i._setCellState(t,"important",!1),i._setCellState(t,"today",!1),i._setCellState(t,"disabled",!1),i._setCellState(t,"hover",!1)});for(let g=0;g<r.length;g++){const t=r[g];g===n.firstDayOfWeek&&p<=o?(t.className="smart-calendar-cell",t.value=new Date(s,l,p),t.innerHTML=t.value.getDate().toString(),-1<n.restrictedDates.indexOf(p)||t.value.getTime()<i.min.getTime()||t.value.getTime()>i.max.getTime()?i._setCellState(t,"restricted",!0):-1<n.selectedDates.indexOf(p)&&(i._setCellState(t,"selected",!0),0>i._selectedCells.indexOf(t)&&i._selectedCells.push(t)),-1<n.importantDates.indexOf(p)&&(i._setImportantDate(t.value,t),n.importantDates.splice(n.importantDates.indexOf(p),1)),t.value.getTime()===c.getTime()&&i._setCellState(t,"today",!0),n.firstDayOfWeek++,p++):(1==p?(t.value=new Date(s,l-1,++n.previusMonthDays-n.firstDayOfWeek),u=!!(t.value.getTime()<i.min.getTime()||a.previousElementSibling)):(t.value=new Date(s,l+1,m++),u=!!(t.value.getTime()>i.max.getTime()||a.nextElementSibling)),t.innerHTML=t.value.getDate().toString(),u?t.classList.add("smart-visibility-hidden"):(i._setCellState(t,"otherMonth",!0),t.classList.remove("smart-visibility-hidden")))}1<i.months&&(a.firstElementChild.innerHTML=i.dateFormatFunction?i.dateFormatFunction(a._date):i._monthsNames[l]+" "+a._date.toLocaleDateString(i.locale,{year:i.yearFormat})),i._setMonthWeekNumbers(a)}_refreshMonthNames(){function t(t){let n=new Intl.DateTimeFormat(a.locale,{month:a.monthNameFormat}).format(t);return"firstTwoLetters"===a.monthNameFormat&&(n=8206===n.charCodeAt(0)?n.substring(0,2):n.substring(1,3)),n}const a=this;let n=new Date,i;n.setDate(1),a._monthsNames=[];for(let o=0;12>o;o++)n.setMonth(o),i=t(n),a._monthsNames.push(i);if("classic"===a.calendarMode&&a.$.monthElement){let t=a.$.monthsContainer.children;a.$.monthElement.dataSource&&(a._changeEventFired=1);const n=a.$.monthElement.context;if(a.$.monthElement.context=document,a.$.monthElement.dataSource=a._monthsNames,a.$.monthElement.context=n,a._viewDates){for(let n=0;n<t.length;n++)t[n].firstElementChild.textContent=a._monthsNames[t[n]._date.getMonth()]+" "+t[n]._date.getFullYear();a._changeEventFired=1,a.$.monthElement.selectedIndexes=a._viewDates.map(t=>t.getMonth())}}}_setMonthWeekNumbers(t){const a=this,n=function(t){for(let a=1;a<t.children.length;a++)if(!t.children[a].classList.contains("smart-visibility-hidden"))return!0};let i=t.getElementsByClassName("smart-calendar-week");i=[].slice.call(i);for(let o=0;o<i.length;o++){if(!n(i[o])){i[o].children[0].innerHTML="";continue}const r=i[o].children[1],l=r.otherMonth?r.value.getTime()>t._date.getTime()?1:-1:0;i[o].children[0].innerHTML=a._getWeekNumber(new Date(t._date.getFullYear(),t._date.getMonth()+l,r.value.getDate()))}}_setRestrictedDates(t){const a=this,n=a.$.monthsContainer.children;for(let i=0;i<n.length;i++)a._getMonthCells(n[i]).map(t=>{a._setCellState(t,"restricted",!1)});if(a._viewDates){const n=function(t){for(let n=0;n<a._viewDates.length;n++)if(a._viewDates[n].getFullYear()===t.getFullYear()&&a._viewDates[n].getMonth()===t.getMonth())return!0};for(let o=0;o<t.length;o++)if(n(t[o])){const n=a._getCellByDate(t[o]);a._setCellState(n,"restricted",!0)}}}_setScrollButtonsNavigationMode(){const t=this;"landscape"===t.scrollButtonsNavigationMode?(t.$.previousMonthButton&&(t.$.previousMonthButton.$.button.firstElementChild.innerHTML="&#xe809"),t.$.nextMonthButton&&(t.$.nextMonthButton.$.button.firstElementChild.innerHTML="&#xe810")):(t.$.previousMonthButton&&(t.$.previousMonthButton.$.button.firstElementChild.innerHTML="&#xe80b"),t.$.nextMonthButton&&(t.$.nextMonthButton.$.button.firstElementChild.innerHTML="&#xe80d")),t._applyAnimationSettings(!0)}_tooltipEventHandler(t){const a=this;a.enableShadowDOM&&a.$.fireEvent(t.type,t.detail)}_refreshTitle(){const t=this;let a=0<t.selectedDates.length?t.selectedDates[t.selectedDates.length-1]:new Date;if(t.titleTemplate){if("function"==typeof t.titleTemplate)return;let n=t._layoutTemplates.filter(a=>a.selector===t.$.title)[0],i=document.importNode(n.template.content,!0);if(0<n.bindings.length){let o=i.childNodes[n.bindings[0].childNodeIndex];return a=a.toLocaleDateString(t.locale,{year:t.yearFormat,weekday:"short",month:"short",day:"numeric"}),void(n.selector.childNodes[n.bindings[0].childNodeIndex].innerHTML=o.innerHTML.replace(n.bindings[0].bindingString,a))}}t.$.title.children[0].innerHTML=a.toLocaleDateString(t.locale,{year:t.yearFormat}),t.$.title.children[1].innerHTML="landscape"===t.view?a.toLocaleDateString(t.locale,{weekday:"short"})+",</br>"+a.toLocaleDateString(t.locale,{month:"short",day:"numeric"}):a.toLocaleDateString(t.locale,{weekday:"short"})+", "+a.toLocaleDateString(t.locale,{month:"short",day:"numeric"})}_setWeeksVisibility(t){function a(t){return function(t){for(let a=1;a<t.children.length;a++)if(!t.children[a].classList.contains("smart-visibility-hidden"))return!1;return!0}(t)||o>=n.weeks?void t.classList.add("smart-hidden"):void(o<n.weeks&&(t.classList.remove("smart-hidden"),o++))}const n=this,i=t.children;let o;for(let r=0;r<i.length;r++){const t=i[r];let l=t.getElementsByClassName("smart-calendar-week");l=[].slice.call(l);let s=n._selectedCells.filter(t=>t.closest(".smart-calendar-month")===i[r]);if(6===n.weeks){l.map(t=>t.classList.remove("smart-hidden"));continue}if(o=0,0<s.length){let t=s[s.length-1],n=l.indexOf(t.parentElement);for(let t=n;t<l.length;t++)a(l[t]);for(let t=n-1;0<=t;t--)a(l[t])}else for(let t=0;t<l.length;t++)a(l[t])}}_refreshHeaderElements(){const t=this,a=document.activeElement.closest("smart-calendar")===t,n=t._animationStarted?t.$.nextMonthsContainer:t.$.dateViewContainer;let i=t._viewDates[t._viewDates.length-1],o=t._viewDates.map(t=>t.getFullYear()),r,l;if("month"===t.displayMode||"list"!==t.displayModeView){if(t.$.previousMonthButton&&!t.disabled&&("month"!==t.displayMode&&t.$.dateViewContainer.children[0].value?l="year"===t.displayMode?n.children[0].value.getFullYear()-1:n.children[1].value.getFullYear()-1:0>t._viewDates[0].getMonth()-1?(r=11,l=t._viewDates[0].getFullYear()-1):(r=t._viewDates[0].getMonth()-1,l=t._viewDates[0].getFullYear()),t.$.previousMonthButton.disabled=!!(l<t.min.getFullYear()||l===t.min.getFullYear()&&r<t.min.getMonth()),t.$.previousMonthButton.disabled&&a&&t.$.body.focus()),t.$.nextMonthButton&&!t.disabled&&("month"!==t.displayMode&&t.$.dateViewContainer.children[0].value?l="year"===t.displayMode?n.children[0].value.getFullYear()+1:n.children[1].value.getFullYear()+11:11<i.getMonth()+1?(r=0,l=i.getFullYear()+1):(r=i.getMonth()+1,l=i.getFullYear()),t.$.nextMonthButton.disabled=!!(l>t.max.getFullYear()||l===t.max.getFullYear()&&r>t.max.getMonth()),t.$.nextMonthButton.disabled&&a&&t.$.body.focus()),"classic"===t.calendarMode&&t.$.monthElement){const a=t.$.monthElement.items;if(a.map(t=>t.disabled=!1),-1<o.indexOf(t.min.getFullYear()))for(let n=0;n<t.min.getMonth();n++)a[n].disabled=!0;if(-1<o.indexOf(t.max.getFullYear()))for(let n=t.max.getMonth()+1;n<a.length;n++)a[n].disabled=!0;t._changeEventFired=t.$.monthElement.selectedIndexes.length,t.$.monthElement.selectedIndexes=[t._viewDates[0].getMonth()],t._changeEventFired=0}t.$.previousYearButton&&!t.disabled&&(l=t._viewDates[0].getFullYear()-1,t.$.previousYearButton.disabled=!!(l<t.min.getFullYear()),t.$.previousYearButton.disabled&&a&&t.$.body.focus()),t.$.nextYearButton&&!t.disabled&&(l=i.getFullYear()+1,t.$.nextYearButton.disabled=!!(l>t.max.getFullYear()),t.$.nextYearButton.disabled&&a&&t.$.body.focus()),t.$.yearElement&&(t.$.yearElement.value=o[0],t.$.yearElement.disabled=!!(i.getFullYear()+1>t.max.getFullYear()&&t._viewDates[0].getFullYear()-1<t.min.getFullYear()))}}_refreshHeaderTitle(){function t(){if("month"!==a.displayMode){if("list"===a.displayModeView&&a.$.listViewContainer.selectedValues[0]){let t=a.$.listViewContainer.items;n="year"===a.displayMode?new Date(a.$.listViewContainer.getItem(a.$.listViewContainer.selectedValues[0]).value).getFullYear():new Date(t[0].value).getFullYear()+" - "+new Date(t[t.length-1].value).getFullYear()}else if(a.$.dateViewContainer.children[0].value){let t=a._animationStarted?a.$.nextMonthsContainer.children:a.$.dateViewContainer.children;n="year"===a.displayMode?t[0].value.getFullYear():t[1].value.getFullYear()+" - "+t[t.length-2].value.getFullYear()}if(n)return n}const t=a._viewDates.slice(0).sort((t,a)=>t.getTime()-a.getTime()),i=t[0],o=t[t.length-1];return i.setDate(2),n=i.toLocaleDateString(a.locale,{year:a.yearFormat,month:a.monthNameFormat}),1<a.months&&(o.setDate(2),n+=" - "+o.toLocaleDateString(a.locale,{year:a.yearFormat,month:a.monthNameFormat})),n}const a=this;let n;if("default"===a.calendarMode&&(a.$.defaultHeaderDate.innerHTML=t()),"function"!=typeof a.headerTemplate&&a._layoutTemplates){let n=a._layoutTemplates.filter(t=>t.selector===a.$.header)[0];if(n){let i=document.importNode(n.template.content,!0);if(0<n.bindings.length){const o=i.childNodes[n.bindings[0].childNodeIndex];n.selector.childNodes[n.bindings[0].childNodeIndex].innerHTML=o.innerHTML.replace(n.bindings[0].bindingString,a.dateFormatFunction?a.dateFormatFunction(a._viewDates):t())}}}}_updateWeeksVisibility(){const t=this,a=t._focusedCell.parentElement;if(!a.classList.contains("smart-hidden"))return;const n=[].slice.call(a.parentElement.children),o=n.indexOf(a),r=function(t){for(let a=1;a<t.children.length;a++)if(!t.children[a].classList.contains("smart-visibility-hidden"))return!1;return!0};let l=0;n.map(t=>t.classList.add("smart-hidden"));for(let a=o;a<n.length;a++)if(!r(n[a])&&(n[a].classList.remove("smart-hidden"),l++,l===t.weeks))return;if(l<t.weeks)for(let a=o-1;0<=a;--a)if(n[a].classList.remove("smart-hidden"),l++,l===t.weeks)return}_getValidDates(t){function a(t){if(t instanceof Date)return t;if(Smart.Utilities.DateTime&&t instanceof Smart.Utilities.DateTime)return t.toDate();if("string"==typeof t){if("new Date()"===t.trim()||"new Smart.Utilities.DateTime()"===t.trim())return new Date;let a=/(\d+[,-.\/]{1}\s*\d+[,-.\/]{1}\s*\d+)/;const n=()=>{if(t=t.replace(/[,-.\/]/g,",").split(","),2<t.length)t=new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]));else return new Date;return t};return a.test(t)?(t=a.exec(t)[0].replace(/[,-.\/]/g,",").split(","),t?new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])):n()):n()}}let n=[];if(void 0===t)return null;if(Array.isArray(t))for(let o=0;o<t.length;o++)n.push(a(t[o]));else n.push(a(t));return n=n.filter(t=>t&&"Invalid Date"!==t.toDateString()),n.map(t=>t.setHours(0,0,0,0)),n}_getValidDate(t){const a=this,n=a._getValidDates(t);return 0<n.length?n[0]:null}_validateSelectedDates(t){const a=this;let n=[];t||(t=a.selectedDates);let i=t.slice(0),o=function(t){for(let n=0;n<a.restrictedDates.length;n++)if(a.restrictedDates[n].getTime()===t.getTime())return!0};a.selectedDates=i.filter(function(t){return!!(t.getTime()>=a.min.getTime()&&t.getTime()<=a.max.getTime()&&!o(t))||void n.push(t)}),a._viewDates&&(n.map(t=>a._selectDate(t)),a._focusCell())}_validateMinMax(t,a,n){const o=this;switch(t){case"min":a=o._getValidDate(o[t]),o.min=a?a:n?n:o.properties.min.defaultValue;break;case"max":a=o._getValidDate(o[t]),o.max=a?a:n?n:o.properties.max.defaultValue;break;default:a=o._getValidDate(o.min),o.min=a?a:n?n:o.properties.min.defaultValue,a=o._getValidDate(o.max),o.max=a?a:n?n:o.properties.max.defaultValue;}o.min=o.min.getTime()>o.max.getTime()?o.max:o.min,o.min.setHours(0,0,0,0),o.max.setHours(0,0,0,0);let r=o.$.monthsContainer.children,l;if(o._viewDates){if(o._viewDates[0].getTime()>o.max.getTime()||o._viewDates[0].getTime()<o.min.getTime())return void o._handleMonths();for(let t=0;t<r.length;t++){l=o._getMonthCells(r[t]);for(let a=0;a<l.length;a++){const n=l[a];if(n.value.getTime()>=o.min.getTime()&&n.value.getTime()<=o.max.getTime())o._setCellState(n,"restricted",!1),n.value.getMonth()===r[t]._date.getMonth()?n.classList.remove("smart-visibility-hidden"):!o.hideOtherMonthDays&&(o._setCellState(n,"otherMonth",!0),n.classList.remove("smart-visibility-hidden")),"month"!==o.displayMode&&o._setCellState(n,"otherMonth",!1);else{if(!n.otherMonth)o._setCellState(n,"restricted",!0);else if(n.classList.contains("smart-visibility-hidden")){o._setCellState(n,"restricted",!1);continue}"month"!==o.displayMode&&(n.classList.remove("smart-visibility-hidden"),o._setCellState(n,"otherMonth",!0))}}}}}_setCellState(t,a,n){t[a]=n;const i=Smart.Utilities.Core.toDash(a);n?t.setAttribute(i,""):t.removeAttribute(i)}_validateTemplate(t,a){if(null!==a&&a&&"function"!=typeof a){const n=this;return"content"in document.createElement("template")?("string"==typeof a&&(a=document.getElementById(a)),null!==a&&"content"in a?a:void n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:t}))):void n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()}))}}_weeksDownHandler(t,a){const n=this,i=a.value;let o;return(a.otherMonth&&(o=a.value.getTime()>a.closest(".smart-calendar-month")._date.getTime()?1:-1),n.hasRippleAnimation&&Smart.Utilities.Animation.Ripple.animate(a,t.pageX,t.pageY),o)?n._isDateInView(a.value)?void 0:void(n.disableAutoNavigation||n.navigate(o*n.months)):void(a=n._getCellByDate(i),a&&(a.disabled||a.restricted)||n._handleDateSelection(a))}_firstDayOfWeekValidator(t,a){return Math.min(Math.max(0,isNaN(a)?6:a),6)}_weeksValidator(t,a){return Math.min(Math.max(1,isNaN(a)?6:a),6)}_monthsValidator(t,a){return Math.min(Math.max(1,isNaN(a)?1:a),12)}}),Smart("smart-input",class extends Smart.BaseElement{static get properties(){return{dataSource:{type:"any",value:[]},dropDownDataSource:{type:"any",value:[]},dropDownHeight:{type:"any",value:200},dropDownWidth:{type:"any",value:null},dropDownButtonPosition:{allowedValues:["none","left","right"],value:"none",type:"string"},items:{type:"number",value:8},minLength:{type:"number",value:1},name:{value:"",type:"string"},openedre:{value:!1,type:"boolean"},query:{type:"string",value:""},queryMode:{allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string",value:"containsIgnoreCase"},placeholder:{value:"",type:"string"},readonly:{type:"boolean",value:!1},type:{type:"string"},value:{type:"string",value:""}}}static get styleUrls(){return["smart.textbox.css"]}template(){return"<div tabindex=0 id=\"inputContainer\"><input class=\"smart-input\" id='input' readonly='[[readonly]]' pleaseholder='[[placeholder]]' type='[[type]]' name='[[name]]' value='{{value::keyup}}' disabled='[[disabled]]' role='input'/><div id=\"dropDownButton\" tabindex=-1 class=\"smart-drop-down-button\"><div id=\"arrow\" class=\"arrow\"></div></div></div>"}static get listeners(){return{"input.focus":"_focusHandler","input.blur":"_blurHandler","input.keydown":"_keyDownHandler","input.keyup":"_keyUpHandler","input.keypress":"_keyPressHandler","dropDownButton.down":"_dropDownButtonDownHandler","inputContainer.down":"_downHandler","document.up":"_documentUpHandler"}}focus(){const t=this;t.$.input.focus()}select(){const t=this;t.readonly?t.$.input.focus():t.$.input.select()}_documentUpHandler(t){const a=this;let n=t.originalEvent.target;if(n!==a&&n!==a.$.dropDownButton&&n!==a.$.input&&n!==a.$.arrow){if(a._isPointerDown)return a._isPointerDown=!1,void a.$.input.focus();if(!a.$.scrollView.contains(n)){const n=a.close();n&&(t.stopPropagation(),t.preventDefault(),t.originalEvent.stopPropagation(),t.originalEvent.preventDefault())}}}_focusHandler(){const t=this;t.setAttribute("focus","")}_blurHandler(){const t=this;t.opened||t.removeAttribute("focus")}_refreshMenu(){const t=this;t.$.menu.classList.remove("scroll"),t.$.scrollView.computedVerticalScrollBarVisibility&&t.$.menu.classList.add("scroll")}_performSelect(){const t=this,a=t.$.menu.querySelector(".active").getAttribute("data-value");t.value=a,t.close()}_offsetTop(t){const a=this;return t?t.offsetTop+a._offsetTop(t.offsetParent):0}_offsetLeft(t){const a=this;return t?t.offsetLeft+a._offsetLeft(t.offsetParent):0}_offset(t){return{left:this._offsetLeft(t),top:this._offsetTop(t)}}_open(){const t=this,a=t._offset(t);this.opened||(t.timer&&clearTimeout(t.timer),document.body.appendChild(t.$.scrollView),t.$.scrollView.style.left=-3+a.left+"px",t.$.scrollView.style.top=a.top+t.offsetHeight+1+"px",t.$.scrollView.classList.remove("open"),t.$.scrollView.onpointerdown=function(){t._isPointerDown=!0},requestAnimationFrame(function(){t.$.scrollView.refresh(),t._refreshMenu(),t.$.scrollView.setAttribute("open",""),t.setAttribute("open",""),t.$.dropDownButton.setAttribute("open",""),t.$.input.setAttribute("open",""),"auto"!==t.dropDownWidth&&t.dropDownWidth?t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",t.dropDownWidth+"px"):"auto"===t.dropDownWidth?t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",""):t.$.scrollView.style.setProperty("--smart-input-drop-down-menu-width",t.offsetWidth-8+"px")}),t.$.scrollView.refresh(),t._refreshMenu(),this.opened=!0)}close(){const t=this;return!!t.opened&&(t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){t.$.scrollView.parentNode&&!t.opened&&document.body.removeChild(t.$.scrollView)},1e3),t.$.scrollView.removeAttribute("open"),t.$.dropDownButton.removeAttribute("open"),t.$.input.removeAttribute("open"),t.removeAttribute("open"),t.opened=!1,t.$.input.focus(),!0)}_lookup(t){const a=this;let n=[];return(a.query=a.$.input.value,a.$.input.readonly&&(!a._incrementalSearchQuery&&(a._incrementalSearchQuery=""),a._incrementalSearchQuery+=t.key,a._incrementalSearchTimer&&clearTimeout(a._incrementalSearchTimer),a.query=a._incrementalSearchQuery,a._incrementalSearchTimer=setTimeout(function(){a._incrementalSearchQuery=""},700)),!a.query||a.query.length<a.minLength)?void a.close():(n="function"==typeof a.dataSource?a.dataSource(a.query):a.dataSource,a._process(n))}_downHandler(t){const a=this;a.readonly&&a._dropDownButtonDownHandler(t)}_dropDownButtonDownHandler(t){const a=this;return a._toggle(),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}_toggle(){const t=this;t.opened?t.close():t.open()}open(){const t=this;let a;t.dropDownDataSource?(t.query="",a="function"==typeof t.dataSource?t.dataSource(t.query):t.dataSource):a="function"==typeof t.dropDownDataSource?t.dropDownDataSource(t.query):t.dropDownDataSource,t._process(a);const n=t.$.menu.querySelector(".active");if(n)for(let a=0;a<t.$.menu.children.length;a++){const i=t.$.menu.children[a],o=i.getAttribute("data-value");if(o===t.$.input.value){n.classList.remove("active"),i.classList.add("active");break}}t.ensureVisible(),t.$.input.focus(),setTimeout(function(){t.$.input.focus()},25)}_process(t){const a=this;"string"==typeof t&&(t=a.$.deserialize(t,"array")),t=t.filter(function(t){return a.matcher?a.matcher:a._matcher(t)}),t=a._sorter(t),t.sort(),!t.length&&a.opened&&a.close();0===t.length||(0<a.query.length?a._render(t.slice(0,a.items)):a._render(t),a._open(),a.$.scrollView.refresh(),a._refreshMenu(),a.ensureVisible())}_matcher(t){const a=this,n=a.query;switch(a.queryMode){case"startsWith":return t.startsWith(n);case"startsWithIgnoreCase":return t.toLowerCase().startsWith(n.toLowerCase());case"doesNotContain":return 0>t.indexOf(n);case"doesNotContainIgnoreCase":return 0>t.toLowerCase().indexOf(n.toLowerCase());case"contains":return-1<t.indexOf(n);default:case"containsIgnoreCase":return~t.toLowerCase().indexOf(n.toLowerCase());case"equals":return 0===t.localeCompare(n);case"equalsIgnoreCase":return 0===t.toLowerCase().localeCompare(n.toLowerCase());case"endsWith":return t.endsWith(n);case"endsWithIgnoreCase":return t.toLowerCase().endsWith(n.toLowerCase());}}_sorter(t){const a=this;let n=[],i=[],o=[],r;for(;r=t.shift();)r.toLowerCase().indexOf(a.query.toLowerCase())?~r.indexOf(a.query)?i.push(r):o.push(r):n.push(r);return n.concat(i,o)}_highlighter(t){const a=this,n=a.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+n+")","ig"),function(t,a){return"<strong>"+a+"</strong>"})}_render(t){const a=this,n=t.map(function(t){const n=document.createElement("li"),i=document.createElement("a");return i.href="#",n.setAttribute("data-value",t),i.innerHTML=a.highlighter?a.highlighter(t):a._highlighter(t),n.appendChild(i),n});0<n.length&&n[0].classList.add("active"),a.$.menu.innerHTML="";for(let o=0;o<n.length;o++){const t=n[o];a.$.menu.appendChild(t),t.onmouseenter=function(){this.classList.add("active")},t.onmouseleave=function(){this.classList.remove("active")}}}ensureVisible(){const t=this,a=t.$.menu.querySelector(".active");a&&(a.offsetTop+a.offsetHeight>=t.$.scrollView.scrollTop+t.$.scrollView.offsetHeight&&(t.$.scrollView.scrollTop=a.offsetTop+a.offsetHeight),(a.offsetTop<=t.$.scrollView.scrollTop||a.offsetTop>=t.$.scrollView.scrollTop+t.$.scrollView.offsetHeight)&&(t.$.scrollView.scrollTop=a.offsetTop),0===[...t.$.menu.children].indexOf(a)?t.$.scrollView.scrollTop=0:[...t.$.menu.children].indexOf(a)===t.$.menu.children.length-1&&(t.$.scrollView.scrollTop=t.$.scrollView.scrollHeight))}_next(){const t=this,a=t.$.menu.querySelector(".active");if(!a)return void t.$.menu.firstElementChild.classList.add("active");a.classList.remove("active");let n=a.nextElementSibling;n||(n=t.$.menu.firstElementChild),n.classList.add("active"),t.ensureVisible()}_prev(){const t=this,a=t.$.menu.querySelector(".active");if(!a)return void t.$.menu.firstElementChild.classList.add("active");a.classList.remove("active");let n=a.previousElementSibling;n||(n=t.$.menu.lastElementChild),n.classList.add("active"),t.ensureVisible()}_move(t){const a=this;if(a.opened){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),a._prev();break;case 40:t.preventDefault(),a._next();}t.stopPropagation()}}_keyDownHandler(t){const a=this;a._suppressKeyPressRepeat=![40,38,9,13,27,16,17,18].includes(t.keyCode);t.shiftKey||t.altKey||t.ctrlKey||a._move(t)}_keyPressHandler(t){const a=this;a._suppressKeyPressRepeat||t.shiftKey||t.altKey||t.ctrlKey||a._move(e)}_keyUpHandler(t){const a=this;if(!(t.shiftKey||t.altKey||t.ctrlKey))switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:40===t.keyCode&&t.altKey&&a.open(),38===t.keyCode&&t.altKey&&a.close();break;case 9:case 13:if(!a.opened)return;a._performSelect(),t.stopPropagation(),t.preventDefault();break;case 27:if(!a.opened)return;a.close(),t.stopPropagation(),t.preventDefault();break;default:a._lookup(t),!a.opened||t.ctrlKey||t.shiftKey||(t.stopPropagation(),t.preventDefault());}}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;"dropDownHeight"===t&&i.$.scrollView.style.setProperty("--smart-input-drop-down-menu-height",i.dropDownHeight+"px"),"opened"===t&&(n?i.open():i.close())}ready(){const t=this;super.ready();const a=document.createElement("ul"),n=document.createElement("smart-scroll-viewer");n.horizontalScrollBarVisibility="hidden",n.appendChild(a),n.style.setProperty("--smart-input-drop-down-menu-height",t.dropDownHeight+"px"),n.classList.add("smart-input-drop-down-menu"),n.id=t.id+"_"+t.tagName.toLowerCase()+"_menu_"+Math.floor(65536*(1+Math.random())).toString(16).substring(1),t.setAttribute("aria-controls",n.id),t.$.scrollView=n,t.$.menu=a,t.opened&&t.open(),t.opened=!1,t.$.inputContainer.tabIndex=0,t.$.menu.onclick=function(a){a.stopPropagation(),a.preventDefault(),t._performSelect(),t.$.input.focus()}}}),Smart("smart-card",class extends Smart.ContentElement{static get properties(){return{dataSource:{value:null,type:"object?",reflectToAttribute:!1},itemTemplate:{value:null,type:"any?",reflectToAttribute:!1},contentHandler:{value:null,type:"function?",reflectToAttribute:!1}}}static get listeners(){return{mouseenter:"_mouseEnterHandler",mouseleave:"_mouseLeaveHandler","container.swipeleft":"_swipeHandler","container.swiperight":"_swipeHandler","container.swipetop":"_swipeHandler","container.swipebottom":"_swipeHandler"}}static get styleUrls(){return["smart.card.css"]}template(){return`<div id="container" inner-h-t-m-l="[[innerHTML]]">
                <content></content>
            </div>`}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;"itemTemplate"===t?(i._template=i._handleTemplate(),i.innerHTML=i._processTemplate(),i.contentHandler&&i.contentHandler(i)):"dataSource"===t?(i.innerHTML=i._processTemplate(),i.contentHandler&&i.contentHandler(i)):"contentHandler"===t?i.contentHandler&&i.contentHandler(i):void 0}ready(){super.ready();const t=this;t._template=t._handleTemplate(),t._template.hasBindings?t.innerHTML=t._processTemplate():t.itemTemplate&&(t.innerHTML=t._template.content),t.contentHandler&&t.contentHandler(t)}_handleTemplate(){const t=this;let a=t.itemTemplate,n="",i=!1,o=/{{\w+}}/g;return t.itemTemplate?a instanceof HTMLElement?n=a.innerHTML:(a=document.getElementById(a),n=a?a.innerHTML:""):n=t.innerHTML,o.exec(n)&&(i=!0),{content:n,hasBindings:i}}_processTemplate(){const t=this,a=/{{\w+}}/g,n=t._template.content.match(a),i=t.dataSource||{};let o=t._template.content;return n&&0!==n.length?(n.forEach(function(t){const a=t.replace("{{","").replace("}}","");o=o.replace(t,i[a]||"")}),o):o}_swipeHandler(t){t.stopPropagation(),this.$.fireEvent(t.type)}}),Smart("smart-carousel",class extends Smart.ContentElement{static get properties(){return{autoPlay:{value:!1,type:"any"},dataSource:{value:[],type:"array",reflectToAttribute:!1},delay:{value:200,type:"number"},displayMode:{allowedValues:["default","multiple","3d"],value:"default",type:"string"},disableItemClick:{value:!1,type:"boolean"},hideArrows:{value:!1,type:"boolean"},hideIndicators:{value:!1,type:"boolean"},indicatorTemplate:{value:null,type:"any"},interval:{value:5e3,type:"number"},itemTemplate:{value:null,type:"any"},keyboard:{value:!1,type:"boolean"},loop:{value:!1,type:"boolean"},messages:{value:{en:{htmlTemplateNotSuported:"{{elementType}}:  Browser doesn't support HTMLTemplate elements."}},type:"object",extend:!0},slideShow:{value:!1,type:"boolean"},swipe:{value:!1,type:"boolean"},wheel:{value:!1,type:"boolean"}}}static get listeners(){return{"arrowLeft.click":"_handleArrowClick","arrowRight.click":"_handleArrowClick","indicatorsContainer.click":"_handleIndicatorsContainerClick",keydown:"_handleKeyDown",swipeleft:"_handleSwipe",swiperight:"_handleSwipe",wheel:"_handleMouseWheel","itemsContainer.click":"_handleItemClick","itemsContainer.transitionend":"_handleTransitionEnd"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.button.css","smart.carousel.css"]}template(){return`<div id="container">
                    <div id="itemsContainer" inner-h-t-m-l="[[innerHTML]]" class="smart-items-container"><content></content></div>
                    <smart-repeat-button initial-delay="0" delay="[[delay]]" id="arrowLeft" animation="[[animation]]" unfocusable class="smart-arrow smart-arrow-left"></smart-repeat-button>
                    <smart-repeat-button initial-delay="0" delay="[[delay]]" id="arrowRight" animation="[[animation]]" unfocusable class="smart-arrow smart-arrow-right"></smart-repeat-button>
                    <div id="indicatorsContainer" class="smart-indicators-container"></div>
                </div>`}propertyChangedHandler(t,a,n){const i=this;switch(super.propertyChangedHandler(t,a,n),t){case"disabled":i._setFocusable();break;case"dataSource":if(i._generateIndicators(),i._generateItems(),i._handleIndicatorsState(0,0),i._handleItemsState(0,0),i._handle3dMode(0),!1!==i.autoPlay){const t=parseInt(i.autoPlay);t?setTimeout(function(){i.play()},t):i.play()}i._animationTrigger(i._currentIndex);break;case"itemTemplate":i._generateItems(),i._handleItemsState(i._currentIndex,i._currentIndex+1);break;case"indicatorTemplate":i._generateIndicators(),i._handleIndicatorsState(i._currentIndex,i._currentIndex+1);break;case"interval":i.pause(),i.play();break;case"loop":i._handleArrowsActiveState(i._currentIndex,i._currentIndex);break;case"hideArrows":n||i._handleArrowsActiveState(i._currentIndex,i._currentIndex);break;case"displayMode":"multiple"===a&&i.$.itemsContainer.removeAttribute("style");}}ready(){super.ready();const t=this;if(t._setInitialState(),t._generateIndicators(),t._generateItems(),t._handleIndicatorsState(0,0),t._handleItemsState(0,0),t._handle3dMode(0),!1!==t.autoPlay){const a=parseInt(t.autoPlay);a?setTimeout(function(){t.play()},a):t.play()}t._setFocusable(),t._animationTrigger(t._currentIndex)}next(){const t=this,a=t.dataSource.length;if(t.disabled||0===a)return;let n=t._currentIndex;n=t.loop?n>=a-1?0:n+1:n>=a-1?n:n+1,t._goToItem(n)}pause(){const t=this;t._handleRotation(),t._rotate=!1}slideTo(t){const a=this;t=t?parseInt(t):0;a.disabled||0>t||t>a._items.length||a._goToItem(t)}prev(){const t=this,a=t.dataSource.length;if(t.disabled||0===a)return;let n=t._currentIndex;n=t.loop?0>=n?a-1:n-1:0>=n?0:n-1,t._goToItem(n)}play(){const t=this;t.disabled||!t.slideShow||(t._rotationInterval&&clearInterval(t._rotationInterval),t._handleRotation(!0),t._rotate=!0)}_animationTrigger(t){const a=this;for(let n=0;n<a._items.length;n++)n!==t&&a._items[n].classList.add("smart-animate-trigger")}_handle3dMode(t){const a=this,n=a.dataSource.length;if(!a.disabled&&n&&"3d"===a.displayMode){t=t||0;for(let o=0;o<n;o++){const n=o-t;n?a._items[o].setAttribute("position",n):a._items[o].removeAttribute("position")}}}_handleArrowsActiveState(t,a){const n=this,i=n.dataSource.length;n.loop?n.$.arrowLeft.disabled=n.$.arrowRight.disabled=!1:(0===a&&(n.$.arrowLeft.disabled=!1),a===i-1&&(n.$.arrowRight.disabled=!1),0===t&&(n.$.arrowLeft.disabled=!0),t===i-1&&(n.$.arrowRight.disabled=!0))}_handleArrowClick(t){const a=this,n=a._currentIndex;a.disabled||(a.$.arrowLeft.contains(t.target)?a.prev():a.next(),a._changeEvent(n,a._currentIndex))}_handleDefaultInnerHTML(){const t=this;if(!(t.dataSource&&0<t.dataSource.length)&&0<=t.$.itemsContainer.innerHTML.indexOf("<ul")){const a=t.$.itemsContainer.getElementsByTagName("ul")[0],n=a.getElementsByTagName("li");for(let a=0;a<n.length;a++){const i={HTMLcontent:n[a].innerHTML};t.dataSource.push(i)}}}_handleIndicatorsState(t,a){const n=this;!n.disabled&&0!==n._indicators.length&&(t||0===t)&&(a||0===a)&&(t!==a&&n._indicators[t].classList.remove("smart-active"),n._indicators[a].classList.add("smart-active"))}_handleItemClick(t){const a=this,n=t.target.closest(".smart-carousel-item");if(!(a.disabled||!n||"3d"!==a.displayMode||a.disableItemClick)){const t=parseInt(n.getAttribute("item-id")),i=parseInt(n.getAttribute("position"));3<Math.abs(i)||a._goToItem(t)}}_handleItemsState(t,a){const n=this;!n.disabled&&0!==n._items.length&&(t||0===t)&&(a||0===a)&&(t!==a&&(n._items[t].classList.remove("smart-active"),n._items[t].classList.add("smart-out")),n._items[a].classList.add("smart-active"))}_handleIndicatorsContainerClick(t){const a=this,n=t.target.closest(".smart-indicator"),i=a._currentIndex;if(!a.disabled&&n){const t=parseInt(n.getAttribute("indicator-id"));i===t||(a._goToItem(t),a._changeEvent(i,a._currentIndex))}}_handleMultipleMode(t){const a=this;if("multiple"!==a.displayMode)return;const n=a._items[t],i=n.offsetWidth,o=a.$.container.offsetWidth,r=a.$.itemsContainer.offsetWidth;let l=0;if(0===t)return void(a.$.itemsContainer.style.marginLeft="0px");if(t===a._items.length-1)return void(a.$.itemsContainer.style.marginLeft="-"+(r-o)+"px");for(let n=0;n<t;n++)l+=a._items[t].offsetWidth;l+i/2>=o/2&&l+i<r&&(a.$.itemsContainer.style.marginLeft="-"+(l+i/2-o/2)+"px")}_changeEvent(t,a){if(t!==a){const n=this;n.$.fireEvent("changing",{index:a,previousIndex:t}),n.hasAnimation||n.$.fireEvent("change",{index:a,previousIndex:t})}}_handleKeyDown(t){const a=this,n=t.key,i=a._currentIndex;!a.disabled&&a.keyboard&&-1!==["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","Home","End"," ","Enter"].indexOf(n)&&("ArrowLeft"===n||"ArrowDown"===n?a.prev():"ArrowUp"===n||"ArrowRight"===n?a.next():"Home"===n?a._goToItem(0):"End"===n?a._goToItem(a.dataSource.length-1):" "===n?a._rotate?a.pause():a.play():"Enter"===n?a.play():void 0,a._changeEvent(i,a._currentIndex))}_handleMouseWheel(t){const a=this,n=a._currentIndex;a.disabled||!a.wheel||document.activeElement!==a||(t.stopPropagation(),t.preventDefault(),0<t.deltaY?a.next():a.prev(),a._changeEvent(n,a._currentIndex))}_handleRotation(t){const a=this;t?a._rotationInterval=setInterval(function(){a.slideShow&&a.next()},a.interval):clearInterval(a._rotationInterval)}_handleSwipe(t){const a=this;a.disabled||!a.swipe||(t.stopPropagation(),t.preventDefault(),"swipeleft"===t.type?a.prev():a.next())}_generateIndicator(t){const a=this,n=document.createElement("span"),i=t?t:0;if(a.indicatorTemplate){const t=a._validateTemplate(a.indicatorTemplate);n.innerHTML=a._processItemTemplate(t.content,a.dataSource[i])}return n.classList.add("smart-indicator"),n.setAttribute("indicator-id",i),n}_generateIndicators(){const t=this,a=t.dataSource.length;let n=[],o=document.createDocumentFragment();for(let r=0;r<a;r++){const a=t._generateIndicator(r);n.push(a),o.appendChild(a)}t._indicators=n,t.$.indicatorsContainer.innerHTML="",t.$.indicatorsContainer.appendChild(o)}_generateItem(t){const a=this,n=document.createElement("div"),i=t?t:0;if(a.itemTemplate){const t=a._validateTemplate(a.itemTemplate);n.innerHTML=a._processItemTemplate(t.content,a.dataSource[i])}else{const t=a.dataSource[i];n.innerHTML=`<div class="smart-carousel-item-container" style="background-image:url('${t.image||""}')">
                        <h2 class="smart-carousel-item-label">${t.label||""}</h2>
                        <p class="smart-carousel-item-content">${t.content||""}</p>
                    </div>
                    <div class="smart-carousel-html-content">${t.HTMLcontent||""}</div>
                </div>`}return n.classList.add("smart-carousel-item"),n.setAttribute("item-id",i),n}_processItemTemplate(t,a){const n=/{{\w+}}/g,i=t.match(n);let o=t;return i&&0!==i.length?(i.forEach(function(t){const n=t.replace("{{","").replace("}}","");o=o.replace(t,a[n]||"")}),o):o}_generateItems(){const t=this,a=t.dataSource.length;let n=[],o=document.createDocumentFragment();for(let r=0;r<a;r++){const a=t._generateItem(r);n.push(a),o.appendChild(a)}t._items=n,t.$.itemsContainer.innerHTML="",t.$.itemsContainer.appendChild(o)}_goToItem(t,a){const n=this,i=n.dataSource.length,o=n._currentIndex;let r=t;0>t?r=0:t>i-1&&(r=i-1),n._removeFadeOut(),n._animationTrigger(),n._handleIndicatorsState(o,r),n._handleItemsState(o,r),n._currentIndex=r,a&&n._changeEvent(o,r),n._handle3dMode(r),n._handleMultipleMode(r),n._handleArrowsActiveState(r,o)}_setFocusable(){const t=this;if(t.disabled||t.unfocusable)return t.removeAttribute("tabindex"),void(t.tabIndex=-1);let a=0<t.tabIndex?t.tabIndex:0;t.setAttribute("tabindex",a),t.tabIndex=a}_setInitialState(){const t=this;t._currentIndex=0,t._indicators=[],t._items=[],t._rotate=!1,t._handleDefaultInnerHTML()}_validateTemplate(t){const a=this;let n="",i=!1,o=/{{\w+}}/g;return("function"==typeof t&&(n=t()),!("content"in document.createElement("template")))?(a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()})),void(a.itemTemplate=null)):(t instanceof HTMLElement?n=t.innerHTML:(t=document.getElementById(t),n=t?t.innerHTML:""),o.exec(n)&&(i=!0),{content:n,hasBindings:i})}_handleTransitionEnd(t){if(t.target.classList.contains("smart-carousel-item")&&!t.target.getAttribute("position")){const a=this,n=t.target.getAttribute("item-id");a._lastTransitionEndId===n||(a._removeFadeOut(),this.$.fireEvent("change",{index:n,previousIndex:a._lastTransitionEndId}),a._lastTransitionEndId=n)}}_removeFadeOut(){const t=this,a=t.$.itemsContainer.getElementsByClassName("smart-out");if(a.length)for(let t=0;t<a.length;t++)a[t].classList.remove("smart-out")}}),Smart("smart-chip",class extends Smart.ContentElement{static get properties(){return{avatar:{value:null,type:"string?"},closeButton:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"any?",reflectToAttribute:!1},value:{value:"",type:"string"}}}static get listeners(){return{click:"_clickHandler",keydown:"_keyDownHandler"}}static get styleUrls(){return["smart.chip.css"]}template(){return`<div id="container">
                    <span id="avatar" class ="smart-avatar">[[avatar]]</span><!--
                --><span id="value" class ="smart-value" inner-h-t-m-l="[[innerHTML]]"><content></content></span><!--
                --><span id="closeButton" class ="smart-close-button"></span>
            </div>`}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;"disabled"===t||"unfocusable"===t?i._setFocusable():"avatar"===t?i.itemTemplate?i._setAvatar(i._customAvatar):i._setAvatar(i.$.avatar):"itemTemplate"===t?i._applyTemplate():"value"===t?i.itemTemplate?i._applyTemplate():i.$.value.innerHTML=n||"":void 0}ready(){super.ready();const t=this;t.value=t.value?t.value:t.innerHTML,t._applyTemplate(),t._setFocusable()}close(){const t=this;t.$.fireEvent("close",{value:t.value}),t.parentElement.removeChild(t)}_applyTemplate(){const t=this;let a=t.itemTemplate;if(!a)return t.$.value.innerHTML=t.value,void t._setAvatar(t.$.avatar);if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(a instanceof HTMLTemplateElement||(a=document.getElementById(a)),null===a||!("content"in a))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase()}));let n=a.innerHTML;t.$.container.innerHTML=n.replace(/{{\s*value\s*}}/g,t.value),t._customAvatar=t.$.container.querySelector(".smart-avatar"),t._setAvatar(t._customAvatar)}_clickHandler(t){const a=this;if(!a.disabled){const n=a.enableShadowDOM?a.shadowRoot.elementFromPoint(t.pageX,t.pageY):t.target;n.closest&&n.closest(".smart-close-button")&&a.close()}}_keyDownHandler(t){const a=this;let n=t.key;a.disabled||a.readonly||"Delete"!==n||a.close()}_setAvatar(t){if(t){const a=this,n=/\.(gif|jpg|jpeg|tiff|png)$/i.test(a.avatar);t.innerHTML=n?"<img src=\""+a.avatar+"\" />":a.avatar||""}}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}}),Smart("smart-list-item",class extends Smart.ContentElement{static get properties(){return{alternationIndex:{value:-1,type:"int"},displayMode:{allowedValues:["plain","checkBox","radioButton"],value:"plain",type:"string"},grouped:{value:!1,type:"boolean"},selected:{value:!1,type:"boolean"},value:{value:"",type:"string"},label:{value:"",type:"string"},details:{value:"",type:"string"},group:{value:"",type:"string"},hidden:{value:!1,type:"boolean"},readonly:{value:!1,type:"boolean"}}}get hasStyleObserver(){return!1}get enableShadowDOM(){return!1}get _focused(){const t=this;return void 0===t.__focused&&(t.__focused=!1),t.__focused}set _focused(t){const a=this;a.__focused=t,t?a.setAttribute("focus",""):a.removeAttribute("focus")}template(){return`<div id="container">
                   <span id='itemInput' class ='smart-input smart-hidden'></span>
                    <span class ="smart-overlay" id="overlay"></span>
                    <div id="itemContainer" class ="smart-content smart-list-item-container"><span class="smart-content-label" inner-h-t-m-l=\'[[innerHTML]]\'><content></content></span><span inner-h-t-m-l=\'[[details]]\' id="details" class="smart-content-details"></span></div>
                </div>`}appendChild(t){const a=this;if(!a.isCompleted||t.classList.contains("smart-ripple")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}a.$.itemContainer.innerHTML="",t instanceof HTMLElement&&a.$.itemContainer.appendChild(t)}insertBefore(t,a){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,t.concat(Array.prototype.slice.call(arguments)))}a.parentNode.insertBefore(t,a)}removeChild(t){const a=this;if(!a.isCompleted||t.classList.contains("smart-ripple")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&a.$.itemContainer.removeChild(t)}attached(){const t=this;super.attached(),t.ownerListBox=t.getListBox()}static get listeners(){return{mouseenter:"_itemOnMouseEnter",mouseleave:"_itemOnMouseLeave"}}ready(){super.ready();const t=this;""===t.label?""!==t.innerHTML&&(t.label=t.innerHTML):t.innerHTML=t.label,t._setDisplayMode(t.displayMode),t.$.container.noRipple=!0}propertyChangedHandler(t,a,n){const i=this;if(super.propertyChangedHandler(t,a,n),"hidden"===t&&(n?i.$.addClass("smart-hidden"):i.$.removeClass("smart-hidden")),"displayMode"===t&&i._setDisplayMode(n),"label"===t){const t=i.context;i.context=document,i.innerHTML=n;const a=i.getListBox();a.onItemUpdated(i),i.context=t}if("details"===t){const t=i.context;i.context=document,i.$.details.innerHTML=n;const a=i.getListBox();a.onItemUpdated(i),i.context=t}if("innerHTML"===t){const t=i.getListBox();t.onItemUpdated(i)}}getListBox(){const t=this;let a=t.parentNode;for(;!1==a instanceof Smart.ListBox&&null!==a;)a=a.parentNode;return!a&&Smart.EnableShadowDOM?t.getRootNode().host:a}_itemOnMouseEnter(){const t=this;!t.disabled&&t.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&t.ownerListBox.allowDrop&&(Smart.ListBox.DragDrop.DropDetails={item:t,position:"bottom"}),t.ownerListBox.$.verticalScrollBar.thumbCapture||t.ownerListBox.$.horizontalScrollBar.thumbCapture||t.setAttribute("hover",""))}_itemOnMouseMove(t){const a=this;if(a.ownerListBox&&Smart.ListBox.DragDrop.Dragging&&a.ownerListBox.allowDrop&&!Smart.Utilities.Core.isMobile){const n=[].slice.call(a.ownerListBox.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<n.length;t++)n[t].$.removeClass("smart-list-item-line-feedback"),n[t].$.removeClass("smart-list-item-bottom-line-feedback");if(Smart.ListBox.DragDrop.DropDetails={item:a,position:"top"},!a.ownerListBox._areCSSVarsSupported){if(a.ownerListBox._indexOf(a)===a.ownerListBox._items.length-1||a.parentNode.lastElementChild===a){const n=a.getBoundingClientRect();t.pageY-window.pageYOffset>n.top+n.height/2-1&&(Smart.ListBox.DragDrop.DropDetails={item:a,position:"bottom"})}return}if(a.$.removeClass("smart-list-item-line-feedback"),a.$.removeClass("smart-list-item-bottom-line-feedback"),a.ownerListBox.sorted&&a.ownerListBox.autoSort)return;const i=a.ownerListBox._items.filter(t=>!t.hidden);if(i.indexOf(a)===i.length-1||a.parentNode.lastElementChild===a){const n=a.getBoundingClientRect();t.pageY-window.pageYOffset>n.top+n.height/2-1?(a.$.addClass("smart-list-item-bottom-line-feedback"),Smart.ListBox.DragDrop.DropDetails={item:a,position:"bottom"}):!arguments[1]&&a.$.addClass("smart-list-item-line-feedback")}else arguments[1]||a.$.addClass("smart-list-item-line-feedback")}}_itemOnMouseLeave(){const t=this;t.ownerListBox&&(Smart.ListBox.DragDrop.Dragging&&(t.$.removeClass("smart-list-item-line-feedback"),t.$.removeClass("smart-list-item-bottom-line-feedback")),t.removeAttribute("hover"))}_setDisplayMode(t){const a=this,n=a.getListBox();if(n){const i="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"plain";a.displayMode=t=i}return"plain"===t?void a.$itemInput.addClass("smart-hidden"):void a.$itemInput.removeClass("smart-hidden")}}),Smart("smart-list-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"}}}get enableShadowDOM(){return!1}template(){return`<div id="container">
                 <span id="itemsLabel" class ="smart-list-items-group-label">[[label]]</span>
                 <div id="listItemsGroupContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-items-group-container">
                    <content></content>
                 </div>
               </div>`}appendChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&a.$.listItemsGroupContainer.appendChild(t)}removeChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t instanceof HTMLElement&&a.$.listItemsGroupContainer.removeChild(t)}getListBox(){const t=this;let a=t.parentNode;for(;!1==a instanceof Smart.ListBox&&null!==a;)a=a.parentNode;return a}attached(){const t=this;super.attached(),t.ownerListBox||(t.ownerListBox=t.getListBox())}}),Smart("smart-list-box",class extends Smart.ScrollViewer{static get properties(){return{allowDrag:{value:!1,type:"boolean"},allowDrop:{value:!1,type:"boolean"},alternationStart:{value:0,type:"int"},alternationEnd:{value:0,type:"int"},alternationCount:{value:0,type:"int"},autoSort:{value:!0,type:"boolean"},dataSource:{value:null,type:"any?",reflectToAttribute:!1},displayLoadingIndicator:{value:!1,type:"boolean"},displayMember:{value:"",type:"string"},shadowDomMode:{allowedValues:["light","shadow"],value:"shadow",type:"string"},dropAction:{value:"move",type:"string",allowedValues:["copy","move","none"]},editable:{value:!1,type:"boolean"},filterable:{value:!1,type:"boolean"},filterCallback:{value:null,type:"function?"},filterMode:{value:"containsIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase","custom"],type:"string"},filterInputPlaceholder:{value:"",type:"string"},grouped:{value:!1,type:"boolean"},groupMember:{value:"",type:"string"},itemTemplate:{value:null,type:"any"},itemHeight:{value:null,type:"number?"},incrementalSearchDelay:{value:700,type:"number?"},incrementalSearchMode:{value:"startsWithIgnoreCase",allowedValues:["contains","containsIgnoreCase","doesNotContain","doesNotContainIgnoreCase","equals","equalsIgnoreCase","startsWith","startsWithIgnoreCase","endsWith","endsWithIgnoreCase"],type:"string"},loadingIndicatorPlaceholder:{value:"Loading...",type:"string"},loadingIndicatorPosition:{value:"center",allowedValues:["bottom","center","top"],type:"string"},messages:{extend:!0,value:{en:{overridingProperties:"{{elementType}}: Overriding properties {{property1}} and {{property2}} applied. The \"{{property1}}\" property is used by default.",invalidIndex:"{{elementType}}: \"{{method}}\" method accepts an index of type number or an Array of numbers.",indexOutOfBound:"{{elementType}}: Out of bound index/indexes in \"{{method}}\" method.",invalidItem:"{{elementType}}: \"{{method}}\" method accepts an object or an array of objects as it's second parameter.",invalidSettings:"{{elementType}}: \"{{method}}\" method accepts a string or an object as it's second parameter."}},type:"object"},name:{value:"",type:"string"},placeholder:{value:"No Items",type:"string"},selectedIndexes:{value:[],type:"array"},selectedValues:{value:[],type:"array"},selectionMode:{value:"oneOrManyExtended",allowedValues:["none","oneOrManyExtended","zeroOrMany","oneOrMany","zeroOrOne","one","checkBox","radioButton"],type:"string"},selectionChangeAction:{value:"release",allowedValues:["press","release"],type:"string"},sorted:{value:!1,type:"boolean"},sortDirection:{value:"asc",type:"string"},topVisibleIndex:{value:-1,type:"int"},type:{value:"list",type:"string",defaultReflectToAttribute:!0,readonly:!0},valueMember:{value:"",type:"string"},virtualized:{value:!1,type:"boolean"}}}static get requires(){return{"Smart.ScrollBar":"smart.scrollbar.js"}}static get styleUrls(){return["smart.listbox.css"]}static get listeners(){return{focus:"_focusHandler",blur:"_blurHandler","container.wheel":"_mouseWheelHandler","editInput.change":"_editInputEventHandler","editInput.blur":"_editInputEventHandler","editInput.keydown":"_editInputEventHandler","horizontalScrollBar.change":"_horizontalScrollbarHandler","itemsInnerContainer.down":"_downHandler","itemsInnerContainer.dblclick":"_dblclickEventHandler","itemsInnerContainer.move":"_itemsContainerMoveHandler","itemsContainer.mouseleave":"_mouseLeaveHandler","document.up":"_upHandler","document.move":"_moveHandler",keydown:"_keyDownHandler",keyup:"_keyUpHandler",resize:"_resizeHandler",selectstart:"_selectStartHandler",styleChanged:"_styleChangedHandler",swipeleft:"_swipeLeftHandler",swiperight:"_swipeRightHandler","verticalScrollBar.change":"_verticalScrollbarHandler"}}template(){return`<div id="container" class="smart-container">
                 <div class="smart-list-box-filter-input-container smart-hidden" id="filterInputContainer">
                     <input id="filterInput" disabled="[[disabled]]" placeholder='[[filterInputPlaceholder]]'>
                 </div>
                 <div id="itemsContainer" class="smart-list-items-container">
                      <div id="placeholder" class ="smart-placeholder">[[placeholder]]</div>
                      <div id="itemsInnerContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-list-items-inner-container">
                          <content></content>
                      </div>
                      <input type="text" id="editInput" class= "smart-hidden"/>
                 </div>
                 <smart-scroll-bar wait id="verticalScrollBar" disabled="[[disabled]]" orientation="vertical"></smart-scroll-bar>
                 <smart-scroll-bar wait id="horizontalScrollBar" disabled="[[disabled]]" ></smart-scroll-bar>
                 <div id="loadingIndicatorContainer" class ="smart-loader-container">
                    <span id="loadingIndicator" class="smart-loader"></span>
                    <span id="loadingIndicatorPlaceHolder" class ="smart-loader-label smart-hidden">[[loadingIndicatorPlaceholder]]</span>
                 </div>
                <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}_mouseLeaveHandler(){const t=this,a=[].slice.call(t.getElementsByClassName("smart-list-item-bottom-line-feedback"));for(let t=0;t<a.length;t++)a[t].$.removeClass("smart-list-item-line-feedback"),a[t].$.removeClass("smart-list-item-bottom-line-feedback")}_downHandler(t){const a=this;if(a.disabled||a.displayLoadingIndicator||a.readonly)return;let n=t.originalEvent.target,i=null;if(n instanceof Smart.ListItem&&!n.disabled&&!n.hidden&&!(n instanceof Smart.ListItemsGroup))i=n.dataItem;else for(;n.parentElement;){if(n instanceof Smart.ListItem&&!n.disabled&&!n.hidden&&!(n instanceof Smart.ListItemsGroup)){i=n.dataItem;break}n=n.parentElement}Smart.ListBox.DragDrop.StartTime=new Date,Smart.ListBox.DragDrop.StartPosition={left:t.pageX,top:t.pageY};i&&(t.stopPropagation(),a.hasRippleAnimation&&!i.readonly&&!i.disabled&&Smart.Utilities.Animation.Ripple.animate(n.$.overlay,t.pageX,t.pageY),!Smart.Utilities.Core.isMobile&&"press"===a.selectionChangeAction&&(a._focus(i),a.select(i)),!Smart.ListBox.DragDrop.Feedback&&a.allowDrag&&(Smart.ListBox.DragDrop.Feedback=document.createElement("span"),Smart.ListBox.DragDrop.Feedback.appendChild(i.offsetHeight?i.cloneNode(!0):a._createItem(i)),Smart.ListBox.DragDrop.Item=i,Smart.Utilities.Extend(Smart.ListBox.DragDrop.Feedback).addClass("smart-popup smart-list-item smart-list-item-feedback")))}_dblclickEventHandler(t){const a=this;if(a.editable){const n=t.target.closest("smart-list-item");return!(n instanceof Smart.ListItem)||n.disabled||n.readonly?void a.$editInput.addClass("smart-hidden"):void(a.$.editInput.owner=n,a.$.editInput.value=n.label,a.$.editInput.style.height=n.offsetHeight+"px",a.$.editInput.style.top=n.offsetTop+"px",a.$editInput.hasClass("smart-hidden")&&a.$editInput.removeClass("smart-hidden"),a.$.editInput.focus())}}_editInputEventHandler(t){const a=this;if("blur"===t.type||"keydown"===t.type&&"Escape"===t.key)return a.$editInput.hasClass("smart-hidden")?void 0:a.$editInput.addClass("smart-hidden"),void a.focus();if(!("keydown"===t.type||a.$editInput.hasClass("smart-hidden"))){const n=t.target;if(t.stopPropagation(),n.owner.label!==n.value&&(n.owner.label=n.value,a.itemTemplate&&a._applyTemplate(n.owner),a.dataSource)){const t=n.owner.dataIndex,i=a.dataSource[t];i&&(a.displayMember?i[a.displayMember]=n.value:i.label=n.value)}a.$editInput.addClass("smart-hidden"),a.$.fireEvent("itemLabelChange",{selected:n.owner.selected,disabled:n.owner.disabled,index:a._indexOf(n.owner),label:n.owner.label,value:n.owner.value})}}_pointerUpHandler(t){const a=this;let n=t.originalEvent,i=n.target;const o=n=>{const o=n.ownerListBox;o.disabled||o!==a||o.displayLoadingIndicator||"none"===o.selectionMode||n.grouped||n.readonly||(o._focus(n),o.select(n),t.preventDefault(),Smart.ListBox.DragDrop.StartPosition=null,a.$.fireEvent("itemClick",{selected:i.selected,disabled:i.disabled,index:a._indexOf(i),label:i.label,value:i.value}))};if(n.target instanceof Smart.ListItem&&!n.target.disabled&&!(n.target instanceof Smart.ListItemsGroup))return void o(i.dataItem);for(;i.parentElement;){if(i instanceof Smart.ListItem&&!i.disabled&&!(i instanceof Smart.ListItemsGroup)){o(i.dataItem);break}i=i.parentElement}if(this.enableShadowDOM&&"shadow"===this.shadowDomMode){const t=n.composedPath();for(let a=0;a<t.length;a++){const n=t[a];n instanceof Smart.ListItem&&!n.disabled&&o(n.dataItem)}}}_upHandler(t){var a=Math.abs;const n=this;if(!(n.disabled||n.readonly||!Smart.ListBox.DragDrop.StartPosition)){if(Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging){const i=a(t.pageX-Smart.ListBox.DragDrop.StartPosition.left),o=a(t.pageY-Smart.ListBox.DragDrop.StartPosition.top);let r=0<=i&&3>=i&&0<=o&&3>=o;if(Smart.Utilities.Core.isMobile&&300<=new Date-Smart.ListBox.DragDrop.StartTime&&(r=!1,Smart.ListBox.DragDrop.StartTime=null),r){const a=t.originalEvent.target.closest("smart-list-box");a?a._pointerUpHandler(t):n._pointerUpHandler(t),Smart.ListBox.DragDrop.StartPosition=null}else{let a=t.originalEvent.target;if(t.target instanceof Smart.ListItem&&!a.readonly&&!t.target.disabled&&!(t.target instanceof Smart.ListItemsGroup))t.preventDefault(),t.stopPropagation();else for(;a.parentElement;){if(a instanceof Smart.ListItem&&!a.readonly&&!a.disabled&&!(a instanceof Smart.ListItemsGroup)){t.preventDefault(),t.stopPropagation();break}a=a.parentElement}}}else if(!Smart.Utilities.Core.isMobile&&!Smart.ListBox.DragDrop.Dragging&&"release"===n.selectionChangeAction){const a=t.originalEvent.target.closest("smart-list-box");a?a._pointerUpHandler(t):n._pointerUpHandler(t)}if(Smart.ListBox.DragDrop.Feedback){Smart.ListBox.DragDrop.Feedback.parentNode&&Smart.ListBox.DragDrop.Feedback.parentNode.removeChild(Smart.ListBox.DragDrop.Feedback),Smart.ListBox.DragDrop.Feedback=null;let a;if(Smart.Utilities.Core.isMobile&&Smart.ListBox.DragDrop.Dragging)for(let n=0;n<Smart.ListBox.DragDrop.ListBoxes.length;n++){const o=Smart.ListBox.DragDrop.ListBoxes[n],r=o.getBoundingClientRect();if(o.allowDrop&&!o.closest(".smart-visibility-hidden")&&r.left<=t.pageX&&t.pageX<=r.left+r.width&&r.top<=t.pageY&&t.pageY<=r.top+r.height){a=o;const n=o._items.filter(t=>!t.hidden);for(let a=0;a<n.length;a++){const i=n[a],l=i.getBoundingClientRect();if((n.indexOf(i)===n.length-1||i.parentNode.lastElementChild===i)&&t.pageY>=r.top+i.offsetTop-o.scrollTop+l.height/2&&t.pageY<=r.top-o.scrollTop+i.offsetTop+l.height){Smart.ListBox.DragDrop.DropDetails={item:i,position:"bottom"};break}if(t.pageY>=r.top+i.offsetTop-o.scrollTop&&t.pageY<=r.top+i.offsetTop+l.height-o.scrollTop){Smart.ListBox.DragDrop.DropDetails={item:i,position:"top"};break}}}}if(Smart.ListBox.DragDrop.Dragging){if(Smart.ListBox.DragDrop.DropDetails){let n=Smart.ListBox.DragDrop.DropDetails.item,i=Smart.ListBox.DragDrop.Item;const o=i.ownerListBox;if(a=!a&&t.originalEvent.target.closest?t.originalEvent.target.closest("smart-list-box"):a,n.$.removeClass("smart-list-item-line-feedback"),n.$.removeClass("smart-list-item-bottom-line-feedback"),a&&n.ownerListBox!==a&&0<a.items.length&&(n=a.items[a.items.length-1]),!(Smart.ListBox.DragDrop.Item!==n&&(a===n.ownerListBox||Smart.Utilities.Core.isMobile)))a&&0===a._items.length&&"none"!==a.dropAction&&("move"===a.dropAction?Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item):"copy"===a.dropAction&&(i=i.cloneNode(!0)),a.appendChild(i));else if("none"!==i.ownerListBox.dropAction){n.ownerListBox!==i.ownerListBox&&"move"===i.ownerListBox.dropAction&&Smart.ListBox.DragDrop.Item.ownerListBox.removeChild(Smart.ListBox.DragDrop.Item),"copy"===i.ownerListBox.dropAction&&(i=i.cloneNode(!0)),Smart.ListBox.DragDrop.Item.group=n.group;const t=n.ownerListBox;"checkBox"!==t.selectionMode&&"radioButton"!==t.selectionMode&&t.clearSelection(),"top"===Smart.ListBox.DragDrop.DropDetails.position?t.insertBefore(i,n):n.parentNode.lastElementChild===n?t.appendChild(i):t.appendChild(i,n),t.ensureVisible(i),"checkBox"===t.selectionMode||"radioButton"===t.selectionMode?(t._focus(i),t._refreshSelection()):(t.clearSelection(),t.select(i))}i.selected&&a!==o&&o._refreshSelection();const r=Smart.ListBox.DragDrop.Item,l=r.ownerListBox;r.displayMode="checkBox"===l.selectionMode||"radioButton"===l.selectionMode?l.selectionMode:"plain",l.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:r.selected,disabled:r.disabled,index:l._indexOf(r),label:r.label,value:r.value}),l._focus(r)}else{const a=Smart.ListBox.DragDrop.Item,n=a.ownerListBox;a.displayMode="checkBox"===n.selectionMode||"radioButton"===n.selectionMode?n.selectionMode:"plain",n.$.fireEvent("dragEnd",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:a.selected,disabled:a.disabled,index:n._indexOf(a),label:a.label,value:a.value}),n._focus(a)}t.preventDefault()}Smart.ListBox.DragDrop.Dragging=!1,Smart.ListBox.DragDrop.Item=null,Smart.ListBox.DragDrop.DropDetails=null}for(let t=0;t<Smart.ListBox.DragDrop.ListBoxes.length;t++){const a=Smart.ListBox.DragDrop.ListBoxes[t];a._dragInterval&&clearInterval(a._dragInterval)}}}_itemsContainerMoveHandler(t){const a=this;if(Smart.ListBox.DragDrop.Dragging)return a._applyItemFeedback(t),a._moveHandler(t),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}_applyItemFeedback(t){const a=this,n=t.originalEvent.target,i=n.closest?n.closest("smart-list-item"):n;return Smart.Utilities.Core.isMobile?void(Smart.ListBox.DragDrop.DropDetails={item:Smart.ListBox.DragDrop.Item,position:"bottom"}):0===a.items.length?void 0:i?void i._itemOnMouseMove(t):void a.items[a.items.length-1]._itemOnMouseMove(t,!0)}_moveHandler(t){var a=Math.abs;if(Smart.ListBox.DragDrop.Feedback)if(!Smart.ListBox.DragDrop.Dragging){const n=a(t.pageX-Smart.ListBox.DragDrop.StartPosition.left),i=a(t.pageY-Smart.ListBox.DragDrop.StartPosition.top),o=new Date-Smart.ListBox.DragDrop.StartTime;let r=5<=n&&15>=n||5<=i&&15>=i;if(Smart.Utilities.Core.isMobile&&(300>o||1e3<o)&&(r=!1),r){Smart.ListBox.DragDrop.Dragging=!0,Smart.ListBox.DragDrop.Feedback.style.left=5+t.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=5+t.pageY+"px",document.body.appendChild(Smart.ListBox.DragDrop.Feedback),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();const a=Smart.ListBox.DragDrop.Item,n=a.ownerListBox;n.$.fireEvent("dragStart",{position:{left:t.pageX,top:t.pageY},target:t.originalEvent.target,selected:a.selected,disabled:a.disabled,index:n._indexOf(a),label:a.label,value:a.value})}}else{Smart.ListBox.DragDrop.Feedback.style.left=5+t.pageX+"px",Smart.ListBox.DragDrop.Feedback.style.top=5+t.pageY+"px";for(let a=0;a<Smart.ListBox.DragDrop.ListBoxes.length;a++){const n=Smart.ListBox.DragDrop.ListBoxes[a];n._dragInterval&&clearInterval(n._dragInterval),n._dragInterval=setInterval(function(){const a=n.getBoundingClientRect();a.left<=t.clientX&&a.left+a.width>=t.clientX&&(t.clientY>=a.top&&t.clientY<=a.top+20?n.scrollTop-=2:t.clientY>=a.top+a.height-20&&t.clientY<=a.top+a.height&&(n.scrollTop+=2))},1)}return t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),!1}}_focusHandler(){const t=this;t._focused=!0,t.setAttribute("focus","")}_blurHandler(){const t=this;t._focused=!1,t.removeAttribute("focus")}appendChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}a.isVirtualized?(-1<a._items.indexOf(t)&&a._items.splice(a._items.indexOf(t),1),a._items.push(t)):(t.dataItem=t,a.enableShadowDOM&&"light"===a.shadowDomMode?a.appendChild(t):a.$.itemsInnerContainer.appendChild(t),-1<a._items.indexOf(t)&&a._items.splice(a._items.indexOf(t),1),a._items.push(t)),a._refreshItems(),a._refreshSelection()}insertBefore(t,a){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,t.concat(Array.prototype.slice.call(arguments)))}n.isVirtualized?(-1<n._items.indexOf(t)&&n._items.splice(n._items.indexOf(t),1),n._items.splice(n._indexOf(a),0,t)):(t.dataItem=t,a.parentNode.insertBefore(t,a),-1<n._items.indexOf(t)&&n._items.splice(n._items.indexOf(t),1),n._items.splice(n._indexOf(a),0,t)),n._refreshItems(),n._refreshSelection()}removeChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}if(a.isVirtualized)a._items.splice(a._indexOf(t),1);else if(t.parentNode){const n=a.selectedIndexes.slice(0),i=a.selectedValues.slice(0),o=n.indexOf(t.dataIndex);t.parentNode.removeChild(t),-1<o&&(n.splice(o,1),i.splice(o,1),a.selectedIndexes=n,a.selectedValues=i)}a._refreshItems()}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const o=this;switch(t){case"innerHTML":o.clearSelection(),o._dataBind(),o.innerHTML=o.content=Smart.Utilities.Core.html(o.$.content);break;case"dataSource":case"valueMember":case"groupMember":case"displayMember":{o.clearSelection(),o._dataBind();break}case"disabled":case"unfocusable":o._setFocusable();break;case"displayLoadingIndicator":{o._setLoadingIndicatorVisibility();break}case"filterable":{o._refreshFilter(),o._refreshLayout();break}case"grouped":{if(n?o._group():o._ungroup(),!("radioButton"===o.selectionMode))o._refreshSelection();else if(0<o.selectedValues.length){const t=o.selectedValues;o.clearSelection(),o.select(t[0])}o._refreshLayout();break}case"itemTemplate":{if(null===n||""===n)return o._items.map(t=>t.innerHTML=t.label),delete o._bindingDetails,void o._refreshLayout();const t=o.querySelectorAll("smart-list-item"),a=function(){o._handleItemTemplate(n)&&(o._items.map(t=>o._applyTemplate(t)),o._refreshLayout()),o.ownerElement&&o.ownerElement._setDropDownSize&&o.ownerElement._setDropDownSize(),o.$.fireEvent("bindingComplete")};0===t.length?a():o._ensureItemsReady(t,a);break}case"selectedIndexes":case"selectedValues":{let r=o.selectedIndexes.slice(0),i=o.selectedValues.slice(0);if(!o._items||0===o._items.length)return o.selectedIndexes=[],o.selectedValues=[],void(o.$.hiddenInput.value=o.selectedValues.toString());if(o._propertyChanging=!0,"selectedIndexes"===t){r=a.slice(0),o.clearSelection();for(let t=0;t<n.length;t++){const a=n[t],i=o._items[a];i&&("oneOrManyExtended"===o.selectionMode||"oneOrMany"===o.selectionMode?(0<o.selectedIndexes.length&&0==t&&o.clearSelection(),o._select(i)):o.select(i))}}else{i=a.slice(0),o.selectedValues=[],o.clearSelection();for(let t=0;t<n.length;t++){const a=n[t],i=o.getItem(a);i&&("oneOrManyExtended"===o.selectionMode?o._select(i):o.select(i))}}if(0<o.selectedIndexes.length&&o._focus(o._items[o.selectedIndexes[0]]),o._propertyChanging=!1,JSON.stringify(i)!==JSON.stringify(o.selectedValues.slice(0))){let t=[],a=[];for(let t=0;t<r.length;t++)0>o.selectedIndexes.indexOf(r[t])&&a.push(o._items[r[t]]);for(let a=0;a<o.selectedIndexes.length;a++)0>r.indexOf(o.selectedIndexes[a])&&t.push(o._items[o.selectedIndexes[a]]);let n={addedItems:t,removedItems:a};if(0<o.selectedIndexes.length){const t=o._items[o.selectedIndexes[o.selectedIndexes.length-1]];t!==void 0&&(n.selected=t.selected,n.disabled=t.disabled,n.index=o._indexOf(t),n.label=t.label,n.value=t.value)}else n.selected=!1,n.disabled=!1,n.index=-1,n.label="",n.value="";o.$.fireEvent("change",n)}break}case"selectionMode":{const t="checkBox"===o.selectionMode||"radioButton"===o.selectionMode?o.selectionMode:"plain",a=o.selectedIndexes.slice(0),n=o.selectedValues.slice(0);o._propertyChanging=!0;const r=o.selectedValues;o.selectedValues=[],o.clearSelection();for(let t=0;t<r.length;t++){const a=r[t],n=o.getItem(a);n&&("oneOrManyExtended"===o.selectionMode?o._select(n):o.select(n))}if(o._items.forEach(a=>a.displayMode=t),o._recycle(),o._propertyChanging=!1,JSON.stringify(n)!==JSON.stringify(o.selectedValues.slice(0))){let t=[],n=[];for(let t=0;t<a.length;t++)0>o.selectedIndexes.indexOf(a[t])&&n.push(o._items[a[t]]);for(let n=0;n<o.selectedIndexes.length;n++)0>a.indexOf(o.selectedIndexes[n])&&t.push(o._items[o.selectedIndexes[n]]);let i={addedItems:t,removedItems:n};if(0<a.length){const t=o._items[a[a.length-1]];t&&(i.selected=t.selected,i.disabled=t.disabled,i.index=o._indexOf(t),i.label=t.label,i.value=t.value)}o.$.fireEvent("change",i)}break}case"topVisibleIndex":o._setTopVisibleIndex(n);break;case"autoSort":o._canSort=n;break;case"sortDirection":case"sorted":{o._canSort=!0,n?o._sort():o._unsort();const t=o.selectedValues;o.selectedValues=[],o._refreshSelection();for(let a=0;a<t.length;a++){const n=t[a],i=o.getItem(n);i&&("oneOrManyExtended"===o.selectionMode?o._select(i):o.select(i))}o._refreshLayout(),o._canSort=o.autoSort;break}}}_refreshSelection(){const t=this;if(t._items&&0!==t._items.length){const a=t.selectedValues;t.selectedIndexes=[],t.selectedValues=[];for(let n=0;n<t._items.length;n++){const i=t._items[n];i.selected=!1,-1<a.indexOf(i.value)&&t.select(i)}t._recycle()}}clearSelection(){const t=this;if(!t._items||0===t._items.length)return;let a=[];for(let n=0;n<t._items.length;n++)t._items[n].selected&&a.push(t._items[n]);t._items.map(t=>t.selected=!1);const n=t.selectedValues.slice(0),i=t.selectedIndexes.slice(0);if(t.selectedIndexes=[],t.selectedValues=[],t.$.hiddenInput.value=t.selectedValues.toString(),t._recycle(),t.context!==t){let n={addedItems:[],removedItems:a};if(0<i.length){const a=t._items[i[i.length-1]];a&&(n.selected=a.selected,n.disabled=a.disabled,n.index=t._indexOf(a),n.label=a.label,n.value=a.value)}t.$.fireEvent("change",n)}}ensureVisible(t){const a=this;if(t)return!("string"==typeof t&&(t=a.getItem(t),!t))&&(a.isVirtualized||a.$.itemsContainer.scrollTop===a.scrollTop||(a.scrollTop=a.$.itemsContainer.scrollTop),t.top+t.height>=a.scrollTop+a.offsetHeight&&(a.scrollTop+=t.height,!a.isVirtualized&&(a.$.itemsContainer.scrollTop=a.scrollTop)),(t.top<=a.scrollTop||t.top>=a.scrollTop+a.$.itemsContainer.offsetHeight)&&(a.scrollTop=t.top,!a.isVirtualized&&(a.$.itemsContainer.scrollTop=a.scrollTop)),0===a._indexOf(t)||1===a._indexOf(t)&&1<a._items.length&&a._items[0].grouped?(a.scrollTop=0,!a.isVirtualized&&(a.$.itemsContainer.scrollTop=a.scrollTop)):a._indexOf(t)===a._items.length-1&&(a.scrollTop=a.scrollHeight,!a.isVirtualized&&(a.$.itemsContainer.scrollTop=a.scrollTop)),!0)}get items(){const t=this;return t._filteredItems?t._filteredItems:t._items}ready(){super.ready();const t=this;if(t.enableShadowDOM&&"light"===t.shadowDomMode){const a=document.createDocumentFragment();[].slice.call(t.$.itemsInnerContainer.children).map(t=>a.appendChild(t)),t.appendChild(a),t.$.itemsInnerContainer.appendChild(document.createElement("slot"))}t._areCSSVarsSupported=Smart.Utilities.Core.CSSVariablesSupport(),t._keysPressed={},t._incrementalSearchQuery="",t._incrementalSearchItems=[],t._canSort=!0,t._previousEntry="",t.isUpdating=0,t._scrollView&&(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar),t._scrollView.hScrollBar.$.addClass("smart-hidden"),t._scrollView.vScrollBar.$.addClass("smart-hidden"));const a=t._scrollView.vScrollBar,n=t._scrollView.hScrollBar;a.hasStyleObserver=!1,n.hasStyleObserver=!1,a.hasResizeObserver=!1,n.hasResizeObserver=!1,a.wait=!1,n.wait=!1,t._setFocusable(),t._setLoadingIndicatorVisibility(),t._refreshFilter(),t._initializeInnerHTML(),t._dataBind()}attached(){const t=this;super.attached(),Smart.ListBox.DragDrop||(Smart.ListBox.DragDrop={ListBoxes:[]}),Smart.ListBox.DragDrop.ListBoxes.push(t),t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar)),0<t.selectedIndexes.length&&t.ensureVisible(t._items[t.selectedIndexes[0]])}detached(){const t=this;if(super.detached(),t._scrollView&&(t._scrollView.unlisten(),delete t._scrollView),Smart.ListBox.DragDrop&&Smart.ListBox.DragDrop.ListBoxes){const a=Smart.ListBox.DragDrop.ListBoxes.indexOf(t);Smart.ListBox.DragDrop.ListBoxes.splice(a,1)}}_createItem(t,a,n){const i=this,o="checkBox"===i.selectionMode||"radioButton"===i.selectionMode?i.selectionMode:"plain",r=n?{}:document.createElement("smart-list-item");r.ownerListBox=i,"number"==typeof t&&(t=""+t);const l=function(a,n){return void 0===t[a]?t[n]:""+t[a]};let s="string"==typeof t?t:l(i.displayMember,"label"),d="string"==typeof t?t:l(i.valueMember,"value"),c=l(i.groupMember,"group");return void 0===s&&(void 0===a?s="":s=""+a),r.label=r.innerHTML=""+s,void 0===d&&(void 0===a?d=s:d=""+a),r.value=""+d,r.displayMode=o,r.selected=!!t.selected&&t.selected,r.disabled=!!t.disabled&&t.disabled,r.dataItem=r,void 0!==a&&(r.dataIndex=a),i._alternateItem(r),t.title&&(r.title=t.title),c&&(r.group=""+c),r}_alternateItem(t){const a=this,n=a.alternationStart,i=0<a.alternationEnd?a.alternationEnd:1/0;0>=a.alternationCount||(a._alternationIndexCounter===void 0&&(a._alternationIndexCounter=0),t.dataIndex>=n&&t.dataIndex<=i&&(t.alternationIndex=a._alternationIndexCounter++,a._alternationIndexCounter===a.alternationCount&&(a._alternationIndexCounter=0)))}_beginUpdate(){const t=this;t.isUpdating++}_isUpdating(){const t=this;return 0<t.isUpdating}_endUpdate(){const t=this;t.isUpdating--}get _scrollHeight(){const t=this;let a=0;if(t.isVirtualized){if(t.__scrollHeight)return t.__scrollHeight;if(0===t._items.length)return 0;t.isUpdating++;const n=t._createItem(t.dataSource[0]);t.$.itemsInnerContainer.appendChild(n);for(let o=0;o<t._items.length;o++){const i=t._items[o];if(i.hidden){i.height=0,i.top=a;continue}t.itemHeight?(32>t.itemHeight&&(t.itemHeight=32),i.height=t.itemHeight):(n.label=i.label,i.height=n.offsetHeight),i.top=a,a+=i.height}t.$.itemsInnerContainer.removeChild(n),t.__scrollHeight=a-t.$.itemsInnerContainer.offsetHeight,t.filterable&&(t.__scrollHeight+=t.$.filterInput.offsetHeight),a=t.__scrollHeight,t.isUpdating--}else{for(let n=0;n<t._items.length;n++){const i=t._items[n];if(i.hidden){i.height=0,i.top=a;continue}t.itemHeight?"auto"!==t.itemHeight&&(i.height=t.itemHeight,i.style.height=i.height+"px"):i.height=i.offsetHeight,i.top=i.offsetTop,a+=i.height}a=t.$.itemsInnerContainer.scrollHeight-t.$.itemsInnerContainer.offsetHeight,t.filterable&&0<a&&(a+=t.$.filterInput.offsetHeight),t.__scrollHeight=a}return 0+a}_initializeRecyclingItems(){const t=this;if(!t.dataSource||t.dataSource&&0===t.dataSource.length||!t.isVirtualized)return;let a=0,n=t.offsetHeight;t.$.itemsInnerContainer.innerHTML="",t._recyclingItems=[];const i=function(){for(let o=0;o<t.dataSource.length;o++){const i=t.dataSource[o],r=t._createItem(i);if(t.itemHeight&&"auto"!==t.itemHeight&&(r.style.height=t.itemHeight+"px"),t.$.itemsInnerContainer.appendChild(r),a+=r.offsetHeight,r.dataItem=t._items[o],t._recyclingItems.push(r),a>1.5*n)break}};i();for(let t=0;a<1.5*n&&5>++t;)i()}_dataBind(){const t=this;if(t._scrollView||(t._scrollView=new Smart.Utilities.Scroll(t,t.$.horizontalScrollBar,t.$.verticalScrollBar)),"function"==typeof t.dataSource&&(t._items=[]),"string"==typeof t.dataSource&&(t.dataSource=JSON.parse(t.dataSource)),null!==t.dataSource&&Array.isArray(t.dataSource)){t.isUpdating++;const a=a=>{t._items=[],t._groups=[];for(let n=0;n<t.dataSource.length;n++){const i=t.dataSource[n],o=a?t._createItem(i,n):t._createItem(i,n,!0);t._items[n]=o,a&&a.appendChild(o)}};if(t.isVirtualized)a(),t._initializeRecyclingItems();else{const n=document.createDocumentFragment();t.$.itemsInnerContainer.innerHTML="",a(n),t.$.itemsInnerContainer.appendChild(n)}t.isUpdating--}const a=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item"),n=function(){t.isUpdating++,t.dataSource||(t._initializeHtmlListItems(),t._initializeHtmlListGroups()),t.grouped&&t._group(),t.sorted&&t._sort(),t._refreshLayout(),t._initializeSelection(),t.isInitialized=!0,t._canSort=t.autoSort,t.isUpdating--,t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&(t._items.map(a=>t._applyTemplate(a)),t._refreshLayout()),t.__onCompleted&&(t._onCompleted=t.__onCompleted,t.__onCompleted=null,t._onCompleted()),-1<t.topVisibleIndex&&t._setTopVisibleIndex(t.topVisibleIndex),t.$.fireEvent("bindingComplete"),t._updateTopVisibleIndex(),0===t._items.length&&t.clearItems()};0===a.length?n():(t._onCompleted&&(t.__onCompleted=t._onCompleted,t._onCompleted=null),t._ensureItemsReady(a,n))}_ensureItemsReady(t,a){const n=this,i=function(){const n=function(a){for(let n=0;n<t.length;n++)t[n].context="node"===a?t[n]:document};n("node"),a(),n()};if(0===t.length)i();else{n._nodesReadyListeners=0;for(let a=0;a<t.length;a++){const o=t[a],r=function(){n._nodesReadyListeners--,0===n._nodesReadyListeners&&(i(),delete n._nodesReadyListeners)}.bind(n);o.isCompleted||(n._nodesReadyListeners++,o._onCompleted=r)}0===n._nodesReadyListeners&&i()}}_initializeInnerHTML(){const t=this;0<=t.$.itemsInnerContainer.innerHTML.indexOf("<option")?t.$.itemsInnerContainer.innerHTML=t.$.itemsInnerContainer.innerHTML.replace(/<optgroup/ig,"<smart-list-items-group").replace(/<\/optgroup/ig,"</smart-list-items-group").replace(/<option/ig,"<smart-list-item").replace(/<\/option/ig,"</smart-list-item"):0<=t.$.itemsInnerContainer.innerHTML.indexOf("<ul")&&(t.$.itemsInnerContainer.innerHTML=t.$.itemsInnerContainer.innerHTML.replace(/<ul/ig,"<smart-list-items-group").replace(/<\/ul/ig,"</smart-list-items-group").replace(/<li/ig,"<smart-list-item").replace(/<\/li/ig,"</smart-list-item"))}_initializeHtmlListItems(){const t=this,a=t.enableShadowDOM&&"shadow"===t.shadowDomMode?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item"),n="checkBox"===t.selectionMode||"radioButton"===t.selectionMode?t.selectionMode:"plain",o=function(t,a,n){return void 0===t[a]?t[n]:""+t[a]};t._items=[];let r=0;for(let l=0;l<a.length;l++){const i=a[l];i.dataIndex=l,i.label=i.innerHTML,i.dataItem=i,i.top||(i.top=r),i.height||(i.height=i.offsetHeight),r+=i.height,i.value||(i.value=""+l);const s=o(i,t.displayMember,"label"),d=o(i,t.valueMember,"value"),c=o(i,t.groupMember,"group");i.label!==s&&(i.label=s),i.value!==d&&(i.value=d),i.group!==c&&(i.group=c);const m=i.context;i.context=document,i.displayMode=n,i.context=m,t._alternateItem(i),i.selected&&(t.selectedIndexes.push(l),t.selectedValues.push(i.value)),t._items.push(i)}t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&t._items.map(a=>t._applyTemplate(a))}_group(){const t=this;t.isUpdating++;let a=[],n=[];t._canSort&&t._unsort();for(let n=0;n<t._items.length;n++){const i=t._items[n];let o=i.group?i.group.trim():i.innerHTML.toUpperCase().charAt(0)||i.label.toUpperCase().charAt(0);o+=" ",a[o]?a[o].items.push(i):a[a.length++]=a[o]={items:[i],label:o}}if(!t.isVirtualized){for(;t.$.itemsInnerContainer.firstChild;)t.$.itemsInnerContainer.removeChild(t.$.itemsInnerContainer.firstChild);const o=document.createDocumentFragment();t._groups=[];for(let r=0;r<a.length;r++){const i=a[r],l=document.createElement("smart-list-items-group");l.label=i.label,l.dataIndex=r;for(let t=0;t<a[r].items.length;t++){const a=i.items[t];n.push(a),a.group=i.label,l.appendChild(a)}t._groups.push(l),o.appendChild(l)}t._items=n;const i=/Trident|Edge/.test(navigator.userAgent);i?setTimeout(function(){t.$.itemsInnerContainer.appendChild(o)},50):t.$.itemsInnerContainer.appendChild(o)}else{t._groups=[];for(let t=0;t<a.length;t++){const i=a[t];i.dataIndex=t,i.grouped=!0,i.hidden=!1,i.displayMode="plain",n.push(i);for(let o=0;o<a[t].items.length;o++){const t=i.items[o];t.group=i,n.push(t)}}t._groups=a,t._items=n}t.sorted&&t._sort(),t.isUpdating--}_ungroup(){const t=this;t.isUpdating++,t._groups=[],t._canSort&&t._unsort();let a=[];if(!t.isVirtualized){const n=document.createDocumentFragment();for(let o=0;o<t._items.length;o++){const i=t._items[o];n.appendChild(i),a.push(i)}0<a.length&&(t.$.itemsInnerContainer.innerHTML="",t.$.itemsInnerContainer.appendChild(n))}else for(let n=0;n<t._items.length;n++){const i=t._items[n];i.grouped||a.push(i)}t._items=a,t.sorted&&t._sort(),t.isUpdating--}_initializeHtmlListGroups(){const t=this,a=t.$.itemsInnerContainer.querySelectorAll("smart-list-items-group");t._groups=[];for(let n=0;n<a.length;n++){const i=a[n];i.dataIndex=n,t._groups.push(i)}}_initializeSelection(){const t=this,a=t.selectedIndexes.slice(0),n=t.selectedValues.slice(0);t.clearSelection(),"oneOrManyExtended"===t.selectionMode&&(t._keysPressed.Control=!0);for(let o=0;o<t._items.length;o++){const i=t._items[o];(0<=a.indexOf(o)||0<=n.indexOf(i.value||i.label))&&(t._focusedItem&&(t._focusedItem._focused=!1),t._focusedItem=null,t.select(i))}"oneOrManyExtended"===t.selectionMode&&(t._keysPressed.Control=!1)}onItemUpdated(){const t=this;!t.isInitialized||t._isUpdating()||(t.isUpdating++,t._refreshLayout(),t.isUpdating--)}_refreshItems(){const t=this;if(t.isInitialized&&!t._isUpdating()){if(t.isUpdating++,t.grouped?t._ungroup():t.sorted&&t._canSort&&t._unsort(),!t.isVirtualized){t._items=[];const a=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-list-item"):t.querySelectorAll("smart-list-item");for(let n=0;n<a.length;n++)a[n].dataIndex=n,t._alternateItem(a[n]),t._items.push(a[n])}t.grouped?t._group():t.sorted&&t._sort(),t._refreshLayout(),t.isUpdating--}}_applyIncrementalSearch(t){const a=this;if(!(null===a.incrementalSearchDelay||isNaN(a.incrementalSearchDelay)))return-1<["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control","Home","End","PageUp","PageDown"].indexOf(t)?void 0:(0!==a._incrementalSearchQuery.indexOf(t)&&(a._incrementalSearchQuery+=t),a._incrementalSearchTimer&&clearTimeout(a._incrementalSearchTimer),a._incrementalSearch(),void(a._incrementalSearchTimer=setTimeout(function(){a._incrementalSearchQuery=""},a.incrementalSearchDelay)))}select(t){const a=this;if(!("string"==typeof t&&(t=a.getItem(t),!t))&&!("number"==typeof t&&(t=a.getItem(t),!t))&&!(t.grouped||t.readonly)){if("none"===a.selectionMode)return a.selectedIndexes=[],void(a.selectedValues=[]);switch(a._focusedItem||"none"===a.selectionMode||(a._focusedItem=t,t._focused=!0),a.selectionMode){case"one":return(1!==a.selectedIndexes.length||a.selectedIndexes[0]!==a._indexOf(t))&&(a._previouslySelectedIndexes=a.selectedIndexes,1<=a.selectedIndexes.length&&a.clearSelection(),a._select(t),delete a._previouslySelectedIndexes,!0);case"zeroOrOne":return 1===a.selectedIndexes.length&&a.selectedIndexes[0]===a._indexOf(t)?(a.unselect(t),!0):(a._previouslySelectedIndexes=a.selectedIndexes,1<=a.selectedIndexes.length&&a.clearSelection(),a._select(t),delete a._previouslySelectedIndexes,!0);case"radioButton":if(a._previouslySelectedIndexes=a.selectedIndexes,0<a.$.itemsInnerContainer.querySelectorAll("smart-list-items-group").length){const n=t.parentNode;if(!t.selected){for(let t in n.children){const i=n.children[t];i.selected&&a.unselect(i)}a._select(t)}return delete a._previouslySelectedIndexes,!0}if(a.isVirtualized&&0<a._groups.length){const n=t.group;if(!t.selected){for(let t in n.items){const i=n.items[t];i.selected&&a.unselect(i)}a._select(t)}return delete a._previouslySelectedIndexes,!0}return t.selected||(1<=a.selectedIndexes.length&&a.clearSelection(),a._select(t)),delete a._previouslySelectedIndexes,!0;case"oneOrMany":return t.selected?1<a.selectedIndexes.length&&a.unselect(t):a._select(t),!0;case"zeroOrMany":case"checkBox":return t.selected?a.unselect(t):a._select(t),!0;case"oneOrManyExtended":{const n=a.selectedValues;if(a._keysPressed.Control)return 1<a.selectedIndexes.length?t.selected?(a.unselect(t),a._focus(a._items[a.selectedIndexes[0]])):a._select(t):a._select(t),!0;if(a._keysPressed.Shift){const i=a._items[a.selectedIndexes[0]];let o;a.clearSelection();const r=0<=n.indexOf(i.value)||i.selected;if(a._select(i,r),a._indexOf(i)>a._indexOf(t))for(o=a._indexOf(i)-1;o>=a._indexOf(t);){const t=a._items[o],i=0<=n.indexOf(t.value)||t.selected;a._select(t,i),o--}else for(o=a._indexOf(i)+1;o<=a._indexOf(t);){const t=a._items[o],i=0<=n.indexOf(t.value)||t.selected;a._select(t,i),o++}const l=[];for(let t=0;t<n.length;t++)l.push(a.getItem(n[t]));if(0<l.length&&!a._propertyChanging){let o=[];for(let t=0;t<a.selectedValues.length;t++){const i=a.selectedValues[t];0>n.indexOf(i)&&o.push(a.getItem(i))}a.$.fireEvent("change",{addedItems:o,removedItems:l,selected:t.selected,disabled:t.disabled,index:a._indexOf(t),label:t.label,value:t.value})}return!0}for(let o=0;o<n.length;o++){const i=n[o],r=a.getItem(i);t!==r&&a.unselect(r)}return a.clearSelection(),a._select(t,0<=n.indexOf(t.value)),!0}}return!1}}_applyTemplate(t,a){const n=this;if(null===n.itemTemplate)return;if("function"==typeof n.itemTemplate)return void n.itemTemplate(t,{label:t.label,value:t.value,index:n._items.indexOf(t)});if(!n._bindingDetails||0===n._bindingDetails.length)return;const i=n._bindingDetails.length;let o=document.importNode(n._template.content,!0),r,l;for(let s=0;s<i;s++){r=o.childNodes[n._bindingDetails[s].childNodeIndex],l=n._bindingDetails[s].bindingString.length;for(let a=0;a<l;a++){const i=n._bindingDetails[s].bindingString[a],o=0<=i.indexOf("label")?t.label:t.value;r.innerHTML=r.innerHTML.replace(i,o)}}t.innerHTML="";for(let n=0;n<o.childNodes.length;n++)o.childNodes[n].outerHTML&&(t.innerHTML+=o.childNodes[n].outerHTML);!1===a||(n._scrollHeightTimer&&(clearInterval(n._scrollHeightTimer),n._scrollHeightCounter=0),n._scrollHeightTimer=setInterval(function(){(n._lastScrollHeight!==n.$.itemsInnerContainer.scrollHeight||10===n._scrollHeightCounter)&&(n._refreshLayout(),clearInterval(n._scrollHeightTimer)),n._lastScrollHeight=n.$.itemsInnerContainer.scrollHeight,n._scrollHeightCounter++},50))}_filterItems(t,a){const n=this,i=n.$.filterInput.value;let o,r;const l=function(){if(0===r.length)return n._filteredItems=[],void(a&&a());o=n._queryItems(i,n.filterMode);for(let t=0;t<r.length;t++)r[t].hidden=!0,r[t].$.addClass("smart-hidden");for(let t=0;t<o.length;t++){const a=o[t];a.hidden=!1,a.$.removeClass("smart-hidden")}if(n.grouped&&n.isVirtualized)for(let t=0;t<n._groups.length;t++){const a=n._groups[t],i=a.items;let o=!0;for(let t=0;t<i.length;t++)i[t].hidden||(o=!1);o&&(a.hidden=!0)}if(n.grouped&&!n.isVirtualized)for(let t=0;t<n._groups.length;t++){const a=n._groups[t],i=[].concat(...a.querySelectorAll("smart-list-item"));let o=!0;for(let t=0;t<i.length;t++)i[t].$.hasClass("smart-hidden")||(o=!1);o?a.$.addClass("smart-hidden"):a.$.removeClass("smart-hidden")}n._filteredItems=o,n._refreshLayout(),a&&a();t||n._refreshSelection()};if("function"!=typeof n.dataSource){if(r=n._items,0===r.length)return;l()}else if(i){const t=n.dataSource(i,function(t){i&&n.isAttached&&(n._updateListBoxAfterQuery=function(){o=r=n._items,l()},n.clearItems(),n.insert(0,t))});if(t){if(!i)return;n._updateListBoxAfterQuery=function(){o=r=n._items,l()},n.clearItems(),n.insert(0,t)}}else n.clearItems(),o=r=n._items,l()}_getNextItem(t){const a=this,n=a._items,i=a._items.length;for(let a=Math.max(t+1,0);a<i;){const t=n[a];if(!t.disabled&&!t.hidden&&!t.grouped&&!t.readonly)return t;a++}return n[t]}_getPreviousItem(t){const a=this,n=a._items;for(let a=Math.max(t-1,0);-1<a;){const t=n[a];if(!t.disabled&&!t.hidden&&!t.grouped&&!t.readonly)return t;a--}return n[t]}get _scrollWidth(){const t=this,a=t._items;return t.__scrollWidth?t.__scrollWidth:(t.__scrollWidth=(()=>{const t=this;let n="",i;for(let t=0;t<a.length;t++){if(a[t].hidden)continue;const i=a[t].label;i.length>n.length&&(n=i)}const o=t._createItem({label:n});t.$.itemsContainer.appendChild(o),o.label=n,o.$.itemContainer.style.width="auto",o.$.container.style.width="auto",o.style.width="auto";const r=getComputedStyle(o),l=parseInt(r.paddingLeft)+parseInt(r.paddingRight);return i=o.$.itemContainer.offsetWidth+l,o.parentNode.removeChild(o),i})(),t.__scrollWidth)}update(t,a){const n=this,i=n._items[t];if(i){if("string"==typeof a)i.label=a,void 0===i.value&&(i.value=a);else for(let t in a)"selected"==t&&i[t]!==a[t]?n.select(i):i[t]=a[t],"group"==t&&n._refreshItems();(n.sorted||n.grouped||n.isVirtualized)&&(n._refreshItems(),n._refreshSelection())}else n.error(n.localize("indexOutOfBound",{elementType:n.nodeName.toLowerCase(),method:"update"}))}insert(t,a){const n=this;let o=[];if(t||(t=0),Array.isArray(a)){n.isUpdating++;for(let r=0;r<a.length;r++){const i=a[r],l=n._createItem(i);o.push(l),t>=n._items.length||0===n._items.length?n.appendChild(l):n.insertBefore(l,n._items[t])}n.isUpdating--}else{const i=n._createItem(a);o.push(i),t>=n._items.length||0===n._items.length?n.appendChild(i):n.insertBefore(i,n._items[t])}0<o.length&&n._ensureItemsReady(o,function(){n._refreshItems(),0===n._items.length||(n._updateListBoxAfterQuery&&(n._updateListBoxAfterQuery(),delete n._updateListBoxAfterQuery),n._refreshSelection(),n.$.fireEvent("bindingComplete"))})}remove(t){const a=this,n=a._items[t];n?(a.isVirtualized?a._items.splice(t,1):n.parentNode.removeChild(n),n.selected&&a.unselect(n),a._refreshItems(),a._refreshSelection(),0===a.selectedIndexes.length&&0<a._items.length&&("oneOrMany"===a.selectionMode||"one"===a.selectionMode||"oneOrManyExtended"===a.selectionMode)&&a.select(a._items[0])):a.error(a.localize("indexOutOfBound",{elementType:a.nodeName.toLowerCase(),method:"remove"}))}_queryItems(t,a){const n=this,o=[],r=function(i,o){if(i.grouped)return i;switch(a){case"startsWith":if(0===i.label.indexOf(o))return i;break;case"startsWithIgnoreCase":if(0===i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"doesNotContain":if(0>i.label.indexOf(o))return i;break;case"doesNotContainIgnoreCase":if(0>i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"contains":if(-1<i.label.indexOf(o))return i;break;case"containsIgnoreCase":if(-1<i.label.toLowerCase().indexOf(o.toLowerCase()))return i;break;case"equals":if(0===i.label.localeCompare(o))return i;break;case"equalsIgnoreCase":if(0===i.label.toLowerCase().localeCompare(o.toLowerCase()))return i;break;case"endsWith":if(i.label.endsWith(o))return i;break;case"endsWithIgnoreCase":if(i.label.toLowerCase().endsWith(o.toLowerCase()))return i;break;case"custom":if(n.filterCallback(i,t))return i;}return null};if(0===t.length)return n._items;for(let l=0;l<n._items.length;l++){const a=r(n._items[l],t);a&&o.push(a)}return o}_select(t,a){const n=this,i=n.selectedIndexes.indexOf(n._indexOf(t)),o=n.selectedIndexes.slice(0),r=n.selectedValues.slice(0);if(t.selected=!0,-1===i)o.push(n._indexOf(t)),r.push(t.value||t.label);else return n._recycle(),!1;if(n.selectedIndexes=o,n.selectedValues=r,n._recycle(),n.$.hiddenInput.value=r.toString(),n.isCompleted&&!a&&n.isInitialized&&!n._propertyChanging){let a=[];if(n._previouslySelectedIndexes){for(let t=0;t<n._previouslySelectedIndexes.length;t++)0>n.selectedIndexes.indexOf(n._previouslySelectedIndexes[t])&&a.push(n._items[n._previouslySelectedIndexes[t]]);delete n._previouslySelectedIndexes}return n.$.fireEvent("change",{addedItems:[t],removedItems:a,selected:t.selected,disabled:t.disabled,index:n._indexOf(t),label:t.label,value:t.value}),!0}}_setTopVisibleIndex(t){const a=this;return"number"==typeof t&&(a.topVisibleIndex=Math.max(0,t),t=a._items[a.topVisibleIndex]),!!t&&void(t.top!==a.scrollTop&&(a.scrollTop=t.top,!a.isVirtualized&&(a.$.itemsContainer.scrollTop=a.scrollTop),a.scrollHeight===a.scrollTop&&a._updateTopVisibleIndex()))}_updateTopVisibleIndex(){const t=this,a=t.scrollTop+t._scrollView.verticalScrollBar.offsetHeight-t.offsetHeight;let n;if(t.scrollTop<t.scrollHeight/2){for(let o=0;o<t._items.length;o++)if(t._items[o].top>a){n=t._items[o];break}}else for(let o=t._items.length-1;0<=o&&!(t._items[o].top<a);o--)n=t._items[o];n&&(t.topVisibleIndex=n.dataIndex)}unselect(t){const a=this;if(!t)return;if("string"==typeof t&&(t=a.getItem(t),!t))return;if("none"===a.selectionMode)return void a.clearSelection();const n=a.selectedIndexes.indexOf(a._indexOf(t)),i=a.selectedIndexes.slice(0),o=a.selectedValues.slice(0);if(t.selected=!1,0<=n)i.splice(n,1),o.splice(n,1);else return!1;return(a.selectedIndexes=i,a.selectedValues=o,a.$.hiddenInput.value=o.toString(),a.isCompleted&&!a._propertyChanging)?(a.$.fireEvent("change",{addedItems:[],removedItems:[t],selected:t.selected,disabled:t.disabled,index:a._indexOf(t),label:t.label,value:t.value}),a._recycle(),!0):void 0}_handleItemTemplate(t){if(null===t||!t)return;if("function"==typeof t)return t;const a=this;if(!("content"in document.createElement("template")))return a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()})),void(a.itemTemplate=null);if(t=document.getElementById(t),null===t||!("content"in t))return a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:"itemTemplate"})),void(a.itemTemplate=null);const n=t.content,o=n.childNodes.length,r=/{{\w+}}/g;let l,s;a._bindingDetails=[],a._template=t;for(let d=0;d<o;d++){for(s=[];l=r.exec(n.childNodes[d].innerHTML);)s.push(l[0]);0<s.length&&a._bindingDetails.push({childNodeIndex:d,bindingString:s})}return!0}_handleKeyStrokes(t){const a=this,n="radioButton"===a.selectionMode||"checkBox"===a.selectionMode||"zeroOrMany"===a.selectionMode||"oneOrMany"===a.selectionMode||"zeroOrOne"===a.selectionMode;let i=a._items;if(a.filterable&&0<a.$.filterInput.value.length&&(i=a._filteredItems),!(a.disabled||a.readonly)){switch(t){case"ArrowLeft":case"ArrowUp":a._handleArrowKeys(!0);break;case"ArrowRight":case"ArrowDown":a._handleArrowKeys(!1);break;case" ":{if(1>a.selectedIndexes.length&&!a._focusedItem)return;const t=a._focusedItem?a._focusedItem:a._items[a.selectedIndexes[a.selectedIndexes.length-1]],n=t=>{t.selected&&"radioButton"!==a.selectionMode?a.unselect(t):a.select(t)};if("oneOrMany"===a.selectionMode)return void(t.selected&&1<a.selectedIndexes.length?n(t):!t.selected&&n(t));n(t);break}case"Home":{if(0===i.length)return;n?a._focus(i[0]):(!a._keysPressed.Shift&&a.clearSelection(),a.select(i[0]),a._focus(i[0])),a.scrollTop=0;break}case"End":{if(0===i.length)return;n?a._focus(i[i.length-1]):(!a._keysPressed.Shift&&a.clearSelection(),a.select(i[i.length-1]),a._focus(i[i.length-1])),a.scrollTop=a.scrollHeight;break}case"PageUp":{a._pageUpKeyHandler(i);break}case"PageDown":{a._pageDownKeyHandler(i);break}}a._recycle()}}_horizontalScrollbarHandler(t){const a=this;t.stopPropagation(),a.isVirtualized?a._recycle():a.$.itemsContainer.scrollLeft=t.detail.value}_unsort(){const t=this;t.isUpdating++;const a=function(t,a){let n=t.dataIndex,i=a.dataIndex;return n<i?-1:n>i?1:0};if(!t.isVirtualized){if(0<t._groups.length){t._groups.sort(a);let n=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],r=[].concat(...i.querySelectorAll("smart-list-item"));r.sort(a),n=n.concat(r)}t._items=n}else t._items.sort(a);t._applySortOrder()}else if(0<t._groups.length){t._groups.sort(a);let n=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],r=[].concat(...i.items);r.sort(a),n.push(i),n=n.concat(r)}t._items=n}else t._items.sort(a);t.isUpdating--}_applySortOrder(){const t=this,a=function(t){for(let a=0;a<t.length;a++){const n=t[a],i=n.parentNode;i&&i.appendChild(n)}};a(t._items),a(t._groups)}_sort(){const t=this;if(t._canSort){t.isUpdating++;const a=function(n,a){let i=n.label,o=a.label;if("asc"===t.sortDirection){if(i<o)return-1;if(i>o)return 1}else{if(i<o)return 1;if(i>o)return-1}return 0};if(t._groups.sort(a),!t.isVirtualized){if(0<t._groups.length){let n=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],r=[].concat(...i.querySelectorAll("smart-list-item"));r.sort(a),n=n.concat(r)}t._items=n}else t._items.sort(a);t._applySortOrder()}else if(0<t._groups.length){let n=[];for(let o=0;o<t._groups.length;o++){const i=t._groups[o],r=[].concat(...i.items);n.push(i),r.sort(a),n=n.concat(r)}t._items=n}else t._items.sort(a);t.isUpdating--}}getItem(t){const a=this;for(let n=0;n<a._items.length;n++)if(a._items[n].value===t)return a._items[n];return null}_focus(t){const a=this;!t||"none"===a.selectionMode||a.disabled||a.readonly||(a._focusedItem&&(a._focusedItem._focused=!1),a._focusedItem=t,a._focusedItem._focused=!0)}_keyDownHandler(t){const a=this,n=a.enableShadowDOM?a.shadowRoot.activeElement:document.activeElement;let i=t.key;if(!(a.disabled||a.readonly)&&!(a.filterable&&a.$.filterInput===n)&&a._focused&&!(0===a._items.length||a.disabled||a.displayLoadingIndicator)){if(a.editable){if("F2"===i)return void a._dblclickEventHandler({target:a._focusedItem});if(a.$.editInput===n)return}if("none"!==a.selectionMode){if(t.stopPropagation(),"Down"===i||"Right"===i||"Left"===i||"Up"===i?i="Arrow"+i:void 0,a.filterable)switch(i){case"ArrowLeft":case"ArrowRight":return;case"ArrowUp":case"ArrowDown":t.preventDefault();}if(a._applyIncrementalSearch(i),!(0>["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","Home","End","PageUp","PageDown"].indexOf(i))){if(t.preventDefault(),!a._focusedItem&&0<a._items.length)return void("one"===a.selectionMode||"oneOrMany"===a.selectionMode||"oneOrManyExtended"===a.selectionMode?a.select(a._items[0]):a._focus(a._items[0]));switch(a.selectionMode){case"one":if("Shift"===i||"Control"===i||" "===i)return;a._handleKeyStrokes(i);break;case"oneOrMany":case"zeroOrOne":case"zeroOrMany":case"radioButton":case"checkBox":if("Shift"===i||"Control"===i)return;a._handleKeyStrokes(i);break;case"oneOrManyExtended":if(" "===i)return;a._keysPressed[i]="keydown"===t.type,a._handleKeyStrokes(i);}}}}}_keyUpHandler(t){const a=this,n=a.enableShadowDOM?a.shadowRoot.activeElement:document.activeElement;if(!(a.editable&&a.$.editInput===n)){if(a.filterable&&a.$.filterInput===n)return a._filterTimer&&clearTimeout(a._filterTimer),void(a._filterTimer=setTimeout(function(){const t=a.context;a.context=a,a._filterItems(),a.scrollTop=a.$.itemsContainer.scrollTop=0,a.scrollLeft=a.$.itemsContainer.scrollLeft=0,a.context=t},300));if(a._focused){if(a._focusedItem&&a._focusedItem.hidden&&0<a._filteredItems.length){let t=a._filteredItems[0];t.grouped&&1<a._filteredItems.length&&(t=a._filteredItems[1]),a._focus(t),a._recycle()}t.stopPropagation(),t.preventDefault(),a.disabled||0>["Shift","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Control"," ","PageUp","PageDown"].indexOf(t.key)||(a._keysPressed[t.key]=!1)}}}_mouseWheelHandler(t){const a=this;(a.computedHorizontalScrollBarVisibility||a.computedVerticalScrollBarVisibility)&&(a.disabled||!a.computedVerticalScrollBarVisibility||(t.stopPropagation(),t.preventDefault(),a.scrollTo(a.scrollTop+(0>t.deltaY?-a.offsetHeight:a.offsetHeight))))}_pageDownKeyHandler(t){const a=this;if(0===t.length)return;let n=a._items[a.selectedIndexes[a.selectedIndexes.length-1]];("checkBox"===a.selectionMode||"radioButton"===a.selectionMode||"zeroOrMany"===a.selectionMode||"oneOrMany"===a.selectionMode||"zeroOrOne"===a.selectionMode)&&a._focusedItem&&(n=a._focusedItem);let o;const r=a._indexOf(n);let l=n.top+a.$.itemsContainer.offsetHeight-n.height;for(let a=r;a<t.length;a++)if(t[a].top>=l){o=t[a];break}o||(o=t[t.length-1]),"checkBox"===a.selectionMode||"radioButton"===a.selectionMode||"zeroOrMany"===a.selectionMode||"oneOrMany"===a.selectionMode||"zeroOrOne"===a.selectionMode?a._focus(o):!o.selected&&(!a._keysPressed.Shift&&a.clearSelection(),a.select(o),a._focus(o)),(o.height+o.top>a.$.itemsContainer.scrollTop+a.$.itemsContainer.offsetHeight||o.top<a.$.itemsContainer.scrollTop)&&(a.scrollTop=o.top-a.$.itemsContainer.offsetHeight+o.height)}_pageUpKeyHandler(t){const a=this;if(0===t.length)return;let n=a._items[a.selectedIndexes[a.selectedIndexes.length-1]];("checkBox"===a.selectionMode||"radioButton"===a.selectionMode||"zeroOrMany"===a.selectionMode||"oneOrMany"===a.selectionMode||"zeroOrOne"===a.selectionMode)&&a._focusedItem&&(n=a._focusedItem);const o=n.top-a.$.itemsContainer.offsetHeight,r=a._indexOf(n);let l;for(let a=r;0<a;a--)if(t[a].top<=o){l=t[a];break}l||(l=t[0]),"checkBox"===a.selectionMode||"radioButton"===a.selectionMode||"zeroOrMany"===a.selectionMode||"oneOrMany"===a.selectionMode||"zeroOrOne"===a.selectionMode?a._focus(l):!l.selected&&(!a._keysPressed.Shift&&a.clearSelection(),a.select(l),a._focus(l)),a.scrollTop=l.top;const i=a._indexOf(l);0===i&&(a.scrollTop=0)}clearItems(){const t=this;t.$.itemsInnerContainer.innerHTML="",t.clearSelection(),t._items=[],t.$placeholder.removeClass("smart-hidden")}_resizeHandler(t){const a=this;t.target!==a||a._isUpdatingScrollBars||(a._isUpdatingScrollBars=!0,a._initializeRecyclingItems(),a._refreshLayout(),a._isUpdatingScrollBars=!1)}_indexOf(t){const a=this;if(!t)return-1;let n=a._items.indexOf(t);return-1===n&&(n=a._items.indexOf(a.getItem(t.value))),n}_incrementalSearch(){const t=this,a="radioButton"!==t.selectionMode&&"checkBox"!==t.selectionMode&&"zeroOrMany"!==t.selectionMode&&"oneOrMany"!==t.selectionMode&&"zeroOrOne"!==t.selectionMode;let n=0,o;switch(t.incrementalSearchMode){case"containsIgnoreCase":case"equalsIgnoreCase":case"startsWithIgnoreCase":case"endsWithIgnoreCase":o=t._incrementalSearchQuery.toLowerCase();break;default:o=t._incrementalSearchQuery;}const r=function(n){n.grouped||n.readonly||(a?(0<t.selectedIndexes.length&&t.clearSelection(),t._focus(n),t.select(n)):t._focus(n),(n.height+n.top>t.$.itemsContainer.scrollTop+t.$.itemsContainer.offsetHeight||n.top<t.scrollTop)&&(t.scrollTop=n.top),0===t._indexOf(n)&&(t.scrollTop=0),t._indexOf(n)===t._items.length-1&&(t.scrollTop=t.scrollHeight))};0!==t._previousEntry.localeCompare(o)&&(t._incrementalSearchItems=t._queryItems(t._incrementalSearchQuery,t.incrementalSearchMode),delete t._itemPosition),t._previousEntry=o;const l=t._incrementalSearchItems.length;if(0!==l){if(1===l)return void r(t._incrementalSearchItems[0]);for(void 0===t._itemPosition?a&&t.clearSelection():t._itemPosition<l-1?n=t._itemPosition:(n=0,a?(t._incrementalSearchItems[t._itemPosition].selected=!1,t.selectedIndexes=[],t.selectedValues=[]):t._incrementalSearchItems[t._itemPosition]._focused=!1),n;n<l;n++){if(t._incrementalSearchItems[n].selected&&a){t._incrementalSearchItems[n].selected=!1,t.selectedIndexes=[],t.selectedValues=[];continue}if(!a&&t._incrementalSearchItems[n]._focused){t._incrementalSearchItems[n]._focused=!1;continue}return r(t._incrementalSearchItems[n]),void(t._itemPosition=n)}}}_selectStartHandler(t){const a=this,n=a.enableShadowDOM?a.shadowRoot.activeElement:document.activeElement;a.$.filterInput===n||a.$.editInput===n||t.preventDefault()}_handleArrowKeys(t){const a=this,n="radioButton"!==a.selectionMode&&"checkBox"!==a.selectionMode&&"zeroOrMany"!==a.selectionMode&&"oneOrMany"!==a.selectionMode&&"zeroOrOne"!==a.selectionMode;if(a.disabled||a.readonly)return;let i;if(a._focusedItem&&!a._keysPressed.Shift)i=a._indexOf(a._focusedItem),a._focusedItem._focused=!1;else if(0!==a.selectedIndexes.length)i=a.selectedIndexes[a.selectedIndexes.length-1];else return;const o=t?a._getPreviousItem(i):a._getNextItem(i);a._focus(o),n&&(a._keysPressed.Shift?a.select(o):a._items[i]!==o&&(a.clearSelection(),a.select(o))),a.ensureVisible(o)}_refreshFilter(){const t=this;return t.filterable?(t.$.filterInput.disabled=!!(t.disabled||t.displayLoadingIndicator),t.$filterInputContainer.removeClass("smart-hidden"),void t.$itemsContainer.addClass("filter")):void(t.$.filterInput.disabled=!0,t.$filterInputContainer.addClass("smart-hidden"),t.$itemsContainer.removeClass("filter"))}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void(t.tabIndex=0<t.tabIndex?t.tabIndex:0)}_setLoadingIndicatorVisibility(){const t=this;return t.displayLoadingIndicator?void(t.$loadingIndicatorContainer.hasClass("smart-visibility-hidden")?t.$loadingIndicatorContainer.removeClass("smart-visibility-hidden"):t.$loadingIndicatorContainer.removeClass("smart-hidden")):void(t._areCSSVarsSupported?t.$loadingIndicatorContainer.addClass("smart-hidden"):t.$loadingIndicatorContainer.addClass("smart-visibility-hidden"))}_refreshLayout(){var t=Math.max;const a=this,n=a._items;if(a.__scrollHeight=null,a.__scrollWidth=null,a._height=null,a._scrollView||(a._scrollView=new Smart.Utilities.Scroll(a,a.$.horizontalScrollBar,a.$.verticalScrollBar)),a.$itemsContainer.removeClass("hscroll"),a.$itemsContainer.removeClass("vscroll"),!n||null===n||0===n.length)return a.scrollWidth=0,a.scrollHeight=0,a.$filterInputContainer.removeClass("vscroll"),a.$placeholder.removeClass("smart-hidden"),void(a.isVirtualized&&a._recycle());a.$placeholder.addClass("smart-hidden");const i=2*(parseInt(getComputedStyle(a.$.itemsInnerContainer).getPropertyValue("--smart-list-item-horizontal-offset"))||0);let o=a._scrollWidth-a.$.itemsContainer.offsetWidth-i,r=a._scrollHeight;if(a._refreshHorizontalScrollBarVisibility(o),a._refreshVerticalScrollBarVisibility(r),a.$.itemsInnerContainer.style.width="hidden"===a.horizontalScrollBarVisibility?a.$.itemsContainer.offsetWidth-i:t(a.$.itemsContainer.offsetWidth-i,-i+a.__scrollWidth)+"px",a.computedVerticalScrollBarVisibility)return o=a._scrollWidth-a.$.itemsContainer.offsetWidth-a._scrollView.vScrollBar.offsetWidth,a._refreshHorizontalScrollBarVisibility(o),"hidden"!==a.horizontalScrollBarVisibility&&(a.$.itemsInnerContainer.style.width=t(a.$.itemsContainer.offsetWidth-i,-i+a.__scrollWidth-a._scrollView.vScrollBar.offsetWidth)+"px"),a.computedHorizontalScrollBarVisibility&&("visible"===a.horizontalScrollBarVisibility&&0===a.scrollWidth?"visible"===a.horizontalScrollBarVisibility&&(a.__scrollHeight+=a._scrollView.hScrollBar.offsetHeight):a.__scrollHeight+=a._scrollView.hScrollBar.offsetHeight,a.scrollHeight=a.__scrollHeight),void(a.isVirtualized&&a._recycle());o=a._scrollWidth-a.$.itemsContainer.offsetWidth-i,a._refreshHorizontalScrollBarVisibility(o),a.computedHorizontalScrollBarVisibility&&(a.scrollHeight=a._scrollHeight,a._refreshVerticalScrollBarVisibility(a.scrollHeight)),a.isVirtualized&&a._recycle();const l=/Trident|Edge/.test(navigator.userAgent);!a.isRefreshing&&l&&setTimeout(function(){a.isRefreshing=!0,a._refreshLayout(),a.isRefreshing=!1},50)}_styleChangedHandler(){const t=this;t._refreshLayout()}_swipeLeftHandler(){}_swipeRightHandler(){}_refreshHorizontalScrollBarVisibility(t){const a=this;a.scrollWidth=t,a.computedHorizontalScrollBarVisibility?(a.scrollLeft=a.$.itemsContainer.scrollLeft,a.$itemsContainer.addClass("hscroll")):a.$itemsContainer.removeClass("hscroll")}_refreshVerticalScrollBarVisibility(t){const a=this;a.scrollHeight=t,a.computedVerticalScrollBarVisibility?(a.$itemsContainer.addClass("vscroll"),a.$filterInputContainer.addClass("vscroll")):(a.$itemsContainer.removeClass("vscroll"),a.$filterInputContainer.removeClass("vscroll"))}_validateTemplate(t,a){if(null!==a&&a){const n=this;return"content"in document.createElement("template")?(a=document.getElementById(a),null!==a&&"content"in a?a:(n.error(n.localize("invalidTemplate",{elementType:n.nodeName.toLowerCase(),property:t})),void(n[t]=null))):(n.error(n.localize("htmlTemplateNotSuported",{elementType:n.nodeName.toLowerCase()})),void(n[t]=null))}}_getItemIndexByPosition(t){const a=this,n=a.filterable&&0<a.$.filterInput.value.length?a._filteredItems:a._items,i=(n=>{let i=0,o=n.length-1;if(0>=t)return 0;const r=n[n.length-1];if(r.top<=t)return n.length-1;for(;!0;){const r=Math.floor((i+o)/2),l=n[r];if(a._isItemInPosition(l,t))return r;l.top<t?i=r+1:l.top>t&&(o=r-1)}})(n);return i}_isItemInPosition(t,a){const n=t.top,i=t.top+t.height;return n<=a&&i>a}get isVirtualized(){const t=this;return t.virtualized&&t.dataSource&&0<t.dataSource.length}_recycle(){const t=this;if(!t._recyclingItems)return;let a=t._height;t._height||(a=t._height=t.$.itemsContainer.offsetHeight);let n=0;const i=t.scrollTop,o=t._getItemIndexByPosition(i),r=t.filterable&&0<t.$.filterInput.value.length?t._filteredItems:t._items,l=r[o];let s=l?l.top:0;if(t.$.itemsInnerContainer.style.left=-t.scrollLeft+"px",t.$.itemsInnerContainer.style.top=-i+s+"px",t.isUpdating++,0<=o)for(let l=o;l<r.length;l++){const o=r[l];if(0!==o.height){if(s+o.height>=i&&s<=i+a){const a=t._recyclingItems[n++];if(!a)break;a.context=document,a.dataItem=o,a.label=o.label,a.value=o.value,a.selected=o.selected,a._focused=o._focused,a.hidden=o.hidden,a.grouped=o.grouped,a.readonly=o.readonly,a.style.height=o.height+"px",t._alternateItem(a),a.title=o.title?o.title:"",a.displayMode=o.grouped?"plain":o.displayMode,0<t.scrollWidth&&(a.style.width=t.$.itemsInnerContainer.offsetWidth+t.scrollWidth+"px"),t.itemTemplate&&t._handleItemTemplate(t.itemTemplate)&&t._applyTemplate(a,!1)}else break;s+=o.height}}if(n<t._recyclingItems.length)for(let a=n;a<t._recyclingItems.length;a++){const a=t._recyclingItems[n++],i=a.context;a.context=document,a.hidden=!0,a.context=i}t.isUpdating--}_verticalScrollbarHandler(t){const a=this,n=t.detail.value;return t.stopPropagation(),a.isVirtualized?a._recycle():a.$.itemsContainer.scrollTop=n,a._updateTopVisibleIndex(),t.context.max===t.context.value?void a.$.fireEvent("scrollBottomReached"):void(t.context.min===t.context.value&&a.$.fireEvent("scrollTopReached"))}}),Smart("smart-drop-down-button",class extends Smart.DropDownList{static get requires(){return{"Smart.DropDownList":"smart.dropdownlist.js"}}template(){return`<div id="container">
                    <span class="smart-label" id="label">[[label]]</span>
                    <div id="content" class="smart-content">
                        <div id="buttonsContainer" class="smart-buttons-container">
                            <span id="actionButton" class="smart-input smart-action-button">[[placeholder]]</span>
                            <span id="dropDownButton" class="smart-drop-down-button">
                                <span id="arrow"></span>
                            </span>
                        </div>
                        <div id="dropDownContainer" class="smart-drop-down smart-drop-down-container smart-visibility-hidden">
                            <smart-scroll-viewer id="scrollViewer"
                                inner-h-t-m-l = "[[innerHTML]]"
                                right-to-left="[[right-to-left]]" 
                                horizontal-scroll-bar-visibility="[[horizontalScrollBarVisibility]]"
                                vertical-scroll-bar-visibility="[[verticalScrollBarVisibility]]">
                                    <content></content>
                            </smart-scroll-viewer>
                            <div id="resizeBar" class="smart-drop-down-resize-bar">
                                <div></div>
                            </div>
                         </div>
                    </div>
                    <span class="smart-hint" id="hint">[[hint]]</span>
                </div>`}propertyChangedHandler(t,a,n){const i=this;switch(t){case"placeholder":case"selectedIndexes":case"selectedValues":case"tokenTemplate":case"dataSource":case"displayMember":break;case"innerHTML":case"resizeMode":"innerHTML"===t?i.$.scrollViewer.innerHTML=n:i.$.dropDownContainer.setAttribute("resize-mode",i.resizeMode),i.$.scrollViewer.refresh();break;default:super.propertyChangedHandler(t,a,n);}}appendChild(t){const a=this;if(!a.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}return t?void a.$.scrollViewer.appendChild(t):void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}removeChild(t){const a=this;if(!a.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}return t?void(!a.$.dropDownContainer.contains(t)||a.$.scrollViewer.removeChild(t)):void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}removeAll(){const t=this;t.isCompleted&&t.$.scrollViewer.removeAll()}open(){const t=this,a=document.getElementsByTagName("smart-drop-down-button");for(let n=0;n<a.length;n++)a[n]!==t&&a[n].opened&&a[n].close();super.open(),t.$.scrollViewer.refresh()}scrollTo(t,a){const n=this;n.isCompleted&&n.$.scrollViewer.scrollTo(t,a)}_createElement(){const t=this;t._setDropDownSize(),t._setFocusable(),t.$.arrow.noRipple=!0}_documentUpHandler(t){const a=this,n=a.hasAttribute("resizing");super._documentUpHandler(t),n&&a.$.scrollViewer&&a.$.scrollViewer.refresh()}_keyDownHandler(t){const a=this,n=document.activeElement;if(!(a.disabled||a.readonly||n!==a&&n!==a.$.dropDownButton&&n!==a.$.actionButton))switch(t.key){case"Enter":case" ":t.target.setAttribute("active",""),t.preventDefault(),t.target!==a.$.actionButton&&(a._keyPressed=!0,a.opened&&"Enter"===t.key?a.close():!a.opened&&!a.readonly&&"none"!==a.dropDownOpenMode&&a.open());break;case"End":a.$.scrollViewer.scrollTop=a.$.scrollViewer.scrollHeight;break;case"Home":a.$.scrollViewer.scrollTop=0;break;case"PageUp":case"PageDown":a.$.scrollViewer.scrollTop+=(-1<t.key.indexOf("Down")?1:-1)*a.$.dropDownContainer.offsetHeight;break;case"ArrowUp":case"ArrowDown":if(t.altKey)return a._keyPressed=!1,void(a.$dropDownContainer.hasClass("smart-visibility-hidden")?a.open():a.close());t.preventDefault(),a.$.scrollViewer.scrollTop+=10*(-1<t.key.indexOf("Down")?1:-1);break;case"Escape":t.preventDefault(),a.close();}}}),Smart("smart-base-progress-bar",class extends Smart.BaseElement{static get properties(){return{indeterminate:{value:!1,type:"boolean"},inverted:{value:!1,type:"boolean"},formatFunction:{value:null,type:"function"},max:{value:100,type:"number"},min:{value:0,type:"number"},showProgressValue:{value:!1,type:"boolean"},value:{value:0,type:"number?"}}}ready(){super.ready();const t=this;t._updateProgress()}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;i._updateProgress(),"value"===t&&i.$.fireEvent("change",{value:n,oldValue:a,changeType:"api"})}_updateProgress(){}get _percentageValue(){var t=Math.min,a=Math.max;const n=this,i=a(n.min,n.max),o=t(n.min,n.max),r=t(i,a(o,n.value));return(r-o)/(i-o)}}),Smart("smart-circular-progress-bar",class extends Smart.BaseProgressBar{template(){return`<div id="container">
                    <svg width="100%" height="100%" viewPort="0 0 100 100" viewBox="0 0 100 100">
                       <circle id="value" class ="smart-value-path" r="50" cx="50" cy="50" transform="rotate(270 50 50)"></circle>
                       <circle id="value" class ="smart-value" r="50" cx="50" cy="50" transform="rotate(270 50 50)"></circle>
                    </svg>
                    <div class ="smart-label-container">
                        <content></content>
                        <span id="label" class ="smart-label"></span>
                    </div>
                </div>`}static get listeners(){return{resize:"_resizeHandler"}}ready(){super.ready();const t=this;t.$.container.style.width=t.$.container.style.height=Math.min(t.offsetWidth,t.offsetHeight)+"px",t.$.hasClass("echo-animation")&&(t.value=t.max,t._updateProgress())}_resizeHandler(){const t=this;t.$.container.style.width=t.$.container.style.height=Math.min(t.offsetWidth,t.offsetHeight)+"px"}_updateProgress(){var t=Math.PI;super._updateProgress();const a=this,n=a.indeterminate?100*t:100*t-100*(a._percentageValue*t),i=!!document.documentMode,o=!i&&!!window.StyleMedia;if(a.showProgressValue){const t=parseInt(100*a._percentageValue);a.$.label.innerHTML=a.formatFunction?a.formatFunction(t):t+"%"}else a.$.label.innerHTML="";return i||o?null===a.value||a.indeterminate?(a.$.value.style.strokeDashoffset="",void a.$.value.setAttribute("class","smart-value smart-value-animation-ms")):(a.$.value.setAttribute("class","smart-value"),void(a.$.value.style.strokeDashoffset=a.inverted?-n:n)):(a.$.value.style.strokeDashoffset=a.inverted?-n:n,null===a.value||a.indeterminate?void a.$value.addClass("smart-value-animation"):void a.$value.removeClass("smart-value-animation"))}}),Smart("smart-progress-bar",class extends Smart.BaseProgressBar{static get properties(){return{orientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}template(){return`<div>
                    <div id="value" class="smart-value"></div>
                    <div id="label" class ="smart-label"></div>
                </div>`}_updateProgress(){super._updateProgress();const t=this;if(t.showProgressValue){const a=parseInt(100*t._percentageValue);t.$.label.innerHTML=t.formatFunction?t.formatFunction(a):a+"%"}else t.$.label.innerHTML="";null===t.value||t.indeterminate?t.$value.addClass("smart-value-animation"):t.$value.removeClass("smart-value-animation"),t.$.value.style.transform="horizontal"===t.orientation?"scaleX("+t._percentageValue+")":"scaleY("+t._percentageValue+")"}}),Smart("smart-scroll-bar",class extends Smart.BaseElement{static get properties(){return{clickRepeatDelay:{type:"integer",value:50},largeStep:{type:"integer",value:100},min:{type:"integer",value:0},max:{type:"integer",value:1e3},mechanicalAction:{value:"switchWhileDragging",allowedValues:["switchUntilReleased","switchWhenReleased","switchWhileDragging"],type:"string"},orientation:{type:"string",value:"horizontal",allowedValues:["horizontal","vertical"]},step:{type:"integer",value:10},showButtons:{type:"boolean",value:!0,defaultReflectToAttribute:!0},value:{type:"integer",value:0}}}static get styleUrls(){return["smart.scrollbar.css"]}template(){return"<div id=\"container\" class=\"smart-container\">\n                    <div id=\"nearButton\" class =\"smart-scroll-button smart-arrow-left\"></div>\n                    <div  id=\"track\" class =\"smart-track\">\n                        <div id=\"thumb\" class=\"smart-thumb\"></div>\n                    </div>\n                    <div id=\"farButton\" class =\"smart-scroll-button smart-arrow-right\"></div>\n            </div>"}static get listeners(){return{"nearButton.click":"_nearButtonClickHandler","nearButton.mousedown":"_startRepeat","nearButton.mouseup":"_stopRepeat","nearButton.mouseenter":"_updateInBoundsFlag","nearButton.mouseleave":"_updateInBoundsFlag","farButton.click":"_farButtonClickHandler","farButton.mousedown":"_startRepeat","farButton.mouseup":"_stopRepeat","farButton.mouseenter":"_updateInBoundsFlag","farButton.mouseleave":"_updateInBoundsFlag","track.down":"_trackDownHandler","track.click":"_trackClickHandler","thumb.down":"_dragStartHandler","document.move":"_dragHandler","document.up":"_dragEndHandler",up:"_dragEndHandler","document.selectstart":"_selectStartHandler",resize:"_resizeHandler"}}_updateInBoundsFlag(t){const a=this,n=t.target;n._isPointerInBounds=!0,"mouseleave"===t.type&&(n._isPointerInBounds=!1);const i="buttons"in t?t.buttons:t.which;1!==i&&a._stopRepeat(t)}_startRepeat(t){const a=this;if(a.disabled)return;const n=t.target;n._initialTimer||(n._initialTimer=setTimeout(function(){n._repeatTimer=setInterval(()=>{if(n._isPointerInBounds){const a="buttons"in t?t.buttons:t.which;n.$.fireEvent("click",{buttons:a,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY})}},a.clickRepeatDelay)},3*a.clickRepeatDelay))}_stopRepeat(t){const a=this;if(!a.disabled){const a=t.target;a._repeatTimer&&(clearInterval(a._repeatTimer),a._repeatTimer=null),a._initialTimer&&(clearTimeout(a._initialTimer),a._initialTimer=null)}}_calculateThumbSize(t){const a=this,n=a.max-a.min,i="horizontal"===a.orientation?10<a.$.track.offsetWidth:10<a.$.track.offsetHeight;let o=0;return 1<=n&&i?(o=t/(n+t)*t,0<=a.$.thumb.className.indexOf("smart-hidden")&&a.$thumb.removeClass("smart-hidden")):a.$thumb.addClass("smart-hidden"),Math.max(10,Math.min(o,t))}_dragStartHandler(t){const a=this;a.disabled||(a.thumbCapture=!0,a.dragStartX=t.clientX,a.dragStartY=t.clientY,a.dragStartValue=a.value,t.stopPropagation(),t.preventDefault())}_dragHandler(t){const a=this;if(!0!==a.thumbCapture)return;a._isThumbDragged=!0;const n=(a.max-a.min)/(a.scrollBarSize-a.thumbSize),i="horizontal"===a.orientation?(t.clientX-a.dragStartX)*n:(t.clientY-a.dragStartY)*n;let o=i;a.rightToLeft&&"horizontal"===a.orientation&&(o=-i),a._updateValue(a.dragStartValue+o),t.stopPropagation(),t.preventDefault(),t.originalEvent&&(t.originalEvent.stopPropagation(),t.originalEvent.preventDefault())}_dragEndHandler(t){const a=this;a._trackDownTimer&&(clearInterval(a._trackDownTimer),a._trackDownTimer=null);a.thumbCapture&&(a.thumbCapture=!1,a._isThumbDragged=!1,"switchWhenReleased"===a.mechanicalAction?a._updateValue(a.dragStartValue,a.value):"switchUntilReleased"===this.mechanicalAction&&a._updateValue(a.dragStartValue),t.preventDefault(),t.stopPropagation(),t.originalEvent.preventDefault(),t.originalEvent.stopPropagation())}_farButtonClickHandler(){const t=this;if(!t.disabled){const a=t.value;t._updateValue(t.value+t.step),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(a)}}_nearButtonClickHandler(){const t=this;if(!t.disabled){const a=t.value;t._updateValue(t.value-t.step),"switchUntilReleased"===t.mechanicalAction&&t._updateValue(a)}}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;switch(t){case"min":case"max":case"orientation":case"showButtons":{i._layout();break}case"value":i._updateValue(a,n);}}ready(){super.ready();const t=this;t._layout()}_resizeHandler(){const t=this;t._layout()}refresh(){const t=this;t._layout()}_layout(){const t=this;t.scrollBarSize="horizontal"===t.orientation?t.$.track.offsetWidth:t.$.track.offsetHeight,t.thumbSize=t._calculateThumbSize(t.scrollBarSize),"horizontal"===t.orientation&&t.$.thumb.style.width!==t.thumbSize+"px"?t.$.thumb.style.width=t.thumbSize+"px":"vertical"===t.orientation&&t.$.thumb.style.height!==t.thumbSize+"px"&&(t.$.thumb.style.height=t.thumbSize+"px"),"horizontal"===t.orientation?(t.$.nearButton.classList.contains("smart-arrow-up")&&t.$.nearButton.classList.remove("smart-arrow-up"),t.$.farButton.classList.contains("smart-arrow-down")&&t.$.farButton.classList.remove("smart-arrow-down"),!t.$.nearButton.classList.contains("smart-arrow-left")&&t.$.nearButton.classList.add("smart-arrow-left"),!t.$.farButton.classList.contains("smart-arrow-right")&&t.$.farButton.classList.add("smart-arrow-right")):(t.$.nearButton.classList.contains("smart-arrow-left")&&t.$.nearButton.classList.remove("smart-arrow-left"),t.$.farButton.classList.contains("smart-arrow-right")&&t.$.farButton.classList.remove("smart-arrow-right"),!t.$.nearButton.classList.contains("smart-arrow-up")&&t.$.nearButton.classList.add("smart-arrow-up"),!t.$.farButton.classList.contains("smart-arrow-down")&&t.$.farButton.classList.add("smart-arrow-down")),t._updateThumbPosition(),(t.value>t.max||t.value<t.min)&&t._updateValue(t.value,t.value>t.max?t.max:t.min)}_selectStartHandler(t){const a=this;a.thumbCapture&&t.preventDefault()}_trackDownHandler(t){const a=this;t.target!==a.$.track||(a._trackDownTimer=setInterval(function(){a._trackClickHandler(t)},a.clickRepeatDelay))}_trackClickHandler(t){const a=this;if(a.disabled)return;if(a._isThumbDragged)return clearInterval(a._trackDownTimer),void(a._trackDownTimer=null);const n=a.$.thumb.getBoundingClientRect(),i=t.pageX-window.pageXOffset,o=t.pageY-window.pageYOffset,r=a.value;"horizontal"===a.orientation?i>(a._isThumbDragged?a.dragStartX:n.right)?a._updateValue(a.value+a.largeStep):i<(a._isThumbDragged?a.dragStartX:n.left)&&a._updateValue(a.value-a.largeStep):o>(a._isThumbDragged?a.dragStartY:n.bottom)?a._updateValue(a.value+a.largeStep):o<(a._isThumbDragged?a.dragStartY:n.top)&&a._updateValue(a.value-a.largeStep),"switchUntilReleased"===a.mechanicalAction&&a._updateValue(r)}_updateValue(t,a){const n=this;if(1===arguments.length&&(a=t,t=n.value),(void 0===a||isNaN(a))&&(a=n.min),a>n.max&&(a=n.max),a<n.min&&(a=n.min),n.value=a,t!==a){if(n._updateThumbPosition(),n.thumbCapture&&"switchWhenReleased"===n.mechanicalAction)return;if(n.onChange)return void n.onChange({value:n.value,oldValue:t,min:n.min,max:n.max});n.$.fireEvent("change",{value:n.value,oldValue:t,min:n.min,max:n.max})}}_updateThumbPosition(){const t=this,a=t.$.track.offsetHeight,n=t.$.track.offsetWidth,i="horizontal"===t.orientation?n:a,o=t._calculateThumbSize(i),r="horizontal"===t.orientation?n-o:a-o;let l=(i-o)/(t.max-t.min)*(t.value-t.min);t.rightToLeft&&"horizontal"===t.orientation&&(l=(i-o)/(t.max-t.min)*(t.max-t.value-t.min)),l=Math.min(r,Math.max(0,l)),"vertical"===t.orientation&&t.$.thumb.style.top!==l+"px"?t.$.thumb.style.top=l+"px":"horizontal"===t.orientation&&t.$.thumb.style.left!==l+"px"&&(t.$.thumb.style.left=l+"px")}}),Smart("smart-table",class extends Smart.ContentElement{static get properties(){return{columns:{value:null,type:"any?",reflectToAttribute:!1},dataSource:{value:null,type:"any?",reflectToAttribute:!1},sortMode:{value:"none",type:"string",allowedValues:["none","one","many"]}}}static get listeners(){return{"tableContainer.down":"downHandler"}}template(){return`<div id="container" class="smart-container">
					   <table id="tableContainer" inner-h-t-m-l=\'[[innerHTML]]\' class ="smart-table-container">
							<content></content>
                       </table>              
                </div>`}ready(){const t=this;t.dataBind()}_initColumns(){const t=this;t._columns=[],t.columnByDataField=[];for(let a=0,n;a<t.columns.length;a++){if(n=t.columns[a],"string"==typeof n&&t.dataSource.dataFields){const a=t.dataSource.dataFields.find(t=>{if(t.name===n)return t});n={label:n,dataField:n,dataType:a?a.dataType||"string":"string"}}t._columns.push(n),t.columnByDataField[n.dataField]=n}}_initRows(){const t=this;t.rows=[],t.rowById=[];const a=function(a,n){const i={data:a,boundIndex:n};t.rowById[i.uid]=i,t.rows.push(i)},n=function(){const a=t.rows[t.rows.length-1];delete t.rowById[a.uid],t.rows.pop()},i=function(a){const n=t.rows[t.rows.length-1];delete t.rowById[n.uid],t.rows.splice(a,1)};for(let n=0;n<t.dataSource.length;n++){const i=t.dataSource[n];a(i,n)}t.dataSource.notify(function(o){if(!t.dataSource._updating){const r=o.data;switch(t.rows.canNotify=!1,o.action){case"add":if(r.length)for(let n=0;n<r.length;n++)a(r[n],t.dataSource.length-r.length+n);else a(r,t.dataSource.length-1);break;case"update":if(r.length)for(let a=0;a<r.length;a++){const n=o.index[a];t.rows[n].data=r[a]}else{const a=o.index;t.rows[a].data=r}break;case"insert":a(r,o.index);for(let a=0;a<t.rows.length;a++){const n=t.rows[a];n.dataIndex=a}break;case"remove":i(o.index);break;case"removeLast":n();}t.rows.canNotify=!0,t.refresh()}}),t.rows=new Smart.ObservableArray(t.rows);for(let a=0;a<t.rows.length;a++){const n=t.rows[a];n.propertyChanged=function(){}}t.rows.notify(function(a){if(t.rows.canNotify&&!a.path){t.rows.canNotify=!1;const n=a.action;t.dataSource&&(t.dataSource.canNotify=!1,"add"===n?t.dataSource.add(t.rows[a.index]):"update"===n?t.dataSource.update(a.index,t.rows[a.index]):"remove"===n?t.dataSource.remove(a.index):void 0,t.dataSource.canNotify=!0,t.rows.canNotify=!0,t.refresh())}})}downHandler(){}refresh(){const t=this;let a="<thead><tr>",n="<tbody>";for(let n=0;n<t._columns.length;n++){const i=t._columns[n];a+="<th scope=\"col\">"+i.label+"</th>"}a+="</tr></thead>";for(let a=0;a<t.rows.length;a++){const i=t.rows[a];n+="<tr>";for(let a=0;a<t._columns.length;a++){const o=t._columns[a];n+="<td>"+i.data[o.dataField]+"</td>"}n+="</tr>"}n+="</tbody>",t.innerHTML=a+n;const o=t.querySelectorAll("th");for(let a=0;a<t._columns.length;a++){const n=t._columns[a];n.headerCellElement=o[a],n.headerCellElement.onclick=function(){"none"===t.sortMode||(!this.headerCellElement.sortIconContainerElement&&(this.headerCellElement.innerHTML+="<span class=\"sort-by\"></span>",this.headerCellElement.sortIconContainerElement=this.headerCellElement.lastChild),this.headerCellElement.sortIconContainerElement.classList.contains("asc")?t.sortBy(this.dataField,"desc"):this.headerCellElement.sortIconContainerElement.classList.contains("desc")?t.sortBy(this.dataField,null):t.sortBy(this.dataField,"asc"))}.bind(n)}if(t._sortColumns&&0<t._sortColumns.length)for(let a=0;a<t._sortColumns.length;a++){const n=t._sortColumns[a],i=t.columnByDataField[n.dataField];i.headerCellElement.sortIconContainerElement||(i.headerCellElement.innerHTML+="<span class=\"sort-by "+n.direction+"\"></span>",i.headerCellElement.sortIconContainerElement=i.headerCellElement.lastChild)}}dataBind(){const t=this;if(!t.dataSource){if(!t.columns){t.columns=[],t.dataFields=[];const a=document.querySelectorAll("th");for(let n=0;n<a.length;n++){const i=a[n].innerHTML.trim();t.columns.push({label:i,dataField:i,dataType:"string"}),t.dataFields.push(i)}}let a=[];if(!t.rows){const n=document.querySelectorAll("tr");for(let o=0;o<n.length;o++){const i=n[o],r={},l=i.querySelectorAll("td");if(0<l.length){for(let a=0;a<t.columns.length;a++){const n=t.columns[a];r[n.dataField]=l[a].innerHTML.trim()}a.push(r)}}t.dataSource=new Smart.DataAdapter({dataSource:a,dataFields:t.dataFields})}const n=t.querySelectorAll("table");1<n.length&&n[n.length-1].parentNode.removeChild(n[n.length-1])}t._initColumns(),t._initRows(),t.refresh()}sortBy(t,a){const n=this,o=n.columnByDataField[t],r=[],l=[],s=[];if("none"===n.sortMode)return;let d=a||"asc";const i=function(t){t.headerCellElement.sortIconContainerElement||(t.headerCellElement.innerHTML+="<span class=\"sort-by\"></span>",t.headerCellElement.sortIconContainerElement=t.headerCellElement.lastChild)},c=function(t){i(t),t.headerCellElement.sortIconContainerElement.classList.remove("desc"),t.headerCellElement.sortIconContainerElement.classList.remove("asc"),t.sortOrder=null},m=function(){if(0<n._sortColumns.length)for(let t=0;t<n._sortColumns.length;t++){const a=n._sortColumns[t],i=n.columnByDataField[a.dataField];c(i)}n._sortColumns=[]};if(null===o)return void m();if("none"===n.sortMode||!n.dataSource)return;c(o),n._sortColumns||(n._sortColumns=[]);let p="string";for(let o=0;o<n.dataSource.dataFields.length;o++){const a=n.dataSource.dataFields[o];if(a.name===t){p=a.dataType;break}}let u=!0;for(let r=0;r<n._sortColumns.length;r++){const a=n._sortColumns[r];if(a.dataField===t)if(u=!1,"asc"===a.direction)a.direction="desc",d="desc";else if("desc"===a.direction){n._sortColumns.splice(r,1),c(o),d=null;break}}u&&("one"===n.sortMode&&m(),n._sortColumns.push({dataField:t,direction:d,dataType:p})),i(o),null===d?(o.headerCellElement.sortIconContainerElement.classList.remove("asc"),o.headerCellElement.sortIconContainerElement.classList.remove("desc")):(o.headerCellElement.sortIconContainerElement.classList.remove("asc"),o.headerCellElement.sortIconContainerElement.classList.remove("desc"),o.sortOrder=d,"desc"===d?o.headerCellElement.sortIconContainerElement.classList.add("desc"):o.headerCellElement.sortIconContainerElement.classList.add("asc"));for(let o=0;o<n._sortColumns.length;o++){const t=n._sortColumns[o];r.push(t.dataField),l.push(t.direction),s.push(t.dataType)}(function(){n.dataSource._sort(n.dataSource.boundSource,r,l,s);for(let t=0;t<n.dataSource.length;t++){const a=n.rows[t],i=n.dataSource[t];a.data=i,a.boundIndex=i.boundIndex}n.refresh()})()}}),Smart("smart-tab-item",class extends Smart.ContentElement{static get properties(){return{closeButtonHidden:{value:!1,type:"boolean"},index:{value:null,type:"number?"},selected:{value:!1,type:"boolean"},label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}get enableShadowDOM(){return!1}attached(){const t=this;super.attached();t.isCompleted&&(t.$.removeClass("right"),t.$.removeClass("left"),t.$.removeClass("top"),t.$.removeClass("bottom"),t.$.removeClass("animate"))}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;if(i._preventPropertyChangedHandler)return void delete i._preventPropertyChangedHandler;switch(t){case"closeButtonHidden":i.$.fireEvent("closeButtonVisibilityChange",{hidden:n});break;case"index":i.$.fireEvent("indexChange",{newIndex:n,oldIndex:a,tabItem:i});break;case"label":break;case"labelSize":i.$.fireEvent("labelSizeChange",{size:n});}}appendChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}a.firstElementChild.appendChild(t)}_setIndex(t){const a=this,n=a.context;a.context=a,a.index=t,a.context=n}}),Smart("smart-tab-items-group",class extends Smart.ContentElement{static get properties(){return{label:{value:"",type:"string"},labelSize:{value:null,type:"number?"}}}get enableShadowDOM(){return!1}template(){return""}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;if(i._preventPropertyChangedHandler)return void delete i._preventPropertyChangedHandler;switch(t){case"label":break;case"labelSize":this.$.fireEvent("labelSizeChange",{size:n});}}}),Smart("smart-tabs",class extends Smart.BaseElement{static get properties(){return{addNewTab:{value:!1,type:"boolean"},allowToggle:{value:!1,type:"boolean"},closeButtonMode:{value:"default",allowedValues:["default","selected"],type:"string"},closeButtons:{value:!1,type:"boolean"},collapsed:{value:!1,type:"boolean"},collapsible:{value:!1,type:"boolean"},dataSource:{value:null,type:"array?",reflectToAttribute:!1},enableMouseWheelAction:{value:!1,type:"boolean"},messages:{value:{en:{ambiguousIndexes:"smart-tabs: Initially set smart-tab-item indexes are ambiguous and are ignored in favour of the HTML structure.",detailsObjectRequired:"smart-tabs: The method \"insert\" requires a details Object to be passed as a second argument.",invalidIndex:"smart-tabs: \"{{method}}\" method accepts an index of type number.",referenceNodeNotChild:"smart-tabs: Passed {{argument}} is not part of this smart-tabs element.",tabItemRequired:"smart-tabs: The method \"{{method}}\" requires a \"smart-tab-item\" element to be passed as an argument."}},type:"object",extend:!0},name:{value:"",type:"string"},overflow:{value:"auto",allowedValues:["auto","hidden","scroll"],type:"string"},reorder:{value:!1,type:"boolean"},resize:{value:!1,type:"boolean"},scrollButtonsPosition:{value:"both",allowedValues:["near","far","both"],type:"string"},scrollMode:{value:"paging",allowedValues:["paging","continuous"],type:"string"},selectedIndex:{value:null,type:"number?"},selectionMode:{value:"click",allowedValues:["click","dblclick","mouseenter","none"],type:"string"},tabLayout:{value:"scroll",allowedValues:["scroll","dropDown","wrap","shrink"],type:"string",defaultReflectToAttribute:!0},tabPosition:{value:"top",allowedValues:["top","bottom","left","right","hidden"],type:"string"},tabTextOrientation:{value:"horizontal",allowedValues:["horizontal","vertical"],type:"string"}}}static get listeners(){return{closeButtonVisibilityChange:"_closeButtonVisibilityChangeHandler",indexChange:"_indexChangeHandler",keydown:"_keydownHandler",labelSizeChange:"_labelSizeChangeHandler",resize:"_applyTabOverflow",styleChanged:"_applyTabOverflow","container.dblclick":"_containerHandler","container.down":"_containerHandler","container.mouseout":"_containerHandler","container.mouseover":"_containerHandler","container.up":"_containerHandler","scrollButtonFar.click":"_scrollButtonClickHandler","scrollButtonNear.click":"_scrollButtonClickHandler","tabContentSection.transitionend":"_tabContentSectionTransitionendHandler","tabsHeaderItems.wheel":"_tabsHeaderItemsWheelHandler","tabStrip.mouseleave":"_tabStripMouseleaveHandler","tabStrip.move":"_tabStripMoveHandler","document.move":"_documentMoveHandler","document.selectstart":"_selectStartHandler","document.up":"_documentUpHandler"}}static get requires(){return{"Smart.RepeatButton":"smart.button.js"}}static get styleUrls(){return["smart.tabs.css"]}template(){return`<div id="container">
                    <div id="tabsHeaderSection" class="smart-header smart-tabs-header-section">
                        <div id="tabsHeaderItems" class="smart-tabs-header-items">
                            <smart-repeat-button id="scrollButtonNear" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>
                                <div id="arrowNear" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="tabStrip" class="smart-tab-strip"></div>
                            <smart-repeat-button id="scrollButtonFar" class="smart-tabs-scroll-button smart-nav-button smart-spin-button smart-hidden" animation="[[animation]]" unfocusable>
                                <div id="arrowFar" class="smart-arrow"></div>
                            </smart-repeat-button>
                            <div id="dropDownButton" class="smart-drop-down-button">
                                <div id="dropDownButtonArrow" class="smart-drop-down-button-arrow smart-unselectable"></div>
                            </div>
                            <span id="tabSelectionBar" class="smart-tabs-selection-bar"></span>
                            <div id="resizeToken" class="smart-tabs-resize-token smart-hidden"></div>
                        </div>
                        <div id="tabHeaderControls" class="smart-tabs-header-controls"></div>
                    </div>
                    <div id="tabContentSection" class="smart-tabs-content-section">
                       <content></content>
                    </div>
                    <div id="dropDownButtonDropDown" class="smart-drop-down-button-drop-down smart-hidden"></div>
                    <input id="hiddenInput" type="hidden" name="[[name]]">
                </div>`}attached(){const t=this;super.attached();t.isCompleted&&t._applyTabOverflow()}ready(){super.ready();const t=this;t._flexWritingModeNoFullSupport=!0,t._arrowCodes={top:"&#xe804",bottom:"&#xe801",left:"&#xe802",right:"&#xe803"},t._createElement()}appendChild(t){const a=this;if(!a.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem||a.error(a.localize("tabItemRequired",{method:"appendChild"})),a.insert(a._tabs.length,{node:t})}collapse(){const t=this;!t.collapsible||t.collapsed||(t.collapsed=!0)}ensureVisible(t){var a=Math.round;const n=this;if(null!==t&&"wrap"!==n.tabLayout&&"shrink"!==n.tabLayout&&"hidden"!==n.tabPosition){n._validateIndex(t,"ensureVisible"),t=Math.max(0,Math.min(t,n._tabs.length-1));const i=n._tabs[t].group,o=n.$.tabStrip,r=o.getBoundingClientRect(),l=null===i?n._tabLabelContainers[t]:n._groupLabels[n._groups.indexOf(i)],s=l.getBoundingClientRect();("top"===n.tabPosition||"bottom"===n.tabPosition)&&(r.left>s.left||r.right<s.right)?o.scrollLeft+=a(s.right-o.offsetWidth-r.left):("left"===n.tabPosition||"right"===n.tabPosition)&&(r.top>s.top||r.bottom<s.bottom)&&(o.scrollTop+=a(s.bottom-o.offsetHeight-r.top)),n._updateScrollButtonVisibility(),n.resize&&n._getTabCoordinates()}}expand(){const t=this;t.collapsible&&t.collapsed&&(t.collapsed=!1)}getOffsetFromEdgeOfElement(t){const a=this;a._validateIndex(t,"getOffsetFromEdgeOfElement"),t=Math.max(0,Math.min(t,a._tabs.length-1));const n=a._tabs[t],i=a.tabPosition;return"hidden"===i?n.getBoundingClientRect().top-a.getBoundingClientRect().top:Math.abs(n.getBoundingClientRect()[i]-a.getBoundingClientRect()[i])}insert(t,a){const n=this;let i,o;if(n._validateIndex(t,"insert"),(void 0===a||void 0===a.label&&void 0===a.content&&void 0===a.node)&&n.error(n.localize("detailsObjectRequired")),void 0===a.node)i=a.group,o=document.createElement("smart-tab-item"),o.label=void 0===a.label?"":a.label,o.labelSize=void 0===a.labelSize?null:a.labelSize,o.content=a.content;else if(o=a.node,void 0!==o.index&&null!==o.index){const t=o.context;o.context=o,o.index=null,o.context=t}o.$.addClass("smart-visibility-hidden"),o.group=null;const r=n._addTabLabelContainer(o),l=r.tabLabelContainer,s=r.dropDownLabelContainer;l.tab=o,o.tabLabelContainer=l;const d={index:t,tab:o,tabLabelContainer:l,dropDownLabelContainer:s};if(0===n._groups.length&&void 0===i)n._insertNoGrouping(d);else if(void 0!==i&&null!==i){d.group=i;const t=n.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+i+"\"]");null===t?n._insertIntoNewGroup(d):(d.smartTabItemsGroup=t,n._insertIntoExistingGroup(d))}else n._insertNearAGroup(d);n._getReorderItems(),null===n.selectedIndex&&!n.allowToggle&&n._tabs.length&&n._select(0,!0),null!==o.group&&null!==o.labelSize&&"shrink"!==n.tabLayout&&l.style.removeProperty([n._orientationSettings.dimension]),n._applyTabOverflow()}insertBefore(t,a){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem&&(a===void 0||null===a||a instanceof Smart.TabItem)||n.error(n.localize("tabItemRequired",{method:"insertBefore"}));let i;n.contains(t)&&(t.selected&&(i=!0),n.remove(t.index)),a!==void 0&&null!==a?(!n.contains(a)&&n.error(n.localize("referenceNodeNotChild",{argument:"referenceNode"})),n.insert(a.index,{node:t})):n.insert(n._tabs.length,{node:t}),i&&n._select(t.index,!1)}remove(t){const a=this,n=a._tabs.length;if(0!==n){a._validateIndex(t,"remove"),t=Math.max(0,Math.min(t,n-1));const i=a._tabs[t],o=a._tabLabelContainers[t];if(o.parentElement.removeChild(o),i.parentElement.removeChild(i),null!==i.group){const t=a.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+i.group+"\"]");if(0===t.childElementCount){const n=a._groups.indexOf(i.group);a.$.tabStrip.removeChild(a._groupLabels[n]),a._groups.splice(n,1),a.$.container.removeChild(a._groupLabels[0].dropDown),a._groupLabels.splice(n,1),a.$.tabContentSection.removeChild(t)}}1<n?t<a.selectedIndex?a.selectedIndex--:t===a.selectedIndex&&(t===n-1?a._select(t-1,!1):(a._select(t+1,!1),a.selectedIndex--)):(a.selectedIndex=null,a.$.tabContentSection.innerHTML=""),a._tabLabelContainers.splice(t,1),a.$.dropDownButtonDropDown.removeChild(a.$.dropDownButtonDropDown.children[t]),a._tabs.splice(t,1),a._focusedItem===i&&(a._focusedItem=a._tabs[a._focusedItem.index]),a._updateTabIndexes(),a._getReorderItems(),a._applyTabOverflow(),a.ensureVisible(a.selectedIndex)}}removeChild(t){const a=this;if(!a.isCompleted||t instanceof HTMLElement&&t.classList.contains("smart-resize-trigger-container")){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.removeChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}t instanceof Smart.TabItem||a.error(a.localize("tabItemRequired",{method:"removeChild"})),a.contains(t)||a.error(a.localize("referenceNodeNotChild",{argument:"node"})),a.remove(t.index)}select(t){const a=this;0===a._tabs.length||(a._validateIndex(t,"select"),t=Math.max(0,Math.min(t,a._tabs.length-1)),a.ensureVisible(t),a._select(t,!0))}_setFocusable(){const t=this;return t.disabled||t.unfocusable?void t.removeAttribute("tabindex"):void((null===t.getAttribute("tabindex")||0>t.getAttribute("tabindex"))&&t.setAttribute("tabindex",0))}update(t,a,n){const i=this;if(0!==i._tabs.length){i._validateIndex(t,"update"),t=Math.max(0,Math.min(t,i._tabs.length-1));const o=i._tabs[t];if(void 0!==a&&o.label!==a){const n=i._tabLabelContainers[t].firstElementChild.children[0],r=i.$.dropDownButtonDropDown.children[t];o.label=a,n.innerHTML="",r.innerHTML="",i._setLabel(a,n,r),i._applyTabOverflow()}void 0!==n&&(o.content=n)}}_createElement(){const t=this;t.disabled&&(t.$.scrollButtonNear.disabled=!0,t.$.scrollButtonFar.disabled=!0),t._handlePosition(t.tabPosition),t._handleScrollButtonsPosition(t.scrollButtonsPosition,"both"),null!==t.dataSource&&t._processDataSource(),t._setFocusable(),t.collapsed&&!t.collapsible&&(t.collapsed=!1),t.collapsible&&t.allowToggle&&(t.allowToggle=!1),t._processHTML(),null===t.selectedIndex&&t.$.tabContentSection.setAttribute("show-placeholder","")}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const o=this;switch(t){case"addNewTab":n?o._insertAddNewTab():(o.$.tabStrip.removeChild(o._addNewTab),delete o._addNewTab),o._applyTabOverflow();break;case"allowToggle":n&&o.collapsible?(o.collapsed&&o._toggleCollapsedState(),o.collapsible=!1):!n&&null===o.selectedIndex&&(o.ensureVisible(o.selectedIndex=0),o._select(o.selectedIndex,!0,null));break;case"closeButtonMode":if("selected"===n){for(let t=0;t<o._tabs.length;t++)o._disableCloseButton(t);o._enableCloseButton(o.selectedIndex)}else{o._disableCloseButton(o.selectedIndex);const t=o._tabLabelContainers;for(let a=0;a<t.length;a++){const n=t[a];n.closeButtonEnabled=!0!==o._tabs[a].closeButtonHidden,o._showCloseButton(n)}}o._applyTabOverflow();break;case"closeButtons":{const t=o._tabLabelContainers,a=n?o._showCloseButton:o._hideCloseButton;for(let n=0;n<t.length;n++){const i=t[n];a(i)}o._applyTabOverflow();break}case"collapsed":if(!o.collapsible&&n)return void(o.collapsed=!1);break;case"collapsible":!n&&o.collapsed&&(o.collapsed=!1),o.allowToggle=!1,o.selectedIndex===void 0&&o.select(o._focusedItem.index);break;case"dataSource":o.selectedIndex=null;for(let t=0;t<o._groupLabels.length;t++)o.$.container.removeChild(o._groupLabels[t].dropDown);o.$.tabStrip.innerHTML="",o._processDataSource(),o._processHTML();break;case"disabled":o._setFocusable(),o.$.scrollButtonNear.disabled=n,o.$.scrollButtonFar.disabled=n,n||o._updateScrollButtonVisibility(),o._closeDropDownButtonDropDown();break;case"messages":case"scrollMode":case"selectionMode":case"readonly":case"reorder":break;case"overflow":if("scroll"!==o.tabLayout)return;o.$.tabStrip.scrollLeft=0,o.$.tabStrip.scrollTop=0,"hidden"===n?(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")):o._checkOverflowScroll(),o._getTabCoordinates();break;case"tabPosition":{if(o.$.tabSelectionBar.style.transition="none",o._tabPositionChanging=!0,o._closeGroupDropDown(),o._handlePosition(n,a),"shrink"!==o.tabLayout&&o._applyLabelSizes("tabPosition"),o._applyTabOverflow(),"hidden"!==n){const t=o.getElementsByClassName("smart-tab-group-arrow");for(let a=0;a<t.length;a++)t[a].innerHTML=o._arrowCodes[o.tabPosition]}delete o._tabPositionChanging,requestAnimationFrame(function(){o.$.tabSelectionBar.style.transition=null});break}case"resize":n&&o._getTabCoordinates();break;case"scrollButtonsPosition":o._handleScrollButtonsPosition(n,a);break;case"selectedIndex":{if(isNaN(n)&&(o.selectedIndex=n=a),!o.allowToggle&&null===n)return void(o.selectedIndex=a);let t=n;null!==n&&(t=Math.max(0,Math.min(n,o._tabs.length-1)),o.ensureVisible(t)),o._select(t,!0,a);break}case"tabLayout":"scroll"===a&&(o.$tabsHeaderSection.removeClass("scroll-buttons-shown"),o.$scrollButtonNear.addClass("smart-hidden"),o.$scrollButtonFar.addClass("smart-hidden")),"shrink"===n?o._applyLabelSizes("shrink",!0):"shrink"===a&&o._applyLabelSizes("shrink",!1),o._applyTabOverflow(),"scroll"===n&&o.disabled&&(o.$.scrollButtonNear.disabled=!0,o.$.scrollButtonFar.disabled=!0),o.ensureVisible(o.selectedIndex);break;case"tabTextOrientation":o._applyTabOverflow(),o.ensureVisible(o.selectedIndex);break;case"unfocusable":o._setFocusable();}}_addGroupContainer(t,a){const n=this,i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),s=document.createElement("div");return i.className="smart-tab-group-container smart-unselectable",i.$=Smart.Utilities.Extend(i),o.className="smart-tab-label-text-wrapper",null!==a&&"shrink"!==n.tabLayout&&(i.style[n._orientationSettings.dimension]=parseInt(a,10)+"px"),r.className="smart-tab-label-text-container",r.innerHTML=t,l.className="smart-tab-group-arrow",l.innerHTML=n._arrowCodes[n.tabPosition],s.className="smart-tab-group-drop-down smart-hidden",s.$=Smart.Utilities.Extend(s),o.appendChild(r),o.appendChild(l),i.appendChild(o),n.$.container.appendChild(s),i.group=t,i.dropDown=s,s.groupContainer=i,{label:i,dropDown:s}}_addGroupElements(t){const a=this,n=t.groups,i=t.groupLabels,o=t.group,r=n.indexOf(o),l=t.tabLabelContainer;let s;if(-1!==r)s=i[r],s.dropDown.appendChild(l);else{n.push(o);const r=a._addGroupContainer(o,t.smartTabItemsGroup.labelSize),d=r.dropDown;s=r.label,d.appendChild(l),d.groupContainer=r.label,t.documentFragment.appendChild(s),i.push(s)}a.selectedIndex===t.i&&(a._selectedGroup=s,s.$.addClass("smart-tab-group-selected"))}_addNewTabHandler(t,a,n){const i=this;i._swiping||(n?(t.removeAttribute("hover"),i.insert(i._tabs.length,{label:"New Tab",content:""}),i._select(i._tabs.length-1,!0)):!i._reordering&&!i._swiping&&("mouseover"===a?t.setAttribute("hover",""):"mouseout"==a&&t.removeAttribute("hover")))}_addTabLabelContainer(t,a){const n=this,i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");let s;return i.className="smart-tab-label-container smart-unselectable",o.className="smart-tab-label-text-wrapper",r.className="smart-tab-label-text-container",l.className="smart-tab-close-button",l.innerHTML="&#xe81f",void 0===a?(n.closeButtons?"default"===n.closeButtonMode&&t.closeButtonHidden||"selected"===n.closeButtonMode&&!t.selected?(l.classList.add("smart-hidden"),i.closeButtonEnabled=!1):(r.classList.add("smart-close-button-enabled"),i.closeButtonEnabled=!0):(l.classList.add("smart-hidden"),i.closeButtonEnabled=!0),s=document.createElement("div"),s.className="smart-tab-label-container smart-unselectable",null===t.group&&null!==t.labelSize&&"shrink"!==n.tabLayout&&(i.style[n._orientationSettings.dimension]=parseInt(t.labelSize,10)+"px")):(l.classList.add("smart-hidden"),i.closeButtonEnabled=!1),n._setLabel(t?t.label:"+",r,s),r.$=Smart.Utilities.Extend(r),l.$=Smart.Utilities.Extend(l),o.appendChild(r),o.appendChild(l),i.appendChild(o),i.$=Smart.Utilities.Extend(i),{tabLabelContainer:i,dropDownLabelContainer:s}}_animateSelection(t,a,n){const o=this;let r="right",l="left";if(o._animatedTab=t,o._animatedOldTab=a,o._animatedTab&&o._animatedOldTab){("left"===o.tabPosition||"right"===o.tabPosition)&&(r="top",l="bottom");for(let t=0;t<o._tabs.length;t++)o._tabs[t].$.removeClass(r),o._tabs[t].$.removeClass(l),o._tabs[t].$.removeClass("animate");return t===a?(t.$.hasClass("smart-visibility-hidden")?t.$.removeClass("smart-visibility-hidden"):t.$.addClass("smart-visibility-hidden"),void(o._animatedOldTab.classToRemove=r)):void(n?(t.$.addClass(r),t.$.removeClass("smart-visibility-hidden"),a.$.addClass("animate"),t.$.addClass("animate"),a.$.addClass(l),a.$.addClass("smart-visibility-hidden"),t.$.removeClass(r),o._animatedOldTab.classToRemove=l):(t.$.addClass(l),t.$.removeClass("smart-visibility-hidden"),a.$.addClass("animate"),t.$.addClass("animate"),a.$.addClass(r),a.$.addClass("smart-visibility-hidden"),t.$.removeClass(l),o._animatedOldTab.classToRemove=r))}}_applyConditionalTabOverflow(){const t=this,a="left"===t.tabPosition||"right"===t.tabPosition,n=t.$.tabStrip;if("scroll"===t.tabLayout)return void t._checkOverflowScroll();if(t._flexWritingModeNoFullSupport&&"shrink"===t.tabLayout&&a&&n.scrollHeight>n.offsetHeight){const a=n.children,o=100/a.length+"%";n.$.addClass("shrink-tabs-vertical");for(let t=0;t<a.length;t++)a[t].style.height=o,a[t].firstElementChild.firstElementChild.classList.add("smart-tab-label-text-container-full-height");t._inlineStyleTabStripChildren=!0}}_applyLabelSizes(t,a){const n=this,o=n._orientationSettings.dimension,r="width"===o?"height":"width";for(let l=0;l<n._reorderItems.length;l++){const i=n._reorderItems[l],s=n._getCorrespondingCustomElement(i);null!==s.labelSize&&("tabPosition"===t&&i.style.removeProperty(r),a?i.style.removeProperty(o):i.style[o]=parseInt(s.labelSize,10)+"px")}}_applyTabOverflow(){var t=Math.max;const a=this;if(a._removeInlineStyle(),0===a._tabs.length)return void a._toggleNavigationElementsVisibility();const n=a.tabLayout,i=a.tabPosition,o="left"===i||"right"===i,r=a.$.tabStrip;switch(a._closeDropDownButtonDropDown(),n){case"scroll":case"dropDown":a._flexWritingModeNoFullSupport&&"vertical"===a.tabTextOrientation&&o&&a._fixTabStripNotChrome(r);break;case"wrap":if("vertical"!==a.tabTextOrientation)o&&r.scrollWidth>r.offsetWidth&&(r.style.width=r.scrollWidth+"px","right"===i&&(r.style.flexWrap="wrap-reverse"),a._inlineStyleTabStrip=!0);else if(!a._flexWritingModeNoFullSupport)o||r.scrollHeight>r.offsetHeight&&(r.style.height=r.scrollHeight+"px",a._inlineStyleTabStrip=!0);else if(o)a._fixTabStripNotChrome(r);else{const n=r.children;let o=n[0].offsetHeight;for(let a=1;a<n.length;a++)o=t(o,n[a].offsetHeight);for(let t=1;t<n.length;t++)n[t].style.height=o+"px";a._inlineStyleTabStripChildren=!0}break;case"shrink":if(!o)r.scrollWidth>r.offsetWidth&&r.$.addClass("shrink-tabs");else if(a._flexWritingModeNoFullSupport&&"vertical"===a.tabTextOrientation){const n=r.children,i=window.getComputedStyle(n[0].firstElementChild),o=parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10);let l=0;for(let a=0;a<n.length;a++)l=t(l,n[a].firstElementChild.firstElementChild.offsetWidth);r.style.width=o+l+"px",a._inlineStyleTabStrip=!0;break}}a._applyConditionalTabOverflow(),a._getTabCoordinates(),a._fixTabStripFlex(n),a._toggleNavigationElementsVisibility(),a._positionTabSelectionBar(a._tabLabelContainers[a.selectedIndex],!0)}_checkOverflowScroll(){var t=Math.round;const a=this,n=a.$tabsHeaderSection,i=a.$.tabStrip,o=a.overflow;if("hidden"===o)return;let r,l,s;"left"===a.tabPosition||"right"===a.tabPosition?(r=t(i.scrollHeight)>t(i.offsetHeight),l=0<t(i.scrollTop),s=t(i.offsetHeight+i.scrollTop)<t(i.scrollHeight)):(r=t(i.scrollWidth)>t(i.offsetWidth),l=0<t(i.scrollLeft),s=t(i.offsetWidth+i.scrollLeft)<t(i.scrollWidth)),"scroll"===o&&(n.addClass("scroll-buttons-shown"),a.$scrollButtonNear.removeClass("smart-hidden"),a.$scrollButtonFar.removeClass("smart-hidden")),r?"auto"===o?(!n.hasClass("scroll-buttons-shown")&&n.addClass("scroll-buttons-shown"),l?a.$scrollButtonNear.removeClass("smart-hidden"):a.$scrollButtonNear.addClass("smart-hidden"),s?a.$scrollButtonFar.removeClass("smart-hidden"):a.$scrollButtonFar.addClass("smart-hidden"),!1===(l&&s)?n.addClass("one-button-shown"):n.removeClass("one-button-shown"),!a.disabled&&(a.$.scrollButtonNear.disabled=!1,a.$.scrollButtonFar.disabled=!1)):(n.removeClass("one-button-shown"),a.disabled?(a.$.scrollButtonNear.disabled=!0,a.$.scrollButtonFar.disabled=!0):(a.$.scrollButtonNear.disabled=!l,a.$.scrollButtonFar.disabled=!s)):!r&&"auto"===o&&n.hasClass("scroll-buttons-shown")?(n.removeClass("scroll-buttons-shown"),n.removeClass("one-button-shown"),a.$scrollButtonNear.addClass("smart-hidden"),a.$scrollButtonFar.addClass("smart-hidden")):!r&&"scroll"===o&&(a.$.scrollButtonNear.disabled=!0,a.$.scrollButtonFar.disabled=!0)}_closeButtonVisibilityChangeHandler(t){const a=this,n=t.target.index;return"selected"===a.closeButtonMode?void(a._tabLabelContainers[n].closeButtonEnabled=t.detail.hidden):void(t.detail.hidden?a._disableCloseButton(n):a._enableCloseButton(n))}_closeDropDownButtonDropDown(){const t=this;t._dropDownButtonDropDownOpened&&(t.$dropDownButtonDropDown.addClass("smart-hidden"),t._dropDownButtonDropDownOpened=!1)}_closeGroupDropDown(){const t=this;t._openDropDown&&(t._openDropDown.rippleInProgress?setTimeout(function(){t._openDropDown&&(t._openDropDown.$.addClass("smart-hidden"),delete t._openDropDown.rippleInProgress,t._openDropDown=void 0)},450):(t._openDropDown.$.addClass("smart-hidden"),t._openDropDown=void 0))}_containerHandler(t){const a=this,n=t.type;if(!(a.disabled||a.readonly||a._resizing&&"mouseout"!==n||("down"===n||"up"===n)&&1!==t.which&&!Smart.Utilities.Core.isMobile)){"up"===n&&t.stopPropagation();const i=t.originalEvent?t.originalEvent.target:t.target;return a.$.tabContentSection.contains(i)?void 0:a.$.dropDownButton.contains(i)?void a._dropDownButtonHandler(i,t):a.$.dropDownButtonDropDown.contains(i)?void a._dropDownButtonHandler(i,t,!0):void a._tabStripHandler(i,t)}}_disableCloseButton(t){const a=this,n=a._tabLabelContainers[t];n.closeButtonEnabled=!1,a.closeButtons&&a._hideCloseButton(n)}_documentMoveHandler(t){const a=this,n=a._orientationSettings;if(a._reordering){a._reorderStartThrown||(a._fireDragEvent(t,"dragStart"),a._reorderStartThrown=!0);const i=t[n.coordinate],o="wrap"===a.tabLayout?function(a){return t.pageX>=a.fromX&&t.pageX<=a.toX&&t.pageY>=a.fromY&&t.pageY<=a.toY}:function(t){return i>=t[n.from]&&i<=t[n.to]};let r=!1;for(let t=0;t<a._tabCoordinates.length;t++){const n=a._tabCoordinates[t];if(o(n)){r=t;break}}!0!==a._preventReorder&&!1!==r&&r!==a._draggedIndex&&(a._reorderTabs(a._draggedIndex,r),a._closeGroupDropDown(),a._draggedIndex=r,a._getReorderItems(),a._getTabCoordinates());const l=a._tabCoordinates[a._draggedIndex];a._preventReorder=!!("wrap"!==a.tabLayout&&(i<l[n.from]||i>l[n.to])||"wrap"===a.tabLayout&&(null!==t.originalEvent.target.closest(".smart-tab-label-container")||null!==t.originalEvent.target.closest(".smart-tab-group-container"))&&!(t.pageX>=l.fromX&&t.pageX<=l.toX&&t.pageY>=l.fromY&&t.pageY<=l.toY))}else a._resizing&&(a.$.resizeToken.style[n.edge]=t[n.coordinate]-a._tabsHeaderSectionCoordinate+"px",a.$resizeToken.removeClass("smart-hidden"))}_documentUpHandler(t){const a=this;let n=t.originalEvent.target;a._endSwiping(t,Date.now()),a._openDropDown&&!a._openDropDown.rippleInProgress&&(n===document||n.closest(".smart-tab-group-container")!==a._openDropDown.groupContainer)&&a._closeGroupDropDown(),a.$.dropDownButton.contains(n)||a._closeDropDownButtonDropDown(),a._endReordering(t,n),a._resize(t),a._tabToResize!==void 0&&(a._tabToResize=void 0)}_dropDownButtonHandler(t,a,n){const i=this,o=a.type;if(n)return void(t.classList.contains("smart-tab-label-container")&&("down"===o?i._downTarget=t:"mouseout"===o?t.removeAttribute("hover"):"mouseover"===o?t.setAttribute("hover",""):"up"===o?t===i._downTarget&&(i.select(Array.from(i.$.dropDownButtonDropDown.children).indexOf(t)),i._closeDropDownButtonDropDown()):void 0));if("down"===o)i._downTarget=i.$.dropDownButton;else if("up"===o&&i._downTarget===i.$.dropDownButton)if(!i._dropDownButtonDropDownOpened){const t=i.tabPosition;let a,n;"top"===t?(a=i.$.dropDownButton.offsetLeft,n=i.$.tabsHeaderSection.offsetTop+i.$.dropDownButton.offsetHeight):"bottom"===t?(a=i.$.dropDownButton.offsetLeft,n=i.$.tabsHeaderSection.offsetTop):"left"===t?(a=i.$.dropDownButton.offsetWidth,n=i.$.dropDownButton.offsetTop):"right"===t?(a=i.$.tabsHeaderSection.offsetLeft,n=i.$.dropDownButton.offsetTop):void 0,i.$.dropDownButtonDropDown.style.left=a+"px",i.$.dropDownButtonDropDown.style.top=n+"px",i.$dropDownButtonDropDown.removeClass("smart-hidden"),i._dropDownButtonDropDownOpened=!0}else i._closeDropDownButtonDropDown()}_enableCloseButton(t){const a=this,n=a._tabLabelContainers[t];n.closeButtonEnabled=!0,a.closeButtons&&a._showCloseButton(n)}_endReordering(t,a){const n=this;n._reordering&&(n._draggedHoveredTab&&(!n._draggedHoveredTab.contains(a)&&n._draggedHoveredTab.removeAttribute("hover"),delete n._draggedHoveredTab),n._reorderedIndex=void 0,n._reordering=!1,n._reorderStartThrown=!1,n.removeAttribute("dragged"),t&&n._fireDragEvent(t,"dragEnd"))}_endSwiping(t,a){var n=Math.abs;const i=this;if(!i._dragStartDetails)return;const o=i._orientationSettings,r=i.$.tabStrip,l=n(i._dragStartDetails.startTime-a),s=200/l,d=(i._dragStartDetails[o.startCoordinate]-t[o.coordinate])*s;let c=n(d);const m=function(){return!(0<d&&r[o.scrollDirection]===r[o.scrollSize]-r[o.size]||0>d&&0===r[o.scrollDirection])};let p=.03*n(d)*s;const u=function(){if(5<p){const t=(c-p)/n(d);.1>t?p/=1.25:.15>t?p/=1.2:.2>t?p/=1.15:.25>t?p/=1.1:.3>t&&(p/=1.05)}p=Math.round(p);const t=r[o.scrollDirection];r[o.scrollDirection]=0<d?Math.min(t+p,r[o.scrollSize]-r[o.size]):Math.max(t-p,0),c-=p,i._updateScrollButtonVisibility(!0);const a=m();0<c&&a?i._scrollingAnimationFrame=window.requestAnimationFrame(u):i._wheelInProgress=!1};i._scrollingAnimationFrame&&cancelAnimationFrame(i._scrollingAnimationFrame),500>l&&m()?i._scrollingAnimationFrame=window.requestAnimationFrame(u):i._wheelInProgress=!1,delete i._dragStartDetails,i._swiping&&delete i._swiping}_fireDragEvent(t,a){const n=this,i=n.$.tabStrip.children[n._draggedIndex],o=i.tab;let r,l,s;o?(r=o.selected,l=o.index,s=o.label):s=i.group,n.$.fireEvent(a,{position:{left:t.pageX,top:t.pageY},target:i,selected:r,index:l,label:s})}_fixTabStripNotChrome(t){function a(){const a=t.children;let o=a[0].getBoundingClientRect(),r=o.left,l=r+a[0].offsetWidth;for(let t=1;t<a.length;t++)o=a[t].getBoundingClientRect(),r=Math.min(r,o.left),l=Math.max(l,o.left+a[t].offsetWidth);t.style.width=l-r+"px",n._inlineStyleTabStrip=!0}const n=this;0===n._tabs.length||(a(),Smart.Utilities.Core.Browser.Safari&&setTimeout(function(){t.parentElement.classList.add("smart-hidden"),setTimeout(function(){t.parentElement.classList.remove("smart-hidden"),a()},10)},10),n.$.fireEvent("tabStripResize"))}_fixTabStripFlex(t){const a=this;a._flexWritingModeNoFullSupport||"vertical"!==a.tabTextOrientation||"left"!==a.tabPosition&&"right"!==a.tabPosition||setTimeout(function(){a.$tabsHeaderSection.addClass("smart-hidden"),setTimeout(function(){a.$tabsHeaderSection.removeClass("smart-hidden"),a._getTabCoordinates(),"scroll"===t&&a._checkOverflowScroll()},10)},10)}_getCorrespondingCustomElement(t){return t.$.hasClass("smart-tab-label-container")?t.tab:this.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+t.group+"\"]")}_getReorderItems(){const t=this;let a;0===t._groups.length?a=t._tabLabelContainers:(a=Array.from(t.$.tabStrip.children),t.addNewTab&&a.pop()),t._reorderItems=a}_getTabCoordinates(){const t=this;if((t.reorder||t.resize)&&"hidden"!==t.tabPosition){const a=[],n=window.scrollX||window.pageXOffset,o=window.scrollY||window.pageYOffset;for(let r=0;r<t._reorderItems.length;r++){const i=t._reorderItems[r],l=i.getBoundingClientRect(),s=window.getComputedStyle(i),d=parseFloat(s.marginLeft),c=parseFloat(s.marginRight),m=parseFloat(s.marginTop),p=parseFloat(s.marginBottom);a.push({fromX:l.left-d+n,toX:l.right+c+n,fromY:l.top-m+o,toY:l.bottom+p+o})}t._tabCoordinates=a}}_getTabs(){const t=this;let a=t.enableShadowDOM?t.shadowRoot.querySelectorAll("smart-tab-item"):t.getElementsByTagName("smart-tab-item");null!==t.selectedIndex&&(0===a.length?t.selectedIndex=null:t.selectedIndex=Math.max(0,Math.min(t.selectedIndex,a.length-1))),t._tabs=Array.from(a)}_groupContainerHandler(t,a){const n=this,i=t.dropDown;if("down"===a)return n._downTarget=t,void(n.reorder&&1<n._reorderItems.length&&(n._getTabCoordinates(),n._reordering=!0,n.setAttribute("dragged",""),n._draggedIndex=Array.from(n.$.tabStrip.children).indexOf(t)));n._reordering||n._swiping||(i===n._openDropDown||"mouseover"!==a||t.classList.contains("smart-tab-group-selected")?"mouseout"===a&&t.removeAttribute("hover"):t.setAttribute("hover",""));"up"!==a||n._downTarget!==t||void 0!==n._reorderedIndex||n._swiping||(i===n._openDropDown?(n._closeGroupDropDown(),!t.classList.contains("smart-tab-group-selected")&&t.setAttribute("hover","")):n._openGroupDropDown(t))}_handlePosition(t,a){const n=this;return-1!==[void 0,"top","left","hidden"].indexOf(a)&&("bottom"===t||"right"===t)?n.$.container.insertBefore(n.$.tabContentSection,n.$.tabsHeaderSection):("bottom"===a||"right"===a)&&-1!==["top","left","hidden"].indexOf(t)&&n.$.container.insertBefore(n.$.tabsHeaderSection,n.$.tabContentSection),"hidden"===t?(n._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},n.removeAttribute("horizontal"),void n.removeAttribute("vertical")):void("top"===t||"bottom"===t?(n._orientationSettings={coordinate:"pageX",dimension:"width",edge:"left",from:"fromX",size:"offsetWidth",to:"toX",scrollDirection:"scrollLeft",scrollSize:"scrollWidth",startCoordinate:"startX",wheelOffset:70},n.removeAttribute("vertical"),n.setAttribute("horizontal",""),n.$arrowNear.removeClass("smart-arrow-up"),n.$arrowNear.addClass("smart-arrow-left"),n.$arrowFar.removeClass("smart-arrow-down"),n.$arrowFar.addClass("smart-arrow-right")):(n._orientationSettings={coordinate:"pageY",dimension:"height",edge:"top",from:"fromY",size:"offsetHeight",to:"toY",scrollDirection:"scrollTop",scrollSize:"scrollHeight",startCoordinate:"startY",wheelOffset:35},n.removeAttribute("horizontal"),n.setAttribute("vertical",""),n.$arrowNear.removeClass("smart-arrow-left"),n.$arrowNear.addClass("smart-arrow-up"),n.$arrowFar.removeClass("smart-arrow-right"),n.$arrowFar.addClass("smart-arrow-down")),n.$.dropDownButtonArrow.innerHTML=n._arrowCodes[n.tabPosition])}_handleScrollButtonsPosition(t,a){const n=this,i=n.$.tabsHeaderItems;t===a||("both"===t?"near"===a?i.insertBefore(n.$.scrollButtonFar,n.$.dropDownButton):i.insertBefore(n.$.scrollButtonNear,n.$.tabStrip):"near"===t?("far"===a&&i.insertBefore(n.$.scrollButtonNear,n.$.tabStrip),i.insertBefore(n.$.scrollButtonFar,n.$.tabStrip)):("near"===a&&i.insertBefore(n.$.scrollButtonFar,n.$.dropDownButton),i.insertBefore(n.$.scrollButtonNear,n.$.scrollButtonFar)))}_hideCloseButton(t){t.firstElementChild.children[0].$.removeClass("smart-close-button-enabled"),t.firstElementChild.children[1].$.addClass("smart-hidden")}_indexChangeHandler(t){const a=this,n=t.detail.oldIndex,i=Math.max(0,Math.min(t.detail.newIndex,a._tabs.length-1));if(n!==i){if(0===a._groups.length)a._reorderTabs(n,i);else{const o=t.detail.tabItem;o._setIndex(n),a.remove(n),a.insert(i,{node:o}),a.selectedIndex===n&&a._select(i,!1)}a._reorderedIndex=void 0}}_insertAddNewTab(){const t=this,a=t._addTabLabelContainer(void 0,!0).tabLabelContainer;a.$.addClass("smart-add-new-tab"),t.$.tabStrip.appendChild(a),t._addNewTab=a}_insertIntoExistingGroup(t){const a=this,n=t.smartTabItemsGroup,i=t.tab,o=t.tabLabelContainer,r=t.group,l=a._groupLabels[a._groups.indexOf(r)],s=l.dropDown;let d=t.index;d=Math.max(0,Math.min(d,n.childElementCount)),s.insertBefore(o,s.children[d]);const c=n.children[d];let m;m=c?c.index:n.children[d-1].index+1,n.insertBefore(i,c),a._tabLabelContainers.splice(m,0,o),a.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,a.$.dropDownButtonDropDown.children[m]||null),a._tabs.splice(m,0,i),d=m,i.group=r,a._updateIndexes(d)}_insertIntoNewGroup(t){const a=this,n=t.tab,i=t.tabLabelContainer,o=t.group,r=a._addGroupContainer(o),l=r.label,s=r.dropDown;s.appendChild(i),a._groups.push(o);let d=Math.max(0,Math.min(t.index,a.$.tabStrip.childElementCount)),c=d;a._addNewTab&&c===a.$.tabStrip.childElementCount&&c--,a.$.tabStrip.insertBefore(l,a.$.tabStrip.children[c]||null),a._groupLabels.push(l);const m=document.createElement("smart-tab-items-group");m.appendChild(n),a.$.tabContentSection.insertBefore(m,a.$.tabContentSection.children[d]),m.label=o;const p=m.previousElementSibling;let u=0;p&&(p instanceof Smart.TabItem?u=p.index+1:p&&(u=p.lastElementChild.index+1)),a._tabLabelContainers.splice(u,0,i),a.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,a.$.dropDownButtonDropDown.children[u]||null),a._tabs.splice(u,0,n),d=u,n.group=o,a._updateIndexes(d)}_insertNearAGroup(t){const a=this,n=t.tab,i=t.tabLabelContainer;let o=t.index;o=Math.max(0,Math.min(o,a._tabs.length));const r=a._tabs[o-1],l=a._tabs[o],s=l?l.group:void 0;r&&null!==r.group&&l&&null!==s?(l.tabLabelContainer.parentElement.insertBefore(i,l.tabLabelContainer),l.parentElement.insertBefore(n,l),n.group=s):l?null===s?(a.$.tabStrip.insertBefore(i,l.tabLabelContainer),a.$.tabContentSection.insertBefore(n,l)):(a.$.tabStrip.insertBefore(i,a._groupLabels[a._groups.indexOf(s)]),a.$.tabContentSection.insertBefore(n,a.$.tabContentSection.querySelector("smart-tab-items-group[label=\""+s+"\"]"))):(a.$.tabStrip.insertBefore(i,a._addNewTab||null),a.$.tabContentSection.appendChild(n)),a._tabLabelContainers.splice(o,0,i),a.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,a.$.dropDownButtonDropDown.children[o]||null),a._tabs.splice(o,0,n),a._updateIndexes(o)}_insertNoGrouping(t){const a=this,n=Math.max(0,Math.min(t.index,a._tabs.length)),i=t.tab,o=t.tabLabelContainer;a.$.tabStrip.insertBefore(o,a._tabLabelContainers[n]||a._addNewTab||null),a.$.tabContentSection.insertBefore(i,a._tabs[n]||null),a._tabLabelContainers.splice(n,0,o),a.$.dropDownButtonDropDown.insertBefore(t.dropDownLabelContainer,a.$.dropDownButtonDropDown.children[n]||null),a._tabs.splice(n,0,i),a._updateIndexes(n)}_keydownHandler(t){const a=this,n=t.key;if(document.activeElement!==a||-1===["ArrowLeft","ArrowDown","ArrowRight","ArrowUp","End","Home","Enter"," ","Escape"].indexOf(n)||a.disabled||a.readonly||"none"===a.selectionMode||!a.allowToggle&&null===a.selectedIndex||a._reordering||a._swiping)return;t.preventDefault();const i=a._tabs.length-1;let o=0,r,l;switch(n){case"ArrowLeft":case"ArrowUp":if(a.collapsible&&t.ctrlKey)return void("ArrowLeft"===n?"right"===a.tabPosition?a.expand():"left"===a.tabPosition&&a.collapse():"ArrowUp"===n&&("bottom"===a.tabPosition?a.expand():"top"===a.tabPosition&&a.collapse()));if(o=-1,0===a.selectedIndex){l=!0;break}r=a.selectedIndex+o;break;case"ArrowRight":case"ArrowDown":if(a.collapsible&&t.ctrlKey)return void("ArrowRight"===n?"right"===a.tabPosition?a.collapse():"left"===a.tabPosition&&a.expand():"ArrowDown"===n&&("bottom"===a.tabPosition?a.collapse():"top"===a.tabPosition&&a.expand()));if(o=1,a.selectedIndex===i){l=!0;break}r=a.selectedIndex+o;break;case"End":if(a.selectedIndex===i){l=!0;break}r=i;break;case"Home":if(0===a.selectedIndex){l=!0;break}r=0;break;case"Enter":case" ":if(!a.allowToggle)return;if(a._focusedItem){a.select(a._focusedItem.index);const t=a._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");t&&a._openGroupDropDown(t.groupContainer)}return;case"Escape":return void(a._openDropDown&&a._closeGroupDropDown());}if(a.allowToggle&&0<a._tabs.length){a._focusedItem?a._focusedItem.tabLabelContainer.removeAttribute("focus"):a._focusedItem=a._focusedItem||a._tabs[a.selectedIndex]||a._tabs[0],a._focusedItem=a._tabs[Math.min(Math.max(0,a._focusedItem.index+o),i)],a._focusedItem.tabLabelContainer.setAttribute("focus",""),a.ensureVisible(a._focusedItem.index);const t=a._focusedItem.tabLabelContainer.closest(".smart-tab-group-drop-down");return void(t&&t.groupContainer?(a._openDropDown&&a._openDropDown!==t.dropDown&&a._closeGroupDropDown(),a._openGroupDropDown(t.groupContainer)):a._openDropDown&&a._closeGroupDropDown())}l||a.select(r)}_labelContainerHandler(t,a,n){const i=this,o="up"===n&&i._downTarget===t;if("down"===n&&(i._downTarget=t,"click"===i.selectionMode&&t!==i._addNewTab))if(Smart.Utilities.Core.isMobile&&null===t.tab.group){const n=i.$.tabStrip[i._orientationSettings.scrollDirection];setTimeout(function(){if(n===i.$.tabStrip[i._orientationSettings.scrollDirection]){const n=i._ripple(a,t);n&&i._openDropDown&&i._openDropDown.contains(t)&&(i._openDropDown.rippleInProgress=!0)}},100)}else{const n=i._ripple(a,t);n&&i._openDropDown&&i._openDropDown.contains(t)&&(i._openDropDown.rippleInProgress=!0)}if(t===i._addNewTab)return void i._addNewTabHandler(t,n,o);const r=t.tab.index,l=!(i._reordering&&i._reorderedIndex!==void 0);o&&r===i.selectedIndex&&(i._closeGroupDropDown(),l&&null===t.tab.group&&i._toggleCollapsedState()),!i._swiping&&(l&&"click"===i.selectionMode&&o||!i._reordering&&(i.selectionMode===n||"mouseenter"===i.selectionMode&&"mouseover"===n))&&i._select(r,!0),i._reordering||i._swiping||"click"!==i.selectionMode&&"dblclick"!==i.selectionMode||("mouseover"!==n||t.hasAttribute("selected")?"mouseout"===n&&t.removeAttribute("hover"):t.setAttribute("hover","")),i.reorder&&"down"===n&&null===t.tab.group&&1<i._reorderItems.length&&(i._getTabCoordinates(),i._reordering=!0,i.setAttribute("dragged",""),t.hasAttribute("hover")&&(i._draggedHoveredTab=t),i._draggedIndex=0===i._groups.length?t.tab.index:Array.from(i.$.tabStrip.children).indexOf(t))}_labelSizeChangeHandler(t){const a=this,n=t.detail.size;let i;"shrink"===a.tabLayout||(i=t.target instanceof Smart.TabItem?t.target.tabLabelContainer:a._groupLabels[a._groups.indexOf(t.target.label)],null===n?i.style.removeProperty(a._orientationSettings.dimension):i.style[a._orientationSettings.dimension]=parseInt(n,10)+"px",a._applyTabOverflow())}_openGroupDropDown(t){const a=this;t&&(a._openDropDown&&a._openDropDown.$.addClass("smart-hidden"),t.dropDown.$.removeClass("smart-hidden"),a._positionGroupDropDown(t),a._openDropDown=t.dropDown,t.removeAttribute("hover"))}_orderTabs(){const t=this,a=t.getElementsByTagName("smart-tab-items-group"),n=[],o=[];let r=!0,l=!1;if(0===a.length)for(let a=0;a<t._tabs.length;a++){const i=t._tabs[a],s=i.index;if(r&&null!==s&&(r=!1),-1!==n.indexOf(s||0)&&(l=!0,null!==s))break;n.push(s||0),o.push({tab:i,index:s})}if(!l){const t=n.slice(0).sort(function(t,a){return t-a});JSON.stringify(n)===JSON.stringify(t)&&(r=!0)}if(!r&&!l){o.sort(function(t,a){return t.index-a.index});for(let a=0;a<o.length;a++){const n=o[a].tab;n._setIndex(a),t.$.tabContentSection.removeChild(n)}for(let a=0;a<o.length;a++){const n=o[a].tab;t.$.tabContentSection.appendChild(n),t._tabs[a]=n}}else{r||t.warn(t.localize("ambiguousIndexes"));for(let a=0;a<t._tabs.length;a++)t._tabs[a]._setIndex(a)}}_populateTabStrip(){const t=this,a=document.createDocumentFragment(),n=[],o=[],r=[];let l=null;for(let s=0;s<t._tabs.length;s++){const i=t._tabs[s],d=i.parentElement,c=d instanceof Smart.TabItemsGroup?d.label:null;i.group=c;const m=t._addTabLabelContainer(i),p=m.tabLabelContainer,u=m.dropDownLabelContainer;t.selectedIndex===s&&(p.$.addClass("smart-tab-selected"),p.setAttribute("selected",""),l=p),i.tabLabelContainer=p,p.tab=i,n.push(p),null===c?a.appendChild(p):t._addGroupElements({documentFragment:a,groups:o,groupLabels:r,i:s,group:c,tabLabelContainer:p,smartTabItemsGroup:d}),t.$.dropDownButtonDropDown.appendChild(u)}t.$.tabStrip.appendChild(a),t._tabLabelContainers=n,t._groups=o,t._groupLabels=r,t._positionTabSelectionBar(l,!0)}_positionTabSelectionBar(t,a){function n(){i.$.tabSelectionBar.style.top=l,i.$.tabSelectionBar.style.height=d,i.$.tabSelectionBar.style.left=r,i.$.tabSelectionBar.style.width=s}const i=this;if(!t)return;const o=i.tabPosition;let r,l,s,d;a&&(i.$.tabSelectionBar.style.transition="none"),t.tab.group&&(t=i._groupLabels[i._groups.indexOf(t.tab.group)]),"top"===o||"bottom"===o?("wrap"===i.tabLayout?(l=t.offsetTop,"top"===o&&(l+=t.offsetHeight-i.$.tabSelectionBar.offsetHeight),l+="px"):l=null,d=null,r=-i.$.tabStrip.scrollLeft+t.offsetLeft+"px",s=t.offsetWidth+"px"):("left"===o||"right"===o)&&("wrap"===i.tabLayout?(r=t.offsetLeft,"left"===o&&(r+=t.offsetWidth-i.$.tabSelectionBar.offsetWidth),r+="px"):r=null,s=null,l=-i.$.tabStrip.scrollTop+t.offsetTop+"px",d=t.offsetHeight+"px"),Smart.Utilities.Core.isMobile&&i.hasAnimation&&!a?requestAnimationFrame(function(){requestAnimationFrame(n)}):n(),a&&!i._tabPositionChanging&&(i.$.tabSelectionBar.style.transition=null)}_positionGroupDropDown(t){const a=this,n=a.tabPosition,i=t.dropDown,o=window.getComputedStyle(a.$.tabsHeaderSection),r=parseFloat(o.paddingLeft),l=parseFloat(o.paddingTop);if("top"===n||"bottom"===n){if(i.style.left=t.offsetLeft-a.$.tabStrip.scrollLeft+r+"px","top"===n)i.style.top=t.offsetTop+t.offsetHeight+l+"px";else{let n=t.getBoundingClientRect().top-a.$.container.getBoundingClientRect().top+l;!1,i.style.top=n+"px"}}else i.style.top=t.offsetTop-a.$.tabStrip.scrollTop+l+"px",i.style.left="left"===n?t.offsetLeft+t.offsetWidth+r+"px":t.getBoundingClientRect().left-a.$.container.getBoundingClientRect().left+r+"px"}_processDataSource(){function t(a,n){let o;if(Array.isArray(a.items)&&0<a.items.length){o=document.createElement("smart-tab-items-group");for(let n=0;n<a.items.length;n++)a.items[n].items||t(a.items[n],o)}else o=document.createElement("smart-tab-item"),!0===a.closeButtonHidden&&(o.closeButtonHidden=!0),void 0!==a.content&&(o.innerHTML=a.content),void 0!==a.index&&(o.index=a.index),!0===a.selected&&(o.selected=a.selected);void 0!==a.label&&(o.label=a.label),void 0!==a.labelSize&&(o.labelSize=a.labelSize),n.appendChild(o)}const a=this,n=a.dataSource;if(a.$.tabContentSection.innerHTML="",null!==n)for(let o=0;o<n.length;o++){const i=n[o];t(i,a.$.tabContentSection)}}_processHTML(){const t=this;t._getTabs(),t._orderTabs(),t._validateInitialSelection(),t._populateTabStrip(),t.addNewTab&&t._insertAddNewTab(),t._getReorderItems(),t._applyTabOverflow(),t.ensureVisible(t.selectedIndex)}_removeInlineStyle(){const t=this,a=t.$.tabStrip;if(t._inlineStyleTabStripChildren){const n=a.children;for(let t=0;t<n.length;t++)n[t].removeAttribute("style"),n[t].firstElementChild.firstElementChild.classList.remove("smart-tab-label-text-container-full-height");delete t._inlineStyleTabStripChildren}t._inlineStyleTabStrip&&(a.removeAttribute("style"),delete t._inlineStyleTabStrip),a.$.removeClass("shrink-tabs"),a.$.removeClass("shrink-tabs-vertical")}_reorderTabs(t,a){function n(t,a,n){const i=t[a];t.splice(a,1),t.splice(n,0,i)}const i=this;if(0===i._groups.length){const o=i._tabs,r=i._tabLabelContainers,l=t>a?a:a+1;i.selectedIndex===t?i.selectedIndex=a:i.selectedIndex<=a&&i.selectedIndex>t?i.selectedIndex--:i.selectedIndex>=a&&i.selectedIndex<t&&i.selectedIndex++;let s;s=r[l]?r[l]:i.addNewTab?i._addNewTab:null,i.$.tabStrip.insertBefore(r[t],s),i.$.dropDownButtonDropDown.insertBefore(i.$.dropDownButtonDropDown.children[t],i.$.dropDownButtonDropDown.children[l]||null),i.$.tabContentSection.insertBefore(o[t],o[l]||null),n(o,t,a),n(r,t,a),i._updateTabIndexes()}else i._reorderTabsGrouping(t,a);i.$.fireEvent("reorder",{newIndex:a,originalIndex:t}),i._reorderedIndex=a,i._positionTabSelectionBar(i._tabLabelContainers[i.selectedIndex],!0)}_reorderTabsGrouping(t,a){const n=this,i=n.$.tabStrip.children,o=n.$.tabContentSection.children,r=t>a?a:a+1,l=n._tabs[n.selectedIndex];n.$.tabStrip.insertBefore(i[t],i[r]||null),n.$.tabContentSection.insertBefore(o[t],o[r]||null),n._groupLabels=Array.from(n.$.tabStrip.getElementsByClassName("smart-tab-group-container")),n._groups=[];for(let o=0;o<n._groupLabels.length;o++)n._groups.push(n._groupLabels[o].group);n._tabs=Array.from(n.$.tabContentSection.getElementsByTagName("smart-tab-item"));const s=document.createDocumentFragment();let d=[];for(let o=0;o<n._tabs.length;o++)s.appendChild(n.$.dropDownButtonDropDown.children[n._tabs[o].index].cloneNode(!0));n.$.dropDownButtonDropDown.innerHTML="",n.$.dropDownButtonDropDown.appendChild(s);for(let o=0;o<n.$.tabStrip.childElementCount;o++){const t=n.$.tabStrip.children[o];t.$.hasClass("smart-tab-label-container")&&t!==n._addNewTab?d.push(t):t.$.hasClass("smart-tab-group-container")&&(d=d.concat(Array.from(t.dropDown.children)))}n._tabLabelContainers=d,n._updateTabIndexes(),l&&(n.selectedIndex=l.index)}_resize(t){const a=this;if(!a._resizing)return;const n=a._orientationSettings,i=t[n.coordinate]-a._resizeFrom,o=a._getCorrespondingCustomElement(a._tabToResize);let r=null===o.labelSize?a._tabToResize[n.size]:o.labelSize;const l=Math.max(10,r+i);l!==r&&(o._preventPropertyChangedHandler=!0,o.labelSize=l,a._tabToResize.style[n.dimension]=parseInt(l,10)+"px"),a.$resizeToken.addClass("smart-hidden"),a._applyTabOverflow(),a._resizing=!1,a.removeAttribute("resizing")}_ripple(t,a){const n=this;if(n.hasRippleAnimation){const n=document.createElement("div");return n.className="ripple-agent",a.firstElementChild.appendChild(n),setTimeout(function(){a.firstElementChild.removeChild(n)},1e3),Smart.Utilities.Animation.Ripple.animate(n,t.pageX,t.pageY),!0}}_scrollButtonClickHandler(t){const a=this,n=a.$.tabStrip;let i=t.target.closest("smart-repeat-button")===a.$.scrollButtonNear?-1:1;if("paging"===a.scrollMode){const o=a._orientationSettings,r={};return a._dragStartDetails={startX:0,startY:0,pageX:0,pageY:0,startTime:Date.now(),target:t.target},a._wheelInProgress=!0,r[o.coordinate]=-i*(n[o.size]/1.1428571428571428),void a._endSwiping(r,a._dragStartDetails.startTime+175)}a.hasAttribute("horizontal")?n.scrollLeft+=10*i:n.scrollTop+=10*i,a._updateScrollButtonVisibility(!0)}_select(t,a,n){const i=this,o=i.hasAnimation;if(void 0===n&&(n=i.selectedIndex),t!==n||i.allowToggle&&(!i.allowToggle||"mouseenter"!==i.selectionMode)){const r=i._tabs[t];if(i._focusedItem&&i._focusedItem.tabLabelContainer.removeAttribute("focus"),null!==n){const a=i._tabs[n];o?i._animateSelection(r,a,t>n):a.$.addClass("smart-visibility-hidden"),a.selected=!1,i._tabLabelContainers[n].$.removeClass("smart-tab-selected"),i._tabLabelContainers[n].removeAttribute("selected"),i.closeButtons&&"selected"===i.closeButtonMode&&i._disableCloseButton(n)}i.allowToggle&&(null===t||(void 0===arguments[2]?i.selectedIndex:n)===t)?(i.selectedIndex=null,i.$.tabContentSection.setAttribute("show-placeholder",""),i.allowToggle&&(i._focusedItem=i._tabs[null===t?n:t],i._focusedItem&&i._focusedItem.tabLabelContainer.setAttribute("focus",""))):(r.selected=!0,i.$.tabContentSection.removeAttribute("show-placeholder"),(null===n||!o)&&r.$.removeClass("smart-visibility-hidden"),i.selectedIndex=t,i._focusedItem=i._tabs[t],i._focusedItem.tabLabelContainer.$.addClass("smart-tab-selected"),i._focusedItem.tabLabelContainer.setAttribute("selected",""),i._positionTabSelectionBar(i._focusedItem.tabLabelContainer,null===n)),null!==t&&(i._tabLabelContainers[t].removeAttribute("hover"),i.closeButtons&&"selected"===i.closeButtonMode&&i._enableCloseButton(t)),a&&(i.$.hiddenInput.value=i.selectedIndex,i.$.fireEvent("change",{index:i.selectedIndex,oldIndex:n})),i._closeGroupDropDown(),r&&null!==r.group?(i._selectedGroup&&i._selectedGroup.$.removeClass("smart-tab-group-selected"),null!==i.selectedIndex&&(i._selectedGroup=i._groupLabels[i._groups.indexOf(r.group)],i._selectedGroup.$.addClass("smart-tab-group-selected"))):i._selectedGroup&&(i._selectedGroup.$.removeClass("smart-tab-group-selected"),delete i._selectedGroup)}}_selectStartHandler(t){const a=this;(a._reordering||a._resizing)&&t.preventDefault()}_setLabel(t,a,n){const i=t?document.getElementById(t):null;if(null!==i&&"template"===i.tagName.toLowerCase()){const t=document.importNode(i.content,!0);if(a.appendChild(t),n){const t=document.importNode(i.content,!0);n.appendChild(t)}}else""===t&&(t="&nbsp;"),a.innerHTML=t,n&&(n.innerHTML=t)}_showCloseButton(t){t.closeButtonEnabled&&(t.firstElementChild.children[0].$.addClass("smart-close-button-enabled"),t.firstElementChild.children[1].$.removeClass("smart-hidden"))}_tabContentSectionTransitionendHandler(t){const a=this,n=t.target;n instanceof Smart.TabItem&&(n===a._animatedOldTab?(n.$.addClass("smart-hidden"),n.$.removeClass("animate"),n.$.removeClass(a._animatedOldTab.classToRemove),n.$.removeClass("smart-hidden"),delete a._animatedOldTab):n===a._animatedTab&&(n.$.removeClass("animate"),delete a._animatedTab),n.classList.remove("left"),n.classList.remove("right"),n.classList.remove("top"),n.classList.remove("bottom"))}_tabsHeaderItemsWheelHandler(t){const a=this,n=a._orientationSettings;if(!(!a.enableMouseWheelAction||a._wheelInProgress||a.disabled||a.$.tabStrip[n.size]===a.$.tabStrip[n.scrollSize])){t.preventDefault(),a._dragStartDetails={startX:t.pageX,startY:t.pageY,pageX:t.pageX,pageY:t.pageY,startTime:Date.now(),target:t.target},a._wheelInProgress=!0;const i={};i[n.coordinate]=t[n.coordinate]+(0<t.deltaY?-1:1)*n.wheelOffset,a._endSwiping(i,a._dragStartDetails.startTime+100)}}_tabStripHandler(t,a){const n=this,i=a.type;if("down"===i&&void 0!==n._tabToResize)return n._resizing=!0,void(n._tabsHeaderSectionCoordinate=n.$.tabsHeaderSection.getBoundingClientRect()[n._orientationSettings.edge]);"down"===i&&Smart.Utilities.Core.isMobile&&(n._dragStartDetails={startX:a.pageX,startY:a.pageY,pageX:a.pageX,pageY:a.pageY,startTime:Date.now(),originalTime:Date.now(),target:a.originalEvent.target});const o=t.closest("smart-repeat-button");if("up"===i&&o)return n.focus(),void(n.resize&&n._getTabCoordinates());if(t.classList.contains("smart-tab-close-button"))if("up"!==i){if("down"===i)return void(n._downTarget=t);n._reordering||n._swiping||("mouseover"===i?t.setAttribute("hover",""):"mouseout"===i&&t.removeAttribute("hover"))}else if(t===n._downTarget){const a=t.parentElement.parentElement.tab.index,i=n.$.fireEvent("closing",{index:a});return void(i.defaultPrevented||(n.remove(a),n.$.fireEvent("close",{index:a})))}const r=t.closest(".smart-tab-label-container");if(null!==r)return void n._labelContainerHandler(r,a,i);const l=t.closest(".smart-tab-group-container");null!==l&&n._groupContainerHandler(l,i)}_tabStripMouseleaveHandler(){const t=this;t.resize&&!t._resizing&&t.hasAttribute("resizing")&&t.removeAttribute("resizing")}_tabStripMoveHandler(t){const a=this;if(a._dragStartDetails&&!a._dragStartDetails.checked&&(a._dragStartDetails.pageX!==t.pageX||a._dragStartDetails.pageY!==t.pageY)&&(500>Date.now()-a._dragStartDetails.originalTime?(a._endReordering(void 0,void 0),a._dragStartDetails.checked=!0):delete a._dragStartDetails),a._dragStartDetails){const n=a._orientationSettings,i=a._dragStartDetails[n.coordinate]-t[n.coordinate],o=a.$.tabStrip[n.scrollDirection];return a.$.tabStrip[n.scrollDirection]+=i,o!==a.$.tabStrip[n.scrollDirection]&&a._updateScrollButtonVisibility(),a._dragStartDetails={startX:a._dragStartDetails.startX,startY:a._dragStartDetails.startY,pageX:t.pageX,pageY:t.pageY,startTime:a._dragStartDetails.startTime,originalTime:a._dragStartDetails.originalTime,target:t.originalEvent.target,checked:a._dragStartDetails.checked},void(a._swiping=!0)}if(!a.resize||a._resizing||a._reordering||"shrink"===a.tabLayout)return;const n=a._orientationSettings,o=t[n.coordinate],r=a._tabCoordinates;let l;for(let s=0;s<r.length;s++){const t=r[s][n.to];if(o>=t-4&&o<=t+4){l=a._reorderItems[s],a._resizeFrom=o;break}}void 0===l?(a._tabToResize=void 0,a.removeAttribute("resizing")):(a._tabToResize=l,a.setAttribute("resizing",""))}_toggleCollapsedState(){const t=this;t.collapsible&&(t.collapsed?t.expand():t.collapse())}_toggleNavigationElementsVisibility(){const t=this,a=t._tabs.length;let n;if(0===a)n="addClass";else if(1===a)n="removeClass";else return;"scroll"===t.tabLayout&&"scroll"===t.overflow?(t.$scrollButtonNear[n]("smart-hidden"),t.$scrollButtonFar[n]("smart-hidden")):"dropDown"===t.tabLayout&&t.$dropDownButton[n]("smart-hidden")}_updateIndexes(t){const a=this;null!==a.selectedIndex&&t<=a.selectedIndex&&a.selectedIndex++,a._updateTabIndexes()}_updateScrollButtonVisibility(t){var a=Math.round;const n=this;if("scroll"!==n.tabLayout||"hidden"===n.overflow)return void n._positionTabSelectionBar(n._tabLabelContainers[n.selectedIndex],t);const i=n.$tabsHeaderSection,o=n.$.tabStrip,r=n._orientationSettings;let l=!0,s=!0;if(0===a(o[r.scrollDirection])&&(l=!1),a(o[r.size]+o[r.scrollDirection])>=a(o[r.scrollSize])-1&&(s=!1),"auto"===n.overflow){if(l&&s)return n.$scrollButtonNear.removeClass("smart-hidden"),n.$scrollButtonFar.removeClass("smart-hidden"),i.removeClass("one-button-shown"),void(n._tabLabelContainers[n.selectedIndex]&&n._positionTabSelectionBar(n._tabLabelContainers[n.selectedIndex],t));l?n.$scrollButtonNear.removeClass("smart-hidden"):n.$scrollButtonNear.addClass("smart-hidden"),s?n.$scrollButtonFar.removeClass("smart-hidden"):n.$scrollButtonFar.addClass("smart-hidden"),i.addClass("one-button-shown"),n._getTabCoordinates()}else"scroll"!==n.overflow||n.disabled||(n.$.scrollButtonNear.disabled=!l,n.$.scrollButtonFar.disabled=!s);n._tabLabelContainers[n.selectedIndex]&&n._positionTabSelectionBar(n._tabLabelContainers[n.selectedIndex],t)}_updateTabIndexes(){const t=this;if(0<t._tabs.length)for(let a=0;a<t._tabs.length;a++)t._tabs[a]._setIndex(a);else t.selectedIndex=null}_validateIndex(t,a){if(isNaN(parseInt(t,10))||"object"==typeof t){const t=this;t.error(t.localize("invalidIndex",{method:a}))}}_validateInitialSelection(){const t=this;let a=t.selectedIndex;for(let n=0;n<t._tabs.length;n++){const i=t._tabs[n];a===n?(i.selected=!0,i.$.removeClass("smart-visibility-hidden")):i.selected?null===a?(a=n,i.$.removeClass("smart-visibility-hidden")):(i.selected=!1,i.$.addClass("smart-visibility-hidden")):i.$.addClass("smart-visibility-hidden")}0<t._tabs.length&&null===a&&!t.allowToggle&&(a=0,t._tabs[0].selected=!0,t._tabs[0].$.removeClass("smart-visibility-hidden")),t.selectedIndex=a,null!==t.selectedIndex&&(t._focusedItem=t._tabs[t.selectedIndex])}}),Smart("smart-toast",class extends Smart.ContentElement{static get properties(){return{appendTo:{value:null,type:"any"},autoClose:{value:!1,type:"boolean"},autoCloseDelay:{value:3e3,type:"number"},autoOpen:{value:!1,type:"boolean"},itemTemplate:{value:null,type:"string?"},modal:{value:!1,type:"boolean"},position:{allowedValues:["top-left","top-right","bottom-left","bottom-right"],value:"top-right",type:"string"},showCloseButton:{value:!1,type:"boolean"},type:{allowedValues:["info","warning","success","error","mail","time",null],value:"info",type:"string?"},value:{value:"",type:"any"}}}static get listeners(){return{"toastContainerTopLeft.click":"_containerClickHandler","toastContainerTopLeft.swipeleft":"_swipeHandler","toastContainerTopLeft.swiperight":"_swipeHandler","toastContainerTopLeft.swipetop":"_swipeHandler","toastContainerTopLeft.swipebottom":"_swipeHandler","toastContainerTopRight.click":"_containerClickHandler","toastContainerTopRight.swipeleft":"_swipeHandler","toastContainerTopRight.swiperight":"_swipeHandler","toastContainerTopRight.swipetop":"_swipeHandler","toastContainerTopRight.swipebottom":"_swipeHandler","toastContainerBottomLeft.click":"_containerClickHandler","toastContainerBottomLeft.swipeleft":"_swipeHandler","toastContainerBottomLeft.swiperight":"_swipeHandler","toastContainerBottomLeft.swipetop":"_swipeHandler","toastContainerBottomLeft.swipebottom":"_swipeHandler","toastContainerBottomRight.click":"_containerClickHandler","toastContainerBottomRight.swipeleft":"_swipeHandler","toastContainerBottomRight.swiperight":"_swipeHandler","toastContainerBottomRight.swipetop":"_swipeHandler","toastContainerBottomRight.swipebottom":"_swipeHandler","toastContainerCustom.click":"_containerClickHandler","toastContainerCustom.swipeleft":"_swipeHandler","toastContainerCustom.swiperight":"_swipeHandler","toastContainerCustom.swipetop":"_swipeHandler","toastContainerCustom.swipebottom":"_swipeHandler","toastContainerModal.click":"_containerClickHandler","toastContainerModal.swipeleft":"_swipeHandler","toastContainerModal.swiperight":"_swipeHandler","toastContainerModal.swipetop":"_swipeHandler","toastContainerModal.swipebottom":"_swipeHandler"}}static get styleUrls(){return["smart.toast.css"]}template(){return`<div id="container">
                    <div id="toastContainerTopLeft" class ="smart-toast-container-top-left"></div>
                    <div id="toastContainerTopRight" class ="smart-toast-container-top-right"></div>
                    <div id="toastContainerBottomLeft" class ="smart-toast-container-bottom-left"></div>
                    <div id="toastContainerBottomRight" class ="smart-toast-container-bottom-right"></div>
                    <div id="toastContainerCustom" class ="smart-toast-container-custom"></div>
                    <div id="toastContainerModal" class ="smart-toast-container-modal"></div>
                </div>`}propertyChangedHandler(t,a,n){const i=this;let o;switch(super.propertyChangedHandler(t,a,n),t){case"value":o=i._instances[i._instances.length-1],o&&(o.getElementsByClassName("smart-toast-item-content")[0].innerHTML=n);break;case"appendTo":null!==a&&null!==n?i.appendTo=a:null===n&&0===i.$.toastContainerCustom.childNodes.length&&i.$.container.appendChild(i.$.toastContainerCustom),i._handleContainers();break;case"modal":case"position":i._handleContainers();break;default:}}attached(){const t=this,a=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];super.attached();for(let n=0;n<a.length;n++){const i=t.$["toastContainer"+a[n]];i._parent=t,i.closest("smart-toast")&&0<i.childNodes.length&&("Custom"===a[n]?t._appendTo.appendChild(t._container):document.body.appendChild(i))}}detached(){const t=this,a=["TopLeft","TopRight","BottomLeft","BottomRight","Custom","Modal"];super.detached();for(let n=0;n<a.length;n++){const i=t.$["toastContainer"+a[n]],o=i.childNodes;i.closest("smart-toast")||t.$.container.appendChild(i);for(let t=0;t<o.length;t++)o[t]._parent._close(o[t]);t.closeAll()}}ready(){super.ready();const t=this;t.value=t.$.content.innerHTML=t.value?t.value:t.innerHTML,t._instances=[],t._handleContainers(),t.autoOpen&&t.open()}closeAll(){const t=this;for(var a=t._instances.length-1;-1<a;a--)t._close(t._instances[a])}closeItem(t){const a=this;t&&0!==a._instances.length&&("string"==typeof t?t=document.getElementById(t):t instanceof HTMLElement&&(t=t.closest(".smart-toast-item")),t&&-1!==a._instances.indexOf(t)&&a._close(t))}closeLast(){const t=this;0<t._instances.length&&t._close(t._instances[t._instances.length-1])}open(){const t=this;if(t.disabled)return;-1===Array.from(document.body.childNodes).indexOf(t._container)&&t._handleContainers();let a=document.createElement("div");a.className="smart-toast-item",t.value instanceof HTMLElement?(a.innerHTML=t._defaultItemTemplate(""),a.getElementsByClassName("smart-toast-item-content")[0].appendChild(t.value)):a.innerHTML=t._handleItemTemplate()||t._defaultItemTemplate(t.value),t.showCloseButton&&a.setAttribute("show-close-button","");for(let n=0;n<t.classList.length;n++)a.classList.add(t.classList[n]);t.type&&a.classList.add("smart-"+t.type),a.setAttribute("animation",t.animation),a._parent=t,t._container.appendChild(a),t._instances.push(a),t.$.fireEvent("open",{instance:a}),setTimeout(function(){a.setAttribute("opened","")},10),t.autoClose&&(a._autoCloseTimeout=setTimeout(function(){t._close(a)},t.autoCloseDelay))}_containerClickHandler(t){const a=this,n=t.target.closest(".smart-toast-item-close-button"),i=t.target.closest(".smart-toast-item");n||i?(i._parent.$.fireEvent("click",{instance:i}),n&&i._parent._close(i)):a.modal&&a.closeAll()}_close(t){const a=this;if(-1<a._instances.indexOf(t)){const n=window.getComputedStyle(t,null).getPropertyValue("transition-duration"),i=-1<n.indexOf("ms")?parseInt(n):1e3*parseFloat(n);t.removeAttribute("opened"),a._instances.splice(a._instances.indexOf(t),1),setTimeout(function(){clearTimeout(t._autoCloseTimeout),a.$.fireEvent("close",{instance:t}),t.parentNode&&t.parentNode.removeChild(t)},i)}}_defaultItemTemplate(t){return`<div class ="smart-toast-item-header">
                    <span class ="smart-toast-item-close-button"></span>
                </div>
                <div class ="smart-toast-item-container">
                    <span class ="smart-toast-item-icon"></span><span class ="smart-toast-item-content">${t}</span>
                </div>`}_handleContainers(){const t=this,a=t._validateDOMElement(t.appendTo);if(t.modal)t._container=t.$.toastContainerModal,document.body.appendChild(t._container);else if(a)t._container=t.$.toastContainerCustom,t._appendTo=a,t._appendTo.appendChild(t._container);else{const a=document.querySelectorAll("body > .smart-toast-container-"+t.position)[0];if(!a){switch(t.position){case"top-left":t._container=t.$.toastContainerTopLeft;break;case"top-right":t._container=t.$.toastContainerTopRight;break;case"bottom-left":t._container=t.$.toastContainerBottomLeft;break;case"bottom-right":t._container=t.$.toastContainerBottomRight;}document.body.appendChild(t._container),t.appendTo=null,t._appendTo=null}else t._container=a}}_handleItemTemplate(){const t=this;let a=t.itemTemplate;if(!("content"in document.createElement("template")))return void t.error(t.localize("htmlTemplateNotSuported",{elementType:t.nodeName.toLowerCase()}));if(!a)return t._defaultItemTemplate(t.value);if(a=document.getElementById(a),null===a||!("content"in a))return void t.error(t.localize("invalidTemplate",{elementType:t.nodeName.toLowerCase(),property:"template"}));const n=a.innerHTML,i=/{{\w+}}/g;return n.replace(i,t.value)}_swipeHandler(t){const a=this,n=t.originalEvent.target.closest(".smart-toast-item");n&&a.$.fireEvent(t.type,{instance:n})}_validateDOMElement(t){if(t)return"string"==typeof t?document.getElementById(t):t instanceof HTMLElement?t:void 0}}),Smart("smart-tooltip",class extends Smart.ContentElement{static get properties(){return{arrow:{value:!1,type:"boolean"},arrowDirection:{allowedValues:["bottom","top","left","right"],value:"bottom",type:"string"},delay:{value:0,type:"number"},messages:{extend:!0,value:{en:{invalidSelector:"{{elementType}}: \"{{property}}\" must be a String, an HTMLElement or null.",htmlTemplateNotSuported:"{{elementType}}: Browser doesn't support HTMLTemplate elements.",invalidTemplate:"{{elementType}}: \"{{property}}\" property accepts a string that must match the id of an HTMLTemplate element from the DOM.",invalidNode:"{{elementType}}: Invalid parameter \"{{node}}\" when calling {{method}}."}},type:"object"},offset:{value:[0,0],type:"array"},openMode:{allowedValues:["click","focus","hover","manual"],value:"hover",type:"string"},position:{allowedValues:["bottom","top","left","right","absolute"],value:"top",type:"string"},selector:{value:null,type:"any?"},tooltipTemplate:{value:null,type:"any"},value:{value:"",type:"string",reflectToAttribute:!1},visible:{value:!1,type:"boolean"}}}static get styleUrls(){return["smart.tooltip.css"]}template(){return`<div id="container">
                    <div id="content" class="smart-tooltip-content" inner-h-t-m-l="[[innerHTML]]">
                        <content></content>
                    </div>
                </div>`}propertyChangedHandler(t,a,n){super.propertyChangedHandler(t,a,n);const i=this;let o;"openMode"===t?(i.close(),i._handleEventListeners(a),i._handleResize()):"selector"===t?(i._oldOwnerElement=i._ownerElement,i._handleSelector(n),i._handleEventListeners()):"tooltipTemplate"===t?i._handleTemplate(a):"value"===t?i.tooltipTemplate?i._handleTemplate():i.$.content.innerHTML=i.value:"visible"===t?(o=n?"open":"close",i.$.fireEvent(o,{owner:i._ownerElement})):void 0;i._applyPosition()}ready(){const t=this;super.ready(),t._isParentPositionStatic="static"===window.getComputedStyle(t.parentElement||document.querySelector("body")).position,t._handleSelector(t.selector),t._applyPosition(),t._handleEventListeners(),t._handleResize(),t.value=t.$.content.innerHTML=t.value?t.value:t.innerHTML,t._handleTemplate()}appendChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.appendChild.apply(a,t.concat(Array.prototype.slice.call(arguments)))}return t?void(a.$.content.appendChild(t),a._applyPosition()):void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:"appendChild",node:"node"}))}close(){const t=this;t._isOpening&&clearTimeout(t._isOpening);t.visible&&(t.$.fireEvent("close",{owner:t._ownerElement}),t.visible=!1)}insertBefore(t,a){const n=this;if(!n.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(n,t.concat(Array.prototype.slice.call(arguments)))}return t&&a?void(n.$.content.insertBefore(t,a),n._applyPosition()):void n.error(n.localize("invalidNode",{elementType:n.nodeName.toLowerCase(),method:"insertBefore",node:"newNode/referenceNode"}))}open(){const t=this;t.disabled||t.readonly||t.visible||(t._isOpening=setTimeout(function(){t._applyPosition(),t.$.fireEvent("open",{owner:t._ownerElement});const a=t.context;t.context=t,t.visible=!0,t.context=a},t.delay))}removeChild(t){const a=this;if(!a.isCompleted){const t=Array.prototype.slice.call(arguments,2);return HTMLElement.prototype.insertBefore.apply(a,t.concat(Array.prototype.slice.call(arguments)))}return t?void(a.$.content.removeChild(t),a._applyPosition()):void a.error(a.localize("invalidNode",{elementType:a.nodeName.toLowerCase(),method:"removeChild",node:"node"}))}toggle(){const t=this;t.visible?t.close():t.open()}_applyPosition(){function t(t){let n=[],i=t.parentElement;for(;i&&"BODY"!==i.nodeName;){if(n.push(i),a.enableShadowDOM&&!i.parentElement){i=i.getRootNode().host;continue}i=i.parentElement}return n}const a=this;if(!a._ownerElement)return;if(!a.parentElement)return;a._isParentPositionStatic="static"===window.getComputedStyle(a.parentElement).position;const n=a._ownerElement.getBoundingClientRect(),i=a.parentElement?a.parentElement.getBoundingClientRect():{top:0,left:0};let o,r;a.parentElement&&"BODY"===a.parentElement.nodeName.toUpperCase()?(o=n.top+window.scrollY+parseInt(a.offset[1]),r=n.left+window.scrollX+parseInt(a.offset[0])):(o=n.top-i.top+parseInt(a.offset[1]),r=n.left-i.left+parseInt(a.offset[0]));const l=function(){const n=t(a),o=n.length;let r=null,i=a._ownerElement.getBoundingClientRect();for(let t=0,a;t<o;t++)if(a=window.getComputedStyle(n[t]),"static"!==a.getPropertyValue("position")){r=n[t];break}return{top:i.top,left:i.left,nonStaticParent:r}}();switch(a.position){case"bottom":if(a.arrowDirection="top",null===l.nonStaticParent){a.style.top=l.top+window.scrollY+a._ownerElement.offsetHeight+"px",a.style.left=l.left+window.scrollX-a.offsetWidth/2+a._ownerElement.offsetWidth/2+"px";break}if(a._isParentPositionStatic){a.style.top=a._ownerElement.offsetTop+a._ownerElement.offsetHeight+"px",a.style.left=a._ownerElement.offsetLeft-a.offsetWidth/2+a._ownerElement.offsetWidth/2+"px";break}a.style.top=o+a._ownerElement.offsetHeight+"px",a.style.left=r-a.offsetWidth/2+a._ownerElement.offsetWidth/2+"px";break;case"top":if(a.arrowDirection="bottom",null===l.nonStaticParent){a.style.top=l.top+window.scrollY-a.offsetHeight+"px",a.style.left=l.left+window.scrollX-a.offsetWidth/2+a._ownerElement.offsetWidth/2+"px";break}if(a._isParentPositionStatic){if(a.style.top=a._ownerElement.offsetTop-a.offsetHeight+"px",a.style.left=a._ownerElement.offsetLeft-a.offsetWidth/2+a._ownerElement.offsetWidth/2+"px",a._ownerElement instanceof SVGElement){const t=a._ownerElement.getBoundingClientRect(),n=a._ownerElement.parentNode.getBoundingClientRect();a.style.top=t.top-n.top-a.offsetHeight/2+"px",a.style.left=t.left-a.offsetWidth/2+n.left/2+"px"}break}if(a._ownerElement instanceof SVGElement){const t=a._ownerElement.getBoundingClientRect(),n=a._ownerElement.parentNode.getBoundingClientRect();a.style.top=t.top-n.top-a.offsetHeight+"px",a.style.left=t.left-n.left-a.offsetWidth/2+t.width/2+"px";break}a.style.top=o-a.offsetHeight+"px",a.style.left=r-a.offsetWidth/2+a._ownerElement.offsetWidth/2+"px";break;case"left":if(a.arrowDirection="right",null===l.nonStaticParent){a.style.top=l.top+window.scrollY+a._ownerElement.offsetHeight/2-a.$.content.offsetHeight/2+"px",a.style.left=l.left+window.scrollX-a.offsetWidth+"px";break}if(a._isParentPositionStatic){a.style.top=a._ownerElement.offsetTop+a._ownerElement.offsetHeight/2-a.$.content.offsetHeight/2+"px",a.style.left=a._ownerElement.offsetLeft-a.offsetWidth+"px";break}a.style.top=o+a._ownerElement.offsetHeight/2-a.$.content.offsetHeight/2+"px",a.style.left=r-a.offsetWidth+"px";break;case"right":if(a.arrowDirection="left",null===l.nonStaticParent){a.style.top=l.top+window.scrollY+a._ownerElement.offsetHeight/2-a.$.content.offsetHeight/2+"px",a.style.left=l.left+window.scrollX+a._ownerElement.offsetWidth+"px";break}if(a._isParentPositionStatic){a.style.top=a._ownerElement.offsetTop+a._ownerElement.offsetHeight/2-a.$.content.offsetHeight/2+"px",a.style.left=a._ownerElement.offsetLeft+a._ownerElement.offsetWidth+"px";break}a.style.top=o+a._ownerElement.offsetHeight/2-a.$.content.offsetHeight/2+"px",a.style.left=r+a._ownerElement.offsetWidth+"px";break;case"absolute":a.style.top=(parseInt(a.offset[1])||0)+"px",a.style.left=(parseInt(a.offset[0])||0)+"px";break;default:a.arrowDirection="bottom",a.style.top=a.style.left="";}}_eventsHandler(t){const a=this;return a.disabled||a.readonly?void 0:"click"===t.type?void(a.visible?this.close():this.open()):void("mouseenter"===t.type||"focus"===t.type?this.open():this.close())}_handleEventListeners(t){const a=this;if(a._ownerElement&&(a._oldOwnerElement&&"manual"!==a.openMode&&(a._oldOwnerElement.$.unlisten("mouseenter.tooltip"),a._oldOwnerElement.$.unlisten("mouseleave.tooltip"),a._oldOwnerElement.$.unlisten("focus.tooltip"),a._oldOwnerElement.$.unlisten("blur.tooltip"),a._oldOwnerElement.$.unlisten("click.tooltip"),a._oldOwnerElement=null),t&&("hover"===t?(a._ownerElement.$.unlisten("mouseenter.tooltip"),a._ownerElement.$.unlisten("mouseleave.tooltip")):"focus"===t?(a._ownerElement.$.unlisten("focus.tooltip"),a._ownerElement.$.unlisten("blur.tooltip")):"click"===t?a._ownerElement.$.unlisten("click.tooltip"):void 0),"manual"!==a.openMode))switch(a._ownerElement instanceof Smart.BaseElement||(a._ownerElement.$=Smart.Utilities.Extend(a._ownerElement)),a.openMode){case"hover":a._ownerElement.$.listen("mouseenter.tooltip",a._eventsHandler.bind(a)),a._ownerElement.$.listen("mouseleave.tooltip",a._eventsHandler.bind(a));break;case"focus":a._ownerElement.$.listen("focus.tooltip",a._eventsHandler.bind(a)),a._ownerElement.$.listen("blur.tooltip",a._eventsHandler.bind(a));break;case"click":a._ownerElement.$.listen("click.tooltip",a._eventsHandler.bind(a));break;default:}}_handleResize(){function t(){a._applyPosition()}const a=this;"click"===a.openMode?window.addEventListener("resize",t):window.removeEventListener("resize",t)}_handleSelector(t){const a=this;return"string"==typeof t?void(a._ownerElement=0<t.length?document.getElementById(t):void 0):t instanceof HTMLElement||t instanceof SVGElement?void(a._ownerElement=t):null===t?void(a._ownerElement=void 0):void a.error(a.localize("invalidSelector",{elementType:a.nodeName.toLowerCase(),property:"selector"}))}_handleTemplate(t){const a=this;let n=a.tooltipTemplate;if(t&&(a.$.content.innerHTML=a.value?a.value:""),null===n||!n)return;if("function"==typeof a.tooltipTemplate)return void a.tooltipTemplate(a.$.content,{value:a.value});if(!("content"in document.createElement("template")))return void a.error(a.localize("htmlTemplateNotSuported",{elementType:a.nodeName.toLowerCase()}));if(n=document.getElementById(n),null===n||!("content"in n))return void a.error(a.localize("invalidTemplate",{elementType:a.nodeName.toLowerCase(),property:"template"}));const o=n.content,r=o.childNodes.length,l=/{{\w+}}/g;let s=[],d;for(let a=0;a<r;a++)for(d=l.exec(o.childNodes[a].innerHTML);d;)s.push({childNodeIndex:a,bindingString:d[0]}),d=l.exec(o.childNodes[a].innerHTML);const i=s.length;let c=document.importNode(n.content,!0),m,p;for(let n=0;n<i;n++){m=c.childNodes[s[n].childNodeIndex],p=s.length;for(let t=0;t<p;t++)m.innerHTML=m.innerHTML.replace(s[n].bindingString,a.value)}a.$.content.innerHTML="";for(let n=0;n<c.childNodes.length;n++)c.childNodes[n].outerHTML&&(a.$.content.innerHTML+=c.childNodes[n].outerHTML)}});